/*!
* gotoEasy 0.1 (http://gotoeasy.github.io)
* (c) 2016 Zhang Ming
* Licensed under the MIT license
*/
(function(J,p){function la(a){if(!a)return ma(e);var b=e;if(F(a)){var c=Object.keys(b),d;for(d in a)0<=c.indexOf(d)&&(b[d]=a[d])}W=e.debugMode;G=e.dataKeyFnId;x=e.dataKeyFnParent;K=e.dataKeyFnRoot;y=e.domAttrBind;t=e.bindKeyField;L=e.bindKeyValue;X=e.bindKeyInnerText;na=e.bindKeyInnerHtml;oa=e.bindKeyOptions;pa=e.bindKeyReadonly;qa=e.bindKeyDisabled;ra=e.bindKeyVisible;Y=e.bindKeyChecked;Z=e.bindKeyStyle;aa=e.bindKeyClass;sa=e.bindKeyForeach;ta=e.bindKeyWith;ua=e.bindKeyIf;ba=e.bindKeyClick;va=e.bindRefRoot;
wa=e.bindRefParent;ca=e.eventDataChage;H=e.eventUpdateView;PREFIX_DATA_UID=e.prefixDataUid;return ma(e)}function I(a){I[a]=I[a]||1;return a+I[a]++}function w(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function xa(a){return M(a)?JSON.stringify(a):JSON.parse(a)}function z(a){return Array.isArray&&Array.isArray(a)||a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)}function F(a){return a&&Object.prototype.toString.call(a)===Ia}function M(a){return null!==a&&"object"===typeof a}function Ja(a,
b){return F(a)&&void 0!==a[b]}function ma(a){var b={},c;for(c in a)b[c]=a[c];return b}function Ka(a,b,c){var d=[];if(!b||0>b)b=0;if(!c||c>a.length)c=a.length;if(b>=c)return d;for(;b<c;b++)d.push(a[b]);return d}function q(a,b){for(var c=0;c<a.length&&!1!==b(a[c],c);c++);}function La(a,b,c){try{return b.apply(a,c)}catch(d){Ma(arguments,d)}}function Na(){da("log",A.call(arguments),W)}function Ma(){da("warn",A.call(arguments),W)}function ea(){da("error",A.call(arguments),1)}function da(a,b,c){if(c){c=
[];for(var d=0;d<b.length;d++)c.push("_["+d+"]");c="console."+a+"("+c.join(",");c+=")";try{(new Function("_",c))(b)}catch(g){console.warn(a,b,g)}}}function N(a,b,c,d){if(a[G]){var g=a[b];if(d||M(c)||c!==g)if(B(c,a,b),a[b]=c,O(ca,a,b,c,g),z(a))for(k in b=a[x](),b)b[k]===a&&ya(H,b,k,c,g);else ya(H,a,b,c,g)}else a[b]=c}function r(a){return a&&a[G]()}function B(a,b,c){if(M(a))if(Oa(a,b),F(a))for(var d in a)B(a[d],a,d);else if(z(a)){for(d=0;d<a.length;d++)B(a[d],a,d);a[x]()&&Pa(a,b,c)}}function Oa(a,b){var c=
a[G]?r(a):I(Qa),d=b?r(b):null,g=b?r(b[K]()):c;C[c]=a;a[G]=function(){return c};a[x]=function(){return C[d]};a[K]=function(){return C[g]};a.set=function(a,b,c){N(this,a,b,c)};a.get=function(a,b){var c=this[a];return void 0===c?b:c}}function Pa(a,b,c){a.x||(q("push pop shift unshift splice sort reverse".split(" "),function(d){var g=a[d];a[d]=function(){var f=a.length,e=g.apply(a,arguments);if("push"==d)for(var l=f;l<e;l++)B(a[l],a,l);else if("unshift"==d)for(l=0;l<e-f;l++)B(a[l],a,l);O(ca+" "+H,b,c,
a);return e}}),a.x=1)}function n(a,b,c,d){if(Ja(a,b))return c&&c.push(r(a)+"-"+b),a[b];var g=r(a)+"#"+b;if(c||!D[g]){var f=[],e=b.replace(Ra,function(a){var b="{"+f.length+"}";f.push(a);return b}),e=e.replace(Sa,function(b){if(/^\d+(\.\d+)?$/g.test(b)||"true"==b||"false"==b||"null"==b||"alert"==b||"]"===b.slice(0,1))return b;b=b.split(fa).join(fa).split(ga).join(ga);b=b.split(wa).join(fa).split(va).join(ga);if(c){var d;a:{var g="return _."+b;if(d=ha(g)){d=d(a);if(0>g.indexOf(".")){d=r(a)+"-"+g;break a}var e=
g.split("."),g=e.pop();if(M(d)){d=r(d[x]())+"-"+g;break a}if(d=ha(e.join("."))){d=r(d(a))+"-"+g;break a}}d=void 0}d&&c.push(d)}return"_."+b});for(i=0;i<f.length;i++)e=e.replace("{"+i+"}",f[i]);D[g]=D[g]||ha("return "+e)}if(d)return D[g];if(!c)try{return D[g](a)}catch(l){ea("#2",D[g],a,b,l)}}function ha(a){try{return new Function("_",a)}catch(b){ea("#1",a)}}function P(a,b,c){if(a._bindInfo)return xa(a._bindInfo);a=ia(a.getAttribute(y));if(!a)return 0;a._dataid=r(b);if(c)for(var d in a)if("_dataid"!=
d&&d!=t&&d!=ba)if(d==Z||d==aa)for(var g=a[d].split(";"),e=0,h;e<g.length;e++){h=g[e].split("=");var l=[];n(b,h[1],l);for(h=0;h<l.length;h++)c.push(l[h])}else for(l=[],n(b,a[d],l),e=0;e<l.length;e++)c.push(l[e]);return a}function ia(a){var b={},c;if(!a)return null;a=a.split(",");q(a,function(a){c=a.split(":");b[w(c[0]).toLowerCase()]=w(a.substring(a.indexOf(":")+1))});return b}function za(a,b){var c=[],d=P(a,b,c);q(c,function(b){Aa(a,b)});d[t]||(c=d[L]||d[X],void 0!==b[c]&&(d[t]=c));a._bindInfo=xa(d)}
function Ba(a,b){for(var c=a.querySelectorAll(b||Q),d=Ta(Ca),e=[],f=0;f<d.length;f++)e.push("["+y+"*="+d[f]+"]");q(c,function(a){var b=ia(a.getAttribute(y)),c=0,f;for(f in b)0<=d.indexOf(f)&&(c=1);if(c){for(b=0;b<d.length;b++)Ua(a,e[b],d[b])&&Ba(a);var n=p.createDocumentFragment(),b=Ka(a.childNodes);q(b,function(a){n.appendChild(a.cloneNode(!0))});b=I(Va);p[b]=n;a.setAttribute("_template",b);R(a)}})}function Ua(a,b,c){a=a.querySelectorAll(b);for(b=0;b<a.length;b++)if(ia(a[b].getAttribute(y))[c])return!0;
return!1}function Wa(a,b){Ba(b||p);var c=(b||p).querySelectorAll(Q);q(c,function(b){za(b,a)})}function Xa(a){a=(a||p).querySelectorAll(Q);q(a,function(a){ja(a)})}function m(a,b,c,d,e,f){f={};f[ka]=a;f[S]=b;f.o=c||0;f[Ca]=!!d;f[Da]=!!e;u[a]=f;Ya.push(a);T=[];for(k in u)T.push(u[k]);T.sort(function(a,b){return a.o==b.o?0:a.o<b.o?1:-1})}function Ta(a){var b=[],c;for(c in u)a?u[c][a]&&b.push(c):b.push(c);return b}function Ea(a,b,c){var d=[],e=a.getAttribute("style"),f;if(e){for(var e=e.split(";"),h=0;h<
e.length;h++)f=e[h].split(":"),f=w(f[0]).toLowerCase(),0>b.indexOf(f)&&d.push(e[h]);c&&d.push(c);e=d.join(";");a.setAttribute("style",e);return e}}function U(a,b,c){var d;c?(d=p.createDocumentFragment(),z(a)&&0<a.length&&q(a,function(a){if(a){var c;a=U(a,b);for(var e=0;e<a.childNodes.length;e++)"TBODY"==a.childNodes[e].tagName&&(c=a.childNodes[e]);if(c)for(e=0;e<c.childNodes.length;e++)d.appendChild(c.childNodes[e]);else d.appendChild(a)}})):(d=p[b.getAttribute("_template")].cloneNode(!0),q(d.querySelectorAll(Q),
function(b){za(b,a);ja(b)}));return d}function ja(a,b,c){b=b||P(a);q(T,function(d){function e(){try{n(m,g,0,1)(m)}catch(b){ea("#3",a,g,m,b)}}var g=b[d[ka]],m=C[b._dataid];if(g&&!(c&&0>g.indexOf(c)))if(d[Da])Fa(d[ka],e,a);else d[S](a,m,g)});for(var d in b)if(!u[d]&&"_dataid"!=d){var e=b[d];c&&0>e.indexOf(c)||(e=n(C[b._dataid],e),u["*"][S](a,d,e))}}function Za(a,b){for(var c=p.querySelectorAll("."+r(a)+"-"+b),d=0;d<c.length;d++)ja(c[d],"",b)}function $a(a){a=a.target;var b=P(a);if(b){var c=b[t]||b[L]||
b[Y];if(null==c)Na("[ignore datachange]",a);else{var b=C[b._dataid],d=b[c];"checkbox"==a.type?z(d)?a.checked?0>d.indexOf(a.value)&&d.push(a.value):0<=d.indexOf(a.value)&&d.splice(d.indexOf(a.value),1):d=a.checked?a.value:"":d=a.value;N(b,c,d)}}}function Fa(a,b,c){c.addEventListener?c.addEventListener(a,b,!1):c.attachEvent?c.attachEvent("on"+a,b):c["on"+a]=b}function Aa(a,b){if(Ga)if(a.className){var c=a.className.split(" ");0<=c.indexOf(b)||(c.push(b),a.className=c.join(" "))}else a.className=b;else a.classList.contains(b)||
a.classList.add(b)}function R(a){try{a.innerHTML=""}catch(b){for(;a.firstChild;)a.removeChild(a.firstChild)}}function Ha(a,b){a&&"function"==typeof b&&b.constructor==Function&&a.replace(V,function(a,d){(E[a]=E[a]||[]).push(b)})}function O(a,b){var c=A.call(arguments,1);a.replace(V,function(a){a=E[a]||[];for(var e=0;e<a.length;e++)La(b,a[e],c)})}function ya(a,b,c){isNaN(a);var d=isNaN(a)?A.call(arguments,0):A.call(arguments,1);ab(function(){O.apply(null,d)},a)}var Ga=J==p&&p!=J;Array.prototype.indexOf||
(Array.prototype.indexOf=function(a,b){for(var c=b||0;c<this.length;c++)if(this[c]===a)return c;return-1});var e={},W=e.debugMode=1,G=e.dataKeyFnId="_$id",x=e.dataKeyFnParent="_$parent",K=e.dataKeyFnRoot="_$root",y=e.domAttrBind="data-bind",t=e.bindKeyField="field",L=e.bindKeyValue="value",X=e.bindKeyInnerText="text",na=e.bindKeyInnerHtml="html",oa=e.bindKeyOptions="options",pa=e.bindKeyReadonly="readonly",qa=e.bindKeyDisabled="disabled",ra=e.bindKeyVisible="visible",Y=e.bindKeyChecked="checked",
Z=e.bindKeyStyle="style",aa=e.bindKeyClass="class";e.bindKeyTemplate="template";var sa=e.bindKeyForeach="foreach",ta=e.bindKeyWith="with",ua=e.bindKeyIf="if",ba=e.bindKeyClick="click",va=e.bindRefRoot="$root",wa=e.bindRefParent="$parent",ca=e.eventDataChage="datachange",H=e.eventUpdateView="updaueview";e.eventArrayChage="arraychange";var Qa=e.uidPrefixData="duid-",Va=e.uidPrefixTemplate="tuid-",ga=K+"()",fa=x+"()",Ia="[object Object]",Q="["+y+"]",A=Array.prototype.slice,ab=setTimeout,C={},Ra=/(['"])[^'"]*\1/g,
Sa=/([\w$_\.\[\]]+)/g,D={},u={},T=[],Ya=[],ka="k",S="f",Ca="t",Da="e";m("*",function(a,b,c){c=(new Option(null==c?"":c)).innerHTML.replace(/"/g,"&quot;");a.setAttribute(b,c)});m(L,function(a,b,c){var d=n(b,c);a.value=null==d?"":d;u[t][S](a,b,c,d)});m(pa,function(a,b,c){b=n(b,c);a.readOnly=!!b});m(qa,function(a,b,c){b=n(b,c);a.disabled=!!b},5);m(Y,function(a,b,c){b=n(b,c);z(b)?a.checked=0<=b.indexOf(a.value):a.checked=b==a.value});m(ra,function(a,b,c){b=n(b,c);Ea(a,["visibility","display"]);b?a.style.visibility=
"visible":a.style.display="none"},5);m(Z,function(a,b,c){var d=c.split(";");c=[];for(var e=[],f=0,h;f<d.length;f++)h=d[f].split("="),2==h.length&&(c.push(w(h[0]).toLowerCase()),e.push(w(h[1])));if(c.length){d=[];for(f=0;f<c.length;f++)d.push(c[f]+":"+n(b,e[f]));Ea(a,c,d.join(";"))}},5);m(aa,function(a,b,c){var d=c.split(";");c=[];for(var e=[],f=0,h;f<d.length;f++)h=d[f].split("="),2==h.length&&(c.push(w(h[0]).toLowerCase()),e.push(w(h[1])));if(c.length)for(f=0;f<c.length;f++)if(n(b,e[f]))Aa(a,c[f]);
else{var d=a,l=c[f];Ga?(h=d.className.split(" "),l=h.indexOf(l),0<=l&&(h.slice(l,1),d.className=h.join(" "))):d.classList.remove(l)}});m(X,function(a,b,c){b=n(b,c);a.textContent=null==b?"":b});m(na,function(a,b,c){b=n(b,c);a.innerHTML=null==b?"":b});m(t,function(a,b,c,d){(a=P(a)[t])&&a!=c&&N(b,a,d)});m(oa,function(a,b,c){b=n(b,c);a.length=0;if(null!=b&&!F(b)){var d=a.options;z(b)||(b=b.split(";").join(",").split(","));q(b,function(a){if(F(a))d[d.length]=new Option(a.text,a.value);else if(null==a)d[d.length]=
new Option("","");else{var b=a.split(":");d[d.length]=new Option(1<b.length?b[1]:a,b[0])}})}},5);m(ba,null,0,0,1);m(sa,function(a,b,c){b=n(b,c);R(a);b&&b.length&&a.appendChild(U(b,a,!0))},7,1);m(ta,function(a,b,c){b=n(b,c);R(a);a.appendChild(U(b,a))},8,1);m(ua,function(a,b,c){c=n(b,c);R(a);if(c)a.appendChild(U(b,a));else return!1},9,1);var V=/\S+/g,E={},v={};v.settings=la;v.bind=function(a,b,c){c&&la(c);B(a);b=b?p.querySelector(b):p;Wa(a,b);Xa(b);Ha(H,Za);Fa("change",$a,p)};v.set=N;v.on=Ha;v.off=
function(a,b){a&&"*"!=a?b?a.replace(V,function(a){a=E[a];for(var d=0;d<a.length;d++)b===a[d]&&a.splice(d--,1)}):a.replace(V,function(a){E[a]=[]}):E={}};v.trigger=O;"function"===typeof define&&define.amd?define(function(){return v}):J.gotoEasy=J.$easy=v})(window,document);