import{u as le,a as ie,r as w,o as re,b as x,c as r,d as C,w as P,v as se,e as n,f as s,g as e,h as t,t as S,i as ce,j as F,k as m,l as k,F as D,m as de,n as pe,z as ue,A as _e,B as me,C as fe,D as ge,_ as he,G as we,H as ke,y as ye,I as be,J as ve,L as xe}from"./index-332affe8.js";import{_ as Ce}from"./PageTableSetting-eadcc3fa.js";/* empty css                    *//* empty css               *//* empty css                   *//* empty css                     */import{T as Se}from"./ToobarLeftRight-450f8d70.js";/* empty css                  *//* empty css                        *//* empty css                         *//* empty css                */import{u as De}from"./useMainPageHooks-288056cc.js";import{u as Ee,_ as Te}from"./MenuPageDetail-ccd009e0.js";/* empty css                 */import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css               */import"./useDetailPageHooks-c305666f.js";import"./MenuPageDetailForm-67a30dae.js";/* empty css                *//* empty css                *//* empty css                  *//* empty css                        */const Me=s("span",null,"新 建",-1),Be=s("span",{style:{"margin-left":"4px"}},"编辑",-1),$e=s("span",{style:{"margin-left":"4px"}},"添加子菜单",-1),ze=s("span",{style:{"margin-left":"4px"}},"删除",-1),ot={__name:"MenuMain",setup(Pe){const y=le("menu"),H=ie(),I={mitt:y,pageSettingStore:Ee(),withoutSearchForm:!0,withoutPagging:!0},{visible:L,tableData:b,tableHeight:E,pageSettingStore:d,showTableLoadding:R,hasSelect:V,fnSearch:A,fnCreate:N,fnEdit:j,fnView:G,fnDeleteRow:J,fnDeleteBatch:K,fnChangeColumnWidth:O,fnSwitchMaximizePage:W}=De(I),T=w(),p=w([]),u=w(!1),_=w(!1);re(()=>y.emit("main:mounted",T));const q=a=>{y.emit("detail:addsub",a)},Q=()=>{u.value=!u.value;const a=[];u.value?b.value.forEach(i=>v(i,a,!1)):p.value=a,p.value=a,_.value=!1},U=()=>{_.value=!_.value;const a=[];_.value?b.value.forEach(i=>v(i,a,!0)):p.value=a,p.value=a,u.value=!1};function v(a,i,f){const c=a.children||[];if(f){if(!c.length)return}else if(a.menuType!="1")return;i.push(a.id),c.forEach(l=>v(l,i,f))}return(a,i)=>{const f=x("CirclePlusFilled"),c=ue,l=_e,M=x("Sort"),X=x("arrow-down"),Y=me,Z=fe,ee=ge,B=he,$=we,g=ke,z=ye,te=be,ne=ve,oe=xe;return r(),C(D,null,[P(s("div",null,[e(Se,{style:{"margin-bottom":"8px"},class:"c-btn"},{left:t(()=>[e(l,{type:"primary",onClick:n(N)},{default:t(()=>[e(c,null,{default:t(()=>[e(f)]),_:1}),Me]),_:1},8,["onClick"]),e(l,{onClick:Q},{default:t(()=>[e(c,null,{default:t(()=>[e(M)]),_:1}),s("span",null,S(n(u)?"收起目录":"展开目录"),1)]),_:1}),e(l,{onClick:U},{default:t(()=>[e(c,null,{default:t(()=>[e(M)]),_:1}),s("span",null,S(n(_)?"收起全部":"展开全部"),1)]),_:1}),e(ee,{style:{"margin-left":"8px"},size:"default"},{dropdown:t(()=>[e(Z,null,{default:t(()=>[e(Y,{icon:n(ce),onClick:n(K)},{default:t(()=>[F("批量删除")]),_:1},8,["icon","onClick"])]),_:1})]),default:t(()=>[e(l,{type:"warning",disabled:!n(V)},{default:t(()=>[F(" 批量操作"),e(c,{class:"el-icon--right"},{default:t(()=>[e(X)]),_:1})]),_:1},8,["disabled"])]),_:1})]),right:t(()=>[e($,{content:"刷新数据",placement:"top"},{default:t(()=>[e(l,{circle:"",onClick:i[0]||(i[0]=o=>n(A)(1))},{default:t(()=>[e(B,{name:"refresh-right"})]),_:1})]),_:1}),e($,{content:"缩放页面",placement:"top"},{default:t(()=>[e(l,{circle:"",onClick:n(W)},{default:t(()=>[e(B,{name:"zoom"})]),_:1},8,["onClick"])]),_:1}),e(Ce,{"setting-store":n(d)},null,8,["setting-store"])]),_:1}),P((r(),m(ne,{ref_key:"table",ref:T,data:n(b),"max-height":n(E),height:n(E),border:"",stripe:"",size:"small","row-key":"id","expand-row-keys":n(p),onHeaderDragend:n(O),onRowDblclick:n(G)},{empty:t(()=>[e(te,{description:"暂无数据"})]),default:t(()=>[n(d).showSelection?(r(),m(g,{key:0,fixed:"",type:"selection","header-align":"center",align:"center",width:"36"})):k("",!0),n(d).showIndex?(r(),m(g,{key:1,fixed:"",type:"index",label:"#",index:o=>o+1,"header-align":"center",align:"center",resizable:!1},null,8,["index"])):k("",!0),(r(!0),C(D,null,de(n(d).header,(o,h)=>(r(),C(D,{key:h},[o.hidden?k("",!0):(r(),m(g,{key:0,prop:o.key,label:o.title,width:o.width>=1?o.width:"",fixed:o.fixed,align:o.align,"header-align":o.headerAlign,"show-overflow-tooltip":"",sortable:o.sortable},pe({_:2},[o.key==="status"?{name:"default",fn:t(ae=>[s("span",null,S(n(H).name("memo-status",ae.row.status)),1)]),key:"0"}:void 0]),1032,["prop","label","width","fixed","align","header-align","sortable"]))],64))),128)),n(d).showOperation?(r(),m(g,{key:2,fixed:"right",label:"操作",width:"200","header-align":"center",align:"center"},{default:t(o=>[e(l,{type:"primary",link:"",onClick:h=>n(j)(o.row)},{default:t(()=>[Be]),_:2},1032,["onClick"]),e(z,{direction:"vertical"}),e(l,{type:"primary",disabled:o.row.menuType==="3",link:"",onClick:h=>q(o.row)},{default:t(()=>[$e]),_:2},1032,["disabled","onClick"]),e(z,{direction:"vertical"}),e(l,{type:"primary",link:"",onClick:h=>n(J)(o.row,"title")},{default:t(()=>[ze]),_:2},1032,["onClick"])]),_:1})):k("",!0)]),_:1},8,["data","max-height","height","expand-row-keys","onHeaderDragend","onRowDblclick"])),[[oe,n(R)]])],512),[[se,n(L)]]),e(Te)],64)}}};export{ot as default};
