var fG=Object.defineProperty,gG=Object.defineProperties;var hG=Object.getOwnPropertyDescriptors;var CI=Object.getOwnPropertySymbols;var tj=Object.prototype.hasOwnProperty,nj=Object.prototype.propertyIsEnumerable;var ej=(it,en,Yt)=>en in it?fG(it,en,{enumerable:!0,configurable:!0,writable:!0,value:Yt}):it[en]=Yt,J=(it,en)=>{for(var Yt in en||(en={}))tj.call(en,Yt)&&ej(it,Yt,en[Yt]);if(CI)for(var Yt of CI(en))nj.call(en,Yt)&&ej(it,Yt,en[Yt]);return it},We=(it,en)=>gG(it,hG(en));var G2=(it,en)=>{var Yt={};for(var sn in it)tj.call(it,sn)&&en.indexOf(sn)<0&&(Yt[sn]=it[sn]);if(it!=null&&CI)for(var sn of CI(it))en.indexOf(sn)<0&&nj.call(it,sn)&&(Yt[sn]=it[sn]);return Yt};var Q3=(it,en,Yt)=>new Promise((sn,An)=>{var eo=Bt=>{try{kt(Yt.next(Bt))}catch(xs){An(xs)}},ao=Bt=>{try{kt(Yt.throw(Bt))}catch(xs){An(xs)}},kt=Bt=>Bt.done?sn(Bt.value):Promise.resolve(Bt.value).then(eo,ao);kt((Yt=Yt.apply(it,en)).next())});import{a4 as dW,a5 as pG,a6 as bG,r as mW,a7 as oj,o as vG,a8 as yG,a9 as CG,aa as wG,ab as sj,ac as SG,b as xG,c as ij,d as TG,g as bp,ad as EG,Q as kG,k as _G,h as q2,e as z0,E as OG,s as AG,R as DG,S as RG,T as MG}from"./index-cda6fd2d.js";/* empty css                *//* empty css                */import{_ as NG}from"./DictSelect-e1c63bd1.js";/* empty css               *//* empty css                 */import{_ as BG}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css               *//* empty css                  *//* empty css                     */var PG=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],$G=function(it){return PG.map(function(en){return en.toLowerCase()}).indexOf(it.toLowerCase())!==-1},IG=function(it,en,Yt){Object.keys(en).filter($G).forEach(function(sn){var An=en[sn];typeof An=="function"&&(sn==="onInit"?An(it,Yt):Yt.on(sn.substring(2),function(eo){return An(eo,Yt)}))})},LG=function(it,en,Yt,sn){var An=it.modelEvents?it.modelEvents:null,eo=Array.isArray(An)?An.join(" "):An;dW(sn,function(ao,kt){Yt&&typeof ao=="string"&&ao!==kt&&ao!==Yt.getContent({format:it.outputFormat})&&Yt.setContent(ao)}),Yt.on(eo||"change input undo redo",function(){en.emit("update:modelValue",Yt.getContent({format:it.outputFormat}))})},FG=function(it,en,Yt,sn,An,eo){sn.setContent(eo()),Yt.attrs["onUpdate:modelValue"]&&LG(en,Yt,sn,An),IG(it,Yt.attrs,sn)},rj=0,uj=function(it){var en=Date.now(),Yt=Math.floor(Math.random()*1e9);return rj++,it+"_"+Yt+rj+String(en)},HG=function(it){return it!==null&&it.tagName.toLowerCase()==="textarea"},aj=function(it){return typeof it=="undefined"||it===""?[]:Array.isArray(it)?it:it.split(" ")},VG=function(it,en){return aj(it).concat(aj(en))},zG=function(it){return it==null},cj=function(){return{listeners:[],scriptId:uj("tiny-script"),scriptLoaded:!1}},UG=function(){var it=cj(),en=function(An,eo,ao,kt){var Bt=eo.createElement("script");Bt.referrerPolicy="origin",Bt.type="application/javascript",Bt.id=An,Bt.src=ao;var xs=function(){Bt.removeEventListener("load",xs),kt()};Bt.addEventListener("load",xs),eo.head&&eo.head.appendChild(Bt)},Yt=function(An,eo,ao){it.scriptLoaded?ao():(it.listeners.push(ao),An.getElementById(it.scriptId)||en(it.scriptId,An,eo,function(){it.listeners.forEach(function(kt){return kt()}),it.scriptLoaded=!0}))},sn=function(){it=cj()};return{load:Yt,reinitialize:sn}},WG=UG(),ZG=function(){return typeof window!="undefined"?window:global},K2=function(){var it=ZG();return it&&it.tinymce?it.tinymce:null},jG={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(it){return it==="html"||it==="text"}}},Y2=globalThis&&globalThis.__assign||function(){return Y2=Object.assign||function(it){for(var en,Yt=1,sn=arguments.length;Yt<sn;Yt++){en=arguments[Yt];for(var An in en)Object.prototype.hasOwnProperty.call(en,An)&&(it[An]=en[An])}return it},Y2.apply(this,arguments)},GG=function(it,en,Yt,sn){return it(sn||"div",{id:en,ref:Yt})},qG=function(it,en,Yt){return it("textarea",{id:en,visibility:"hidden",ref:Yt})},KG=pG({props:jG,setup:function(it,en){var Yt=it.init?Y2({},it.init):{},sn=bG(it),An=sn.disabled,eo=sn.modelValue,ao=sn.tagName,kt=mW(null),Bt=null,xs=it.id||uj("tiny-vue"),Ln=it.init&&it.init.inline||it.inline,Ts=!!en.attrs["onUpdate:modelValue"],Ho=!0,Nn=it.initialValue?it.initialValue:"",Mo="",Jn=function(Qe){return Ts?function(){return eo!=null&&eo.value?eo.value:""}:function(){return Qe?Nn:Mo}},dt=function(){var Qe=Jn(Ho),re=Y2(Y2({},Yt),{readonly:it.disabled,target:kt.value,plugins:VG(Yt.plugins,it.plugins),toolbar:it.toolbar||Yt.toolbar,inline:Ln,setup:function(Ut){Bt=Ut,Ut.on("init",function(Ba){return FG(Ba,it,en,Ut,eo,Qe)}),typeof Yt.setup=="function"&&Yt.setup(Ut)}});HG(kt.value)&&(kt.value.style.visibility=""),K2().init(re),Ho=!1};dW(An,function(Qe){var re;Bt!==null&&(typeof((re=Bt.mode)===null||re===void 0?void 0:re.set)=="function"?Bt.mode.set(Qe?"readonly":"design"):Bt.setMode(Qe?"readonly":"design"))}),dW(ao,function(Qe){var re;Ts||(Mo=Bt.getContent()),(re=K2())===null||re===void 0||re.remove(Bt),oj(function(){return dt()})}),vG(function(){if(K2()!==null)dt();else if(kt.value&&kt.value.ownerDocument){var Qe=it.cloudChannel?it.cloudChannel:"6",re=it.apiKey?it.apiKey:"no-api-key",Ut=zG(it.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(re,"/tinymce/").concat(Qe,"/tinymce.min.js"):it.tinymceScriptSrc;WG.load(kt.value.ownerDocument,Ut,dt)}}),yG(function(){K2()!==null&&K2().remove(Bt)}),Ln||(CG(function(){Ho||dt()}),wG(function(){var Qe;Ts||(Mo=Bt.getContent()),(Qe=K2())===null||Qe===void 0||Qe.remove(Bt)}));var ur=function(Qe){var re;Mo=Bt.getContent(),(re=K2())===null||re===void 0||re.remove(Bt),Yt=Y2(Y2({},Yt),Qe),oj(function(){return dt()})};return en.expose({rerender:ur,getEditor:function(){return Bt}}),function(){return Ln?GG(sj,xs,kt,it.tagName):qG(sj,xs,kt)}}}),dj={exports:{}};(function(it){(function(){var en=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Yt=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},sn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},An=function(e,n){return eo(function(o,r){return e.eq(n(o),n(r))})},eo=function(e){return{eq:e}},ao=eo(function(e,n){return e===n}),kt=ao,Bt=function(e){return eo(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},xs=function(e,n){return An(Bt(e),function(o){return sn(o,n)})},Ln=function(e){return eo(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!xs(kt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Ts=eo(function(e,n){if(e===n)return!0;var o=en(e),r=en(n);return o!==r?!1:Yt(o)?e===n:o==="array"?Bt(Ts).eq(e,n):o==="object"?Ln(Ts).eq(e,n):!1});const Ho=Object.getPrototypeOf,Nn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Mo=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Nn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Jn=e=>n=>Mo(n)===e,dt=e=>n=>typeof n===e,ur=e=>n=>e===n,Qe=(e,n)=>Ut(e)&&Nn(e,n,(o,r)=>Ho(o)===r),re=Jn("string"),Ut=Jn("object"),Ba=e=>Qe(e,Object),Fn=Jn("array"),Q=ur(null),cn=dt("boolean"),Go=ur(void 0),Jt=e=>e==null,ze=e=>!Jt(e),ue=dt("function"),Ps=dt("number"),et=(e,n)=>{if(Fn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Fe=()=>{},O=(e,n)=>(...o)=>e(n.apply(null,o)),gn=(e,n)=>o=>e(n(o)),Ge=e=>()=>e,Dn=e=>e,Ht=(e,n)=>e===n;function Ve(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const So=e=>n=>!e(n),qo=e=>()=>{throw new Error(e)},xo=e=>e(),nr=e=>{e()},Ne=Ge(!1),mt=Ge(!0);class V{constructor(n,o){this.tag=n,this.value=o}static some(n){return new V(!0,n)}static none(){return V.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?V.some(n(this.value)):V.none()}bind(n){return this.tag?n(this.value):V.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:V.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n!=null?n:"Called getOrDie on None")}static from(n){return ze(n)?V.some(n):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}V.singletonNone=new V(!1);const vc=Array.prototype.slice,Sn=Array.prototype.indexOf,Ws=Array.prototype.push,vn=(e,n)=>Sn.call(e,n),cd=(e,n)=>{const o=vn(e,n);return o===-1?V.none():V.some(o)},an=(e,n)=>vn(e,n)>-1,Xo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Vt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},Ie=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},ac=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Sr=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},jt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},cl=(e,n,o)=>(ac(e,(r,c)=>{o=n(o,r,c)}),o),Jo=(e,n,o)=>(Ie(e,(r,c)=>{o=n(o,r,c)}),o),ll=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return V.some(u);if(o(u,r))break}return V.none()},us=(e,n)=>ll(e,n,Ne),Dr=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return V.some(o)}return V.none()},Wc=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Fn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Ws.apply(n,e[o])}return n},ea=(e,n)=>Wc(Vt(e,n)),Es=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},Vo=e=>{const n=vc.call(e,0);return n.reverse(),n},di=(e,n)=>jt(e,o=>!an(n,o)),Ko=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Qo=(e,n)=>{const o=vc.call(e,0);return o.sort(n),o},No=(e,n)=>n>=0&&n<e.length?V.some(e[n]):V.none(),To=e=>No(e,0),$s=e=>No(e,e.length-1),dr=ue(Array.from)?Array.from:e=>vc.call(e),cc=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return V.none()},Rr=(e,n)=>{const o=[],r=ue(n)?c=>Xo(o,u=>n(u,c)):c=>an(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Is=Object.keys,zr=Object.hasOwnProperty,ut=(e,n)=>{const o=Is(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},Bn=(e,n)=>Pa(e,(o,r)=>({k:r,v:n(o,r)})),Pa=(e,n)=>{const o={};return ut(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Ks=e=>(n,o)=>{e[o]=n},El=(e,n,o,r)=>{ut(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},il=(e,n)=>{const o={},r={};return El(e,n,Ks(o),Ks(r)),{t:o,f:r}},$o=(e,n)=>{const o={};return El(e,n,Ks(o),Fe),o},yc=(e,n)=>{const o=[];return ut(e,(r,c)=>{o.push(n(r,c))}),o},lc=e=>yc(e,Dn),vo=(e,n)=>tn(e,n)?V.from(e[n]):V.none(),tn=(e,n)=>zr.call(e,n),Ur=(e,n)=>tn(e,n)&&e[n]!==void 0&&e[n]!==null,Cc=(e,n,o=Ts)=>Ln(o).eq(e,n),wc=e=>{const n={};return Ie(e,o=>{n[o]={}}),Is(n)},Sc=e=>e.length!==void 0,ks=Array.isArray,or=e=>{if(ks(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},es=(e,n,o)=>{if(!e)return!1;if(o=o||e,Sc(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(tn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},mr=(e,n)=>{const o=[];return es(e,(r,c)=>{o.push(n(r,c,e))}),o},xc=(e,n)=>{const o=[];return es(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},ts=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ha=(e,n,o,r)=>{let c=Go(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},ns=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},fr=e=>e[e.length-1],Tc=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},mi=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),C=c||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!C,N=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!E&&!C&&!N;return{isiPad:Ge(c),isiPhone:Ge(u),isTablet:Ge(C),isPhone:Ge(E),isTouch:Ge(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ge(N),isDesktop:Ge(R)}},Zc=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},ta=(e,n)=>{const o=Zc(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Mr(r(1),r(2))},Um=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?pe():ta(e,o)},pe=()=>Mr(0,0),Mr=(e,n)=>({major:e,minor:n}),jl={nu:Mr,detect:Um,unknown:pe},ul=(e,n)=>cc(n.brands,o=>{const r=o.brand.toLowerCase();return us(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:jl.nu(parseInt(o.version,10),0)}))}),Cu=(e,n)=>{const o=String(n).toLowerCase();return us(e,r=>r.search(o))},Oo=(e,n)=>Cu(e,n).map(o=>{const r=jl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Jd=(e,n)=>Cu(e,n).map(o=>{const r=jl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Li=(e,n)=>e.substring(n),dl=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,pa=(e,n)=>Io(e,n)?Li(e,n.length):e,_s=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Go(r)?!0:c+n.length<=r:!1},Io=(e,n)=>dl(e,n,0),ml=(e,n)=>dl(e,n,e.length-n.length),Ga=e=>n=>n.replace(e,""),Ec=Ga(/^\s+|\s+$/g),kl=Ga(/^\s+/g),_l=Ga(/\s+$/g),mo=e=>e.length>0,ba=e=>!mo(e),jc=(e,n)=>n<=0?"":new Array(n+1).join(e),kc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?V.none():V.some(o)},$a=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,sr=e=>n=>_s(n,e),ls=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>_s(e,"edge/")&&_s(e,"chrome")&&_s(e,"safari")&&_s(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$a],search:e=>_s(e,"chrome")&&!_s(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>_s(e,"msie")||_s(e,"trident")},{name:"Opera",versionRegexes:[$a,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:sr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:sr("firefox")},{name:"Safari",versionRegexes:[$a,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(_s(e,"safari")||_s(e,"mobile/"))&&_s(e,"applewebkit")}],ld=[{name:"Windows",search:sr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>_s(e,"iphone")||_s(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:sr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:sr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:sr("linux"),versionRegexes:[]},{name:"Solaris",search:sr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:sr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:sr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fi={browsers:Ge(ls),oses:Ge(ld)},Eo="Edge",Nr="Chromium",na="IE",Os="Opera",fi="Firefox",qa="Safari",oa=()=>ic({current:void 0,version:jl.unknown()}),ic=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Eo),isChromium:r(Nr),isIE:r(na),isOpera:r(Os),isFirefox:r(fi),isSafari:r(qa)}},Hi={unknown:oa,nu:ic,edge:Ge(Eo),chromium:Ge(Nr),ie:Ge(na),opera:Ge(Os),firefox:Ge(fi),safari:Ge(qa)},gi="Windows",wu="iOS",sa="Android",Gc="Linux",hi="macOS",fl="Solaris",Vi="FreeBSD",Z="ChromeOS",ce=()=>ge({current:void 0,version:jl.unknown()}),ge=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(gi),isiOS:r(wu),isAndroid:r(sa),isMacOS:r(hi),isLinux:r(Gc),isSolaris:r(fl),isFreeBSD:r(Vi),isChromeOS:r(Z)}},_e={unknown:ce,nu:ge,windows:Ge(gi),ios:Ge(wu),android:Ge(sa),linux:Ge(Gc),macos:Ge(hi),solaris:Ge(fl),freebsd:Ge(Vi),chromeos:Ge(Z)},Gt={detect:(e,n,o)=>{const r=Fi.browsers(),c=Fi.oses(),u=n.bind(C=>ul(r,C)).orThunk(()=>Oo(r,e)).fold(Hi.unknown,Hi.nu),f=Jd(c,e).fold(_e.unknown,_e.nu),b=mi(f,u,e,o);return{browser:u,os:f,deviceType:b}}},ko=e=>window.matchMedia(e).matches;let Ys=Tc(()=>Gt.detect(navigator.userAgent,V.from(navigator.userAgentData),ko));const to=()=>Ys(),Xs=navigator.userAgent,no=to(),vs=no.browser,_c=no.os,uc=no.deviceType,bn=Xs.indexOf("Windows Phone")!==-1,so={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:vs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!vs.isIE(),windowsPhone:bn,browser:{current:vs.current,version:vs.version,isChromium:vs.isChromium,isEdge:vs.isEdge,isFirefox:vs.isFirefox,isIE:vs.isIE,isOpera:vs.isOpera,isSafari:vs.isSafari},os:{current:_c.current,version:_c.version,isAndroid:_c.isAndroid,isChromeOS:_c.isChromeOS,isFreeBSD:_c.isFreeBSD,isiOS:_c.isiOS,isLinux:_c.isLinux,isMacOS:_c.isMacOS,isSolaris:_c.isSolaris,isWindows:_c.isWindows},deviceType:{isDesktop:uc.isDesktop,isiPad:uc.isiPad,isiPhone:uc.isiPhone,isPhone:uc.isPhone,isTablet:uc.isTablet,isTouch:uc.isTouch,isWebView:uc.isWebView}},Br=/^\s*|\s*$/g,P=e=>Jt(e)?"":(""+e).replace(Br,""),G=(e,n)=>n?n==="array"&&ks(e)?!0:typeof e===n:e!==void 0,te=(e,n,o={})=>{const r=re(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Te=tn,wt=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(tn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},xn=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),es(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(xn(c,n,o,r),!0)))},Ze={trim:P,isArray:ks,is:G,toArray:or,makeMap:te,each:es,map:mr,grep:xc,inArray:ts,hasOwn:Te,extend:wt,walk:xn,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Fn(e)?e:e===""?[]:mr(e.split(n||","),P),_addCacheSuffix:e=>{const n=so.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},gr=(e,n,o=Ht)=>e.exists(r=>o(r,n)),As=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Pr=(e,n,o)=>e.isSome()&&n.isSome()?V.some(o(e.getOrDie(),n.getOrDie())):V.none(),Wm=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?V.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):V.none(),Vn=(e,n)=>e?V.some(n):V.none(),Gl=typeof window!="undefined"?window:Function("return this;")(),Ia=(e,n)=>{let o=n!=null?n:Gl;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Js=(e,n)=>{const o=e.split(".");return Ia(o,n)},hr=(e,n)=>Js(e,n),ql=(e,n)=>{const o=hr(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},vb=Object.getPrototypeOf,Lf=e=>ql("HTMLElement",e),ys=e=>{const n=Js("ownerDocument.defaultView",e);return Ut(e)&&(Lf(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(vb(e).constructor.name))},pr=8,Su=9,va=11,zi=1,Qd=3,zo=e=>e.dom.nodeName.toLowerCase(),ya=e=>e.dom.nodeType,Wr=e=>n=>ya(n)===e,em=e=>ya(e)===pr||zo(e)==="#comment",Ui=e=>Uo(e)&&ys(e.dom),Uo=Wr(zi),La=Wr(Qd),gl=Wr(Su),id=Wr(va),Kl=e=>n=>Uo(n)&&zo(n)===e,Oc=(e,n,o)=>{if(re(o)||cn(o)||Ps(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Qs=(e,n,o)=>{Oc(e.dom,n,o)},Ca=(e,n)=>{const o=e.dom;ut(n,(r,c)=>{Oc(o,c,r)})},Ka=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Ac=(e,n)=>V.from(Ka(e,n)),ra=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Ls=(e,n)=>{e.dom.removeAttribute(n)},dc=e=>{const n=e.dom.attributes;return n==null||n.length===0},tm=e=>Jo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Wi=(e,n)=>{const o=Ka(e,n);return o===void 0||o===""?[]:o.split(" ")},Zi=(e,n,o)=>{const c=Wi(e,n).concat([o]);return Qs(e,n,c.join(" ")),!0},Zm=(e,n,o)=>{const r=jt(Wi(e,n),c=>c!==o);return r.length>0?Qs(e,n,r.join(" ")):Ls(e,n),!1},qc=e=>e.dom.classList!==void 0,ji=e=>Wi(e,"class"),ud=(e,n)=>Zi(e,"class",n),Zs=(e,n)=>Zm(e,"class",n),nm=(e,n)=>an(ji(e),n)?Zs(e,n):ud(e,n),xu=(e,n)=>{qc(e)?e.dom.classList.add(n):ud(e,n)},Tu=e=>{(qc(e)?e.dom.classList:ji(e)).length===0&&Ls(e,"class")},dd=(e,n)=>{qc(e)?e.dom.classList.remove(n):Zs(e,n),Tu(e)},md=(e,n)=>{const o=qc(e)?e.dom.classList.toggle(n):nm(e,n);return Tu(e),o},fd=(e,n)=>qc(e)&&e.dom.classList.contains(n),Eu=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Gi(r.childNodes[0])},jm=(e,n)=>{const r=(n||document).createElement(e);return Gi(r)},Gm=(e,n)=>{const r=(n||document).createTextNode(e);return Gi(r)},Gi=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ne={fromHtml:Eu,fromTag:jm,fromText:Gm,fromDom:Gi,fromPoint:(e,n,o)=>V.from(e.dom.elementFromPoint(n,o)).map(Gi)},gd=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ya=(e,n)=>{const o=e.dom;if(o.nodeType!==zi)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Ff=e=>e.nodeType!==zi&&e.nodeType!==Su&&e.nodeType!==va||e.childElementCount===0,yp=(e,n)=>{const o=n===void 0?document:n.dom;return Ff(o)?[]:Vt(o.querySelectorAll(e),ne.fromDom)},Cp=(e,n)=>{const o=n===void 0?document:n.dom;return Ff(o)?V.none():V.from(o.querySelector(e)).map(ne.fromDom)},ho=(e,n)=>e.dom===n.dom,hl=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Fa=e=>ne.fromDom(e.dom.ownerDocument),Dc=e=>gl(e)?e:Fa(e),Zg=e=>ne.fromDom(Dc(e).dom.documentElement),pi=e=>ne.fromDom(Dc(e).dom.defaultView),Kc=e=>V.from(e.dom.parentNode).map(ne.fromDom),om=e=>V.from(e.dom.parentElement).map(ne.fromDom),Hf=(e,n)=>{const o=ue(n)?n:Ne;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ne.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},jg=e=>{const n=o=>jt(o,r=>!ho(e,r));return Kc(e).map(Zr).map(n).getOr([])},mc=e=>V.from(e.dom.previousSibling).map(ne.fromDom),hd=e=>V.from(e.dom.nextSibling).map(ne.fromDom),Gg=e=>Vo(gd(e,mc)),Rc=e=>gd(e,hd),Zr=e=>Vt(e.dom.childNodes,ne.fromDom),pd=(e,n)=>{const o=e.dom.childNodes;return V.from(o[n]).map(ne.fromDom)},bd=e=>pd(e,0),pl=e=>pd(e,e.dom.childNodes.length-1),Xa=e=>e.dom.childNodes.length,qm=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ne.fromDom(n)},Km=e=>id(e)&&ze(e.dom.host),Ym=ue(Element.prototype.attachShadow)&&ue(Node.prototype.getRootNode),Xm=Ge(Ym),Ol=Ym?e=>ne.fromDom(e.dom.getRootNode()):Dc,sm=e=>Km(e)?e:qm(Dc(e)),qg=e=>Km(e)?e:ne.fromDom(Dc(e).dom.body),U0=e=>{const n=Ol(e);return Km(n)?V.some(n):V.none()},Kg=e=>ne.fromDom(e.dom.host),rm=e=>{if(Xm()&&ze(e.target)){const n=ne.fromDom(e.target);if(Uo(n)&&Vf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return To(o)}}return V.from(e.target)},Vf=e=>ze(e.dom.shadowRoot),bi=e=>{const n=La(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return U0(ne.fromDom(n)).fold(()=>o.body.contains(n),gn(bi,Kg))};var zf=(e,n,o,r,c)=>e(o,r)?V.some(o):ue(c)&&c(o)?V.none():n(o,r,c);const is=(e,n,o)=>{let r=e.dom;const c=ue(o)?o:Ne;for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r);if(n(u))return V.some(u);if(c(u))break}return V.none()},k=(e,n,o)=>zf((c,u)=>u(c),is,e,n,o),M=(e,n)=>{const o=e.dom;return o.parentNode?z(ne.fromDom(o.parentNode),r=>!ho(e,r)&&n(r)):V.none()},z=(e,n)=>{const o=c=>n(ne.fromDom(c));return us(e.dom.childNodes,o).map(ne.fromDom)},ae=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=ne.fromDom(r.childNodes[c]);if(n(u))return V.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return V.none()};return o(e.dom)},le=(e,n,o)=>is(e,r=>Ya(r,n),o),lt=(e,n)=>Cp(n,e),qt=(e,n,o)=>zf((c,u)=>Ya(c,u),le,e,n,o),mn=e=>qt(e,"[contenteditable]"),Pn=(e,n=!1)=>bi(e)?e.dom.isContentEditable:mn(e).fold(Ge(n),o=>at(o)==="true"),at=e=>e.dom.contentEditable,_o=e=>e.style!==void 0&&ue(e.style.getPropertyValue),$r=(e,n,o)=>{if(!re(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);_o(e)&&e.style.setProperty(n,o)},Yc=(e,n)=>{_o(e)&&e.style.removeProperty(n)},am=(e,n,o)=>{const r=e.dom;$r(r,n,o)},Uf=(e,n)=>{const o=e.dom;ut(n,(r,c)=>{$r(o,c,r)})},Yl=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!bi(e)?Xc(o,n):c},Xc=(e,n)=>_o(e)?e.style.getPropertyValue(n):"",Ja=(e,n)=>{const o=e.dom,r=Xc(o,n);return V.from(r).filter(c=>c.length>0)},bl=e=>{const n={},o=e.dom;if(_o(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},aa=(e,n)=>{const o=e.dom;Yc(o,n),gr(Ac(e,"style").map(Ec),"")&&Ls(e,"style")},yb=e=>e.dom.offsetWidth,yo=(e,n)=>{Kc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},ku=(e,n)=>{hd(e).fold(()=>{Kc(e).each(c=>{js(c,n)})},r=>{yo(r,n)})},vd=(e,n)=>{bd(e).fold(()=>{js(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},js=(e,n)=>{e.dom.appendChild(n.dom)},Cb=(e,n)=>{yo(e,n),js(n,e)},W0=(e,n)=>{Ie(n,(o,r)=>{const c=r===0?e:n[r-1];ku(c,o)})},_u=(e,n)=>{Ie(n,o=>{js(e,o)})},Yo=e=>{e.dom.textContent="",Ie(Zr(e),n=>{os(n)})},os=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Tr=e=>{const n=Zr(e);n.length>0&&W0(e,n),os(e)},yd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Zr(ne.fromDom(r))},Cd=e=>Vt(e,ne.fromDom),cm=e=>e.dom.innerHTML,wd=(e,n)=>{const r=Fa(e).dom,c=ne.fromDom(r.createDocumentFragment()),u=yd(n,r);_u(c,u),Yo(e),js(e,c)},zn=e=>{const n=ne.fromTag("div"),o=ne.fromDom(e.dom.cloneNode(!0));return js(n,o),cm(n)},Yg=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),wp=e=>{const n=ne.fromDom(rm(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=O(r,o);return Yg(n,e.clientX,e.clientY,o,r,c,e)},Z0=(e,n)=>o=>{e(o)&&n(wp(o))},j0=(e,n,o,r,c)=>{const u=Z0(o,r);return e.dom.addEventListener(n,u,c),{unbind:Ve(wb,e,n,u,c)}},Wf=(e,n,o,r)=>j0(e,n,o,r,!1),wb=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Zf=(e,n)=>({left:e,top:n,translate:(r,c)=>Zf(e+r,n+c)}),Xl=Zf,Sb=e=>{const n=e.getBoundingClientRect();return Xl(n.left,n.top)},Xg=(e,n)=>e!==void 0?e:n!==void 0?n:0,xb=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Xl(o.offsetLeft,o.offsetTop);const u=Xg(r==null?void 0:r.pageYOffset,c.scrollTop),f=Xg(r==null?void 0:r.pageXOffset,c.scrollLeft),b=Xg(c.clientTop,o.clientTop),C=Xg(c.clientLeft,o.clientLeft);return vi(e).translate(f-C,u-b)},vi=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Xl(r.offsetLeft,r.offsetTop):bi(e)?Sb(n):Xl(0,0)},Sp=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Xl(o,r)},yi=(e,n)=>{to().browser.isSafari()&&ue(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Jm=e=>{const n=e===void 0?window:e;return to().browser.isFirefox()?V.none():V.from(n.visualViewport)},Tb=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Jg=e=>{const n=e===void 0?window:e,o=n.document,r=Sp(ne.fromDom(o));return Jm(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Tb(r.left,r.top,u,f)},c=>Tb(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},xp=(e,n)=>jt(Zr(e),n),Tp=(e,n)=>{let o=[];return Ie(Zr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Tp(r,n))}),o},wa=(e,n)=>yp(n,e),Ep=(e,n,o)=>le(e,n,o).isSome();class Er{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Sd=e=>n=>!!n&&n.nodeType===e,Mc=e=>!!e&&!Object.getPrototypeOf(e),Me=Sd(1),Ci=e=>{const n=e.toLowerCase();return o=>ze(o)&&o.nodeName.toLowerCase()===n},Al=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return an(n,r)}return!1}},Ou=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Me(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},kp=e=>n=>Me(n)&&n.hasAttribute(e),_p=(e,n)=>o=>Me(o)&&o.getAttribute(e)===n,Sa=e=>Me(e)&&e.hasAttribute("data-mce-bogus"),Au=e=>Me(e)&&e.getAttribute("data-mce-bogus")==="all",Jl=e=>Me(e)&&e.tagName==="TABLE",ca=e=>n=>!!(Me(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),lm=Al(["textarea","input"]),Je=Sd(3),Op=Sd(4),G0=Sd(7),Du=Sd(8),wi=Sd(9),Qg=Sd(11),Ds=Ci("br"),Qm=Ci("img"),Si=ca("true"),En=ca("false"),vl=Al(["td","th"]),Nc=Al(["td","th","caption"]),Jc=Al(["video","audio","object","embed"]),Bc=Ci("li"),Dl="\uFEFF",Ao=" ",Qa=e=>e===Dl,eh=e=>e.replace(/\uFEFF/g,""),Pc=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?V.from(u.dom.nodeValue):V.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(La,"text"),jf=e=>Pc.get(e),br=e=>Pc.getOption(e),qi=(e,n)=>Pc.set(e,n),Ap=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Ql=["td","th"],q0=["thead","tbody","tfoot"],Ru=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Eb=["h1","h2","h3","h4","h5","h6"],Qc=["li","dd","dt"],po=["ul","ol","dl"],Ki=["pre","script","textarea","style"],Gf=["pre"].concat(Eb),vr=e=>{let n;return o=>(n=n||Ko(e,mt),tn(n,zo(o)))},$c=vr(Ap),im=e=>zo(e)==="table",qf=e=>Uo(e)&&!$c(e),la=e=>Uo(e)&&zo(e)==="br",th=vr(Ru),ye=vr(po),ec=vr(Qc),ef=vr(q0),Ha=vr(Ql),Rl=vr(Ki),tc=vr(Gf),Ir=e=>tc(e)||qf(e),K0=e=>{const n=[];let o=e.dom;for(;o;)n.push(ne.fromDom(o)),o=o.lastChild;return n},nh=e=>{const n=wa(e,"br"),o=jt(K0(e).slice(-1),la);n.length===o.length&&Ie(o,os)},w=()=>{const e=ne.fromTag("br");return Qs(e,"data-mce-bogus","1"),e},S=e=>{Yo(e),js(e,w())},L=e=>{pl(e).each(n=>{mc(n).each(o=>{$c(e)&&la(n)&&$c(o)&&os(n)})})},W=Dl,ie=Qa,Oe=eh,tt=Me,Et=Je,hn=e=>(Et(e)&&(e=e.parentNode),tt(e)&&e.hasAttribute("data-mce-caret")),pn=e=>Et(e)&&ie(e.data),fo=e=>hn(e)||pn(e),Lo=e=>e.firstChild!==e.lastChild||!Ds(e.firstChild),Cs=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(W),u=e.parentNode;if(n){const f=e.previousSibling;if(Et(f)){if(fo(f))return f;if(um(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(Et(f)){if(fo(f))return f;if(Ml(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Ic=e=>{const n=e.container();return Je(n)?n.data.charAt(e.offset())===W||e.isAtStart()&&pn(n.previousSibling):!1},xa=e=>{const n=e.container();return Je(n)?n.data.charAt(e.offset()-1)===W||e.isAtEnd()&&pn(n.nextSibling):!1},Mu=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(w().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Ml=e=>Et(e)&&e.data[0]===W,um=e=>Et(e)&&e.data[e.data.length-1]===W,Kf=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Sa(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Nl=e=>e&&e.hasAttribute("data-mce-caret")?(Kf(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,dm=e=>hn(e.startContainer),oh=Si,sh=En,tf=Ds,jr=Je,Yi=Al(["script","style","textarea"]),Gn=Al(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ss=Al(["table"]),fc=fo,Wo=e=>fc(e)?!1:jr(e)?!Yi(e.parentNode):Gn(e)||tf(e)||ss(e)||mm(e),rh=e=>Me(e)&&e.getAttribute("unselectable")==="true",mm=e=>!rh(e)&&sh(e),fm=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(mm(o))return!1;if(oh(o))return!0}return!0},ei=e=>mm(e)?!Jo(dr(e.getElementsByTagName("*")),(n,o)=>n||oh(o),!1):!1,nf=e=>Gn(e)||ei(e),kb=(e,n)=>Wo(e)&&fm(e,n),Bl=/^[ \t\r\n]*$/,of=e=>Bl.test(e),xd=e=>" \f	\v".indexOf(e)!==-1,Xi=e=>e===`
`||e==="\r",xi=(e,n)=>n<e.length&&n>=0?Xi(e[n]):!1,Dp=(e,n=4,o=!0,r=!0)=>{const c=jc(" ",n),u=e.replace(/\t/g,c);return Jo(u,(b,C)=>xd(C)||C===Ao?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||xi(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Ao}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Xi(C),str:b.str+C},{pcIsSpace:!1,str:""}).str},ah=(e,n)=>{const o=ne.fromDom(n),r=ne.fromDom(e);return Ep(r,"pre,code",Ve(ho,o))},X2=(e,n)=>Je(e)&&of(e.data)&&!ah(e,n),WE=e=>Me(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),er=(e,n)=>Wo(e)&&!X2(e,n)||WE(e)||ZE(e),ZE=kp("data-mce-bookmark"),Td=kp("data-mce-bogus"),Y0=_p("data-mce-bogus","all"),X0=(e,n)=>{let o=0;if(er(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new Er(r,e);do{if(n){if(Y0(r)){r=c.next(!0);continue}if(Td(r)){r=c.next();continue}}if(Ds(r)){o++,r=c.next();continue}if(er(r,e))return!1;r=c.next()}while(r);return o<=1}},Gs=(e,n=!0)=>X0(e.dom,n),Lc="data-mce-block",ch=e=>jt(Is(e),n=>!/[A-Z]/.test(n)),Yf=e=>ch(e).join(","),J2=(e,n)=>ze(n.querySelector(e))?(n.setAttribute(Lc,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Lc),!1),lh=(e,n)=>{const o=Yf(e.getTransparentElements()),r=Yf(e.getBlockElements());return jt(n.querySelectorAll(o),c=>J2(r,c))},Rp=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(Gs(ne.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},_b=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Rp(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Rp(u,!1),Gs(ne.fromDom(c))||r.insertBefore(c,e),Gs(ne.fromDom(n))||r.insertBefore(n,e),Gs(ne.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},jE=(e,n,o)=>{const r=e.getBlockElements(),c=ne.fromDom(n),u=b=>zo(b)in r,f=b=>ho(b,c);Ie(Cd(o),b=>{is(b,u,f).each(C=>{const E=xp(b,N=>u(N)&&!e.isValidChild(zo(C),zo(N)));if(E.length>0){const N=om(C);Ie(E,R=>{is(R,u,f).each(F=>{_b(F.dom,R.dom)})}),N.each(R=>lh(e,R.dom))}})})},J0=(e,n,o)=>{Ie([...o,...sf(e,n)?[n]:[]],r=>Ie(wa(ne.fromDom(r),r.nodeName.toLowerCase()),c=>{Q0(e,c.dom)&&Tr(c)}))},Mp=(e,n)=>{const o=lh(e,n);jE(e,n,o),J0(e,n,o)},Xf=(e,n)=>{if(Ob(e,n)){const o=Yf(e.getBlockElements());J2(o,n)}},Ed=(e,n,o)=>{const r=u=>ho(u,ne.fromDom(n)),c=Hf(ne.fromDom(o),r);No(c,c.length-2).filter(Uo).fold(()=>Mp(e,n),u=>Mp(e,u.dom))},Nu=e=>e.hasAttribute(Lc),gm=(e,n)=>tn(e.getTransparentElements(),n),Ob=(e,n)=>Me(n)&&gm(e,n.nodeName),sf=(e,n)=>Ob(e,n)&&Nu(n),Q0=(e,n)=>Ob(e,n)&&!Nu(n),Q2=(e,n)=>n.type===1&&gm(e,n.name)&&re(n.attr(Lc)),ey=(e,n)=>n.type===1&&gm(e,n.name)&&Go(n.attr(Lc)),ew=to().browser,ty=e=>us(e,Uo),Ab=e=>ew.isFirefox()&&zo(e)==="table"?ty(Zr(e)).filter(n=>zo(n)==="caption").bind(n=>ty(Rc(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,co=(e,n)=>e.children&&an(e.children,n),Wt=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Yl(ne.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!co(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!co(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Ab(ne.fromDom(n))}return{x:r,y:c}},kd=(e,n={})=>{let o=0;const r={},c=ne.fromDom(e),u=Dc(c),f=j=>{n.referrerPolicy=j},b=j=>{n.contentCssCors=j},C=j=>{js(sm(c),j)},E=j=>{const X=sm(c);lt(X,"#"+j).each(os)},N=j=>vo(r,j).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=j=>new Promise((X,fe)=>{let de;const be=Ze._addCacheSuffix(j),we=N(be);r[be]=we,we.count++;const He=(ke,xt)=>{Ie(ke,nr),we.status=xt,we.passed=[],we.failed=[],de&&(de.onload=null,de.onerror=null,de=null)},gt=()=>He(we.passed,2),ot=()=>He(we.failed,3);if(X&&we.passed.push(X),fe&&we.failed.push(fe),we.status===1)return;if(we.status===2){gt();return}if(we.status===3){ot();return}we.status=1;const Ee=ne.fromTag("link",u.dom);Ca(Ee,{rel:"stylesheet",type:"text/css",id:we.id}),n.contentCssCors&&Qs(Ee,"crossOrigin","anonymous"),n.referrerPolicy&&Qs(Ee,"referrerpolicy",n.referrerPolicy),de=Ee.dom,de.onload=gt,de.onerror=ot,C(Ee),Qs(Ee,"href",be)}),F=j=>Promise.allSettled(Vt(j,fe=>R(fe).then(Ge(fe)))).then(fe=>{const de=Sr(fe,be=>be.status==="fulfilled");return de.fail.length>0?Promise.reject(Vt(de.fail,be=>be.reason)):Vt(de.pass,be=>be.value)}),Y=j=>{const X=Ze._addCacheSuffix(j);vo(r,X).each(fe=>{--fe.count===0&&(delete r[X],E(fe.id))})};return{load:R,loadAll:F,unload:Y,unloadAll:j=>{Ie(j,X=>{Y(X)})},_setReferrerPolicy:f,_setContentCssCors:b}},ih=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Ol(o).dom;return V.from(e.get(u)).getOrThunk(()=>{const f=kd(u,r);return e.set(u,f),f})}}})(),GE=e=>e.nodeName.toLowerCase()==="span",Db=(e,n)=>ze(e)&&(er(e,n)||qf(ne.fromDom(e))),ds=(e,n)=>{const o=new Er(e,n).prev(!1),r=new Er(e,n).next(!1),c=Go(o)||Db(o,n),u=Go(r)||Db(r,n);return c&&u},ny=e=>GE(e)&&e.getAttribute("data-mce-type")==="bookmark",tw=(e,n)=>Je(e)&&e.data.length>0&&ds(e,n),nw=e=>Me(e)?e.childNodes.length>0:!1,je=e=>Qg(e)||wi(e),Bp=(e,n,o)=>{var r;const c=o||n;if(Me(n)&&ny(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)Bp(e,u[f],c);if(Me(n)){const f=n.childNodes;f.length===1&&ny(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!je(n)&&!er(n,c)&&!nw(n)&&!tw(n,c)&&e.remove(n),n},qE=Ze.makeMap,_d=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rb=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uh=/[<>&\"\']/g,Pp=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Jf={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},hm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},dh={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},qs=e=>{const n=ne.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},el=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!hm[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},mh=el("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Od=(e,n)=>e.replace(n?_d:Rb,o=>hm[o]||o),KE=e=>(""+e).replace(uh,n=>hm[n]||n),Mb=(e,n)=>e.replace(n?_d:Rb,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":hm[o]||"&#"+o.charCodeAt(0)+";"),pm=(e,n,o)=>{const r=o||mh;return e.replace(n?_d:Rb,c=>hm[c]||r[c]||c)},tl={encodeRaw:Od,encodeAllRaw:KE,encodeNumeric:Mb,encodeNamed:pm,getEncodeFunc:(e,n)=>{const o=el(n)||mh,r=(f,b)=>f.replace(b?_d:Rb,C=>hm[C]!==void 0?hm[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),c=(f,b)=>pm(f,b,o),u=qE(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:pm:u.numeric?Mb:Od},decode:e=>e.replace(Pp,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Jf[o]||String.fromCharCode(o)):dh[n]||mh[n]||qs(n))},Nb={},Bu={},YE={},fh=Ze.makeMap,Fc=Ze.each,rf=Ze.extend,Ot=Ze.explode,sw=Ze.inArray,nc=(e,n)=>(e=Ze.trim(e),e?e.split(n||" "):[]),rw=(e,n={})=>{const o=fh(e," ",fh(e.toUpperCase()," "));return rf(o,n)},oy=e=>rw("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),XE=e=>{const n={};let o,r,c,u;const f=(C,E="",N="")=>{const R=nc(N),F=nc(C);let Y=F.length;for(;Y--;){const ee=nc([o,E].join(" "));n[F[Y]]={attributes:Ko(ee,()=>({})),attributesOrder:ee,children:Ko(R,Ge(YE))}}},b=(C,E)=>{const N=nc(C),R=nc(E);let F=N.length;for(;F--;){const Y=n[N[F]];for(let ee=0,j=R.length;ee<j;ee++)Y.attributes[R[ee]]={},Y.attributesOrder.push(R[ee])}};if(Nb[e])return Nb[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const C="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+C,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const C="acronym applet basefont big font strike tt";c=[c,C].join(" "),Fc(nc(C),N=>{f(N,"",c)});const E="center dir isindex noframes";r=[r,E].join(" "),u=[r,c].join(" "),Fc(nc(E),N=>{f(N,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&Ie([n.video,n.audio],C=>{delete C.children.audio,delete C.children.video}),Fc(nc("a form meter progress dfn"),C=>{n[C]&&delete n[C].children[C]}),delete n.caption.children.table,delete n.script,Nb[e]=n,n},$p=(e,n)=>{if(e){const o={};return re(e)&&(e={"*":e}),Fc(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?fh(r,/[, ]/):Ot(r,/[, ]/)}),o}else return},Pl=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(yn,go,Hr)=>{const ps=e[yn];if(ps)return fh(ps,/[, ]/,fh(ps.toUpperCase(),/[, ]/));{let lr=Bu[yn];return lr||(lr=rw(go,Hr),Bu[yn]=lr),lr}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",E=XE(C);e.verify_html===!1&&(e.valid_elements="*[*]");const N=$p(e.valid_styles),R=$p(e.invalid_styles,"map"),F=$p(e.valid_classes,"map"),Y=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ee=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),j=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),X=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),fe="td th iframe video audio object script code",de=b("non_empty_elements",fe+" pre",j),be=b("move_caret_before_on_enter_elements",fe+" table",j),we=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),He=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",we),gt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ot=b("transparent_elements","a ins del canvas map");Fc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),yn=>{f[yn]=new RegExp("</"+yn+"[^>]*>","gi")});const Ee=yn=>new RegExp("^"+yn.replace(/([?+*])/g,".$1")+"$"),ke=yn=>{const go=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Hr=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,ps=/[*?+]/;if(yn){const lr=nc(yn,",");let Fo,Bs;o["@"]&&(Fo=o["@"].attributes,Bs=o["@"].attributesOrder);for(let Jr=0,ed=lr.length;Jr<ed;Jr++){let Uc=go.exec(lr[Jr]);if(Uc){const Fm=Uc[1],bu=Uc[2],mb=Uc[3],fb=Uc[5],Gd={},qd=[],ga={attributes:Gd,attributesOrder:qd};if(Fm==="#"&&(ga.paddEmpty=!0),Fm==="-"&&(ga.removeEmpty=!0),Uc[4]==="!"&&(ga.removeEmptyAttrs=!0),Fo&&(ut(Fo,(td,Hm)=>{Gd[Hm]=td}),Bs&&qd.push(...Bs)),fb){const td=nc(fb,"|");for(let Hm=0,nd=td.length;Hm<nd;Hm++)if(Uc=Hr.exec(td[Hm]),Uc){const od={},Pf=Uc[1],Na=Uc[2].replace(/[\\:]:/g,":"),zg=Uc[3],$f=Uc[4];if(Pf==="!"&&(ga.attributesRequired=ga.attributesRequired||[],ga.attributesRequired.push(Na),od.required=!0),Pf==="-"){delete Gd[Na],qd.splice(sw(qd,Na),1);continue}if(zg&&(zg==="="&&(ga.attributesDefault=ga.attributesDefault||[],ga.attributesDefault.push({name:Na,value:$f}),od.defaultValue=$f),zg==="~"&&(ga.attributesForced=ga.attributesForced||[],ga.attributesForced.push({name:Na,value:$f}),od.forcedValue=$f),zg==="<"&&(od.validValues=fh($f,"?"))),ps.test(Na)){const Kd=od;ga.attributePatterns=ga.attributePatterns||[],Kd.pattern=Ee(Na),ga.attributePatterns.push(Kd)}else Gd[Na]||qd.push(Na),Gd[Na]=od}}if(!Fo&&bu==="@"&&(Fo=Gd,Bs=qd),mb&&(ga.outputName=bu,o[mb]=ga),ps.test(bu)){const td=ga;td.pattern=Ee(bu),c.push(td)}else o[bu]=ga}}}},xt=yn=>{c=[],Ie(Is(o),go=>{delete o[go]}),ke(yn),Fc(E,(go,Hr)=>{r[Hr]=go.children})},Ft=yn=>{const go=/^(~)?(.+)$/;yn&&(delete Bu.text_block_elements,delete Bu.block_elements,Fc(nc(yn,","),Hr=>{const ps=go.exec(Hr);if(ps){const lr=ps[1]==="~",Fo=lr?"span":"div",Bs=ps[2];if(r[Bs]=r[Fo],u[Bs]=Fo,de[Bs.toUpperCase()]={},de[Bs]={},lr||(He[Bs.toUpperCase()]={},He[Bs]={}),!o[Bs]){let Jr=o[Fo];Jr=rf({},Jr),delete Jr.removeEmptyAttrs,delete Jr.removeEmpty,o[Bs]=Jr}Fc(r,(Jr,ed)=>{Jr[Fo]&&(r[ed]=Jr=rf({},r[ed]),Jr[Bs]=Jr[Fo])})}}))},Qt=yn=>{const go=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Nb[C],yn&&Fc(nc(yn,","),Hr=>{const ps=go.exec(Hr);if(ps){const lr=ps[1];let Fo;lr?Fo=r[ps[2]]:Fo=r[ps[2]]={"#comment":{}},Fo=r[ps[2]],Fc(nc(ps[3],"|"),Bs=>{lr==="-"?delete Fo[Bs]:Fo[Bs]={}})}})},On=yn=>{const go=o[yn];if(go)return go;let Hr=c.length;for(;Hr--;){const ps=c[Hr];if(ps.pattern.test(yn))return ps}};e.valid_elements?xt(e.valid_elements):(Fc(E,(yn,go)=>{o[go]={attributes:yn.attributes,attributesOrder:yn.attributesOrder},r[go]=yn.children}),Fc(nc("strong/b em/i"),yn=>{const go=nc(yn,"/");o[go[1]].outputName=go[0]}),Fc(gt,(yn,go)=>{o[go]&&(e.padd_empty_block_inline_children&&(o[go].paddInEmptyBlock=!0),o[go].removeEmpty=!0)}),Fc(nc("ol ul blockquote a table tbody"),yn=>{o[yn]&&(o[yn].removeEmpty=!0)}),Fc(nc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),yn=>{o[yn].paddEmpty=!0}),Fc(nc("span"),yn=>{o[yn].removeEmptyAttrs=!0})),Ft(e.custom_elements),Qt(e.valid_children),ke(e.extended_valid_elements),Qt("+ol[ul|ol],+ul[ul|ol]"),Fc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(yn,go)=>{o[go]&&(o[go].parentsRequired=nc(yn))}),e.invalid_elements&&Fc(Ot(e.invalid_elements),yn=>{o[yn]&&delete o[yn]}),On("span")||ke("span[!data-mce-type|*]");const Kn=Ge(N),Ro=Ge(R),cs=Ge(F),wr=Ge(X),zc=Ge(He),Ma=Ge(we),st=Ge(gt),Mt=Ge(Object.seal(j)),io=Ge(ee),yt=Ge(de),Kt=Ge(be),nn=Ge(Y),Ct=Ge(ot),Hn=Ge(Object.seal(f)),Mn=(yn,go)=>{const Hr=r[yn.toLowerCase()];return!!(Hr&&Hr[go.toLowerCase()])},rc=(yn,go)=>{const Hr=On(yn);if(Hr)if(go){if(Hr.attributes[go])return!0;const ps=Hr.attributePatterns;if(ps){let lr=ps.length;for(;lr--;)if(ps[lr].pattern.test(go))return!0}}else return!0;return!1},Ns=Ge(u);return{type:C,children:r,elements:o,getValidStyles:Kn,getValidClasses:cs,getBlockElements:zc,getInvalidStyles:Ro,getVoidElements:Mt,getTextBlockElements:Ma,getTextInlineElements:st,getBoolAttrs:wr,getElementRule:On,getSelfClosingElements:io,getNonEmptyElements:yt,getMoveCaretBeforeOnEnterElements:Kt,getWhitespaceElements:nn,getTransparentElements:Ct,getSpecialElements:Hn,isValidChild:Mn,isValid:rc,getCustomElements:Ns,addValidElements:ke,setValidElements:xt,addCustomElements:Ft,addValidChildren:Qt}},bm=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const C=Dl;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let R=0;R<E.length;R++)u[E[R]]=C+R,u[C+R]=E[R];const N={parse:R=>{const F={};let Y=!1;const ee=e.url_converter,j=e.url_converter_scope||N,X=(Ee,ke,xt)=>{const Ft=F[Ee+"-top"+ke];if(!Ft)return;const Qt=F[Ee+"-right"+ke];if(!Qt)return;const On=F[Ee+"-bottom"+ke];if(!On)return;const Kn=F[Ee+"-left"+ke];if(!Kn)return;const Ro=[Ft,Qt,On,Kn];let cs=Ro.length-1;for(;cs--&&Ro[cs]===Ro[cs+1];);cs>-1&&xt||(F[Ee+ke]=cs===-1?Ro[0]:Ro.join(" "),delete F[Ee+"-top"+ke],delete F[Ee+"-right"+ke],delete F[Ee+"-bottom"+ke],delete F[Ee+"-left"+ke])},fe=Ee=>{const ke=F[Ee];if(!ke)return;const xt=ke.split(" ");let Ft=xt.length;for(;Ft--;)if(xt[Ft]!==xt[0])return!1;return F[Ee]=xt[0],!0},de=(Ee,ke,xt,Ft)=>{fe(ke)&&fe(xt)&&fe(Ft)&&(F[Ee]=F[ke]+" "+F[xt]+" "+F[Ft],delete F[ke],delete F[xt],delete F[Ft])},be=Ee=>(Y=!0,u[Ee]),we=(Ee,ke)=>(Y&&(Ee=Ee.replace(/\uFEFF[0-9]/g,xt=>u[xt])),ke||(Ee=Ee.replace(/\\([\'\";:])/g,"$1")),Ee),He=Ee=>String.fromCharCode(parseInt(Ee.slice(1),16)),gt=Ee=>Ee.replace(/\\[0-9a-f]+/gi,He),ot=(Ee,ke,xt,Ft,Qt,On)=>{if(Qt=Qt||On,Qt)return Qt=we(Qt),"'"+Qt.replace(/\'/g,"\\'")+"'";if(ke=we(ke||xt||Ft||""),!e.allow_script_urls){const Kn=ke.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Kn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Kn))return""}return ee&&(ke=ee.call(j,ke,"style")),"url('"+ke.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,be).replace(/\"[^\"]+\"|\'[^\']+\'/g,ke=>ke.replace(/[;:]/g,be));let Ee;for(;Ee=r.exec(R);){r.lastIndex=Ee.index+Ee[0].length;let ke=Ee[1].replace(c,"").toLowerCase(),xt=Ee[2].replace(c,"");if(ke&&xt){if(ke=gt(ke),xt=gt(xt),ke.indexOf(C)!==-1||ke.indexOf('"')!==-1||!e.allow_script_urls&&(ke==="behavior"||/expression\s*\(|\/\*|\*\//.test(xt)))continue;ke==="font-weight"&&xt==="700"?xt="bold":(ke==="color"||ke==="background-color")&&(xt=xt.toLowerCase()),xt=xt.replace(o,ot),F[ke]=Y?we(xt,!0):xt}}X("border","",!0),X("border","-width"),X("border","-color"),X("border","-style"),X("padding",""),X("margin",""),de("border","border-width","border-style","border-color"),F.border==="medium none"&&delete F.border,F["border-image"]==="none"&&delete F["border-image"]}return F},serialize:(R,F)=>{let Y="";const ee=(X,fe)=>{const de=fe[X];if(de)for(let be=0,we=de.length;be<we;be++){const He=de[be],gt=R[He];gt&&(Y+=(Y.length>0?" ":"")+He+": "+gt+";")}},j=(X,fe)=>{if(!b||!fe)return!0;let de=b["*"];return de&&de[X]?!1:(de=b[fe],!(de&&de[X]))};return F&&f?(ee("*",f),ee(F,f)):ut(R,(X,fe)=>{X&&j(fe,F)&&(Y+=(Y.length>0?" ":"")+fe+": "+X+";")}),Y}};return N},aw={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Qf=e=>e instanceof Event||ue(e.initEvent),JE=e=>e.isDefaultPrevented===mt||e.isDefaultPrevented===Ne,cw=e=>Jt(e.preventDefault)||Qf(e),gh=(e,n)=>{const o=n!=null?n:{};for(const r in e)tn(aw,r)||(o[r]=e[r]);return ze(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},eg=(e,n,o,r)=>{var c;const u=gh(n,r);return u.type=e,Jt(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),cw(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=mt,ue(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=mt,ue(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=mt,u.stopPropagation()},JE(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?mt:Ne,u.isPropagationStopped=u.cancelBubble===!0?mt:Ne,u.isImmediatePropagationStopped=Ne)),u},Bb="mce-data-",tg=/^(?:mouse|contextmenu)|click/,Pb=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Ip=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},$b=e=>ze(e)&&tg.test(e.type),af=(e,n)=>{const o=eg(e.type,e,document,n);if($b(e)&&Go(e.pageX)&&!Go(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},Pu=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Ip(e,"DOMContentLoaded",f),Ip(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():Pb(e,"DOMContentLoaded",f),o.domLoaded||Pb(e,"load",f)};class Ta{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Bb+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,C=F=>{u.executeHandlers(af(F||b.event),E)};if(!n||Je(n)||Du(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),c=c||n;const N=o.split(" ");let R=N.length;for(;R--;){let F=N[R],Y=C,ee=!1,j=!1;if(F==="DOMContentLoaded"&&(F="ready"),u.domLoaded&&F==="ready"&&n.readyState==="complete"){r.call(c,af({type:F}));continue}!u.hasFocusIn&&(F==="focusin"||F==="focusout")&&(ee=!0,j=F==="focusin"?"focus":"blur",Y=X=>{const fe=af(X||b.event);fe.type=fe.type==="focus"?"focusin":"focusout",u.executeHandlers(fe,E)}),f=u.events[E][F],f?F==="ready"&&u.domLoaded?r(af({type:F})):f.push({func:r,scope:c}):(u.events[E][F]=f=[{func:r,scope:c}],f.fakeName=j,f.capture=ee,f.nativeHandler=Y,F==="ready"?Pu(n,Y,u):Pb(n,j||F,Y,ee))}return n=f=null,r}unbind(n,o,r){if(!n||Je(n)||Du(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const C=f[b],E=u[C];if(E){if(r){let N=E.length;for(;N--;)if(E[N].func===r){const R=E.nativeHandler,F=E.fakeName,Y=E.capture,ee=E.slice(0,N).concat(E.slice(N+1));ee.nativeHandler=R,ee.fakeName=F,ee.capture=Y,u[C]=ee}}(!r||E.length===0)&&(delete u[C],Ip(n,E.fakeName||C,E.nativeHandler,E.capture))}}}else ut(u,(f,b)=>{Ip(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(tn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch(f){n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Je(n)||Du(n))return this;const c=af({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||Je(n)||Du(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Ta.Event=new Ta;const Lp=Ze.each,lw=Ze.grep,Ib="data-mce-style",sy=Ze.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),$l=(e,n,o)=>{Jt(o)||o===""?Ls(e,n):Qs(e,n,o)},QE=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Ad=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&Je(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},hh=(e,n)=>{const o=Ka(n,"style"),r=e.serialize(e.parse(o),zo(n));$l(n,Ib,r)},iw=(e,n)=>Ps(e)?tn(sy,n)?e+"":e+"px":e,uw=(e,n,o)=>{const r=QE(n);Jt(o)||o===""?aa(e,r):am(e,r,iw(o,r))},ek=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,C)=>{const E=ne.fromDom(f);ue(n.url_converter)&&ze(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),C,f));const N="data-mce-"+C;$l(E,N,b),$l(E,C,b)},get:(f,b)=>{const C=ne.fromDom(f);return Ka(C,"data-mce-"+b)||Ka(C,b)}},u={style:{set:(f,b)=>{const C=ne.fromDom(f);r&&$l(C,Ib,b),Ls(C,"style"),re(b)&&Uf(C,e.parse(b))},get:f=>{const b=ne.fromDom(f),C=Ka(b,Ib)||Ka(b,"style");return e.serialize(e.parse(C),zo(b))}}};return r&&(u.href=u.src=c),u},rs=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,C=ih.forElement(ne.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],N=n.schema?n.schema:Pl({}),R=bm({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),F=n.ownEvents?new Ta:Ta.Event,Y=N.getBlockElements(),ee=Se=>re(Se)?tn(Y,Se):Me(Se)&&(tn(Y,Se.nodeName)||sf(N,Se)),j=Se=>Se&&e&&re(Se)?e.getElementById(Se):Se,X=Se=>{const xe=j(Se);return ze(xe)?ne.fromDom(xe):null},fe=(Se,xe,rt="")=>{let Xe;const Zt=X(Se);if(ze(Zt)&&Uo(Zt)){const uo=pp[xe];uo&&uo.get?Xe=uo.get(Zt.dom,xe):Xe=Ka(Zt,xe)}return ze(Xe)?Xe:rt},de=Se=>{const xe=j(Se);return Jt(xe)?[]:xe.attributes},be=(Se,xe,rt)=>{Mt(Se,Xe=>{if(Me(Xe)){const Zt=ne.fromDom(Xe),uo=rt===""?null:rt,ws=Ka(Zt,xe),Ss=pp[xe];Ss&&Ss.set?Ss.set(Zt.dom,uo,xe):$l(Zt,xe,uo),ws!==uo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Zt.dom,attrName:xe,attrValue:uo})}})},we=(Se,xe)=>Se.cloneNode(xe),He=()=>n.root_element||e.body,gt=Se=>{const xe=Jg(Se);return{x:xe.x,y:xe.y,w:xe.width,h:xe.height}},ot=(Se,xe)=>Wt(e.body,j(Se),xe),Ee=(Se,xe,rt)=>{Mt(Se,Xe=>{const Zt=ne.fromDom(Xe);uw(Zt,xe,rt),n.update_styles&&hh(R,Zt)})},ke=(Se,xe)=>{Mt(Se,rt=>{const Xe=ne.fromDom(rt);ut(xe,(Zt,uo)=>{uw(Xe,uo,Zt)}),n.update_styles&&hh(R,Xe)})},xt=(Se,xe,rt)=>{const Xe=j(Se);if(!(Jt(Xe)||!Me(Xe)))return rt?Yl(ne.fromDom(Xe),QE(xe)):(xe=xe.replace(/-(\D)/g,(Zt,uo)=>uo.toUpperCase()),xe==="float"&&(xe="cssFloat"),Xe.style?Xe.style[xe]:void 0)},Ft=Se=>{const xe=j(Se);if(!xe)return{w:0,h:0};let rt=xt(xe,"width"),Xe=xt(xe,"height");return(!rt||rt.indexOf("px")===-1)&&(rt="0"),(!Xe||Xe.indexOf("px")===-1)&&(Xe="0"),{w:parseInt(rt,10)||xe.offsetWidth||xe.clientWidth,h:parseInt(Xe,10)||xe.offsetHeight||xe.clientHeight}},Qt=Se=>{const xe=j(Se),rt=ot(xe),Xe=Ft(xe);return{x:rt.x,y:rt.y,w:Xe.w,h:Xe.h}},On=(Se,xe)=>{if(!Se)return!1;const rt=Fn(Se)?Se:[Se];return Xo(rt,Xe=>Ya(ne.fromDom(Xe),xe))},Kn=(Se,xe,rt,Xe)=>{const Zt=[];let uo=j(Se);Xe=Xe===void 0;const ws=rt||(He().nodeName!=="BODY"?He().parentNode:null);if(re(xe))if(xe==="*")xe=Me;else{const Ss=xe;xe=sd=>On(sd,Ss)}for(;uo&&!(uo===ws||Jt(uo.nodeType)||wi(uo)||Qg(uo));){if(!xe||xe(uo))if(Xe)Zt.push(uo);else return[uo];uo=uo.parentNode}return Xe?Zt:null},Ro=(Se,xe,rt)=>{const Xe=Kn(Se,xe,rt,!1);return Xe&&Xe.length>0?Xe[0]:null},cs=(Se,xe,rt)=>{let Xe=xe;if(Se){re(xe)&&(Xe=Zt=>On(Zt,xe));for(let Zt=Se[rt];Zt;Zt=Zt[rt])if(ue(Xe)&&Xe(Zt))return Zt}return null},wr=(Se,xe)=>cs(Se,xe,"nextSibling"),zc=(Se,xe)=>cs(Se,xe,"previousSibling"),Ma=Se=>ue(Se.querySelectorAll),st=(Se,xe)=>{var rt,Xe;const Zt=(Xe=(rt=j(xe))!==null&&rt!==void 0?rt:n.root_element)!==null&&Xe!==void 0?Xe:e;return Ma(Zt)?dr(Zt.querySelectorAll(Se)):[]},Mt=function(Se,xe,rt){const Xe=rt!=null?rt:this;if(Fn(Se)){const Zt=[];return Lp(Se,(uo,ws)=>{const Ss=j(uo);Ss&&Zt.push(xe.call(Xe,Ss,ws))}),Zt}else{const Zt=j(Se);return Zt?xe.call(Xe,Zt):!1}},io=(Se,xe)=>{Mt(Se,rt=>{ut(xe,(Xe,Zt)=>{be(rt,Zt,Xe)})})},yt=(Se,xe)=>{Mt(Se,rt=>{const Xe=ne.fromDom(rt);wd(Xe,xe)})},Kt=(Se,xe,rt,Xe,Zt)=>Mt(Se,uo=>{const ws=re(xe)?e.createElement(xe):xe;return ze(rt)&&io(ws,rt),Xe&&(!re(Xe)&&Xe.nodeType?ws.appendChild(Xe):re(Xe)&&yt(ws,Xe)),Zt?ws:uo.appendChild(ws)}),nn=(Se,xe,rt)=>Kt(e.createElement(Se),Se,xe,rt,!0),Ct=tl.decode,Hn=tl.encodeAllRaw,Mn=(Se,xe,rt="")=>{let Xe="<"+Se;for(const Zt in xe)Ur(xe,Zt)&&(Xe+=" "+Zt+'="'+Hn(xe[Zt])+'"');return ba(rt)&&tn(N.getVoidElements(),Se)?Xe+" />":Xe+">"+rt+"</"+Se+">"},rc=Se=>{const xe=e.createElement("div"),rt=e.createDocumentFragment();rt.appendChild(xe),Se&&(xe.innerHTML=Se);let Xe;for(;Xe=xe.firstChild;)rt.appendChild(Xe);return rt.removeChild(xe),rt},Ns=(Se,xe)=>Mt(Se,rt=>{const Xe=ne.fromDom(rt);return xe&&Ie(Zr(Xe),Zt=>{La(Zt)&&Zt.dom.length===0?os(Zt):yo(Xe,Zt)}),os(Xe),Xe.dom}),yn=Se=>Mt(Se,xe=>{const rt=xe.attributes;for(let Xe=rt.length-1;Xe>=0;Xe--)xe.removeAttributeNode(rt.item(Xe))}),go=Se=>R.parse(Se),Hr=(Se,xe)=>R.serialize(Se,xe),ps=Se=>{if(Vm!==rs.DOM&&e===document){if(o[Se])return;o[Se]=!0}let xe=e.getElementById("mceDefaultStyles");if(!xe){xe=e.createElement("style"),xe.id="mceDefaultStyles",xe.type="text/css";const rt=e.head;rt.firstChild?rt.insertBefore(xe,rt.firstChild):rt.appendChild(xe)}xe.styleSheet?xe.styleSheet.cssText+=Se:xe.appendChild(e.createTextNode(Se))},lr=Se=>{Se||(Se=""),Ie(Se.split(","),xe=>{c[xe]=!0,C.load(xe).catch(Fe)})},Fo=(Se,xe,rt)=>{Mt(Se,Xe=>{if(Me(Xe)){const Zt=ne.fromDom(Xe),uo=xe.split(" ");Ie(uo,ws=>{ze(rt)?(rt?xu:dd)(Zt,ws):md(Zt,ws)})}})},Bs=(Se,xe)=>{Fo(Se,xe,!0)},Jr=(Se,xe)=>{Fo(Se,xe,!1)},ed=(Se,xe)=>{const rt=X(Se),Xe=xe.split(" ");return ze(rt)&&Es(Xe,Zt=>fd(rt,Zt))},Uc=Se=>{Mt(Se,xe=>aa(ne.fromDom(xe),"display"))},Fm=Se=>{Mt(Se,xe=>am(ne.fromDom(xe),"display","none"))},bu=Se=>{const xe=X(Se);return ze(xe)&&gr(Ja(xe,"display"),"none")},mb=Se=>(Se||"mce_")+u++,fb=Se=>{const xe=X(Se);return ze(xe)?Me(xe.dom)?xe.dom.outerHTML:zn(xe):""},Gd=(Se,xe)=>{Mt(Se,rt=>{Me(rt)&&(rt.outerHTML=xe)})},qd=(Se,xe)=>{const rt=j(xe);return Mt(Se,Xe=>{const Zt=rt==null?void 0:rt.parentNode,uo=rt==null?void 0:rt.nextSibling;return Zt&&(uo?Zt.insertBefore(Xe,uo):Zt.appendChild(Xe)),Xe})},ga=(Se,xe,rt)=>Mt(xe,Xe=>{var Zt;const uo=Fn(xe)?Se.cloneNode(!0):Se;return rt&&Lp(lw(Xe.childNodes),ws=>{uo.appendChild(ws)}),(Zt=Xe.parentNode)===null||Zt===void 0||Zt.replaceChild(uo,Xe),Xe}),td=(Se,xe)=>{if(Se.nodeName!==xe.toUpperCase()){const rt=nn(xe);return Lp(de(Se),Xe=>{be(rt,Xe.nodeName,fe(Se,Xe.nodeName))}),ga(rt,Se,!0),rt}else return Se},Hm=(Se,xe)=>{let rt=Se;for(;rt;){let Xe=xe;for(;Xe&&rt!==Xe;)Xe=Xe.parentNode;if(rt===Xe)break;rt=rt.parentNode}return!rt&&Se.ownerDocument?Se.ownerDocument.documentElement:rt},nd=Se=>{if(Me(Se)){const xe=Se.nodeName.toLowerCase()==="a"&&!fe(Se,"href")&&fe(Se,"id");if(fe(Se,"name")||fe(Se,"data-mce-bookmark")||xe)return!0}return!1},od=(Se,xe)=>{let rt=0;if(nd(Se))return!1;const Xe=Se.firstChild;if(Xe){const Zt=new Er(Xe,Se),uo=N?N.getWhitespaceElements():{},ws=xe||(N?N.getNonEmptyElements():null);let Ss=Xe;do{if(Me(Ss)){const sd=Ss.getAttribute("data-mce-bogus");if(sd){Ss=Zt.next(sd==="all");continue}const gb=Ss.nodeName.toLowerCase();if(ws&&ws[gb]){if(gb==="br"){rt++,Ss=Zt.next();continue}return!1}if(nd(Ss))return!1}if(Du(Ss)||Je(Ss)&&!of(Ss.data)||Je(Ss)&&Ss.parentNode&&uo[Ss.parentNode.nodeName]&&of(Ss.data))return!1;Ss=Zt.next()}while(Ss)}return rt<=1},Pf=()=>e.createRange(),Na=(Se,xe,rt)=>{let Xe=Pf(),Zt,uo;if(Se&&xe&&Se.parentNode&&xe.parentNode){const ws=Se.parentNode;return Xe.setStart(ws,Ad(Se)),Xe.setEnd(xe.parentNode,Ad(xe)),Zt=Xe.extractContents(),Xe=Pf(),Xe.setStart(xe.parentNode,Ad(xe)+1),Xe.setEnd(ws,Ad(Se)+1),uo=Xe.extractContents(),ws.insertBefore(Bp(Vm,Zt),Se),rt?ws.insertBefore(rt,Se):ws.insertBefore(xe,Se),ws.insertBefore(Bp(Vm,uo),Se),Ns(Se),rt||xe}else return},zg=(Se,xe,rt,Xe)=>{if(Fn(Se)){let Zt=Se.length;const uo=[];for(;Zt--;)uo[Zt]=zg(Se[Zt],xe,rt,Xe);return uo}else return n.collect&&(Se===e||Se===r)&&E.push([Se,xe,rt,Xe]),F.bind(Se,xe,rt,Xe||Vm)},$f=(Se,xe,rt)=>{if(Fn(Se)){let Xe=Se.length;const Zt=[];for(;Xe--;)Zt[Xe]=$f(Se[Xe],xe,rt);return Zt}else{if(E.length>0&&(Se===e||Se===r)){let Xe=E.length;for(;Xe--;){const[Zt,uo,ws]=E[Xe];Se===Zt&&(!xe||xe===uo)&&(!rt||rt===ws)&&F.unbind(Zt,uo,ws)}}return F.unbind(Se,xe,rt)}},Kd=(Se,xe,rt)=>F.dispatch(Se,xe,rt),hp=(Se,xe,rt)=>F.dispatch(Se,xe,rt),$0=Se=>{if(Se&&Me(Se)){const xe=Se.getAttribute("data-mce-contenteditable");return xe&&xe!=="inherit"?xe:Se.contentEditable!=="inherit"?Se.contentEditable:null}else return null},Vm={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:C,boundEvents:E,styles:R,schema:N,events:F,isBlock:ee,root:null,clone:we,getRoot:He,getViewPort:gt,getRect:Qt,getSize:Ft,getParent:Ro,getParents:Kn,get:j,getNext:wr,getPrev:zc,select:st,is:On,add:Kt,create:nn,createHTML:Mn,createFragment:rc,remove:Ns,setStyle:Ee,getStyle:xt,setStyles:ke,removeAllAttribs:yn,setAttrib:be,setAttribs:io,getAttrib:fe,getPos:ot,parseStyle:go,serializeStyle:Hr,addStyle:ps,loadCSS:lr,addClass:Bs,removeClass:Jr,hasClass:ed,toggleClass:Fo,show:Uc,hide:Fm,isHidden:bu,uniqueId:mb,setHTML:yt,getOuterHTML:fb,setOuterHTML:Gd,decode:Ct,encode:Hn,insertAfter:qd,replace:ga,rename:td,findCommonAncestor:Hm,run:Mt,getAttribs:de,isEmpty:od,createRng:Pf,nodeIndex:Ad,split:Na,bind:zg,unbind:$f,fire:hp,dispatch:Kd,getContentEditable:$0,getContentEditableParent:Se=>{const xe=He();let rt=null;for(let Xe=Se;Xe&&Xe!==xe&&(rt=$0(Xe),rt===null);Xe=Xe.parentNode);return rt},isEditable:Se=>{if(ze(Se)){const xe=Me(Se)?Se:Se.parentElement,rt=$0(He())==="true";return ze(xe)&&Pn(ne.fromDom(xe),rt)}else return!1},destroy:()=>{if(E.length>0){let Se=E.length;for(;Se--;){const[xe,rt,Xe]=E[Se];F.unbind(xe,rt,Xe)}}ut(c,(Se,xe)=>{C.unload(xe),delete c[xe]})},isChildOf:(Se,xe)=>Se===xe||xe.contains(Se),dumpRng:Se=>"startContainer: "+Se.startContainer.nodeName+", startOffset: "+Se.startOffset+", endContainer: "+Se.endContainer.nodeName+", endOffset: "+Se.endOffset},pp=ek(R,n,Ge(Vm));return Vm};rs.DOM=rs(document),rs.nodeIndex=Ad;const tk=rs.DOM,nk=0,dw=1,Lb=2,mw=3;class Ti{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=tk;let u;const f=()=>{c.remove(E),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},E=c.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=Ze._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Lb}markDone(n){this.states[n]=Lb}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=nk),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,E)=>{vo(o.scriptLoadedCallbacks,E).each(N=>{Ie(N,R=>R[C](E))}),delete o.scriptLoadedCallbacks[E]},c=C=>{const E=jt(C,N=>N.status==="rejected");return E.length>0?Promise.reject(ea(E,({reason:N})=>Fn(N)?N:[N])):Promise.resolve()},u=C=>Promise.allSettled(Vt(C,E=>o.states[E]===Lb?(r("resolve",E),Promise.resolve()):o.states[E]===mw?(r("reject",E),Promise.reject(E)):(o.states[E]=dw,o.loadScript(E).then(()=>{o.states[E]=Lb,r("resolve",E);const N=o.queue;return N.length>0?(o.queue=[],u(N).then(c)):Promise.resolve()},()=>(o.states[E]=mw,r("reject",E),Promise.reject(E)))))),f=C=>(o.loading=!0,u(C).then(E=>{o.loading=!1;const N=o.queueLoadedCallbacks.shift();return V.from(N).each(nr),c(E)})),b=wc(n);return o.loading?new Promise((C,E)=>{o.queueLoadedCallbacks.push(()=>f(b).then(C,E))}):f(b)}}Ti.ScriptLoader=new Ti;const Va=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Fb=e=>Ut(e)&&tn(e,"raw"),vm=e=>Fn(e)&&e.length>1,ng={},Ea=Va("en"),fw=()=>vo(ng,Ea.get()),$u={getData:()=>Bn(ng,e=>J({},e)),setCode:e=>{e&&Ea.set(e)},getCode:()=>Ea.get(),add:(e,n)=>{let o=ng[e];o||(ng[e]=o={}),ut(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=fw().getOr({}),o=f=>ue(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return vo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Fb(e))return o(e.raw);if(vm(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(C,E)=>tn(f,E)?o(f[E]):C);return u(b)}return u(c(e))},isRtl:()=>fw().bind(e=>vo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>tn(ng,e)},nl=()=>{const e=[],n={},o={},r=[],c=(j,X)=>{const fe=jt(r,de=>de.name===j&&de.state===X);Ie(fe,de=>de.resolve())},u=j=>tn(n,j),f=j=>tn(o,j),b=j=>{if(o[j])return o[j].instance},C=(j,X)=>{const fe=$u.getCode(),de=","+(X||"")+",";!fe||X&&de.indexOf(","+fe+",")===-1||Ti.ScriptLoader.add(n[j]+"/langs/"+fe+".js")},E=(j,X)=>{nl.languageLoad!==!1&&(u(j)?C(j,X):ee(j,"loaded").then(()=>C(j,X)))},N=(j,X)=>(e.push(X),o[j]={instance:X},c(j,"added"),X),R=j=>{delete n[j],delete o[j]},F=(j,X)=>re(X)?re(j)?{prefix:"",resource:X,suffix:""}:{prefix:j.prefix,resource:X,suffix:j.suffix}:X,Y=(j,X)=>{if(n[j])return Promise.resolve();let fe=re(X)?X:X.prefix+X.resource+X.suffix;fe.indexOf("/")!==0&&fe.indexOf("://")===-1&&(fe=nl.baseURL+"/"+fe),n[j]=fe.substring(0,fe.lastIndexOf("/"));const de=()=>(c(j,"loaded"),Promise.resolve());return o[j]?de():Ti.ScriptLoader.add(fe).then(de)},ee=(j,X="added")=>X==="added"&&f(j)||X==="loaded"&&u(j)?Promise.resolve():new Promise(fe=>{r.push({name:j,state:X,resolve:fe})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:N,remove:R,createUrl:F,load:Y,waitFor:ee}};nl.languageLoad=!0,nl.baseURL="",nl.PluginManager=nl(),nl.ThemeManager=nl(),nl.ModelManager=nl();const Gr=e=>{const n=Va(V.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(V.some(b))}}},bw=e=>{const n=Va(V.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(V.some(setInterval(b,e)))}}},ms=()=>{const e=Gr(Fe),n=o=>e.get().each(o);return We(J({},e),{on:n})},gc=(e,n)=>{let o=null;return{cancel:()=>{Q(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{Q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Ji=(e,n)=>{let o=null;const r=()=>{Q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},hc=Ge("mce-annotation"),ym=Ge("data-mce-annotation"),Fp=Ge("data-mce-annotation-uid"),uf=Ge("data-mce-annotation-active"),ti=Ge("data-mce-annotation-classes"),Ei=Ge("data-mce-annotation-attrs"),ry=e=>n=>ho(n,e),Hp=(e,n)=>{const o=e.selection.getRng(),r=ne.fromDom(o.startContainer),c=ne.fromDom(e.getBody()),u=n.fold(()=>"."+hc(),C=>`[${ym()}="${C}"]`),f=pd(r,o.startOffset).getOr(r);return qt(f,u,ry(c)).bind(C=>Ac(C,`${Fp()}`).bind(E=>Ac(C,`${ym()}`).map(N=>{const R=yw(e,E);return{uid:E,name:N,elements:R}})))},vw=e=>Uo(e)&&fd(e,hc()),ay=(e,n)=>ra(e,"data-mce-bogus")||Ep(e,'[data-mce-bogus="all"]',ry(n)),yw=(e,n)=>{const o=ne.fromDom(e.getBody()),r=wa(o,`[${Fp()}="${n}"]`);return jt(r,c=>!ay(c,o))},ph=(e,n)=>{const o=ne.fromDom(e.getBody()),r=wa(o,`[${ym()}="${n}"]`),c={};return Ie(r,u=>{if(!ay(u,o)){const f=Ka(u,Fp()),b=vo(c,f).getOr([]);c[f]=b.concat([u])}}),c},Cw=(e,n)=>{const o=Va({}),r=()=>({listeners:[],previous:ms()}),c=(R,F)=>{u(R,Y=>(F(Y),Y))},u=(R,F)=>{const Y=o.get(),ee=vo(Y,R).getOrThunk(r),j=F(ee);Y[R]=j,o.set(Y)},f=(R,F,Y)=>{c(R,ee=>{Ie(ee.listeners,j=>j(!0,R,{uid:F,nodes:Vt(Y,X=>X.dom)}))})},b=R=>{c(R,F=>{Ie(F.listeners,Y=>Y(!1,R))})},C=(R,F)=>{Ie(yw(e,R),Y=>{F?Qs(Y,uf(),"true"):Ls(Y,uf())})},E=Ji(()=>{const R=Qo(n.getNames());Ie(R,F=>{u(F,Y=>{const ee=Y.previous.get();return Hp(e,V.some(F)).fold(()=>{ee.each(j=>{b(F),Y.previous.clear(),C(j,!1)})},({uid:j,name:X,elements:fe})=>{gr(ee,j)||(ee.each(de=>C(de,!1)),f(X,j,fe),Y.previous.set(j),C(j,!0))}),{previous:Y.previous,listeners:Y.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(R,F)=>{u(R,Y=>({previous:Y.previous,listeners:Y.listeners.concat([F])}))}}},ok=(e,n)=>{const o=ym(),r=u=>V.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Fp(),null),u.attr(ym(),null),u.attr(uf(),null);const C=V.from(u.attr(Ei())).map(F=>F.split(",")).getOr([]),E=V.from(u.attr(ti())).map(F=>F.split(",")).getOr([]);Ie(C,F=>u.attr(F,null));const N=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=di(N,[hc()].concat(E));u.attr("class",R.length>0?R.join(" "):null),u.attr(ti(),null),u.attr(Ei(),null)};e.serializer.addTempAttr(uf()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},sk=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>vo(e,c).map(u=>u.settings),getNames:()=>Is(e)}};let cy=0;const ww=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return cy++,e+"_"+r+cy+String(o)},Sw=(e,n)=>{Ie(n,o=>{xu(e,o)})},xw=(e,n)=>{Ie(n,o=>{dd(e,o)})},Tw=(e,n)=>ne.fromDom(e.dom.cloneNode(n)),df=e=>Tw(e,!1),Ew=e=>Tw(e,!0),kw=(e,n)=>{const o=ne.fromTag(n),r=tm(e);return Ca(o,r),o},rk=(e,n)=>{const o=kw(e,n);ku(e,o);const r=Zr(e);return _u(o,r),os(e),o},_w=(e,n,o=Ne)=>{const r=new Er(e,n),c=u=>{let f;do f=r[u]();while(f&&!Je(f)&&!o(f));return V.from(f).filter(Je)};return{current:()=>V.from(r.current()).filter(Je),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},og=(e,n)=>{const o=n||(f=>e.isBlock(f)||Ds(f)||En(f)),r=(f,b,C,E)=>{if(Je(f)){const N=E(f,b,f.data);if(N!==-1)return V.some({container:f,offset:N})}return C().bind(N=>r(N.container,N.offset,C,E))};return{backwards:(f,b,C,E)=>{const N=_w(f,E!=null?E:e.getRoot(),o);return r(f,b,()=>N.prev().map(R=>({container:R,offset:R.length})),C).getOrNull()},forwards:(f,b,C,E)=>{const N=_w(f,E!=null?E:e.getRoot(),o);return r(f,b,()=>N.next().map(R=>({container:R,offset:0})),C).getOrNull()}}},Fs=Math.round,Cm=e=>e?{left:Fs(e.left),top:Fs(e.top),bottom:Fs(e.bottom),right:Fs(e.right),width:Fs(e.width),height:Fs(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ow=(e,n)=>(e=Cm(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),ak=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Vp=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,ka=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Vp(n.top-e.bottom,e,n)},yl=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Vp(n.bottom-e.top,e,n),ly=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Vb=e=>Jo(e,(n,o)=>n.fold(()=>V.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return V.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),V.none()),zb=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},ck=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Aw=(e,n,o)=>Math.min(Math.max(e,n),o),zp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Cl=(e,n)=>{if(Me(e)&&e.hasChildNodes()){const o=e.childNodes,r=Aw(n,0,o.length-1);return o[r]}else return e},Dw=(e,n)=>{if(!(n<0&&Me(e)&&e.hasChildNodes()))return Cl(e,n)},Hs=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Qi=e=>re(e)&&e.charCodeAt(0)>=768&&Hs.test(e),Dd=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},lk=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},iy=Me,Rw=Wo,mf=Ou("display","block table"),Mw=Ou("float","left right"),Rd=lk(iy,Rw,So(Mw)),uy=So(Ou("white-space","pre pre-line pre-wrap")),Up=Je,dy=Ds,Ub=rs.nodeIndex,Wp=Dw,my=e=>e?e.createRange():rs.DOM.createRng(),Zp=e=>re(e)&&/[\r\n\t ]/.test(e),Nw=e=>!!e.setStart&&!!e.setEnd,wm=e=>{const n=e.startContainer,o=e.startOffset;if(Zp(e.toString())&&uy(n.parentNode)&&Je(n)){const r=n.data;if(Zp(r[o-1])||Zp(r[o+1]))return!0}return!1},Wb=e=>{const n=e.ownerDocument,o=my(n),r=n.createTextNode(Ao),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Cm(o.getBoundingClientRect());return c.removeChild(r),u},Bw=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&Je(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),ff(u)}else return null},fy=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ff=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Cm(r[0]):o=Cm(e.getBoundingClientRect()),!Nw(e)&&dy(e)&&fy(o)?Wb(e):fy(o)&&Nw(e)&&(n=Bw(e))!==null&&n!==void 0?n:o},Md=(e,n)=>{const o=Ow(e,n);return o.width=1,o.right=o.left+1,o},sg=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&ak(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const C=my(f.ownerDocument);if(b<f.data.length){if(Qi(f.data[b]))return;if(Qi(f.data[b-1])&&(C.setStart(f,b),C.setEnd(f,b+1),!wm(C))){o(Md(ff(C),!1));return}}b>0&&(C.setStart(f,b-1),C.setEnd(f,b),wm(C)||o(Md(ff(C),!1))),b<f.data.length&&(C.setStart(f,b),C.setEnd(f,b+1),wm(C)||o(Md(ff(C),!0)))},c=e.container(),u=e.offset();if(Up(c))return r(c,u),n;if(iy(c))if(e.isAtEnd()){const f=Wp(c,u);Up(f)&&r(f,f.data.length),Rd(f)&&!dy(f)&&o(Md(ff(f),!1))}else{const f=Wp(c,u);if(Up(f)&&r(f,0),Rd(f)&&e.isAtEnd())return o(Md(ff(f),!1)),n;const b=Wp(e.container(),e.offset()-1);Rd(b)&&!dy(b)&&(mf(b)||mf(f)||!Rd(f))&&o(Md(ff(b),!1)),Rd(f)&&o(Md(ff(f),!0))}return n},De=(e,n,o)=>{const r=()=>(Up(e),n===0),c=()=>Up(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const N=my(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},f=()=>(o||(o=sg(De(e,n))),o),b=()=>f().length>0,C=N=>N&&e===N.container()&&n===N.offset(),E=N=>Wp(e,N?n-1:n);return{container:Ge(e),offset:Ge(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:C,getNode:E}};De.fromRangeStart=e=>De(e.startContainer,e.startOffset),De.fromRangeEnd=e=>De(e.endContainer,e.endOffset),De.after=e=>De(e.parentNode,Ub(e)+1),De.before=e=>De(e.parentNode,Ub(e)),De.isAbove=(e,n)=>Pr(To(n.getClientRects()),$s(e.getClientRects()),ka).getOr(!1),De.isBelow=(e,n)=>Pr($s(n.getClientRects()),To(e.getClientRects()),yl).getOr(!1),De.isAtStart=e=>e?e.isAtStart():!1,De.isAtEnd=e=>e?e.isAtEnd():!1,De.isTextPosition=e=>e?Je(e.container()):!1,De.isElementPosition=e=>!De.isTextPosition(e);const qn=(e,n)=>{Je(n)&&n.data.length===0&&e.remove(n)},tr=(e,n,o)=>{n.insertNode(o),qn(e,o.previousSibling),qn(e,o.nextSibling)},rg=(e,n,o)=>{const r=V.from(o.firstChild),c=V.from(o.lastChild);n.insertNode(o),r.each(u=>qn(e,u.previousSibling)),c.each(u=>qn(e,u.nextSibling))},jp=(e,n,o)=>{Qg(o)?rg(e,n,o):tr(e,n,o)},Co=Je,gy=Sa,Gp=rs.nodeIndex,ia=e=>{const n=e.parentNode;return gy(n)?ia(n):n},Nd=e=>e?ha(e.childNodes,(n,o)=>(gy(o)&&o.nodeName!=="BR"?n=n.concat(Nd(o)):n.push(o),n),[]):[],ik=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Co(o);)n+=o.data.length;return n},Pw=e=>n=>e===n,$w=e=>{let n,o;n=Nd(ia(e)),o=ns(n,Pw(e),e),n=n.slice(0,o+1);const r=ha(n,(c,u,f)=>(Co(u)&&Co(n[f-1])&&c++,c),0);return n=xc(n,Al([e.nodeName])),o=ns(n,Pw(e),e),o-r},bh=e=>(Co(e)?"text()":e.nodeName.toLowerCase())+"["+$w(e)+"]",vh=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},Zb=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(Co(r))u=ik(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(bh(r));let f=vh(e,r);return f=xc(f,So(Sa)),o=o.concat(mr(f,b=>bh(b))),o.reverse().join("/")+","+u},hy=(e,n,o)=>{let r=Nd(e);return r=xc(r,(c,u)=>!Co(c)||!Co(r[u-1])),r=xc(r,Al([n])),r[o]},ol=(e,n)=>{let o=e,r=0;for(;Co(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!Co(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return Co(e)&&n>e.data.length&&(n=e.data.length),De(e,n)},yh=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=ha(r,(f,b)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),hy(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!Co(u)&&u.parentNode){let f;return c==="after"?f=Gp(u)+1:f=Gp(u),De(u.parentNode,f)}return ol(u,parseInt(c,10))},qp=En,Iw=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&Je(c);c=c.previousSibling)r+=e(c.data).length;return r},ag=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],C=e.getRoot();if(Je(u))b.push(o?Iw(n,u,f):f);else{let E=0;const N=u.childNodes;f>=N.length&&N.length&&(E=1,f=Math.max(0,N.length-1)),b.push(e.nodeIndex(N[f],o)+E)}for(let E=u;E&&E!==C;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},ni=(e,n,o,r)=>{const c=n.dom,u=ag(c,e,o,r,!0),f=n.isForward(),b=dm(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return J({start:u,forward:f},b);{const C=ag(c,e,o,r,!1);return J({start:u,end:C,forward:f},b)}},py=(e,n,o)=>{let r=0;return Ze.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},za=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Me(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Lw=e=>(za(e,!0),za(e,!1),e),Sm=(e,n)=>{if(Me(e)&&(e=Cl(e,n),qp(e)))return e;if(fo(e)){Je(e)&&hn(e)&&(e=e.parentNode);let o=e.previousSibling;if(qp(o)||(o=e.nextSibling,qp(o)))return o}},jb=e=>Sm(e.startContainer,e.startOffset)||Sm(e.endContainer,e.endOffset),by=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||qp(r)){const f=r.nodeName;return{name:f,index:py(o.dom,f,r)}}const u=jb(c);if(u){const f=u.tagName;return{name:f,index:py(o.dom,f,u)}}return ni(e,o,n,c)},Fw=e=>{const n=e.getRng();return{start:Zb(e.dom.getRoot(),De.fromRangeStart(n)),end:Zb(e.dom.getRoot(),De.fromRangeEnd(n)),forward:e.isForward()}},vy=e=>({rng:e.getRng(),forward:e.isForward()}),Gb=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},yy=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,C=e.isForward();if(b==="IMG")return{name:b,index:py(o,b,f)};const E=Lw(r.cloneRange());if(!u){E.collapse(!1);const R=Gb(o,c+"_end",n);jp(o,E,R)}r=Lw(r),r.collapse(!0);const N=Gb(o,c+"_start",n);return jp(o,r,N),e.moveToBookmark({id:c,keep:!0,forward:C}),{id:c,forward:C}},uk=(e,n,o=!1)=>n===2?by(Oe,o,e):n===3?Fw(e):n?vy(e):yy(e,!1),Cy=Ve(by,Dn,!0),Ua=e=>{const n=u=>u(e),o=Ge(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:mt,isError:Ne,map:u=>Vs.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>V.some(e)};return c},qr=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Ne,isError:mt,map:n,mapError:r=>Vs.error(r(e)),bind:n,exists:Ne,forall:mt,getOr:Dn,or:Dn,getOrThunk:xo,orThunk:xo,getOrDie:qo(String(e)),each:Fe,toOptional:V.none};return o},Vs={value:Ua,error:qr,fromOption:(e,n)=>e.fold(()=>qr(n),Ua)},zs={generate:e=>{if(!Fn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Ie(e,(r,c)=>{const u=Is(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Fn(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const E=C.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,C)},match:R=>{const F=Is(R);if(n.length!==F.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+F.join(","));if(!Es(n,ee=>an(F,ee)))throw new Error("Not all branches were specified when using match. Specified: "+F.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,C)},log:R=>{}}}}),o}};zs.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const wy=e=>{const n=[],o=[];return Ie(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Sy=e=>e.type==="inline-command"||e.type==="inline-format",Hw=e=>e.type==="block-command"||e.type==="block-format",qb=e=>{const n=r=>Vs.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(Fn(e.format)){if(!Es(e.format,re))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(re(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return Vs.value(c(f))}else return e.cmd!==void 0?re(e.cmd)?Vs.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ut(e))return n("Raw pattern is not an object");if(!re(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!re(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?re(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Vs.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},Kp=e=>jt(e,Hw),Kb=e=>jt(e,Sy),Yb=(e,n)=>({inlinePatterns:Kb(e),blockPatterns:Kp(e),dynamicPatternsLookup:n}),Yp=e=>{const n=wy(Vt(e,qb));return Ie(n.errors,o=>console.error(o.message,o.pattern)),n.values},Vw=e=>n=>{const o=e(n);return Yp(o)},zw=to().deviceType,Uw=zw.isTouch(),xy=rs.DOM,Xb=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Jo(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Ec(u)]=Ec(f),o},{})},Jb=e=>Qe(e,RegExp),Rt=e=>n=>n.options.get(e),Ty=e=>re(e)||Ut(e),Ww=(e,n="")=>o=>{const r=re(o);if(r)if(o.indexOf("=")!==-1){const c=Xb(o);return{value:vo(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},dk=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Ww(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Ww(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=re(o)&&mo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=an(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>cn(o)?{valid:!0,value:o}:re(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||re(o)||et(o,re);return r?re(o)?{value:Vt(o.split(","),Ec),valid:r}:Fn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:lg(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=re(o)||et(o,re);return r?{value:Fn(o)?o:Vt(o.split(","),Ec),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=cn(o)||re(o);return r?o===!1||zw.isiPhone()||zw.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Uw}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||re(o)||ue(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||re(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Ty}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Ty}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Ty}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>re(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>et(o,Ut)||o===!1?{value:Yp(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>ue(o)?{value:Vw(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>et(o,Jb)?{value:o,valid:!0}:Jb(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:$u.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:xy.getAttrib(e.getElement(),"placeholder")})})},Zw=Rt("iframe_attrs"),nt=Rt("doctype"),jw=Rt("document_base_url"),Wa=Rt("body_id"),mk=Rt("body_class"),Ey=Rt("content_security_policy"),fk=Rt("br_in_pre"),kr=Rt("forced_root_block"),Qb=Rt("forced_root_block_attrs"),gk=Rt("newline_behavior"),eu=Rt("br_newline_selector"),ky=Rt("no_newline_selector"),Xp=Rt("keep_styles"),Bd=Rt("end_container_on_empty_block"),tu=Rt("automatic_uploads"),ev=Rt("images_reuse_filename"),nu=Rt("images_replace_blob_uris"),Gw=Rt("icons"),_y=Rt("icons_url"),tv=Rt("images_upload_url"),gf=Rt("images_upload_base_path"),qw=Rt("images_upload_credentials"),Oy=Rt("images_upload_handler"),hk=Rt("content_css_cors"),nv=Rt("referrer_policy"),Jp=Rt("language"),Za=Rt("language_url"),Kw=Rt("indent_use_margin"),Ch=Rt("indentation"),Yw=Rt("content_css"),ov=Rt("content_style"),Xw=Rt("font_css"),Jw=Rt("directionality"),pk=Rt("inline_boundaries_selector"),wh=Rt("object_resizing"),bk=Rt("resize_img_proportional"),Qw=Rt("placeholder"),sv=Rt("event_root"),eS=Rt("service_message"),cg=Rt("theme"),Qp=Rt("theme_url"),Sh=Rt("model"),Iu=Rt("model_url"),Bo=Rt("inline_boundaries"),tS=Rt("formats"),Hc=Rt("preview_styles"),Ay=Rt("format_empty_lines"),nS=Rt("format_noneditable_selector"),oS=Rt("custom_ui_selector"),lg=Rt("inline"),vk=Rt("hidden_input"),sS=Rt("submit_patch"),rS=Rt("add_form_submit_trigger"),yk=Rt("add_unload_trigger"),Ck=Rt("custom_undo_redo_levels"),wk=Rt("disable_nodechange"),aS=Rt("readonly"),xh=Rt("content_css_cors"),e1=Rt("plugins"),Sk=Rt("external_plugins"),ig=Rt("block_unsupported_drop"),xk=Rt("visual"),Tk=Rt("visual_table_class"),cS=Rt("visual_anchor_class"),lS=Rt("iframe_aria_text"),iS=Rt("setup"),ug=Rt("init_instance_callback"),uS=Rt("urlconverter_callback"),Ek=Rt("auto_focus"),kk=Rt("browser_spellcheck"),_k=Rt("protect"),Th=Rt("paste_block_drop"),dg=Rt("paste_data_images"),rv=Rt("paste_preprocess"),av=Rt("paste_postprocess"),dS=Rt("paste_webkit_styles"),Pd=Rt("paste_remove_styles_if_webkit"),cv=Rt("paste_merge_formats"),mS=Rt("smart_paste"),Lu=Rt("paste_as_text"),hf=Rt("paste_tab_spaces"),Dy=Rt("allow_html_data_urls"),fS=Rt("text_patterns"),Ok=Rt("text_patterns_lookup"),gS=Rt("noneditable_class"),hS=Rt("editable_class"),Ak=Rt("noneditable_regexp"),Dk=Rt("preserve_cdata"),pS=Rt("highlight_on_focus"),lv=Rt("xss_sanitization"),bS=e=>e.options.isSet("text_patterns_lookup"),Rk=e=>Ze.explode(e.options.get("font_size_style_values")),Mk=e=>Ze.explode(e.options.get("font_size_classes")),Nk=e=>e.options.get("encoding")==="xml",Ry=e=>Ze.explode(e.options.get("images_file_types")),vS=Rt("table_tab_navigation"),yS=Me,CS=Je,wS=e=>{const n=e.parentNode;n&&n.removeChild(e)},t1=e=>{const n=Oe(e);return{count:e.length-n.length,text:n}},My=e=>{let n;for(;(n=e.data.lastIndexOf(W))!==-1;)e.deleteData(n,1)},Ny=(e,n)=>(pf(e),n),n1=(e,n)=>{const o=t1(e.data.substr(0,n.offset())),r=t1(e.data.substr(n.offset()));return(o.text+r.text).length>0?(My(e),De(e,n.offset()-o.count)):n},iv=(e,n)=>{const o=n.container(),r=cd(dr(o.childNodes),e).map(c=>c<n.offset()?De(o,n.offset()-1):n).getOr(n);return pf(e),r},By=(e,n)=>CS(e)&&n.container()===e?n1(e,n):Ny(e,n),SS=(e,n)=>n.container()===e.parentNode?iv(e,n):Ny(e,n),xS=(e,n)=>De.isTextPosition(n)?By(e,n):SS(e,n),pf=e=>{yS(e)&&fo(e)&&(Lo(e)?e.removeAttribute("data-mce-caret"):wS(e)),CS(e)&&(My(e),e.data.length===0&&wS(e))},Bk=En,TS=Jc,o1=vl,Pk="*[contentEditable=false],video,audio,embed,object",uv=(e,n,o)=>{const r=Ow(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},$k=e=>{var n,o;const r=wa(ne.fromDom(e),Pk);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(um(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Ml(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},Ik=(e,n,o,r)=>{const c=ms();let u,f;const b=kr(e),C=e.dom,E=(j,X)=>{let fe;if(N(),o1(X))return null;if(o(X)){const de=Mu(b,X,j),be=uv(n,X,j);C.setStyle(de,"top",be.top),f=de;const we=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(we,J({},be)),C.add(n,we),c.set({caret:we,element:X,before:j}),j&&C.addClass(we,"mce-visual-caret-before"),R(),fe=X.ownerDocument.createRange(),fe.setStart(de,0),fe.setEnd(de,0)}else return f=Cs(X,j),fe=X.ownerDocument.createRange(),mg(f.nextSibling)?(fe.setStart(f,0),fe.setEnd(f,0)):(fe.setStart(f,1),fe.setEnd(f,1)),fe;return fe},N=()=>{$k(n),f&&(pf(f),f=null),c.on(j=>{C.remove(j.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=setInterval(()=>{c.on(j=>{r()?C.toggleClass(j.caret,"mce-visual-caret-hidden"):C.addClass(j.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:N,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(j=>{const X=uv(n,j.element,j.before);C.setStyles(j.caret,J({},X))})},destroy:()=>clearInterval(u)}},ES=()=>so.browser.isFirefox(),mg=e=>Bk(e)||TS(e),s1=e=>(mg(e)||Jl(e)&&ES())&&om(ne.fromDom(e)).exists(Pn),r1=Si,Py=En,Lk=Jc,$y=Ou("display","block table table-cell table-caption list-item"),pc=fo,kS=hn,Eh=Me,Fk=Je,a1=Wo,fg=e=>e>0,gg=e=>e<0,dv=(e,n)=>{let o;for(;o=e(n);)if(!kS(o))return o;return null},kh=(e,n,o,r,c)=>{const u=new Er(e,r),f=Py(e)||kS(e);let b;if(gg(n)){if(f&&(b=dv(u.prev.bind(u),!0),o(b)))return b;for(;b=dv(u.prev.bind(u),c);)if(o(b))return b}if(fg(n)){if(f&&(b=dv(u.next.bind(u),!0),o(b)))return b;for(;b=dv(u.next.bind(u),c);)if(o(b))return b}return null},mv=(e,n)=>{const o=c=>r1(c.dom),r=c=>c.dom===n;return is(ne.fromDom(e),o,r).map(c=>c.dom).getOr(n)},bf=(e,n)=>{for(;e&&e!==n;){if($y(e))return e;e=e.parentNode}return null},_r=(e,n,o)=>bf(e.container(),o)===bf(n.container(),o),hg=(e,n)=>{if(!n)return V.none();const o=n.container(),r=n.offset();return Eh(o)?V.from(o.childNodes[r+e]):V.none()},Iy=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},Hk=(e,n,o)=>bf(n,e)===bf(o,e),Ly=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&pc(u)&&(u=u[r]),Py(u)||Lk(u)){if(Hk(n,u,c))return u;break}if(a1(u))break;c=c.parentNode}return null},_h=Ve(Iy,!0),pg=Ve(Iy,!1),Fy=(e,n,o)=>{let r;const c=Ve(Ly,!0,n),u=Ve(Ly,!1,n),f=o.startContainer,b=o.startOffset;if(hn(f)){const C=Fk(f)?f.parentNode:f,E=C.getAttribute("data-mce-caret");if(E==="before"&&(r=C.nextSibling,s1(r)))return _h(r);if(E==="after"&&(r=C.previousSibling,s1(r)))return pg(r)}if(!o.collapsed)return o;if(Je(f)){if(pc(f)){if(e===1){if(r=u(f),r)return _h(r);if(r=c(f),r)return pg(r)}if(e===-1){if(r=c(f),r)return pg(r);if(r=u(f),r)return _h(r)}return o}if(um(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?_h(r):o;if(Ml(f)&&b<=1)return e===-1&&(r=c(f),r)?pg(r):o;if(b===f.data.length)return r=u(f),r?_h(r):o;if(b===0)return r=c(f),r?pg(r):o}return o},Oh=(e,n)=>hg(e?0:-1,n).filter(Py),Hy=(e,n,o)=>{const r=Fy(e,n,o);return e===-1?De.fromRangeStart(r):De.fromRangeEnd(r)},c1=e=>V.from(e.getNode()).map(ne.fromDom),_S=e=>V.from(e.getNode(!0)).map(ne.fromDom),xm=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},fv=(e,n)=>{const o=_r(e,n);return!o&&Ds(e.getNode())?!0:o};var ua;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(ua||(ua={}));const OS=En,ou=Je,Vy=Me,Fu=Ds,Hu=Wo,zy=nf,Ah=kb,Vk=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},AS=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,gv=(e,n)=>{if(fg(e)){if(Hu(n.previousSibling)&&!ou(n.previousSibling))return De.before(n);if(ou(n))return De(n,0)}if(gg(e)){if(Hu(n.nextSibling)&&!ou(n.nextSibling))return De.after(n);if(ou(n))return De(n,n.data.length)}return gg(e)?Fu(n)?De.before(n):De.after(n):De.before(n)},hv=(e,n)=>{const o=n.nextSibling;return o&&Hu(o)?ou(o)?De(o,0):De.before(o):pv(ua.Forwards,De.after(n),e)},pv=(e,n,o)=>{let r,c,u,f;if(!Vy(o)||!n)return null;if(n.isEqual(De.after(o))&&o.lastChild){if(f=De.after(o.lastChild),gg(e)&&Hu(o.lastChild)&&Vy(o.lastChild))return Fu(o.lastChild)?De.before(o.lastChild):f}else f=n;const b=f.container();let C=f.offset();if(ou(b)){if(gg(e)&&C>0)return De(b,--C);if(fg(e)&&C<b.length)return De(b,++C);r=b}else{if(gg(e)&&C>0&&(c=AS(b,C-1),Hu(c)))return!zy(c)&&(u=kh(c,e,Ah,c),u)?ou(u)?De(u,u.data.length):De.after(u):ou(c)?De(c,c.data.length):De.before(c);if(fg(e)&&C<b.childNodes.length&&(c=AS(b,C),Hu(c)))return Fu(c)?hv(o,c):!zy(c)&&(u=kh(c,e,Ah,c),u)?ou(u)?De(u,0):De.before(u):ou(c)?De(c,0):De.after(c);r=c||f.getNode()}if(r&&(fg(e)&&f.isAtEnd()||gg(e)&&f.isAtStart())&&(r=kh(r,e,mt,o,!0),Ah(r,o)))return gv(e,r);c=r&&kh(r,e,Ah,o);const E=fr(jt(Vk(b,o),OS));return E&&(!c||!E.contains(c))?(fg(e)?f=De.after(E):f=De.before(E),f):c?gv(e,c):null},Vu=e=>({next:n=>pv(ua.Forwards,n,e),prev:n=>pv(ua.Backwards,n,e)}),Uy=(e,n,o)=>{const r=e?De.before(o):De.after(o);return oi(e,n,r)},zk=e=>Ds(e)?De.before(e):De.after(e),DS=e=>De.isTextPosition(e)?e.offset()===0:Wo(e.getNode()),Wy=e=>{if(De.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Wo(e.getNode(!0))},Zy=(e,n)=>!De.isTextPosition(e)&&!De.isTextPosition(n)&&e.getNode()===n.getNode(!0),bv=e=>!De.isTextPosition(e)&&Ds(e.getNode()),RS=(e,n,o)=>e?!Zy(n,o)&&!bv(n)&&Wy(n)&&DS(o):!Zy(o,n)&&DS(n)&&Wy(o),oi=(e,n,o)=>{const r=Vu(n);return V.from(e?r.next(o):r.prev(o))},vv=(e,n,o)=>oi(e,n,o).bind(r=>_r(o,r,n)&&RS(e,o,r)?oi(e,n,r):V.some(r)),MS=(e,n,o,r)=>vv(e,n,o).bind(c=>r(c)?MS(e,n,c,r):V.some(c)),Dh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Je(o)?V.some(De(o,e?0:o.data.length)):o?Wo(o)?V.some(e?De.before(o):zk(o)):Uy(e,n,o):V.none()},bc=Ve(oi,!0),su=Ve(oi,!1),Ll=Ve(Dh,!0),$d=Ve(Dh,!1),NS="_mce_caret",sl=e=>Me(e)&&e.id===NS,Kr=(e,n)=>{let o=n;for(;o&&o!==e;){if(sl(o))return o;o=o.parentNode}return null},jy=e=>re(e.start),l1=e=>tn(e,"rng"),bg=e=>tn(e,"id"),i1=e=>tn(e,"name"),yv=e=>Ze.isArray(e.start),u1=e=>!i1(e)&&cn(e.forward)?e.forward:!0,BS=(e,n)=>(Me(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Uk=(e,n)=>{const o=V.from(yh(e.getRoot(),n.start)),r=V.from(yh(e.getRoot(),n.end));return Pr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:u1(n)}})},Wk=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(W);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},Id=e=>!e.hasChildNodes(),d1=(e,n)=>$d(e).fold(Ne,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Cv=(e,n,o)=>Id(n)&&Kr(e,n)?(Wk(n,o),!0):!1,Ld=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let C=c.length-1;f&&C>=1;C--){const E=f.childNodes;if(Cv(u,f,r))return!0;if(c[C]>E.length-1)return Cv(u,f,r)?!0:d1(f,r);f=E[c[C]]}Je(f)&&(b=Math.min(c[0],f.data.length)),Me(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},wv=e=>Je(e)&&e.data.length>0,Sv=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):wv(r.nextSibling)?(f=r.nextSibling,b=0):wv(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):wv(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const C=r.previousSibling,E=r.nextSibling;Ze.each(Ze.grep(r.childNodes),R=>{Je(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let N;for(;N=e.get(o.id+"_"+n);)e.remove(N,!0);if(Je(E)&&Je(C)&&!so.browser.isOpera()){const R=C.data.length;C.appendData(E.data),e.remove(E),f=C,b=R}}return V.some(De(f,b))}else return V.none()},vg=(e,n)=>{const o=e.createRng();return Ld(e,!0,n,o)&&Ld(e,!1,n,o)?V.some({range:o,forward:u1(n)}):V.none()},Gy=(e,n)=>{const o=Sv(e,"start",n),r=Sv(e,"end",n);return Pr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(BS(e,c.container()),c.offset()),f.setEnd(BS(e,u.container()),u.offset()),{range:f,forward:u1(n)}})},PS=(e,n)=>V.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),qy=(e,n)=>{const o=e.dom;if(n){if(yv(n))return vg(o,n);if(jy(n))return Uk(o,n);if(bg(n))return Gy(o,n);if(i1(n))return PS(o,n);if(l1(n))return V.some({range:n.rng,forward:u1(n)})}return V.none()},vf=(e,n,o)=>uk(e,n,o),Zk=(e,n)=>{qy(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},_a=e=>Me(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Rh=(e=>n=>e===n)(Ao),Mh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,$S=e=>!Mh(e)&&!Rh(e)&&!Qa(e),Gk=e=>({value:qk(e)}),qk=e=>pa(e,"#").toUpperCase(),xv=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Kk=e=>{const n=xv(e.red)+xv(e.green)+xv(e.blue);return Gk(n)},Tv=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Yk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,IS=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Ev=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return IS(c,u,f,b)},Xk=e=>{if(e==="transparent")return V.some(IS(0,0,0,0));const n=Tv.exec(e);if(n!==null)return V.some(Ev(n[1],n[2],n[3],"1"));const o=Yk.exec(e);return o!==null?V.some(Ev(o[1],o[2],o[3],o[4])):V.none()},Ky=e=>Xk(e).map(Kk).map(n=>"#"+n.value).getOr(e),m1=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},Qn=e=>ea(e,n=>{const o=zp(n);return o?[ne.fromDom(o)]:[]}),Tm=e=>m1(e).length>1,Nh=e=>jt(Qn(e),Ha),Yy=e=>wa(e,"td[data-mce-selected],th[data-mce-selected]"),LS=(e,n)=>{const o=Yy(n);return o.length>0?o:Nh(e)},Em=e=>LS(m1(e.selection.getSel()),ne.fromDom(e.getBody())),Bh=(e,n)=>le(e,"table",n),Xy=e=>{const n=e.startContainer,o=e.startOffset;return Je(n)?o===0?V.some(ne.fromDom(n)):V.none():V.from(n.childNodes[o]).map(ne.fromDom)},Jy=e=>{const n=e.endContainer,o=e.endOffset;return Je(n)?o===n.data.length?V.some(ne.fromDom(n)):V.none():V.from(n.childNodes[o-1]).map(ne.fromDom)},kv=e=>bd(e).fold(Ge([e]),n=>[e].concat(kv(n))),_v=e=>pl(e).fold(Ge([e]),n=>zo(n)==="br"?mc(n).map(o=>[e].concat(_v(o))).getOr([]):[e].concat(_v(n))),FS=(e,n)=>Pr(Xy(n),Jy(n),(o,r)=>{const c=us(kv(e),Ve(ho,o)),u=us(_v(e),Ve(ho,r));return c.isSome()&&u.isSome()}).getOr(!1),f1=(e,n,o,r)=>{const c=o,u=new Er(o,c),f=$o(e.schema.getMoveCaretBeforeOnEnterElements(),(C,E)=>!an(["td","th","table"],E.toLowerCase()));let b=o;do{if(Je(b)&&Ze.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},g1=e=>{const n=e.selection.getSel();return ze(n)&&n.rangeCount>0},HS=(e,n)=>{const o=Em(e);o.length>0?Ie(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},VS=(e,n,o)=>{const r=yy(e,n);o(r),e.moveToBookmark(r)},Ph=e=>Ps(e==null?void 0:e.nodeType),Ov=e=>Me(e)&&!_a(e)&&!sl(e)&&!Sa(e),yg=(e,n)=>{if(Ov(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},yf=e=>e.isContentEditable===!0,h1=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=En(u);VS(r,!0,()=>{n()}),f&&En(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Cg(c,r)},Cg=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!yg(e,b)&&Me(u)){const C=u.childNodes,E=e.getRoot();let N;if(f<C.length){const R=C[f];N=new Er(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:E)}else{const R=C[C.length-1];N=new Er(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:E),N.next(!0)}for(let R=N.current();R;R=N.next()){if(e.getContentEditable(R)==="false")return;if(Je(R)&&!eC(R)){c.setStart(R,0),n.setRng(c);return}}}},zS=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(Me(e)||!eC(e))return e}},Qy=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||sf(e,n),$h=(e,n,o)=>e.schema.isValidChild(n,o),eC=(e,n=!1)=>{if(ze(e)&&Je(e)){const o=n?e.data.replace(/ /g," "):e.data;return of(o)}else return!1},Av=e=>ze(e)&&Je(e)&&e.length===0,Jk=(e,n)=>{const o="[data-mce-cef-wrappable]",r=nS(e),c=ba(r)?o:`${o},${r}`;return Ya(ne.fromDom(n),c)},US=(e,n)=>{const o=e.dom;return Ov(n)&&o.getContentEditable(n)==="false"&&Jk(e,n)&&o.select('[contenteditable="true"]',n).length===0},Cf=(e,n)=>ue(e)?e(n):(ze(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),tC=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),nC=(e,n)=>{if(Jt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Ky(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Dv=(e,n,o)=>{const r=e.getStyle(n,o);return nC(r,o)},WS=(e,n)=>{let o;return e.getParent(n,r=>Me(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},km=(e,n,o)=>e.getParents(n,o,e.getRoot()),oC=(e,n,o)=>{const r=e.formatter.get(n);return ze(r)&&Xo(r,o)},St=(e,n)=>oC(e,n,r=>{const c=u=>ue(u)||u.length>1&&u.charAt(0)==="%";return Xo(["styles","attributes"],u=>vo(r,u).exists(f=>{const b=Fn(f)?f:lc(f);return Xo(b,c)}))}),Oa=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>$o(u,(f,b)=>Xo(r,C=>C===b));return oC(e,n,u=>{const f=c(u);return oC(e,o,b=>{const C=c(b);return Cc(f,C)})})},_i=e=>Ur(e,"block"),Yr=e=>_i(e)&&e.wrapper===!0,ru=e=>_i(e)&&e.wrapper!==!0,si=e=>Ur(e,"selector"),Lr=e=>Ur(e,"inline"),sC=e=>si(e)&&Lr(e)&&gr(vo(e,"mixed"),!0),Ih=e=>si(e)&&e.expand!==!1&&!Lr(e),wg=_a,p1=km,ZS=eC,jS=Qy,GS=e=>Ds(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Rv=(e,n)=>{let o=n;for(;o;){if(Me(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},rC=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},qS=(e,n,o)=>rC(e,n,o,r=>Rh(r)||Mh(r)),b1=(e,n,o)=>rC(e,n,o,$S),v1=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,C=(N,R,F)=>{const Y=og(e),ee=c?Y.backwards:Y.forwards;return V.from(ee(N,R,(j,X)=>wg(j.parentNode)?-1:(f=j,F(c,j,X)),b))};return C(o,r,qS).bind(N=>u?C(N.container,N.offset+(c?-1:0),b1):V.some(N)).orThunk(()=>f?V.some({container:f,offset:c?0:f.length}):V.none())},y1=(e,n,o,r,c)=>{const u=r[c];Je(r)&&ba(r.data)&&u&&(r=u);const f=p1(e,r);for(let b=0;b<f.length;b++)for(let C=0;C<n.length;C++){const E=n[C];if(!(ze(E.collapsed)&&E.collapsed!==o.collapsed)&&si(E)&&e.is(f[b],E.selector))return f[b]}return r},C1=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(_i(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const C=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(Je(o)?o.parentNode:o,E=>E!==f&&jS(e.schema,E),C)}if(u&&_i(b)&&b.wrapper&&(u=p1(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!tC(u,"br")););return u||o},Mv=(e,n,o,r)=>{const c=o.parentNode;return ze(o[r])?!1:c===n||Jt(c)||e.isBlock(c)?!0:Mv(e,n,c,r)},Nv=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(Je(o)&&!ZS(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[f];C;C=C[f]){const E=Je(C)&&!Mv(e,b,C,f);if(!wg(C)&&!GS(C)&&!ZS(C,E))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Sg=e=>wg(e.parentNode)||wg(e),Fl=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const C=o[0];return Me(c)&&c.hasChildNodes()&&(c=Cl(c,u),Je(c)&&(u=0)),Me(f)&&f.hasChildNodes()&&(f=Cl(f,n.collapsed?b:b-1),Je(f)&&(b=f.data.length)),c=Rv(e,c),f=Rv(e,f),Sg(c)&&(c=wg(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,Je(c)&&(u=n.collapsed?c.length:0)),Sg(f)&&(f=wg(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,Je(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(v1(e,e.getRoot(),c,u,!0,r).each(({container:R,offset:F})=>{c=R,u=F}),v1(e,e.getRoot(),f,b,!1,r).each(({container:R,offset:F})=>{f=R,b=F})),(Lr(C)||C.block_expand)&&((!Lr(C)||!Je(c)||u===0)&&(c=Nv(e,o,c,u,!0)),(!Lr(C)||!Je(f)||b===f.data.length)&&(f=Nv(e,o,f,b,!1))),Ih(C)&&(c=y1(e,o,n,c,"previousSibling"),f=y1(e,o,n,f,"nextSibling")),(_i(C)||si(C))&&(c=C1(e,o,c,"previousSibling"),f=C1(e,o,f,"nextSibling"),_i(C)&&(e.isBlock(c)||(c=Nv(e,o,c,u,!0)),e.isBlock(f)||(f=Nv(e,o,f,b,!1)))),Me(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),Me(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},w1=(e,n,o)=>{var r;const c=n.startOffset,u=Cl(n.startContainer,c),f=n.endOffset,b=Cl(n.endContainer,f-1),C=X=>{const fe=X[0];Je(fe)&&fe===u&&c>=fe.data.length&&X.splice(0,1);const de=X[X.length-1];return f===0&&X.length>0&&de===b&&Je(de)&&X.splice(X.length-1,1),X},E=(X,fe,de)=>{const be=[];for(;X&&X!==de;X=X[fe])be.push(X);return be},N=(X,fe)=>e.getParent(X,de=>de.parentNode===fe,fe),R=(X,fe,de)=>{const be=de?"nextSibling":"previousSibling";for(let we=X,He=we.parentNode;we&&we!==fe;we=He){He=we.parentNode;const gt=E(we===X?we:we[be],be);gt.length&&(de||gt.reverse(),o(C(gt)))}};if(u===b)return o(C([u]));const F=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,F,!0);if(e.isChildOf(b,u))return R(b,F);const Y=N(u,F)||u,ee=N(b,F)||b;R(u,Y,!0);const j=E(Y===u?Y:Y.nextSibling,"nextSibling",ee===b?ee.nextSibling:ee);j.length&&o(C(j)),R(b,ee)},KS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],aC=e=>La(e)&&jf(e)===W,Qk=(e,n,o,r)=>Kc(n).fold(()=>"skipping",c=>r==="br"||aC(n)?"valid":vw(n)?"existing":sl(n.dom)?"caret":Xo(KS,u=>Ya(n,u))?"valid-block":!$h(e,o,r)||!$h(e,zo(c),o)?"invalid-child":"valid"),YS=(e,n)=>{const o=Fl(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},S1=(e,n,o,r,c,u)=>{const N=o,{uid:f=n}=N,b=G2(N,["uid"]);xu(e,hc()),Qs(e,`${Fp()}`,f),Qs(e,`${ym()}`,r);const{attributes:C={},classes:E=[]}=c(f,b);if(Ca(e,C),Sw(e,E),u){E.length>0&&Qs(e,`${ti()}`,E.join(","));const R=Is(C);R.length>0&&Qs(e,`${Ei()}`,R.join(","))}},e_=e=>{dd(e,hc()),Ls(e,`${Fp()}`),Ls(e,`${ym()}`),Ls(e,`${uf()}`);const n=Ac(e,`${Ei()}`).map(r=>r.split(",")).getOr([]),o=Ac(e,`${ti()}`).map(r=>r.split(",")).getOr([]);Ie(n,r=>Ls(e,r)),xw(e,o),Ls(e,`${ti()}`),Ls(e,`${Ei()}`)},x1=(e,n,o,r,c)=>{const u=ne.fromTag("span",e);return S1(u,n,o,r,c,!1),u},Aa=(e,n,o,r,c,u)=>{const f=[],b=x1(e.getDoc(),o,u,r,c),C=ms(),E=()=>{C.clear()},N=()=>C.get().getOrThunk(()=>{const ee=df(b);return f.push(ee),C.set(ee),ee}),R=ee=>{Ie(ee,F)},F=ee=>{switch(Qk(e,ee,"span",zo(ee))){case"invalid-child":{E();const X=Zr(ee);R(X),E();break}case"valid-block":{E(),S1(ee,o,u,r,c,!0);break}case"valid":{const X=N();Cb(ee,X);break}}},Y=ee=>{const j=Vt(ee,ne.fromDom);R(j)};return w1(e.dom,n,ee=>{E(),Y(ee)}),f},au=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Em(e).length>0,b=ww("mce-annotation");if(u.collapsed&&!f&&YS(e,u),c.getRng().collapsed&&!f){const C=x1(e.getDoc(),b,r,n,o.decorate);wd(C,Ao),c.getRng().insertNode(C.dom),c.select(C.dom)}else VS(c,!1,()=>{HS(e,C=>{Aa(e,C,b,n,o.decorate,r)})})})},ri=e=>{const n=sk();ok(e,n);const o=Cw(e,n),r=Kl("span"),c=u=>{Ie(u,f=>{r(f)?Tr(f):e_(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{au(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Hp(e,V.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();ut(ph(e,u),(b,C)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=ph(e,u);return Bn(f,b=>Vt(b,C=>C.dom))}}},wf=e=>({getBookmark:Ve(vf,e),moveToBookmark:Ve(Zk,e)});wf.isBookmarkNode=_a;const cu=(e,n,o)=>o.collapsed?!1:Xo(o.getClientRects(),r=>ly(r,e,n)),t_=(e,n)=>e.dispatch("PreProcess",n),cC=(e,n)=>e.dispatch("PostProcess",n),lC=e=>{e.dispatch("remove")},iC=e=>{e.dispatch("detach")},n_=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},uC=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},o_=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},s_=e=>{e.dispatch("PreInit")},dC=e=>{e.dispatch("PostRender")},mC=e=>{e.dispatch("Init")},as=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},zu=(e,n,o)=>{e.dispatch(n,o)},fC=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},gC=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},XS=(e,n)=>e.dispatch("BeforeSetContent",n),Bv=(e,n)=>e.dispatch("SetContent",n),JS=(e,n)=>e.dispatch("BeforeGetContent",n),Pv=(e,n)=>e.dispatch("GetContent",n),QS=(e,n)=>{e.dispatch("AutocompleterStart",n)},r_=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},ex=e=>{e.dispatch("AutocompleterEnd")},a_=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),hC=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),tx=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),At={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||At.metaKeyPressed(e),metaKeyPressed:e=>so.os.isMacOS()||so.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Uu="data-mce-selected",pC="table,img,figure.image,hr,video,span.mce-preview-object",nx=Math.abs,ar=Math.round,Or={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Lh=e=>e.type==="longpress"||e.type.indexOf("touch")===0,T1=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,C,E,N,R,F,Y,ee,j,X,fe,de,be,we,He,gt;const ot=Ct=>ze(Ct)&&(Qm(Ct)||o.is(Ct,"figure.image")),Ee=Ct=>Jc(Ct)||o.hasClass(Ct,"mce-preview-object"),ke=(Ct,Hn)=>{if(Lh(Ct)){const Mn=Ct.touches[0];return ot(Ct.target)&&!cu(Mn.clientX,Mn.clientY,Hn)}else return ot(Ct.target)&&!cu(Ct.clientX,Ct.clientY,Hn)},xt=Ct=>{const Hn=Ct.target;ke(Ct,n.selection.getRng())&&!Ct.isDefaultPrevented()&&n.selection.select(Hn)},Ft=Ct=>o.hasClass(Ct,"mce-preview-object")&&ze(Ct.firstElementChild)?[Ct,Ct.firstElementChild]:o.is(Ct,"figure.image")?[Ct.querySelector("img")]:[Ct],Qt=Ct=>{const Hn=wh(n);return!Hn||Ct.getAttribute("data-mce-resize")==="false"||Ct===n.getBody()?!1:o.hasClass(Ct,"mce-preview-object")&&ze(Ct.firstElementChild)?Ya(ne.fromDom(Ct.firstElementChild),Hn):Ya(ne.fromDom(Ct),Hn)},On=Ct=>Ee(Ct)?o.create("img",{src:so.transparentSrc}):Ct.cloneNode(!0),Kn=(Ct,Hn,Mn)=>{if(ze(Mn)){const rc=Ft(Ct);Ie(rc,Ns=>{Ns.style[Hn]||!n.schema.isValid(Ns.nodeName.toLowerCase(),Hn)?o.setStyle(Ns,Hn,Mn):o.setAttrib(Ns,Hn,""+Mn)})}},Ro=(Ct,Hn,Mn)=>{Kn(Ct,"width",Hn),Kn(Ct,"height",Mn)},cs=Ct=>{let Hn,Mn,rc,Ns,yn;Hn=Ct.screenX-R,Mn=Ct.screenY-F,be=Hn*E[2]+j,we=Mn*E[3]+X,be=be<5?5:be,we=we<5?5:we,(ot(f)||Ee(f))&&bk(n)!==!1?rc=!At.modifierPressed(Ct):rc=At.modifierPressed(Ct),rc&&(nx(Hn)>nx(Mn)?(we=ar(be*fe),be=ar(we/fe)):(be=ar(we/fe),we=ar(be*fe))),Ro(b,be,we),Ns=E.startPos.x+Hn,yn=E.startPos.y+Mn,Ns=Ns>0?Ns:0,yn=yn>0?yn:0,o.setStyles(C,{left:Ns,top:yn,display:"block"}),C.innerHTML=be+" &times; "+we,E[2]<0&&b.clientWidth<=be&&o.setStyle(b,"left",Y+(j-be)),E[3]<0&&b.clientHeight<=we&&o.setStyle(b,"top",ee+(X-we)),Hn=u.scrollWidth-He,Mn=u.scrollHeight-gt,Hn+Mn!==0&&o.setStyles(C,{left:Ns-Hn,top:yn-Mn}),de||(uC(n,f,j,X,"corner-"+E.name),de=!0)},wr=()=>{const Ct=de;de=!1,Ct&&(Kn(f,"width",be),Kn(f,"height",we)),o.unbind(r,"mousemove",cs),o.unbind(r,"mouseup",wr),c!==r&&(o.unbind(c,"mousemove",cs),o.unbind(c,"mouseup",wr)),o.remove(b),o.remove(C),o.remove(N),zc(f),Ct&&(o_(n,f,be,we,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},zc=Ct=>{yt();const Hn=o.getPos(Ct,u),Mn=Hn.x,rc=Hn.y,Ns=Ct.getBoundingClientRect(),yn=Ns.width||Ns.right-Ns.left,go=Ns.height||Ns.bottom-Ns.top;f!==Ct&&(st(),f=Ct,be=we=0);const Hr=n.dispatch("ObjectSelected",{target:Ct});Qt(Ct)&&!Hr.isDefaultPrevented()?ut(Or,(ps,lr)=>{const Fo=Jr=>{const ed=Ft(f)[0];R=Jr.screenX,F=Jr.screenY,j=ed.clientWidth,X=ed.clientHeight,fe=X/j,E=ps,E.name=lr,E.startPos={x:yn*ps[0]+Mn,y:go*ps[1]+rc},He=u.scrollWidth,gt=u.scrollHeight,N=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(N,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=On(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Mn,top:rc,margin:0}),Ro(b,yn,go),b.removeAttribute(Uu),u.appendChild(b),o.bind(r,"mousemove",cs),o.bind(r,"mouseup",wr),c!==r&&(o.bind(c,"mousemove",cs),o.bind(c,"mouseup",wr)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},j+" &times; "+X)};let Bs=o.get("mceResizeHandle"+lr);Bs&&o.remove(Bs),Bs=o.add(u,"div",{id:"mceResizeHandle"+lr,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+lr+"-resize; margin:0; padding:0"}),o.bind(Bs,"mousedown",Jr=>{Jr.stopImmediatePropagation(),Jr.preventDefault(),Fo(Jr)}),ps.elm=Bs,o.setStyles(Bs,{left:yn*ps[0]+Mn-Bs.offsetWidth/2,top:go*ps[1]+rc-Bs.offsetHeight/2})}):st(!1)},Ma=gc(zc,0),st=(Ct=!0)=>{Ma.cancel(),yt(),f&&Ct&&f.removeAttribute(Uu),ut(Or,(Hn,Mn)=>{const rc=o.get("mceResizeHandle"+Mn);rc&&(o.unbind(rc),o.remove(rc))})},Mt=(Ct,Hn)=>o.isChildOf(Ct,Hn),io=Ct=>{if(de||n.removed||n.composing)return;const Hn=Ct.type==="mousedown"?Ct.target:e.getNode(),Mn=qt(ne.fromDom(Hn),pC).map(Ns=>Ns.dom).filter(Ns=>o.isEditable(Ns.parentElement)).getOrUndefined(),rc=ze(Mn)?o.getAttrib(Mn,Uu,"1"):"1";if(Ie(o.select(`img[${Uu}],hr[${Uu}]`),Ns=>{Ns.removeAttribute(Uu)}),ze(Mn)&&Mt(Mn,u)){Kt();const Ns=e.getStart(!0);if(Mt(Ns,Mn)&&Mt(e.getEnd(!0),Mn)){o.setAttrib(Mn,Uu,rc),Ma.throttle(Mn);return}}st()},yt=()=>{ut(Or,Ct=>{Ct.elm&&(o.unbind(Ct.elm),delete Ct.elm)})},Kt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(Ct){}};return n.on("init",()=>{Kt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",io),n.on("keyup compositionend",Ct=>{f&&f.nodeName==="TABLE"&&io(Ct)}),n.on("hide blur",st),n.on("contextmenu longpress",xt,!0)}),n.on("remove",yt),{isResizable:Qt,showResizeRect:zc,hideResizeRect:st,updateResizeRect:io,destroy:()=>{Ma.cancel(),f=b=N=null}}},c_=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},l_=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Un=(e,n,o)=>{const r=e.document.createRange();return c_(r,n),l_(r,o),r},bC=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},Fh=zs.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),$v=(e,n,o)=>n(ne.fromDom(o.startContainer),o.startOffset,ne.fromDom(o.endContainer),o.endOffset),i_=(e,n)=>n.match({domRange:o=>({ltr:Ge(o),rtl:V.none}),relative:(o,r)=>({ltr:Tc(()=>Un(e,o,r)),rtl:Tc(()=>V.some(Un(e,r,o)))}),exact:(o,r,c,u)=>({ltr:Tc(()=>bC(e,o,r,c,u)),rtl:Tc(()=>V.some(bC(e,c,u,o,r)))})}),u_=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>Fh.rtl(ne.fromDom(c.endContainer),c.endOffset,ne.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>$v(e,Fh.ltr,o)):$v(e,Fh.ltr,o)},vC=(e,n)=>{const o=i_(e,n);return u_(e,o)};Fh.ltr,Fh.rtl;const ox={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},d_=(e,n,o)=>{var r,c;return V.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return V.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),V.some(f)})},yC=(e,n,o)=>{var r,c;return V.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},CC=(()=>document.caretPositionFromPoint?d_:document.caretRangeFromPoint?yC:V.none)(),sx=(e,n,o)=>{const r=ne.fromDom(e.document);return CC(r,n,o).map(c=>ox.create(ne.fromDom(c.startContainer),c.startOffset,ne.fromDom(c.endContainer),c.endOffset))},rx=zs.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ax=(e,n,o,r)=>e.fold(n,o,r),wI=e=>e.fold(Dn,Dn,Dn),m_=rx.before,f_=rx.on,oD=rx.after,Xt={before:m_,on:f_,after:oD,cata:ax,getStart:wI},Iv=zs.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sD=e=>Iv.exact(e.start,e.soffset,e.finish,e.foffset),g_=e=>e.match({domRange:n=>ne.fromDom(n.startContainer),relative:(n,o)=>Xt.getStart(n),exact:(n,o,r,c)=>n}),E1=Iv.domRange,rD=Iv.relative,Lv=Iv.exact,h_=e=>{const n=g_(e);return pi(n)},p_=ox.create,Sf={domRange:E1,relative:rD,exact:Lv,exactFromRange:sD,getWin:h_,range:p_},Fv=(e,n)=>{const o=zo(e);return o==="input"?Xt.after(e):an(["br","img"],o)?n===0?Xt.before(e):Xt.after(e):Xt.on(e,n)},wC=(e,n)=>{const o=e.fold(Xt.before,Fv,Xt.after),r=n.fold(Xt.before,Fv,Xt.after);return Sf.relative(o,r)},Hv=(e,n,o,r)=>{const c=Fv(e,n),u=Fv(o,r);return Sf.relative(c,u)},SC=e=>e.match({domRange:n=>{const o=ne.fromDom(n.startContainer),r=ne.fromDom(n.endContainer);return Hv(o,n.startOffset,r,n.endOffset)},relative:wC,exact:Hv}),k1=(e,n)=>{const r=(n||document).createDocumentFragment();return Ie(e,c=>{r.appendChild(c.dom)}),ne.fromDom(r)},b_=e=>{const n=Sf.getWin(e).dom,o=(c,u,f,b)=>bC(n,c,u,f,b),r=SC(e);return vC(n,r).match({ltr:o,rtl:o})},v_=(e,n,o)=>sx(e,n,o),_1=(e,n,o)=>{const r=pi(ne.fromDom(o));return v_(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Vv=(e,n)=>ze(e)&&ze(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,y_=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},lo=(e,n,o)=>y_(e,n,o)!==null,C_=(e,n,o)=>lo(e,n,r=>r.nodeName===o),Fd=(e,n)=>fo(e)&&!lo(e,n,sl),lu=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Er(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Ds(u))return!0}return!1},zv=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Hl=(e,n)=>{let o=n;for(;o&&o!==e;){if(En(o))return!0;o=o.parentNode}return!1},Hh=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let C,E;if(!b)return V.none();const N=e.getParent(b,e.isBlock)||u;if(r&&Ds(c)&&n&&e.isEmpty(N))return V.some(De(b,e.nodeIndex(c)));const R=new Er(c,N);for(;E=R[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||Fd(E,u))return V.none();if(Je(E)&&E.data.length>0)return C_(E,u,"A")?V.none():V.some(De(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return V.none();C=E}return Du(C)?V.none():o&&C?V.some(De(C,0)):V.none()},Vh=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const E=Me(b)&&C===b.childNodes.length,N=e.schema.getNonEmptyElements();let R=o;if(fo(b))return V.none();if(Me(b)&&C>b.childNodes.length-1&&(R=!1),wi(b)&&(b=c,C=0),b===c){if(R&&(u=b.childNodes[C>0?C-1:0],u&&(fo(u)||N[u.nodeName]||Jl(u))))return V.none();if(b.hasChildNodes()){if(C=Math.min(!R&&C>0?C-1:C,b.childNodes.length-1),b=b.childNodes[C],C=Je(b)&&E?b.data.length:0,!n&&b===c.lastChild&&Jl(b)||Hl(c,b)||fo(b))return V.none();if(b.hasChildNodes()&&!Jl(b)){u=b;const F=new Er(b,c);do{if(En(u)||fo(u)){f=!1;break}if(Je(u)&&u.data.length>0){C=R?0:u.data.length,b=u,f=!0;break}if(N[u.nodeName.toLowerCase()]&&!Nc(u)){C=e.nodeIndex(u),b=u.parentNode,R||C++,f=!0;break}}while(u=R?F.next():F.prev())}}}return n&&(Je(b)&&C===0&&Hh(e,E,n,!0,b).each(F=>{b=F.container(),C=F.offset(),f=!0}),Me(b)&&(u=b.childNodes[C],u||(u=b.childNodes[C-1]),u&&Ds(u)&&!zv(u,"A")&&!lu(e,u,!1)&&!lu(e,u,!0)&&Hh(e,E,n,!0,u).each(F=>{b=F.container(),C=F.offset(),f=!0}))),R&&!n&&Je(b)&&C===b.data.length&&Hh(e,E,n,!1,b).each(F=>{b=F.container(),C=F.offset(),f=!0}),f&&b?V.some(De(b,C)):V.none()},xg=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=De.fromRangeStart(n);return Vh(e,o,!0,r).each(u=>{(!o||!De.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Vh(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Vv(n,r)?V.none():V.some(r)},_m=(e,n)=>e.splitText(n),xC=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&Je(n)){if(o>0&&o<n.data.length)if(r=_m(n,o),n=r.previousSibling,c>o){c=c-o;const u=_m(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(Je(n)&&o>0&&o<n.data.length&&(n=_m(n,o),o=0),Je(r)&&c>0&&c<r.data.length){const u=_m(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Tg=e=>({walk:(u,f)=>w1(e,u,f),split:xC,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Fl(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(b.startContainer,b.startOffset),C.setEnd(b.endContainer,b.endOffset),C}return u},normalize:u=>xg(e,u).fold(Ne,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Tg.compareRanges=Vv,Tg.getCaretRangeFromPoint=_1,Tg.getSelectedNode=zp,Tg.getNode=Cl;const aD=((e,n)=>{const o=(b,C)=>{if(!Ps(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const E=b.dom;_o(E)&&(E.style[e]=C+"px")},r=b=>{const C=n(b);if(C<=0||C===null){const E=Yl(b,e);return parseFloat(E)||0}return C},c=r,u=(b,C)=>Jo(C,(E,N)=>{const R=Yl(b,N),F=R===void 0?0:parseInt(R,10);return isNaN(F)?E:E+F},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,C,E)=>{const N=u(b,E);return C>N?C-N:0}}})("height",e=>{const n=e.dom;return bi(e)?n.getBoundingClientRect().height:n.offsetHeight}),oo=e=>aD.get(e),Oi=()=>ne.fromDom(document),Eg=(e,n)=>e.view(n).fold(Ge([]),r=>{const c=e.owner(r),u=Eg(e,c);return[r].concat(u)}),w_=(e,n)=>{const o=n.owner(e);return Eg(n,o)};var TC=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?V.none():V.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ne.fromDom)},owner:e=>Dc(e)});const cx=e=>{const n=Oi(),o=Sp(n),r=w_(e,TC),c=vi(e),u=cl(r,(f,b)=>{const C=vi(b);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return Xl(u.left+c.left+o.left,u.top+c.top+o.top)},O1=e=>zo(e)==="textarea",S_=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),zh=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},kg=(e,n)=>{const o=Zr(e);if(o.length===0||O1(e))return{element:e,offset:n};if(n<o.length&&!O1(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return O1(r)?{element:e,offset:n}:zo(r)==="img"?{element:r,offset:1}:La(r)?{element:r,offset:jf(r).length}:{element:r,offset:Zr(r).length}}},EC=(e,n)=>{const o=xb(e),r=oo(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},i=(e,n)=>{const o=kg(e,n),r=ne.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+W+"</span>");return yo(o.element,r),EC(r,()=>os(r))},m=e=>EC(ne.fromDom(e),Fe),h=(e,n,o,r)=>{$(e,(c,u)=>T(e,n,o,r),o)},v=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(S_(e,u))return;const f=Sp(n).top;o(n,f,r,c),zh(e,u)},T=(e,n,o,r)=>{const c=ne.fromDom(e.getBody()),u=ne.fromDom(e.getDoc());yb(c);const f=i(ne.fromDom(o.startContainer),o.startOffset);v(e,u,n,f,r),f.cleanup()},A=(e,n,o,r)=>{const c=ne.fromDom(e.getDoc());v(e,c,o,m(n),r)},$=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(ne.fromDom(r),ne.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},U=(e,n)=>e.element.dom.scrollIntoView({block:n?"start":"end"}),K=(e,n,o,r)=>{const c=n+e,u=o.pos.top,f=o.bottom,b=f-u>=n;u<e?U(o,r!==!1):u>c?U(o,b?r!==!1:r===!0):f>c&&!b&&U(o,r===!0)},oe=(e,n,o,r)=>{const c=pi(e).dom.innerHeight;K(n,c,o,r)},ve=(e,n,o,r)=>{const c=pi(e).dom.innerHeight;K(n,c,o,r);const u=cx(o.element),f=Jg(window);u.top<f.y?yi(o.element,r!==!1):u.top>f.bottom&&yi(o.element,r===!0)},Ye=(e,n,o)=>h(e,oe,n,o),vt=(e,n,o)=>A(e,n,oe,o),ft=(e,n,o)=>h(e,ve,n,o),Le=(e,n,o)=>A(e,n,ve,o),ht=(e,n,o)=>{(e.inline?vt:Le)(e,n,o)},Pe=(e,n,o)=>{(e.inline?Ye:ft)(e,n,o)},Dt=e=>e.dom.focus(),ln=e=>{const n=Ol(e).dom;return e.dom===n.activeElement},Tn=(e=Oi())=>V.from(e.dom.activeElement).map(ne.fromDom),fs=e=>Tn(Ol(e)).filter(n=>e.dom.contains(n.dom)),Da=(e,n)=>{const o=La(n)?jf(n).length:Zr(n).length+1;return e>o?o:e<0?0:e},yr=e=>Sf.range(e.start,Da(e.soffset,e.start),e.finish,Da(e.foffset,e.finish)),wl=(e,n)=>!Mc(n.dom)&&(hl(e,n)||ho(e,n)),xf=e=>n=>wl(e,n.start)&&wl(e,n.finish),Wv=e=>e.inline||so.browser.isFirefox(),kC=e=>Sf.range(ne.fromDom(e.startContainer),e.startOffset,ne.fromDom(e.endContainer),e.endOffset),Zv=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?V.none():V.from(n.getRangeAt(0))).map(kC)},Zo=e=>{const n=pi(e);return Zv(n.dom).filter(xf(e))},rl=(e,n)=>V.from(n).filter(xf(e)).map(yr),al=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),V.some(n)}catch(o){return V.none()}},ai=e=>{const n=Wv(e)?Zo(ne.fromDom(e.getBody())):V.none();e.bookmark=n.isSome()?n:e.bookmark},Vl=e=>(e.bookmark?e.bookmark:V.none()).bind(o=>rl(ne.fromDom(e.getBody()),o)).bind(al),Uh=e=>{Vl(e).each(n=>e.selection.setRng(n))},jv={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},A1=(e,n)=>(Ps(n)||(n=0),setTimeout(e,n)),Ai=(e,n)=>(Ps(n)||(n=0),setInterval(e,n)),Rs={setEditorTimeout:(e,n,o)=>A1(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=Ai(()=>{e.removed?clearInterval(r):n()},o);return r}},x_=e=>e.type==="nodechange"&&e.selectionChange,lx=(e,n)=>{const o=()=>{n.throttle()};rs.DOM.bind(document,"mouseup",o),e.on("remove",()=>{rs.DOM.unbind(document,"mouseup",o)})},ix=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},T_=(e,n)=>{ix(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{x_(o)||ai(e)})},E_=e=>{const n=gc(()=>{ai(e)},0);e.on("init",()=>{e.inline&&lx(e,n),T_(e,n)}),e.on("remove",()=>{n.cancel()})};let Tf;const _C=rs.DOM,D1=e=>Me(e)&&jv.isEditorUIElement(e),ux=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},OC=(e,n)=>{const o=oS(e);return _C.getParent(n,c=>D1(c)||(o?e.dom.is(c,o):!1))!==null},Gv=e=>{try{const n=Ol(ne.fromDom(e.getElement()));return Tn(n).fold(()=>document.body,o=>o.dom)}catch(n){return document.body}},xI=(e,n)=>{const o=n.editor;E_(o);const r=(c,u)=>{if(pS(c)&&c.inline!==!0){const f=ne.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;ux(Gv(o))&&r(o,xu),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Rs.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!ux(Gv(o))||c!==o)&&r(o,dd),!OC(o,Gv(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Tf||(Tf=c=>{const u=e.activeEditor;u&&rm(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!OC(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},_C.bind(document,"focusin",Tf))},TI=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Tf&&(_C.unbind(document,"focusin",Tf),Tf=null)},k_=e=>{e.on("AddEditor",Ve(xI,e)),e.on("RemoveEditor",Ve(TI,e))},EI=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),cD=e=>e.collapsed?V.from(Cl(e.startContainer,e.startOffset)).map(ne.fromDom):V.none(),lD=(e,n)=>cD(n).bind(o=>ef(o)?V.some(o):hl(e,o)?V.none():V.some(e)),__=(e,n)=>{lD(ne.fromDom(e.getBody()),n).bind(o=>Ll(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},O_=e=>{if(e.setActive)try{e.setActive()}catch(n){e.focus()}else e.focus()},kI=e=>ln(e)||fs(e).isSome(),_I=e=>ze(e.iframeElement)&&ln(ne.fromDom(e.iframeElement)),OI=e=>{const n=e.getBody();return n&&kI(ne.fromDom(n))},dx=e=>{const n=Ol(ne.fromDom(e.getElement()));return Tn(n).filter(o=>!ux(o.dom)&&OC(e,o.dom)).isSome()},Wh=e=>e.inline?OI(e):_I(e),iD=e=>Wh(e)||dx(e),uD=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),ze(e.bookmark)&&!Wh(e)&&Vl(e).each(u=>{e.selection.setRng(u),r=u});const c=EI(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){O_(c),__(e,r),mx(e);return}e.inline||(so.browser.isOpera()||O_(o),e.getWin().focus()),(so.browser.isFirefox()||e.inline)&&(O_(o),__(e,r)),mx(e)},mx=e=>e.editorManager.setActive(e),AI=(e,n)=>{e.removed||(n?mx(e):uD(e))},dD=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return V.from(u).map(ne.fromDom).map(b=>!r||!n.collapsed?pd(b,c(b,f)).getOr(b):b).bind(b=>Uo(b)?V.some(b):Kc(b).filter(Uo)).map(b=>b.dom).getOr(e)},mD=(e,n,o=!1)=>dD(e,n,!0,o,(r,c)=>Math.min(Xa(r),c)),fD=(e,n,o=!1)=>dD(e,n,!1,o,(r,c)=>c>0?c-1:c),gD=(e,n)=>{const o=e;for(;e&&Je(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},DI=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),Je(o)&&Je(r)&&(o.length===c?o=gD(o.nextSibling,!0):o=o.parentNode,u===0?r=gD(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=Je(f)?f.parentNode:f;return Me(b)?b:e},RI=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||mD(u,n,n.collapsed),e.isBlock),b=e.getParent(r||fD(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let C;const E=new Er(f,u);for(;(C=E.next())&&C!==b;)e.isBlock(C)&&c.push(C)}return b&&f!==b&&b!==u&&c.push(b),c},MI=(e,n,o)=>V.from(n).bind(r=>V.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(f1(e,f,r,!0),f1(e,f,r,!1)),f})),A_=(e,n)=>Vt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),NI=e=>zo(e)==="img"?1:br(e).fold(()=>Zr(e).length,n=>n.length),BI=e=>br(e).filter(n=>n.trim().length!==0||n.indexOf(Ao)>-1).isSome(),PI=e=>Ui(e)&&Ka(e,"contenteditable")==="false",fx=["img","br"],D_=e=>BI(e)||an(fx,zo(e))||PI(e),hD=e=>ae(e,D_),$I=e=>II(e,D_),II=(e,n)=>{const o=r=>{const c=Zr(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return V.some(f);const b=o(f);if(b.isSome())return b}return V.none()};return o(e)},pD="[data-mce-autocompleter]",LI=(e,n)=>{if(bD(ne.fromDom(e.getBody())).isNone()){const o=ne.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());js(o,ne.fromDom(n.extractContents())),n.insertNode(o.dom),Kc(o).each(r=>r.dom.normalize()),$I(o).map(r=>{e.selection.setCursorLocation(r.dom,NI(r))})}},FI=e=>qt(e,pD),bD=e=>lt(e,pD),vD=(e,n)=>bD(n).each(o=>{const r=e.selection.getBookmark();Tr(o),e.selection.moveToBookmark(r)}),HI={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},AC=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},yD=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!of(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},CD=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class ci{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new ci(n,HI[n]||1);return o&&ut(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!re(n))return ze(n)&&ut(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new ci(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=AC(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=AC(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(CD(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||CD(f))return!1}if(f.type===8||f.type===3&&!yD(f)||f.type===3&&f.parent&&o[f.parent.name]&&of((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=AC(f,u));return!0}walk(n){return AC(this,null,n)}}const VI=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),wD=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&VI(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},zI=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const C=r.exec(n);if(C===null)return b;if(C[1]==="!"){Io(C[2],"--")?b=wD(n,!1,C.index+3):b=wD(n,!0,C.index+1);break}else{c.lastIndex=r.lastIndex;const E=c.exec(n);if(Q(E)||E.index!==r.lastIndex)continue;C[1]==="/"?f-=1:tn(u,C[2])||(f+=1),b=r.lastIndex+E[0].length;break}}return b},UI=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},SD=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=UI(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,C=f[0].length;let E;u[f[1]]?E=b:E=zI(r,c,b),c=c.substring(0,b-C)+c.substring(E),o.lastIndex=b-C}return Oe(c)},WI=SD,xD=e=>{const n=wa(e,"[data-mce-bogus]");Ie(n,o=>{Ka(o,"data-mce-bogus")==="all"?os(o):la(o)?(yo(o,ne.fromText(Dl)),os(o)):Tr(o)})},TD=e=>{const n=wa(e,"input");Ie(n,o=>{Ls(o,"name")})},ZI=(e,n)=>{const o=kr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},jI=(e,n)=>{const o=e.getDoc(),r=Ol(ne.fromDom(e.getBody())),c=ne.fromTag("div",o);Qs(c,"data-mce-bogus","all"),Uf(c,{position:"fixed",left:"-9999999px",top:"0"}),wd(c,n.innerHTML),xD(c),TD(c);const u=qg(r);js(u,c);const f=Oe(c.dom.innerText);return os(c),f},GI=(e,n,o)=>{let r;return n.format==="raw"?r=Ze.trim(WI(e.serializer,o.innerHTML)):n.format==="text"?r=jI(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=ZI(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Rl(ne.fromDom(o))&&re(r)?Ze.trim(r):r},qI=(e,n)=>V.from(e.getBody()).fold(Ge(n.format==="tree"?new ci("body",11):""),o=>GI(e,n,o)),ED=Ze.makeMap,kD=e=>{const n=[];e=e||{};const o=e.indent,r=ED(e.indent_before||""),c=ED(e.indent_after||""),u=tl.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,C,E)=>{if(o&&r[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}if(n.push("<",b),C)for(let N=0,R=C.length;N<R;N++){const F=C[N];n.push(" ",F.name,'="',u(F.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&c[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}},end:b=>{let C;n.push("</",b,">"),o&&c[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(b,C)=>{b.length>0&&(n[n.length]=C?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,C)=>{C?n.push("<?",b," ",u(C),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Zh=(e={},n=Pl())=>{const o=kD(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:C=>{var E;o.text((E=C.value)!==null&&E!==void 0?E:"",C.raw)},8:C=>{var E;o.comment((E=C.value)!==null&&E!==void 0?E:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var E;o.doctype((E=C.value)!==null&&E!==void 0?E:"")},4:C=>{var E;o.cdata((E=C.value)!==null&&E!==void 0?E:"")},11:C=>{let E=C;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=C=>{var E;const N=f[C.type];if(N)N(C);else{const R=C.name,F=R in n.getVoidElements();let Y=C.attributes;if(u&&Y&&Y.length>1){const ee=[];ee.map={};const j=n.getElementRule(C.name);if(j){for(let X=0,fe=j.attributesOrder.length;X<fe;X++){const de=j.attributesOrder[X];if(de in Y.map){const be=Y.map[de];ee.map[de]=be,ee.push({name:de,value:be})}}for(let X=0,fe=Y.length;X<fe;X++){const de=Y[X].name;if(!(de in ee.map)){const be=Y.map[de];ee.map[de]=be,ee.push({name:de,value:be})}}Y=ee}}if(o.start(R,Y,F),!F){let ee=C.firstChild;if(ee){(R==="pre"||R==="textarea")&&ee.type===3&&((E=ee.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(ee);while(ee=ee.next)}o.end(R)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},_D=new Set;Ie(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{_D.add(n)});const OD=["font","text-decoration","text-emphasis"],zt=(e,n)=>Is(e.parseStyle(e.getAttrib(n,"style"))),AD=e=>_D.has(e),DD=(e,n)=>Es(zt(e,n),o=>!AD(o)),KI=e=>jt(e,n=>Xo(OD,o=>Io(n,o))),R_=(e,n,o)=>{const r=zt(e,n),c=zt(e,o),u=f=>{var b,C;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",N=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return mo(E)&&mo(N)&&E!==N};return Xo(r,f=>{const b=C=>Xo(C,E=>E===f);if(!b(c)&&b(OD)){const C=KI(c);return Xo(C,u)}else return u(f)})},RD=(e,n,o)=>V.from(o.container()).filter(Je).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),M_=Ve(RD,!0,Mh),N_=Ve(RD,!1,Mh),YI=e=>{const n=e.container();return Je(n)&&(n.data.length===0||ie(n.data)&&wf.isBookmarkNode(n.parentNode))},jh=(e,n)=>o=>hg(e?0:-1,o).filter(n).isSome(),DC=e=>Qm(e)&&Yl(ne.fromDom(e),"display")==="block",B_=e=>En(e)&&!Au(e),fW=jh(!0,DC),XI=jh(!1,DC),un=jh(!0,Jc),RC=jh(!1,Jc),kn=jh(!0,Jl),P_=jh(!1,Jl),R1=jh(!0,B_),M1=jh(!1,B_),JI=e=>e.slice(0,-1),gW=(e,n,o)=>hl(n,e)?JI(Hf(e,r=>o(r)||ho(r,n))):[],QI=(e,n)=>gW(e,n,Ne),_g=(e,n)=>[e].concat(QI(e,n)),$_=(e,n,o)=>MS(e,n,o,YI),on=(e,n)=>us(_g(ne.fromDom(n.container()),e),$c),MD=(e,n,o)=>$_(e,n.dom,o).forall(r=>on(n,o).fold(()=>!_r(r,o,n.dom),c=>!_r(r,o,n.dom)&&hl(c,ne.fromDom(r.container())))),ND=(e,n,o)=>on(n,o).fold(()=>$_(e,n.dom,o).forall(r=>!_r(r,o,n.dom)),r=>$_(e,r.dom,o).isNone()),I_=Ve(ND,!1),qv=Ve(ND,!0),BD=Ve(MD,!1),eL=Ve(MD,!0),tL=e=>c1(e).exists(la),gx=(e,n,o)=>{const r=jt(_g(ne.fromDom(o.container()),n),$c),c=To(r).getOr(n);return oi(e,c.dom,o).filter(tL)},hx=(e,n)=>c1(n).exists(la)||gx(!0,e,n).isSome(),L_=(e,n)=>_S(n).exists(la)||gx(!1,e,n).isSome(),hW=Ve(gx,!1),pW=Ve(gx,!0),PD=e=>De.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),$D=(e,n)=>{const o=jt(_g(ne.fromDom(n.container()),e),$c);return To(o).getOr(e)},ID=(e,n)=>PD(n)?N_(n):N_(n)||su($D(e,n).dom,n).exists(N_),LD=(e,n)=>PD(n)?M_(n):M_(n)||bc($D(e,n).dom,n).exists(M_),FD=e=>an(["pre","pre-wrap"],e),F_=e=>c1(e).bind(n=>k(n,Uo)).exists(n=>FD(Yl(n,"white-space"))),$n=(e,n)=>su(e.dom,n).isNone(),HD=(e,n)=>bc(e.dom,n).isNone(),px=(e,n)=>$n(e,n)||HD(e,n)||I_(e,n)||qv(e,n)||L_(e,n)||hx(e,n),VD=e=>ze(e)&&En(e)&&$y(e),H_=(e,n)=>o=>VD(new Er(o,e)[n]()),zD=(e,n)=>{const o=bc(e.dom,n).getOr(n),r=H_(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},UD=(e,n)=>{const o=su(e.dom,n).getOr(n),r=H_(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},WD=(e,n)=>F_(n)?!1:px(e,n)||ID(e,n)||LD(e,n),MC=(e,n)=>F_(n)?!1:I_(e,n)||BD(e,n)||L_(e,n)||ID(e,n)||UD(e,n),ZD=e=>{const n=e.container(),o=e.offset();return Je(n)&&o<n.data.length?De(n,o+1):e},NC=(e,n)=>F_(n)?!1:qv(e,n)||eL(e,n)||hx(e,n)||LD(e,n)||zD(e,n),V_=(e,n)=>MC(e,n)||NC(e,ZD(n)),jD=(e,n)=>Rh(e.charAt(n)),GD=(e,n)=>Mh(e.charAt(n)),nL=e=>{const n=e.container();return Je(n)&&_s(n.data,Ao)},oL=e=>{const n=e.split("");return Vt(n,(o,r)=>Rh(o)&&r>0&&r<n.length-1&&$S(n[r-1])&&$S(n[r+1])?" ":o).join("")},qD=(e,n,o)=>{const r=n.data,c=De(n,0);return!o&&jD(r,0)&&!V_(e,c)?(n.data=" "+r.slice(1),!0):o&&GD(r,0)&&MC(e,c)?(n.data=Ao+r.slice(1),!0):!1},sL=e=>{const n=e.data,o=oL(n);return o!==n?(e.data=o,!0):!1},bx=(e,n,o)=>{const r=n.data,c=De(n,r.length-1);return!o&&jD(r,r.length-1)&&!V_(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&GD(r,r.length-1)&&NC(e,c)?(n.data=r.slice(0,-1)+Ao,!0):!1},z_=(e,n)=>{const o=n.container();if(!Je(o))return V.none();if(nL(n)){const r=qD(e,o,!1)||sL(o)||bx(e,o,!1);return Vn(r,n)}else if(V_(e,n)){const r=qD(e,o,!0)||bx(e,o,!0);return Vn(r,n)}else return V.none()},rL=e=>{const n=ne.fromDom(e.getBody());e.selection.isCollapsed()&&z_(n,De.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},KD=(e,n,o)=>{if(o===0)return;const r=ne.fromDom(e),c=is(r,$c).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&NC(c,De(e,e.data.length)),b=n===0&&MC(c,De(e,0));e.replaceData(n,o,Dp(u,4,b,f))},vx=(e,n)=>{const o=e.data.slice(n),r=o.length-kl(o).length;KD(e,n,r)},U_=(e,n)=>{const o=e.data.slice(0,n),r=o.length-_l(o).length;KD(e,n-r,r)},W_=(e,n,o,r=!0)=>{const c=_l(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),os(ne.fromDom(f)),o&&vx(u,c),u},aL=(e,n)=>{const o=e.container(),r=e.offset();return!De.isTextPosition(e)&&o===n.parentNode&&r>De.before(n).offset()},cL=(e,n)=>aL(n,e)?De(n.container(),n.offset()-1):n,lL=e=>Je(e)?De(e,0):De.before(e),YD=e=>Je(e)?De(e,e.data.length):De.after(e),XD=e=>Wo(e.previousSibling)?V.some(YD(e.previousSibling)):e.previousSibling?$d(e.previousSibling):V.none(),JD=e=>Wo(e.nextSibling)?V.some(lL(e.nextSibling)):e.nextSibling?Ll(e.nextSibling):V.none(),N1=(e,n)=>V.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>su(e,De.before(o))).orThunk(()=>bc(e,De.after(n))),iL=(e,n)=>bc(e,De.after(n)).orThunk(()=>su(e,De.before(n))),QD=(e,n)=>XD(n).orThunk(()=>JD(n)).orThunk(()=>N1(e,n)),uL=(e,n)=>JD(n).orThunk(()=>XD(n)).orThunk(()=>iL(e,n)),dL=(e,n,o)=>e?uL(n,o):QD(n,o),eR=(e,n,o)=>dL(e,n,o).map(Ve(cL,o)),Z_=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},tR=e=>n=>n.dom===e,nR=(e,n)=>n&&tn(e.schema.getBlockElements(),zo(n)),zl=e=>{if(Gs(e)){const n=ne.fromHtml('<br data-mce-bogus="1">');return Yo(e),js(e,n),V.some(De.before(n.dom))}else return V.none()},mL=(e,n,o)=>{const r=mc(e).filter(La),c=hd(e).filter(La);return os(e),Wm(r,c,n,(u,f,b)=>{const C=u.dom,E=f.dom,N=C.data.length;return W_(C,E,o),b.container()===E?De(C,N):b}).orThunk(()=>(o&&(r.each(u=>U_(u.dom,u.dom.length)),c.each(u=>vx(u.dom,0))),n))},fL=(e,n)=>tn(e.schema.getTextInlineElements(),zo(n)),B1=(e,n,o,r=!0)=>{const c=eR(n,e.getBody(),o.dom),u=is(o,Ve(nR,e),tR(e.getBody())),f=mL(o,c,fL(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(zl).fold(()=>{r&&Z_(e,n,f)},b=>{r&&Z_(e,n,V.some(b))})},gL=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,hL=e=>gL.test(e),Wu=(e,n)=>Ya(ne.fromDom(n),pk(e))&&!sf(e.schema,n)&&e.dom.isEditable(n),pL=e=>{var n;return rs.DOM.getStyle(e,"direction",!0)==="rtl"||hL((n=e.textContent)!==null&&n!==void 0?n:"")},bL=(e,n,o)=>jt(rs.DOM.getParents(o.container(),"*",n),e),Ms=(e,n,o)=>{const r=bL(e,n,o);return V.from(r[r.length-1])},yx=(e,n,o)=>{const r=bf(n,e),c=bf(o,e);return ze(r)&&r===c},bW=e=>Ic(e)||xa(e),Us=(e,n)=>{const o=n.container(),r=n.offset();return e?pn(o)?Je(o.nextSibling)?De(o.nextSibling,0):De.after(o):Ic(n)?De(o,r+1):n:pn(o)?Je(o.previousSibling)?De(o.previousSibling,o.previousSibling.data.length):De.before(o):xa(n)?De(o,r-1):n},Do=Ve(Us,!0),iu=Ve(Us,!1),oR=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},sR=e=>{e.execCommand("delete")},BC=e=>oR(e,"Delete"),j_=e=>oR(e,"ForwardDelete"),rR=e=>n=>gr(Kc(n),e,ho),aR=e=>th(e)||ec(e),Cx=(e,n)=>hl(e,n)?k(n,aR,rR(e)):V.none(),G_=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},q_=(e,n,o)=>Pr(Ll(o),$d(o),(r,c)=>{const u=Us(!0,r),f=Us(!1,c),b=Us(!1,n);return e?bc(o,b).exists(C=>C.isEqual(f)&&n.isEqual(u)):su(o,b).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),K_=e=>(em(e)?mc(e):pl(e)).bind(K_).orThunk(()=>V.some(e)),Zu=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=K_(o).getOr(o),f=ne.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?G_(e,r):Gs(f)&&(S(f),r&&e.selection.setCursorLocation(f.dom,0)),!ho(o,f)){const b=gr(Kc(f),o)?[]:jg(f);Ie(b.concat(Zr(o)),C=>{!ho(C,f)&&!hl(C,f)&&Gs(C)&&os(C)})}},vL=e=>n=>ho(e,n),Y_=e=>wa(e,"td,th"),vW=(e,n)=>{const o=E=>Bh(ne.fromDom(E),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=Pr(r,c,ho).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},PC=(e,n)=>({start:e,end:n}),yL=(e,n,o)=>({rng:e,table:n,cells:o}),Og=zs.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),wx=(e,n)=>qt(ne.fromDom(e),"td,th",n),P1=e=>!ho(e.start,e.end),uu=(e,n)=>Bh(e.start,n).bind(o=>Bh(e.end,n).bind(r=>Vn(ho(o,r),o))),$C=(e,n)=>!P1(e)&&uu(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),gs=(e,n)=>{const o=wx(e.startContainer,n),r=wx(e.endContainer,n);return Pr(o,r,PC)},IC=e=>n=>Bh(n,e).bind(o=>$s(Y_(o)).map(r=>PC(n,r))),cR=e=>n=>Bh(n,e).bind(o=>To(Y_(o)).map(r=>PC(r,n))),Sx=e=>n=>uu(n,e).map(o=>yL(n,o,Y_(o))),xx=(e,n,o,r)=>{if(o.collapsed||!e.forall(P1))return V.none();if(n.isSameTable){const c=e.bind(Sx(r));return V.some({start:c,end:c})}else{const c=wx(o.startContainer,r),u=wx(o.endContainer,r),f=c.bind(IC(r)).bind(Sx(r)),b=u.bind(cR(r)).bind(Sx(r));return V.some({start:f,end:b})}},Tx=(e,n)=>Dr(e,o=>ho(o,n)),LC=e=>Pr(Tx(e.cells,e.rng.start),Tx(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),X_=(e,n,o)=>e.exists(r=>$C(r,o)&&FS(r.start,n)),FC=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},J_=(e,n,o,r)=>xx(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=LC(c).getOr([]);if(u&&c.cells.length===f.length)return V.some(Og.fullTable(c.table));if(f.length>0){if(u)return V.some(Og.partialTable(f,V.none()));{const b=FC(o,n);return V.some(Og.partialTable(f,V.some(We(J({},n),{rng:b}))))}}else return V.none()}),lR=(e,n,o,r)=>xx(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(LC).getOr([]),b=u.bind(LC).getOr([]);if(f.length>0&&b.length>0){const C=FC(o,n);return V.some(Og.multiTable(f,b,C))}else return V.none()}),iR=(e,n)=>{const o=vL(e),r=gs(n,o),c=vW(n,o);return X_(r,n,o)?r.map(u=>Og.singleCellTable(n,u.start)):c.isMultiTable?lR(r,c,n,o):J_(r,c,n,o)},Q_=e=>Ie(e,n=>{Ls(n,"contenteditable"),S(n)}),uR=(e,n)=>V.from(e.dom.getParent(n,e.dom.isBlock)).map(ne.fromDom),dR=(e,n,o)=>{o.each(r=>{n?os(r):(S(r),e.selection.setCursorLocation(r.dom,0))})},Gh=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),tO(e,c,n,!1).each(u=>u())},eO=e=>{const n=Em(e),o=ne.fromDom(e.selection.getNode());vl(o.dom)&&Gs(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Xo(n,r=>ho(r,o))&&Qs(o,"data-mce-selected","1")},Ex=(e,n,o)=>V.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=uR(e,f?u.endContainer:u.startContainer);u.deleteContents(),dR(e,f,b.filter(Gs));const C=f?n[0]:n[n.length-1];return Gh(e,C,r,f),Gs(C)?V.none():V.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);Q_(c),eO(e)}),CL=(e,n,o,r)=>V.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];Gh(e,u,c,!0),Gh(e,f,c,!1);const b=Gs(u)?n:n.slice(1),C=Gs(f)?o:o.slice(0,-1);Q_(b.concat(C)),r.deleteContents(),eO(e)}),tO=(e,n,o,r=!0)=>V.some(()=>{Zu(e,n,o,r)}),mR=(e,n)=>V.some(()=>B1(e,!1,n)),fR=(e,n,o)=>iR(n,o).bind(r=>r.fold(Ve(tO,e),Ve(mR,e),Ve(Ex,e),Ve(CL,e))),gR=(e,n)=>HC(e,n),kx=(e,n,o,r)=>_x(n,r).fold(()=>fR(e,n,o),c=>gR(e,c)),hR=(e,n,o)=>{const r=ne.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?Ex(e,o,V.none()):kx(e,r,c,n)},nO=(e,n)=>us(_g(n,e),Ha),_x=(e,n)=>us(_g(n,e),Kl("caption")),pR=(e,n,o,r,c)=>vv(o,e.getBody(),c).bind(u=>nO(n,ne.fromDom(u.getNode())).bind(f=>ho(f,r)?V.none():V.some(Fe))),HC=(e,n)=>V.some(()=>{S(n),e.selection.setCursorLocation(n.dom,0)}),bR=(e,n,o,r)=>Ll(e.dom).bind(c=>$d(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),vR=(e,n)=>HC(e,n),yR=(e,n,o)=>_x(e,ne.fromDom(o.getNode())).fold(()=>V.some(Fe),r=>Vn(!ho(r,n),Fe)),CR=(e,n,o,r,c)=>vv(o,e.getBody(),c).fold(()=>V.some(Fe),u=>bR(r,o,c,u)?vR(e,r):yR(n,r,u)),wR=(e,n,o,r)=>{const c=De.fromRangeStart(e.selection.getRng());return nO(o,r).bind(u=>Gs(u)?HC(e,u):pR(e,o,n,u,c))},SR=(e,n,o,r)=>{const c=De.fromRangeStart(e.selection.getRng());return Gs(r)?HC(e,r):CR(e,o,n,r,c)},oO=(e,n)=>e?kn(n):P_(n),xR=(e,n)=>{const o=De.fromRangeStart(e.selection.getRng());return oO(n,o)||oi(n,e.getBody(),o).exists(r=>oO(n,r))},TR=(e,n,o)=>{const r=ne.fromDom(e.getBody());return _x(r,o).fold(()=>wR(e,n,r,o).orThunk(()=>Vn(xR(e,n),Fe)),c=>SR(e,n,r,c))},Ox=(e,n)=>{const o=ne.fromDom(e.selection.getStart(!0)),r=Em(e);return e.selection.isCollapsed()&&r.length===0?TR(e,n,o):hR(e,o,r)},Ag=(e,n)=>{let o=n;for(;o&&o!==e;){if(Si(o)||En(o))return o;o=o.parentNode}return null},Ax=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],ER=Ze.each,Dx=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const N={};return ER(n.getAttribs(E),R=>{const F=R.nodeName.toLowerCase();F!=="style"&&!c(F)&&(N[F]=n.getAttrib(E,F))}),N},C=(E,N)=>{for(const R in E)if(tn(E,R)){const F=N[R];if(Go(F)||E[R]!==F)return!1;delete N[R]}for(const R in N)if(tn(N,R))return!1;return!0};return Me(u)&&Me(f)&&(!C(b(u),b(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!_a(u)&&!_a(f)},c=u=>Xo(Ax,f=>Io(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Rx=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},Mx=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const C=r.nodes[c];C?C.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],C=b.name;if(C in o.attributes.map){const E=r.attributes[C];E?E.nodes.push(o):r.attributes[C]={filter:b,nodes:[o]}}}},VC=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Rx(o,c=>{Mx(e,n,c,r)}),r},Nx=(e,n)=>{const o=(r,c)=>{ut(r,u=>{const f=dr(u.nodes);Ie(u.filter.callbacks,b=>{for(let C=f.length-1;C>=0;C--){const E=f[C];(!(c?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||Jt(E.parent))&&f.splice(C,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},sO=(e,n,o,r={})=>{const c=VC(e,n,o);Nx(c,r)},qh=(e,n,o)=>{if(e.insert&&n(o)){const r=new ci("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new ci("#text",3)).value=Ao},rO=e=>{var n;return Bx(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Ao},Bx=(e,n)=>{const o=e==null?void 0:e.firstChild;return ze(o)&&o===e.lastChild&&o.name===n},zC=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Hd=(e,n,o,r)=>r.isEmpty(n,o,c=>zC(e,c)),kR=(e,n)=>ze(e)&&(n(e)||e.name==="br"),wL=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return V.from(n)},Px=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Px(c,n,o);e.unwrap()}},$x=(e,n,o,r=Fe)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Ze.makeMap("tr,td,th,tbody,thead,tfoot,table"),C=new Set,E=N=>N!==o&&!b[N.name];for(let N=0;N<e.length;N++){const R=e[N];let F,Y,ee;if(!R.parent||C.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let X=R.next;for(;X&&c[X.name];){X.name="li",C.add(X),R.parent.insert(X,R.parent);X=X.next}R.unwrap();continue}const j=[R];for(F=R.parent;F&&!n.isValidChild(F.name,R.name)&&E(F);F=F.parent)j.push(F);if(F&&j.length>1)if(n.isValidChild(F.name,R.name)){j.reverse(),Y=j[0].clone(),r(Y);let X=Y;for(let fe=0;fe<j.length-1;fe++){n.isValidChild(X.name,j[fe].name)&&fe>0?(ee=j[fe].clone(),r(ee),X.append(ee)):ee=X;for(let de=j[fe].firstChild;de&&de!==j[fe+1];){const be=de.next;ee.append(de),de=be}X=ee}Hd(n,u,f,Y)?F.insert(R,j[0],!0):(F.insert(Y,j[0],!0),F.insert(R,Y)),F=j[0],(Hd(n,u,f,F)||Bx(F,"br"))&&F.empty().remove()}else Px(R,n);else if(R.parent){if(R.name==="li"){let X=R.prev;if(X&&(X.name==="ul"||X.name==="ol")){X.append(R);continue}if(X=R.next,X&&(X.name==="ul"||X.name==="ol")&&X.firstChild){X.insert(R,X.firstChild,!0);continue}const fe=new ci("ul",1);r(fe),R.wrap(fe);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const X=new ci("div",1);r(X),R.wrap(X)}else Px(R,n)}}},SL=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},xL=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&SL(o,"a")),TL=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},aO=e=>{const n=De.fromRangeStart(e),o=De.fromRangeEnd(e),r=e.commonAncestorContainer;return oi(!1,r,o).map(c=>!_r(n,o,r)&&_r(n,c,r)?TL(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},ju=e=>e.collapsed?e:aO(e),cO=e=>ze(e.firstChild)&&e.firstChild===e.lastChild,Ix=e=>e.name==="br"||e.value===Ao,lO=(e,n)=>e.getBlockElements()[n.name]&&cO(n)&&Ix(n.firstChild),EL=(e,n)=>{const o=e.getNonEmptyElements();return ze(n)&&(n.isEmpty(o)||lO(e,n))},_R=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),EL(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},kL=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},OR=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return kL(c)},iO=e=>{var n;return jt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},_L=e=>e.data===Ao||Ds(e),AR=e=>ze(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&_L(e.firstChild),OL=e=>!e.firstChild||AR(e),UC=e=>e.length>0&&OL(e[e.length-1])?e.slice(0,-1):e,Lx=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},AL=(e,n)=>!!Lx(e,n),DR=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},DL=(e,n)=>{const o=De.before(e),c=Vu(n).next(o);return c?c.toRange():null},RR=(e,n)=>{const o=De.after(e),c=Vu(n).prev(o);return c?c.toRange():null},RL=(e,n,o,r)=>{const c=DR(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Ze.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),RR(n[n.length-1],o)},ML=(e,n,o)=>{const r=e.parentNode;return r&&Ze.each(n,c=>{r.insertBefore(c,e)}),DL(e,o)},NL=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),RR(n[0],o)),MR=(e,n,o,r)=>{const c=OR(n,e,r),u=Lx(n,o.startContainer),f=UC(iO(c.firstChild)),b=1,C=2,E=n.getRoot(),N=R=>{const F=De.fromRangeStart(o),Y=Vu(n.getRoot()),ee=R===b?Y.prev(F):Y.next(F),j=ee==null?void 0:ee.getNode();return j?Lx(n,j)!==u:!0};return u?N(b)?ML(u,f,E):N(C)?NL(u,f,E,n):RL(u,f,E,o):null},BL=["pre"],uO=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===b,E=an(BL,u.name);if(C&&E){const N=u.attr("contenteditable")!=="false",R=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,F=V.from(Ag(r,o)).forall(Si);return N&&R&&F}else return!1},Dg=vl,PL=(e,n,o)=>{if(ze(o)){const r=e.getParent(n.endContainer,Dg);return o===r&&FS(ne.fromDom(o),n)}else return!1},$L=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},Fx=(e,n)=>{V.from(e.getParent(n,"td,th")).map(ne.fromDom).each(L)},NR=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=Dx(e);Ze.each(r.select("*[data-mce-fragment]"),f=>{if(ze(o[f.nodeName.toLowerCase()])&&DD(r,f)){for(let C=f.parentElement;ze(C)&&C!==c&&!R_(r,f,C);C=C.parentElement)if(u.compare(C,f)){r.remove(f,!0);break}}})}},BR=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},IL=e=>{Ze.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},PR=e=>!!e.getAttribute("data-mce-fragment"),LL=(e,n)=>ze(n)&&!e.schema.getVoidElements()[n.nodeName],$1=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const C=Ag(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),b.select(C);return}let E=f.createRng();const N=n.previousSibling;if(Je(N)){E.setStart(N,(r=(o=N.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Y=n.nextSibling;Je(Y)&&(N.appendData(Y.data),(c=Y.parentNode)===null||c===void 0||c.removeChild(Y))}else E.setStartBefore(n),E.setEndBefore(n);const R=Y=>{let ee=De.fromRangeStart(Y);return ee=Vu(e.getBody()).next(ee),ee==null?void 0:ee.toRange()},F=f.getParent(n,f.isBlock);f.remove(n),F&&f.isEmpty(F)&&(Yo(ne.fromDom(F)),E.setStart(F,0),E.setEnd(F,0),!Dg(F)&&!PR(F)&&(u=R(E))?(E=u,f.remove(F)):f.add(F,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(E)},$R=e=>{const n=e.dom,o=ju(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Dg);PL(n,o,r)?tO(e,o,ne.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Je(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},IR=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return V.some(n);return V.none()},LR=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,C=o.merge,E=Zh({validate:!0},e.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,N);let R=u.getRng();const F=R.startContainer,Y=e.getBody();F===Y&&u.isCollapsed()&&f.isBlock(Y.firstChild)&&LL(e,Y.firstChild)&&f.isEmpty(Y.firstChild)&&(R=f.createRng(),R.setStart(Y.firstChild,0),R.setEnd(Y.firstChild,0),u.setRng(R)),u.isCollapsed()||$R(e);const ee=u.getNode(),j={context:ee.nodeName.toLowerCase(),data:o.data,insert:!0},X=b.parse(n,j);if(o.paste===!0&&_R(e.schema,X)&&AL(f,ee))return R=MR(E,f,u.getRng(),X),R&&u.setRng(R),n;o.paste===!0&&uO(f,X,ee,e.getBody())&&((r=X.firstChild)===null||r===void 0||r.unwrap()),BR(X);let fe=X.lastChild;if(fe&&fe.attr("id")==="mce_marker"){const de=fe;for(fe=fe.prev;fe;fe=fe.walk(!0))if(fe.type===3||!f.isBlock(fe.name)){fe.parent&&e.schema.isValidChild(fe.parent.name,"span")&&fe.parent.insert(de,fe,fe.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ee),!j.invalid)n=E.serialize(X),$L(e,n,ee);else{e.selection.setContent(N);let de=u.getNode(),be;const we=e.getBody();for(wi(de)?de=be=we:be=de;be&&be!==we;)de=be,be=be.parentNode;n=de===we?we.innerHTML:f.getOuterHTML(de);const He=b.parse(n),gt=IR(He),ot=gt.bind(wL).getOr(He);gt.each(Ft=>Ft.replace(X));const Ee=X.children(),ke=(c=X.parent)!==null&&c!==void 0?c:He;X.unwrap();const xt=jt(Ee,Ft=>xL(e.schema,Ft,ke));$x(xt,e.schema,ot),sO(b.getNodeFilters(),b.getAttributeFilters(),He),n=E.serialize(He),de===we?f.setHTML(we,n):f.setOuterHTML(de,n)}return NR(e,C),$1(e,f.get("mce_marker")),IL(e.getBody()),Fx(f,u.getStart()),Ed(e.schema,e.getBody(),u.getStart()),n},I1=e=>e instanceof ci,FR=e=>{Wh(e)&&Ll(e.getBody()).each(n=>{const o=n.getNode(),r=Jl(o)?Ll(o).getOr(n):n;e.selection.setRng(r.toRange())})},dO=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&FR(e)},HR=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=kr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Qb(e),o)):o||(o=c),dO(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Zh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Rl(ne.fromDom(n))?o:Ze.trim(o);return dO(e,c,r.no_selection),{content:c,html:c}}},FL=(e,n,o,r)=>{sO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Zh({validate:!1},e.schema).serialize(o),u=Rl(ne.fromDom(n))?c:Ze.trim(c);return dO(e,u,r.no_selection),{content:o,html:u}},HL=(e,n,o)=>V.from(e.getBody()).map(r=>I1(n)?FL(e,r,n,o):HR(e,r,n,o)).getOr({content:n,html:I1(o.content)?"":o.content}),Hx=(e,n,o)=>is(e,n,o).isSome(),VR=(e,n)=>M(e,n).isSome(),Vx=e=>ue(e)?e:Ne,VL=(e,n,o)=>{let r=e.dom;const c=Vx(o);for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return V.none()},mO=(e,n,o)=>{const r=n(e),c=Vx(o);return r.orThunk(()=>c(e)?V.none():VL(e,n,c))},zx=tC,Ux=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(si(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Wx=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>Ux(e,b,o)?!0:b.parentNode===u||!!Ef(e,b,o,r,!0));return!!Ef(e,f,o,r,c)},Zx=(e,n,o)=>Lr(o)&&zx(n,o.inline)||_i(o)&&zx(n,o.block)?!0:si(o)?Me(n)&&e.is(n,o.selector):!1,zR=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(ue(o.onmatch))return o.onmatch(n,o,r);if(f){if(Sc(f)){for(let C=0;C<f.length;C++)if(b?e.getAttrib(n,f[C]):Dv(e,n,f[C]))return!0}else for(const C in f)if(tn(f,C)){const E=b?e.getAttrib(n,C):Dv(e,n,C),N=Cf(f[C],u),R=Jt(E)||ba(E);if(R&&Jt(N))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!zx(E,nC(N,C)))return!1}}return!0},Ef=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Me(n))for(let b=0;b<u.length;b++){const C=u[b];if(Zx(e.dom,n,C)&&zR(f,n,C,"attributes",c,r)&&zR(f,n,C,"styles",c,r)){const E=C.classes;if(E){for(let N=0;N<E.length;N++)if(!e.dom.hasClass(n,Cf(E[N],r)))return}return C}}},Kv=(e,n,o,r,c)=>{if(r)return Wx(e,r,n,o,c);if(r=e.selection.getNode(),Wx(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Wx(e,u,n,o,c))},Rg=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const C=n[b];!c[C]&&Ef(e,f,C,o)&&(c[C]=!0,r.push(C))}},e.dom.getRoot()),r},zL=(e,n)=>{const o=c=>ho(c,ne.fromDom(e.getBody())),r=(c,u)=>Ef(e,c.dom,u)?V.some(u):V.none();return V.from(e.selection.getStart(!0)).bind(c=>mO(ne.fromDom(c),u=>cc(n,f=>r(u,f)),o)).getOrNull()},fO=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=km(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!si(b))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],b.selector))return!0}}return!1},Fr=(e,n,o)=>Jo(o,(r,c)=>{const u=St(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),Kh=W,gO=(e,n)=>e.importNode(n,!0),Mg=e=>{const n=[];let o=e;for(;o;){if(Je(o)&&o.data!==Kh||o.childNodes.length>1)return[];Me(o)&&n.push(o),o=o.firstChild}return n},hO=e=>Mg(e).length>0,jx=e=>{if(e){const n=new Er(e,e);for(let o=n.current();o;o=n.next())if(Je(o))return o}return null},L1=e=>{const n=ne.fromTag("span");return Ca(n,{id:NS,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&js(n,ne.fromText(Kh)),n},UL=e=>{const n=jx(e);return n&&n.data.charAt(0)===Kh&&n.deleteData(0,1),n},pO=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(hO(n))B1(e,!1,ne.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,C=u.startOffset,E=u.endContainer,N=u.endOffset,R=UL(n);r.remove(n,!0),b===R&&C>0&&u.setStart(R,C-1),E===R&&N>0&&u.setEnd(R,N-1),f&&r.isEmpty(f)&&S(ne.fromDom(f)),c.setRng(u)}},Yh=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)pO(e,n,o);else if(n=Kr(e.getBody(),c.getStart()),!n)for(;n=r.get(NS);)pO(e,n,!1)},WL=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Ve(Qy,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(nh(ne.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},Xh=(e,n)=>(e.appendChild(n),n),UR=(e,n)=>{var o;const r=cl(e,(u,f)=>Xh(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return Xh(r,c.createTextNode(Kh))},Jh=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,C=jt(Is(f.get()),R=>R!==r&&!_s(R,"removeformat")),E=Fr(e,o,C);if(jt(E,R=>!Oa(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,c,R,u),b.remove(R),V.some(R)}else return V.none()},Vd=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=Kr(e.getBody(),c.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&N.test(E.charAt(b))&&N.test(E.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let F=Fl(e.dom,f,u);F=xC(F),e.formatter.apply(n,o,F),c.moveToBookmark(R)}else{let R=r?jx(r):null;(!r||(R==null?void 0:R.data)!==Kh)&&(r=gO(e.getDoc(),L1(!0).dom),R=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(R,b)}},Gx=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const C=u.getRng(),E=C.startContainer,N=C.startOffset;let R=E;Je(E)&&(N!==E.data.length&&(f=!0),R=R.parentNode);const F=[];let Y;for(;R;){if(Ef(e,R,n,o,r)){Y=R;break}R.nextSibling&&(f=!0),F.push(R),R=R.parentNode}if(Y)if(f){const ee=u.getBookmark();C.collapse(!0);let j=Fl(c,C,b,!0);j=xC(j),e.formatter.remove(n,o,j,r),u.moveToBookmark(ee)}else{const ee=Kr(e.getBody(),Y),j=L1(!1).dom;WL(e,j,ee!=null?ee:Y);const X=Jh(e,j,Y,n,o,r),fe=UR(F.concat(X.toArray()),j);ee&&pO(e,ee,!1),u.setCursorLocation(fe,1),c.isEmpty(Y)&&c.remove(Y)}},bO=(e,n)=>{const o=e.selection,r=e.getBody();Yh(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===Kh&&Yh(e,Kr(r,o.getStart())),(n===37||n===39)&&Yh(e,Kr(r,o.getStart()))},ZL=e=>{e.on("mouseup keydown",n=>{bO(e,n.keyCode)})},WR=e=>{const n=L1(!1),o=UR(e,n.dom);return{caretContainer:n,caretPosition:De(o,0)}},WC=(e,n)=>{const{caretContainer:o,caretPosition:r}=WR(n);return yo(ne.fromDom(e),o),os(ne.fromDom(e)),r},jL=(e,n)=>{const{caretContainer:o,caretPosition:r}=WR(n);return e.selection.getRng().insertNode(o.dom),r},Gu=(e,n)=>{const o=e.schema.getTextInlineElements();return tn(o,zo(n))&&!sl(n.dom)&&!Sa(n.dom)},ZC=e=>sl(e.dom)&&hO(e.dom),Yv={},qx=Al(["pre"]),vO=(e,n)=>{Yv[e]||(Yv[e]=[]),Yv[e].push(n)},F1=(e,n)=>{tn(Yv,e)&&Ie(Yv[e],o=>{o(n)})};vO("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return qx(f)&&an(c,f)},r=(c,u)=>{const f=ne.fromDom(u),b=Dc(f).dom;os(f),_u(ne.fromDom(c),[ne.fromTag("br",b),ne.fromTag("br",b),...Zr(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=jt(jt(c,qx),o(c));Ie(u,f=>{r(f.previousSibling,f)})}});const Kx=["fontWeight","fontStyle","color","fontSize","fontFamily"],GL=e=>Ut(e.styles)&&Xo(Is(e.styles),n=>an(Kx,n)),ZR=e=>us(e,n=>Lr(n)&&n.inline==="span"&&GL(n)),jR=(e,n)=>{const o=e.get(n);return Fn(o)?ZR(o):V.none()},GR=(e,n)=>su(n,De.fromRangeStart(e)).isNone(),qR=(e,n)=>bc(n,De.fromRangeEnd(e)).exists(o=>!Ds(o.getNode())||bc(n,o).isSome())===!1,KR=e=>n=>Bc(n)&&e.isEditable(n),jC=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return GR(o,n[0])&&qR(o,n[0])?n:[];{const r=To(n).filter(f=>GR(o,f)).toArray(),c=$s(n).filter(f=>qR(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},qL=e=>jt(jC(e),KR(e.dom)),yO=e=>jt(e.getSelectedBlocks(),KR(e.dom)),GC=Ze.each,CO=e=>Me(e)&&!_a(e)&&!sl(e)&&!Sa(e),wO=(e,n)=>{for(let o=e;o;o=o[n]){if(Je(o)&&mo(o.data))return e;if(Me(o)&&!_a(o))return o}return e},SO=(e,n,o)=>{const r=Dx(e),c=Me(n)&&yf(n),u=Me(o)&&yf(o);if(c&&u){const f=wO(n,"previousSibling"),b=wO(o,"nextSibling");if(r.compare(f,b)){for(let C=f.nextSibling;C&&C!==b;){const E=C;C=C.nextSibling,f.appendChild(E)}return e.dom.remove(b),Ze.each(Ze.grep(b.childNodes),C=>{f.appendChild(C)}),f}}return o},YR=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=SO(e,zS(r),r))!==null&&c!==void 0?c:r;SO(e,u,zS(u,!0))}},KL=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";GC(e.select(r,o),c=>{CO(c)&&yf(c)&&GC(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},xO=(e,n,o)=>{GC(e.childNodes,r=>{CO(r)&&(n(r)&&o(r),r.hasChildNodes()&&xO(r,n,o))})},YL=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},XR=(e,n)=>o=>!!(o&&Dv(e,o,n)),JR=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),YL(e,r)},H1=zs.generate([{keep:[]},{rename:["name"]},{removed:[]}]),XL=/^(src|href|style)$/,TO=Ze.each,Yx=tC,JL=e=>/^(TR|TH|TD)$/.test(e.nodeName),QR=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),eM=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Me(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return Je(r)&&o&&c>=r.data.length&&(r=new Er(r,e.getBody()).next()||r),Je(r)&&!o&&c===0&&(r=new Er(r,e.getBody()).prev()||r),r},EO=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return JL(e)&&r?e.nodeName==="TR"&&r[o]||r:e},kO=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},V1=(e,n,o,r,c)=>{const u=ne.fromDom(n),f=ne.fromDom(e.create(r,c)),b=o?Rc(u):Gg(u);return _u(f,b),o?(yo(u,f),vd(f,u)):(ku(u,f),js(f,u)),f.dom},QL=(e,n)=>n.links&&e.nodeName==="A",tM=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=kr(e);_i(o)&&r===u.getRoot()&&(!o.list_block||!Yx(n,o.list_block))&&Ie(dr(n.childNodes),b=>{$h(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=kO(u,b,f),u.setAttribs(c,Qb(e))):c=null}),!(sC(o)&&!Yx(o.inline,n))&&u.remove(n,!0)},nM=(e,n,o)=>Ps(e)?{name:n,value:null}:{name:e,value:Cf(n,o)},oM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},_O=(e,n,o,r,c)=>{let u=!1;TO(o.styles,(f,b)=>{const{name:C,value:E}=nM(b,f,r),N=nC(E,C);(o.remove_similar||Q(E)||!Me(c)||Yx(Dv(e,c,C),N))&&e.setStyle(n,C,""),u=!0}),u&&oM(e,n)},eF=(e,n,o)=>{n==="removeformat"?Ie(yO(e.selection),r=>{Ie(Kx,c=>e.dom.setStyle(r,c,"")),oM(e.dom,r)}):jR(e.formatter,n).each(r=>{Ie(yO(e.selection),c=>_O(e.dom,c,r,o,null))})},sM=(e,n,o,r,c)=>{const u=e.dom,f=Dx(e),b=e.schema;if(Lr(n)&&gm(b,n.inline)&&sf(b,r)&&r.parentElement===e.getBody())return tM(e,r,n),H1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Zx(u,r,n)&&!QL(r,n))return H1.keep();const C=r,E=n.preserve_attributes;if(Lr(n)&&n.remove==="all"&&Fn(E)){const N=jt(u.getAttribs(C),R=>an(E,R.name.toLowerCase()));if(u.removeAllAttribs(C),Ie(N,R=>u.setAttrib(C,R.name,R.value)),N.length>0)return H1.rename("span")}if(n.remove!=="all"){_O(u,C,n,o,c),TO(n.attributes,(R,F)=>{const{name:Y,value:ee}=nM(F,R,o);if(n.remove_similar||Q(ee)||!Me(c)||Yx(u.getAttrib(c,Y),ee)){if(Y==="class"){const j=u.getAttrib(C,Y);if(j){let X="";if(Ie(j.split(/\s+/),fe=>{/mce\-\w+/.test(fe)&&(X+=(X?" ":"")+fe)}),X){u.setAttrib(C,Y,X);return}}}if(XL.test(Y)&&C.removeAttribute("data-mce-"+Y),Y==="style"&&Al(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(Y),u.setStyle(C,"list-style-type","none");return}Y==="class"&&C.removeAttribute("className"),C.removeAttribute(Y)}}),TO(n.classes,R=>{R=Cf(R,o),(!Me(c)||u.hasClass(c,R))&&u.removeClass(C,R)});const N=u.getAttribs(C);for(let R=0;R<N.length;R++){const F=N[R].nodeName;if(!f.isAttributeInternal(F))return H1.keep()}}return n.remove!=="none"?(tM(e,C,n),H1.removed()):H1.keep()},qC=(e,n,o,r,c)=>sM(e,n,o,r,c).fold(Ne,u=>(e.dom.rename(r,u),!0),mt),tF=(e,n,o,r,c)=>{let u;return n.parentNode&&Ie(km(e.dom,n.parentNode).reverse(),f=>{if(!u&&Me(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Ef(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},nF=(e,n,o,r)=>sM(e,n,o,r,r).fold(Ge(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Ge(null)),oF=(e,n,o,r,c,u,f,b)=>{var C,E;let N,R;const F=e.dom;if(o){const Y=o.parentNode;for(let ee=r.parentNode;ee&&ee!==Y;ee=ee.parentNode){let j=F.clone(ee,!1);for(let X=0;X<n.length&&(j=nF(e,n[X],b,j),j!==null);X++);j&&(N&&j.appendChild(N),R||(R=j),N=j)}u&&(!f.mixed||!F.isBlock(o))&&(r=(C=F.split(o,r))!==null&&C!==void 0?C:r),N&&R&&((E=c.parentNode)===null||E===void 0||E.insertBefore(N,c),R.appendChild(c),Lr(f)&&YR(e,f,b,N))}return r},rM=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,C=e.selection,E=j=>{const X=tF(e,j,n,o,c);return oF(e,u,X,j,j,!0,f,o)},N=j=>_a(j)&&Me(j)&&(j.id==="_start"||j.id==="_end"),R=j=>Xo(u,X=>qC(e,X,o,j,j)),F=j=>{const X=dr(j.childNodes),de=R(j)||Xo(u,He=>Zx(b,j,He)),be=j.parentNode;if(!de&&ze(be)&&Ih(f)&&R(be),f.deep&&X.length)for(let He=0;He<X.length;He++)F(X[He]);Ie(["underline","line-through","overline"],He=>{Me(j)&&e.dom.getStyle(j,"text-decoration")===He&&j.parentNode&&WS(b,j.parentNode)===He&&qC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:He}},void 0,j)})},Y=j=>{const X=b.get(j?"_start":"_end");if(X){let fe=X[j?"firstChild":"lastChild"];return N(fe)&&(fe=fe[j?"firstChild":"lastChild"]),Je(fe)&&fe.data.length===0&&(fe=j?X.previousSibling||X.nextSibling:X.nextSibling||X.previousSibling),b.remove(X,!0),fe}else return null},ee=j=>{let X,fe,de=Fl(b,j,u,j.collapsed);if(f.split){if(de=xC(de),X=eM(e,de,!0),fe=eM(e,de),X!==fe){if(X=EO(X,!0),fe=EO(fe,!1),QR(b,X,fe)){const we=V.from(X.firstChild).getOr(X);E(V1(b,we,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Y(!0);return}if(QR(b,fe,X)){const we=V.from(fe.lastChild).getOr(fe);E(V1(b,we,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Y(!1);return}X=kO(b,X,"span",{id:"_start","data-mce-type":"bookmark"}),fe=kO(b,fe,"span",{id:"_end","data-mce-type":"bookmark"});const be=b.createRng();be.setStartAfter(X),be.setEndBefore(fe),w1(b,be,we=>{Ie(we,He=>{!_a(He)&&!_a(He.parentNode)&&E(He)})}),E(X),E(fe),X=Y(!0),fe=Y()}else X=fe=E(X);de.startContainer=X.parentNode?X.parentNode:X,de.startOffset=b.nodeIndex(X),de.endContainer=fe.parentNode?fe.parentNode:fe,de.endOffset=b.nodeIndex(fe)+1}w1(b,de,be=>{Ie(be,F)})};if(r){if(Ph(r)){const j=b.createRng();j.setStartBefore(r),j.setEndAfter(r),ee(j)}else ee(r);gC(e,n,r,o);return}!C.isCollapsed()||!Lr(f)||Em(e).length?(h1(e,()=>HS(e,ee),j=>Lr(f)&&Kv(e,n,o,j)),e.nodeChanged()):Gx(e,n,o,c),eF(e,n,o),gC(e,n,r,o)},aM=Ze.each,sF=(e,n,o,r)=>{const c=u=>{if(Me(u)&&Me(u.parentNode)&&yf(u)){const f=WS(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ze.walk(r,c,"childNodes"),c(r))},rF=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=XR(e,"fontSize");xO(r,u=>c(u)&&yf(u),JR(e,"backgroundColor",Cf(n.styles.backgroundColor,o)))}},OO=(e,n,o,r)=>{if(Lr(n)&&(n.inline==="sub"||n.inline==="sup")){const c=XR(e,"fontSize");xO(r,f=>c(f)&&yf(f),JR(e,"fontSize",""));const u=jt(e.select(n.inline==="sup"?"sub":"sup",r),yf);e.remove(u,!0)}},cM=(e,n,o,r)=>{aM(n,c=>{Lr(c)&&aM(e.dom.select(c.inline,r),u=>{CO(u)&&qC(e,c,o,u,c.exact?u:null)}),KL(e.dom,c,r)})},yW=(e,n,o,r,c)=>{const u=c.parentNode;Ef(e,u,o,r)&&qC(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>Ef(e,f,o,r)?(qC(e,n,r,c),!0):!1)},Qh=Ze.each,lM=(e,n,o,r)=>{if(Ay(e)&&Lr(n)&&o.parentNode){const c=oy(e.schema),u=VR(ne.fromDom(o),f=>sl(f.dom));return Ur(c,r)&&Gs(ne.fromDom(o.parentNode),!1)&&!u}else return!1},Xv=(e,n,o,r)=>{if(Qh(o.styles,(c,u)=>{e.setStyle(n,u,Cf(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},Jv=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,C=e.selection,E=(ee,j=u)=>{ue(j.onformat)&&j.onformat(ee,j,o,r),Xv(b,ee,j,o),Qh(j.attributes,(X,fe)=>{b.setAttrib(ee,fe,Cf(X,o))}),Qh(j.classes,X=>{const fe=Cf(X,o);b.hasClass(ee,fe)||b.addClass(ee,fe)})},N=(ee,j)=>{let X=!1;return Qh(ee,fe=>si(fe)?b.getContentEditable(j)==="false"&&!fe.ceFalseOverride||ze(fe.collapsed)&&fe.collapsed!==f?!0:b.is(j,fe.selector)&&!sl(j)?(E(j,fe),X=!0,!1):!0:!1),X},R=ee=>{if(re(ee)){const j=b.create(ee);return E(j),j}else return null},F=(ee,j,X)=>{const fe=[];let de=!0;const be=u.inline||u.block,we=R(be),He=Ee=>Yr(u)&&Ef(e,Ee,n,o),gt=(Ee,ke,xt)=>{const Ft=ru(u)&&Qy(e.schema,Ee)&&$h(e,ke,be);return xt&&Ft},ot=(Ee,ke,xt,Ft)=>{const Qt=Ee.nodeName.toLowerCase(),On=$h(e,be,Qt)&&$h(e,ke,be),Kn=!X&&Je(Ee)&&ie(Ee.data),Ro=sl(Ee),cs=!Lr(u)||!ee.isBlock(Ee);return(xt||Ft)&&On&&!Kn&&!Ro&&cs};w1(ee,j,Ee=>{let ke;const xt=Ft=>{let Qt=!1,On=de,Kn=!1;const Ro=Ft.parentNode,cs=Ro.nodeName.toLowerCase(),wr=ee.getContentEditable(Ft);ze(wr)&&(On=de,de=wr==="true",Qt=!0,Kn=US(e,Ft));const zc=de&&!Qt;if(Ds(Ft)&&!lM(e,u,Ft,cs)){ke=null,_i(u)&&ee.remove(Ft);return}if(He(Ft)){ke=null;return}if(gt(Ft,cs,zc)){const Ma=ee.rename(Ft,be);E(Ma),fe.push(Ma),ke=null;return}if(si(u)){let Ma=N(c,Ft);if(!Ma&&ze(Ro)&&Ih(u)&&(Ma=N(c,Ro)),!Lr(u)||Ma){ke=null;return}}ze(we)&&ot(Ft,cs,zc,Kn)?(ke||(ke=ee.clone(we,!1),Ro.insertBefore(ke,Ft),fe.push(ke)),Kn&&Qt&&(de=On),ke.appendChild(Ft)):(ke=null,Ie(dr(Ft.childNodes),xt),Qt&&(de=On),ke=null)};Ie(Ee,xt)}),u.links===!0&&Ie(fe,Ee=>{const ke=xt=>{xt.nodeName==="A"&&E(xt,u),Ie(dr(xt.childNodes),ke)};ke(Ee)}),Ie(fe,Ee=>{const ke=Qt=>{let On=0;return Ie(Qt.childNodes,Kn=>{!Av(Kn)&&!_a(Kn)&&On++}),On},xt=Qt=>us(Qt.childNodes,Ov).filter(Kn=>ee.getContentEditable(Kn)!=="false"&&Zx(ee,Kn,u)).map(Kn=>{const Ro=ee.clone(Kn,!1);return E(Ro),ee.replace(Ro,Qt,!0),ee.remove(Kn,!0),Ro}).getOr(Qt),Ft=ke(Ee);if((fe.length>1||!ee.isBlock(Ee))&&Ft===0){ee.remove(Ee,!0);return}(Lr(u)||_i(u)&&u.wrapper)&&(!u.exact&&Ft===1&&(Ee=xt(Ee)),cM(e,c,o,Ee),yW(e,u,n,o,Ee),rF(ee,u,o,Ee),sF(ee,u,o,Ee),OO(ee,u,o,Ee),YR(e,u,o,Ee))})},Y=Ph(r)?r:C.getNode();if(b.getContentEditable(Y)==="false"&&!US(e,Y)){r=Y,N(c,r),fC(e,n,r,o);return}if(u){if(r)if(Ph(r)){if(!N(c,r)){const ee=b.createRng();ee.setStartBefore(r),ee.setEndAfter(r),F(b,Fl(b,ee,c),!0)}}else F(b,r,!0);else!f||!Lr(u)||Em(e).length?(C.setRng(ju(C.getRng())),h1(e,()=>{HS(e,(ee,j)=>{const X=j?ee:Fl(b,ee,c);F(b,X,!1)})},mt),e.nodeChanged()):Vd(e,n,o),jR(e.formatter,n).each(ee=>{Ie(qL(e.selection),j=>Xv(b,j,ee,o))});F1(n,e)}fC(e,n,r,o)},AO=e=>tn(e,"vars"),CW=(e,n)=>{e.set({}),n.on("NodeChange",o=>{dM(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=V.from(o.node).map(c=>Ph(c)?c:c.startContainer).bind(c=>Me(c)?V.some(c):V.from(c.parentElement)).getOrThunk(()=>iM(n));dM(n,r,e.get())})},iM=e=>e.selection.getStart(),aF=(e,n,o,r,c)=>ll(n,b=>{const C=e.formatter.matchNode(b,o,c!=null?c:{},r);return!Go(C)},b=>Ux(e,b,o)?!0:r?!1:ze(e.formatter.matchNode(b,o,c,!0))),uM=(e,n)=>{const o=n!=null?n:iM(e);return jt(km(e.dom,o),r=>Me(r)&&!Sa(r))},dM=(e,n,o)=>{const r=uM(e,n);ut(o,(c,u)=>{const f=b=>{const C=aF(e,r,u,b.similar,AO(b)?b.vars:void 0),E=C.isSome();if(b.state.get()!==E){b.state.set(E);const N=C.getOr(n);AO(b)?b.callback(E,{node:N,format:u,parents:r}):Ie(b.callbacks,R=>R(E,{node:N,format:u,parents:r}))}};Ie([c.withSimilar,c.withoutSimilar],f),Ie(c.withVars,f)})},wW=(e,n,o,r,c,u)=>{const f=n.get();Ie(o.split(","),b=>{const C=vo(f,b).getOrThunk(()=>{const N={withSimilar:{state:Va(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Va(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=N,N}),E=()=>{const N=uM(e);return aF(e,N,b,c,u).isSome()};if(Go(u)){const N=c?C.withSimilar:C.withoutSimilar;N.callbacks.push(r),N.callbacks.length===1&&N.state.set(E())}else C.withVars.push({state:Va(E()),similar:c,vars:u,callback:r})}),n.set(f)},cF=(e,n,o)=>{const r=e.get();Ie(n.split(","),c=>vo(r,c).each(u=>{r[c]={withSimilar:We(J({},u.withSimilar),{callbacks:jt(u.withSimilar.callbacks,f=>f!==o)}),withoutSimilar:We(J({},u.withoutSimilar),{callbacks:jt(u.withoutSimilar.callbacks,f=>f!==o)}),withVars:jt(u.withVars,f=>f.callback!==o)}})),e.set(r)},mM=(e,n,o,r,c,u)=>(wW(e,n,o,r,c,u),{unbind:()=>cF(n,o,r)}),lF=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(Kv(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?rM(e,n,o,r):Jv(e,n,o,r))},DO=Ze.explode,fM=()=>{const e={};return{addFilter:(c,u)=>{Ie(DO(c),f=>{tn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>lc(e),removeFilter:(c,u)=>{Ie(DO(c),f=>{if(tn(e,f))if(ze(u)){const b=e[f],C=jt(b.callbacks,E=>E!==u);C.length>0?b.callbacks=C:delete e[f]}else delete e[f]})}}},Xx=(e,n)=>{Ie(n,o=>{e.attr(o,null)})},gM=(e,n,o)=>{e.addNodeFilter("font",r=>{Ie(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),C=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),C&&kc(C).each(E=>{u["font-size"]=o[E-1]}),c.name="span",c.attr("style",n.serialize(u)),Xx(c,["color","face","size"])})})},Ra=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";Ie(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},SW=(e,n,o)=>{var r;const c=bm();n.convert_fonts_to_spans&&gM(e,c,Ze.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),Ra(e,o,c)},xW=(e,n,o)=>{n.inline_styles&&SW(e,n,o)},TW=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),EW=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},du=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?EW(r):decodeURIComponent(r);return V.some({type:c[1],data:f,base64Encoded:u})}else return V.none()},KC=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch(u){return V.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return V.some(new Blob([c],{type:e}))},z1=e=>new Promise((n,o)=>{du(e).bind(({type:r,data:c,base64Encoded:u})=>KC(r,c,u)).fold(()=>o("Invalid data URI"),n)}),U1=e=>Io(e,"blob:")?TW(e):Io(e,"data:")?z1(e):Promise.reject("Unknown URI format"),hM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let iF=0;const Qv=e=>(e||"blobid")+iF++,W1=(e,n,o)=>du(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return V.none();{const f=u?r:btoa(r);return o(f,c)}}),Z1=(e,n,o)=>{const r=e.create(Qv(),n,o);return e.add(r),r},pM=(e,n,o=!1)=>W1(n,o,(r,c)=>V.from(e.getByData(r,c)).orThunk(()=>KC(c,r).map(u=>Z1(e,u,r)))),RO=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Io(n,"blob:")){const r=e.getByUri(n);return ze(r)?Promise.resolve(r):U1(n).then(c=>hM(c).then(u=>W1(u,!1,f=>V.some(Z1(e,c,f))).getOrThunk(o)))}else return Io(n,"data:")?pM(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},bM=e=>ze(e.attr("data-mce-bogus")),vM=e=>e.attr("src")===so.transparentSrc||ze(e.attr("data-mce-placeholder")),uF=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");vM(c)||bM(c)||Jt(u)||pM(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>Ie(c,r))}},dF=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=Ze.extend({},o.getBlockElements()),C=o.getNonEmptyElements(),E=o.getWhitespaceElements();b.body=1;const N=R=>R.name in b&&ey(o,R);for(let R=0,F=c.length;R<F;R++){let Y=c[R],ee=Y.parent;if(ee&&b[ee.name]&&Y===ee.lastChild){let j=Y.prev;for(;j;){const X=j.name;if(X!=="span"||j.attr("data-mce-type")!=="bookmark"){X==="br"&&(Y=null);break}j=j.prev}if(Y&&(Y.remove(),Hd(o,C,E,ee))){const X=o.getElementRule(ee.name);X&&(X.removeEmpty?ee.remove():X.paddEmpty&&qh(f,N,ee))}}else{let j=Y;for(;ee&&ee.firstChild===j&&ee.lastChild===j&&(j=ee,!b[ee.name]);)ee=ee.parent;if(j===ee){const X=new ci("#text",3);X.value=Ao,Y.replace(X)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=C=>C.split(" ").filter(N=>N.length>0).concat(["noopener"]).sort().join(" "),b=C=>{const E=C?Ze.trim(C):"";return/\b(noopener)\b/g.test(E)?E:f(E)};if(!n.allow_unsafe_link_target)for(;u--;){const C=c[u];C.name==="a"&&C.attr("target")==="_blank"&&C.attr("rel",b(C.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,C,E;for(;u--;)if(E=c[u],E.name==="a"&&E.firstChild&&!E.attr("href"))for(C=E.parent,f=E.lastChild;f&&C;)b=f.prev,C.insert(f,E),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const C=new ci("li",1);C.attr("style","list-style-type: none"),f.wrap(C)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],C=(u=b.attr("class"))!==null&&u!==void 0?u:"",E=Ze.explode(C," ");let N="";for(let R=0;R<E.length;R++){const F=E[R];let Y=!1,ee=r["*"];ee&&ee[F]&&(Y=!0),ee=r[b.name],!Y&&ee&&ee[F]&&(Y=!0),Y&&(N&&(N+=" "),N+=F)}N.length||(N=null),b.attr("class",N)}}),uF(e,n)};function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ep(e)}function MO(e,n){return MO=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},MO(e,n)}function mF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Jx(e,n,o){return mF()?Jx=Reflect.construct:Jx=function(c,u,f){var b=[null];b.push.apply(b,u);var C=Function.bind.apply(c,b),E=new C;return f&&MO(E,f.prototype),E},Jx.apply(null,arguments)}function Om(e){return fF(e)||yM(e)||gF(e)||CM()}function fF(e){if(Array.isArray(e))return j1(e)}function yM(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gF(e,n){if(e){if(typeof e=="string")return j1(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return j1(e,n)}}function j1(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function CM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hF=Object.hasOwnProperty,NO=Object.setPrototypeOf,pF=Object.isFrozen,wM=Object.getPrototypeOf,bF=Object.getOwnPropertyDescriptor,Di=Object.freeze,Am=Object.seal,SM=Object.create,BO=typeof Reflect!="undefined"&&Reflect,YC=BO.apply,Qx=BO.construct;YC||(YC=function(n,o,r){return n.apply(o,r)}),Di||(Di=function(n){return n}),Am||(Am=function(n){return n}),Qx||(Qx=function(n,o){return Jx(n,Om(o))});var xM=Dm(Array.prototype.forEach),vF=Dm(Array.prototype.pop),XC=Dm(Array.prototype.push),eT=Dm(String.prototype.toLowerCase),PO=Dm(String.prototype.match),zd=Dm(String.prototype.replace),TM=Dm(String.prototype.indexOf),EM=Dm(String.prototype.trim),xl=Dm(RegExp.prototype.test),$O=tp(TypeError);function Dm(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return YC(e,n,r)}}function tp(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Qx(e,o)}}function jo(e,n){NO&&NO(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=eT(r);c!==r&&(pF(n)||(n[o]=c),r=c)}e[r]=!0}return e}function np(e){var n=SM(null),o;for(o in e)YC(hF,e,[o])&&(n[o]=e[o]);return n}function op(e,n){for(;e!==null;){var o=bF(e,n);if(o){if(o.get)return Dm(o.get);if(typeof o.value=="function")return Dm(o.value)}e=wM(e)}function r(c){return console.warn("fallback value for",c),null}return r}var IO=Di(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),JC=Di(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),tT=Di(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kM=Di(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),LO=Di(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),yF=Di(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_M=Di(["#text"]),nT=Di(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),FO=Di(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),HO=Di(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),oT=Di(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),CF=Am(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wF=Am(/<%[\w\W]*|[\w\W]*%>/gm),G1=Am(/^data-[\-\w.\u00B7-\uFFFF]/),OM=Am(/^aria-[\-\w]+$/),SF=Am(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),AM=Am(/^(?:\w+script|data):/i),xF=Am(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DM=Am(/^html$/i),QC=function(){return typeof window=="undefined"?null:window},VO=function(n,o){if(ep(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch(f){return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function RM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QC(),n=function(Ae){return RM(Ae)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,C=e.NodeFilter,E=e.NamedNodeMap,N=E===void 0?e.NamedNodeMap||e.MozNamedAttrMap:E,R=e.HTMLFormElement,F=e.DOMParser,Y=e.trustedTypes,ee=b.prototype,j=op(ee,"cloneNode"),X=op(ee,"nextSibling"),fe=op(ee,"childNodes"),de=op(ee,"parentNode");if(typeof u=="function"){var be=r.createElement("template");be.content&&be.content.ownerDocument&&(r=be.content.ownerDocument)}var we=VO(Y,o),He=we?we.createHTML(""):"",gt=r,ot=gt.implementation,Ee=gt.createNodeIterator,ke=gt.createDocumentFragment,xt=gt.getElementsByTagName,Ft=o.importNode,Qt={};try{Qt=np(r).documentMode?r.documentMode:{}}catch(In){}var On={};n.isSupported=typeof de=="function"&&ot&&typeof ot.createHTMLDocument!="undefined"&&Qt!==9;var Kn=CF,Ro=wF,cs=G1,wr=OM,zc=AM,Ma=xF,st=SF,Mt=null,io=jo({},[].concat(Om(IO),Om(JC),Om(tT),Om(LO),Om(_M))),yt=null,Kt=jo({},[].concat(Om(nT),Om(FO),Om(HO),Om(oT))),nn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ct=null,Hn=null,Mn=!0,rc=!0,Ns=!1,yn=!1,go=!1,Hr=!1,ps=!1,lr=!1,Fo=!1,Bs=!1,Jr=!0,ed=!0,Uc=!1,Fm={},bu=null,mb=jo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),fb=null,Gd=jo({},["audio","video","img","source","image","track"]),qd=null,ga=jo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),td="http://www.w3.org/1998/Math/MathML",Hm="http://www.w3.org/2000/svg",nd="http://www.w3.org/1999/xhtml",od=nd,Pf=!1,Na,zg=["application/xhtml+xml","text/html"],$f="text/html",Kd,hp=null,$0=r.createElement("form"),I0=function(Ae){return Ae instanceof RegExp||Ae instanceof Function},L0=function(Ae){hp&&hp===Ae||((!Ae||ep(Ae)!=="object")&&(Ae={}),Ae=np(Ae),Mt="ALLOWED_TAGS"in Ae?jo({},Ae.ALLOWED_TAGS):io,yt="ALLOWED_ATTR"in Ae?jo({},Ae.ALLOWED_ATTR):Kt,qd="ADD_URI_SAFE_ATTR"in Ae?jo(np(ga),Ae.ADD_URI_SAFE_ATTR):ga,fb="ADD_DATA_URI_TAGS"in Ae?jo(np(Gd),Ae.ADD_DATA_URI_TAGS):Gd,bu="FORBID_CONTENTS"in Ae?jo({},Ae.FORBID_CONTENTS):mb,Ct="FORBID_TAGS"in Ae?jo({},Ae.FORBID_TAGS):{},Hn="FORBID_ATTR"in Ae?jo({},Ae.FORBID_ATTR):{},Fm="USE_PROFILES"in Ae?Ae.USE_PROFILES:!1,Mn=Ae.ALLOW_ARIA_ATTR!==!1,rc=Ae.ALLOW_DATA_ATTR!==!1,Ns=Ae.ALLOW_UNKNOWN_PROTOCOLS||!1,yn=Ae.SAFE_FOR_TEMPLATES||!1,go=Ae.WHOLE_DOCUMENT||!1,lr=Ae.RETURN_DOM||!1,Fo=Ae.RETURN_DOM_FRAGMENT||!1,Bs=Ae.RETURN_TRUSTED_TYPE||!1,ps=Ae.FORCE_BODY||!1,Jr=Ae.SANITIZE_DOM!==!1,ed=Ae.KEEP_CONTENT!==!1,Uc=Ae.IN_PLACE||!1,st=Ae.ALLOWED_URI_REGEXP||st,od=Ae.NAMESPACE||nd,Ae.CUSTOM_ELEMENT_HANDLING&&I0(Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nn.tagNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&I0(Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nn.attributeNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&typeof Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nn.allowCustomizedBuiltInElements=Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Na=zg.indexOf(Ae.PARSER_MEDIA_TYPE)===-1?Na=$f:Na=Ae.PARSER_MEDIA_TYPE,Kd=Na==="application/xhtml+xml"?function(Nt){return Nt}:eT,yn&&(rc=!1),Fo&&(lr=!0),Fm&&(Mt=jo({},Om(_M)),yt=[],Fm.html===!0&&(jo(Mt,IO),jo(yt,nT)),Fm.svg===!0&&(jo(Mt,JC),jo(yt,FO),jo(yt,oT)),Fm.svgFilters===!0&&(jo(Mt,tT),jo(yt,FO),jo(yt,oT)),Fm.mathMl===!0&&(jo(Mt,LO),jo(yt,HO),jo(yt,oT))),Ae.ADD_TAGS&&(Mt===io&&(Mt=np(Mt)),jo(Mt,Ae.ADD_TAGS)),Ae.ADD_ATTR&&(yt===Kt&&(yt=np(yt)),jo(yt,Ae.ADD_ATTR)),Ae.ADD_URI_SAFE_ATTR&&jo(qd,Ae.ADD_URI_SAFE_ATTR),Ae.FORBID_CONTENTS&&(bu===mb&&(bu=np(bu)),jo(bu,Ae.FORBID_CONTENTS)),ed&&(Mt["#text"]=!0),go&&jo(Mt,["html","head","body"]),Mt.table&&(jo(Mt,["tbody"]),delete Ct.tbody),Di&&Di(Ae),hp=Ae)},G3=jo({},["mi","mo","mn","ms","mtext"]),$E=jo({},["foreignobject","desc","title","annotation-xml"]),q3=jo({},["title","style","font","a","script"]),Vm=jo({},JC);jo(Vm,tT),jo(Vm,kM);var pp=jo({},LO);jo(pp,yF);var Se=function(Ae){var Nt=de(Ae);(!Nt||!Nt.tagName)&&(Nt={namespaceURI:nd,tagName:"template"});var fn=eT(Ae.tagName),Ar=eT(Nt.tagName);return Ae.namespaceURI===Hm?Nt.namespaceURI===nd?fn==="svg":Nt.namespaceURI===td?fn==="svg"&&(Ar==="annotation-xml"||G3[Ar]):!!Vm[fn]:Ae.namespaceURI===td?Nt.namespaceURI===nd?fn==="math":Nt.namespaceURI===Hm?fn==="math"&&$E[Ar]:!!pp[fn]:Ae.namespaceURI===nd?Nt.namespaceURI===Hm&&!$E[Ar]||Nt.namespaceURI===td&&!G3[Ar]?!1:!pp[fn]&&(q3[fn]||!Vm[fn]):!1},xe=function(Ae){XC(n.removed,{element:Ae});try{Ae.parentNode.removeChild(Ae)}catch(Nt){try{Ae.outerHTML=He}catch(fn){Ae.remove()}}},rt=function(Ae,Nt){try{XC(n.removed,{attribute:Nt.getAttributeNode(Ae),from:Nt})}catch(fn){XC(n.removed,{attribute:null,from:Nt})}if(Nt.removeAttribute(Ae),Ae==="is"&&!yt[Ae])if(lr||Fo)try{xe(Nt)}catch(fn){}else try{Nt.setAttribute(Ae,"")}catch(fn){}},Xe=function(Ae){var Nt,fn;if(ps)Ae="<remove></remove>"+Ae;else{var Ar=PO(Ae,/^[\r\n\t ]+/);fn=Ar&&Ar[0]}Na==="application/xhtml+xml"&&(Ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ae+"</body></html>");var vu=we?we.createHTML(Ae):Ae;if(od===nd)try{Nt=new F().parseFromString(vu,Na)}catch(Wl){}if(!Nt||!Nt.documentElement){Nt=ot.createDocument(od,"template",null);try{Nt.documentElement.innerHTML=Pf?"":vu}catch(Wl){}}var Ul=Nt.body||Nt.documentElement;return Ae&&fn&&Ul.insertBefore(r.createTextNode(fn),Ul.childNodes[0]||null),od===nd?xt.call(Nt,go?"html":"body")[0]:go?Nt.documentElement:Ul},Zt=function(Ae){return Ee.call(Ae.ownerDocument||Ae,Ae,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT,null,!1)},uo=function(Ae){return Ae instanceof R&&(typeof Ae.nodeName!="string"||typeof Ae.textContent!="string"||typeof Ae.removeChild!="function"||!(Ae.attributes instanceof N)||typeof Ae.removeAttribute!="function"||typeof Ae.setAttribute!="function"||typeof Ae.namespaceURI!="string"||typeof Ae.insertBefore!="function")},ws=function(Ae){return ep(f)==="object"?Ae instanceof f:Ae&&ep(Ae)==="object"&&typeof Ae.nodeType=="number"&&typeof Ae.nodeName=="string"},Ss=function(Ae,Nt,fn){On[Ae]&&xM(On[Ae],function(Ar){Ar.call(n,Nt,fn,hp)})},sd=function(Ae){var Nt;if(Ss("beforeSanitizeElements",Ae,null),uo(Ae)||xl(/[\u0080-\uFFFF]/,Ae.nodeName))return xe(Ae),!0;var fn=Kd(Ae.nodeName);if(Ss("uponSanitizeElement",Ae,{tagName:fn,allowedTags:Mt}),Ae.hasChildNodes()&&!ws(Ae.firstElementChild)&&(!ws(Ae.content)||!ws(Ae.content.firstElementChild))&&xl(/<[/\w]/g,Ae.innerHTML)&&xl(/<[/\w]/g,Ae.textContent)||fn==="select"&&xl(/<template/i,Ae.innerHTML))return xe(Ae),!0;if(!Mt[fn]||Ct[fn]){if(!Ct[fn]&&iI(fn)&&(nn.tagNameCheck instanceof RegExp&&xl(nn.tagNameCheck,fn)||nn.tagNameCheck instanceof Function&&nn.tagNameCheck(fn)))return!1;if(ed&&!bu[fn]){var Ar=de(Ae)||Ae.parentNode,vu=fe(Ae)||Ae.childNodes;if(vu&&Ar)for(var Ul=vu.length,Wl=Ul-1;Wl>=0;--Wl)Ar.insertBefore(j(vu[Wl],!0),X(Ae))}return xe(Ae),!0}return Ae instanceof b&&!Se(Ae)||(fn==="noscript"||fn==="noembed")&&xl(/<\/no(script|embed)/i,Ae.innerHTML)?(xe(Ae),!0):(yn&&Ae.nodeType===3&&(Nt=Ae.textContent,Nt=zd(Nt,Kn," "),Nt=zd(Nt,Ro," "),Ae.textContent!==Nt&&(XC(n.removed,{element:Ae.cloneNode()}),Ae.textContent=Nt)),Ss("afterSanitizeElements",Ae,null),!1)},gb=function(Ae,Nt,fn){if(Jr&&(Nt==="id"||Nt==="name")&&(fn in r||fn in $0))return!1;if(!(rc&&!Hn[Nt]&&xl(cs,Nt))){if(!(Mn&&xl(wr,Nt))){if(!yt[Nt]||Hn[Nt]){if(!(iI(Ae)&&(nn.tagNameCheck instanceof RegExp&&xl(nn.tagNameCheck,Ae)||nn.tagNameCheck instanceof Function&&nn.tagNameCheck(Ae))&&(nn.attributeNameCheck instanceof RegExp&&xl(nn.attributeNameCheck,Nt)||nn.attributeNameCheck instanceof Function&&nn.attributeNameCheck(Nt))||Nt==="is"&&nn.allowCustomizedBuiltInElements&&(nn.tagNameCheck instanceof RegExp&&xl(nn.tagNameCheck,fn)||nn.tagNameCheck instanceof Function&&nn.tagNameCheck(fn))))return!1}else if(!qd[Nt]){if(!xl(st,zd(fn,Ma,""))){if(!((Nt==="src"||Nt==="xlink:href"||Nt==="href")&&Ae!=="script"&&TM(fn,"data:")===0&&fb[Ae])){if(!(Ns&&!xl(zc,zd(fn,Ma,"")))){if(fn)return!1}}}}}}return!0},iI=function(Ae){return Ae.indexOf("-")>0},U2=function(Ae){var Nt,fn,Ar,vu;Ss("beforeSanitizeAttributes",Ae,null);var Ul=Ae.attributes;if(Ul){var Wl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:yt};for(vu=Ul.length;vu--;){Nt=Ul[vu];var IE=Nt,Zl=IE.name,ui=IE.namespaceURI;fn=Zl==="value"?Nt.value:EM(Nt.value),Ar=Kd(Zl);var If=fn;if(Wl.attrName=Ar,Wl.attrValue=fn,Wl.keepAttr=!0,Wl.forceKeepAttr=void 0,Ss("uponSanitizeAttribute",Ae,Wl),fn=Wl.attrValue,!Wl.forceKeepAttr){if(!Wl.keepAttr){rt(Zl,Ae);continue}if(xl(/\/>/i,fn)){rt(Zl,Ae);continue}yn&&(fn=zd(fn,Kn," "),fn=zd(fn,Ro," "));var ZU=Kd(Ae.nodeName);if(!gb(ZU,Ar,fn)){rt(Zl,Ae);continue}if(fn!==If)try{ui?Ae.setAttributeNS(ui,Zl,fn):Ae.setAttribute(Zl,fn)}catch(jU){rt(Zl,Ae)}}}Ss("afterSanitizeAttributes",Ae,null)}},zm=function In(Ae){var Nt,fn=Zt(Ae);for(Ss("beforeSanitizeShadowDOM",Ae,null);Nt=fn.nextNode();)Ss("uponSanitizeShadowNode",Nt,null),!sd(Nt)&&(Nt.content instanceof c&&In(Nt.content),U2(Nt));Ss("afterSanitizeShadowDOM",Ae,null)};return n.sanitize=function(In,Ae){var Nt,fn,Ar,vu,Ul;if(Pf=!In,Pf&&(In="<!-->"),typeof In!="string"&&!ws(In)){if(typeof In.toString!="function")throw $O("toString is not a function");if(In=In.toString(),typeof In!="string")throw $O("dirty is not a string, aborting")}if(!n.isSupported){if(ep(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof In=="string")return e.toStaticHTML(In);if(ws(In))return e.toStaticHTML(In.outerHTML)}return In}if(Hr||L0(Ae),n.removed=[],typeof In=="string"&&(Uc=!1),Uc){if(In.nodeName){var Wl=Kd(In.nodeName);if(!Mt[Wl]||Ct[Wl])throw $O("root node is forbidden and cannot be sanitized in-place")}}else if(In instanceof f)Nt=Xe("<!---->"),fn=Nt.ownerDocument.importNode(In,!0),fn.nodeType===1&&fn.nodeName==="BODY"||fn.nodeName==="HTML"?Nt=fn:Nt.appendChild(fn);else{if(!lr&&!yn&&!go&&In.indexOf("<")===-1)return we&&Bs?we.createHTML(In):In;if(Nt=Xe(In),!Nt)return lr?null:Bs?He:""}Nt&&ps&&xe(Nt.firstChild);for(var IE=Zt(Uc?In:Nt);Ar=IE.nextNode();)Ar.nodeType===3&&Ar===vu||sd(Ar)||(Ar.content instanceof c&&zm(Ar.content),U2(Ar),vu=Ar);if(vu=null,Uc)return In;if(lr){if(Fo)for(Ul=ke.call(Nt.ownerDocument);Nt.firstChild;)Ul.appendChild(Nt.firstChild);else Ul=Nt;return yt.shadowroot&&(Ul=Ft.call(o,Ul,!0)),Ul}var Zl=go?Nt.outerHTML:Nt.innerHTML;return go&&Mt["!doctype"]&&Nt.ownerDocument&&Nt.ownerDocument.doctype&&Nt.ownerDocument.doctype.name&&xl(DM,Nt.ownerDocument.doctype.name)&&(Zl="<!DOCTYPE "+Nt.ownerDocument.doctype.name+`>
`+Zl),yn&&(Zl=zd(Zl,Kn," "),Zl=zd(Zl,Ro," ")),we&&Bs?we.createHTML(Zl):Zl},n.setConfig=function(In){L0(In),Hr=!0},n.clearConfig=function(){hp=null,Hr=!1},n.isValidAttribute=function(In,Ae,Nt){hp||L0({});var fn=Kd(In),Ar=Kd(Ae);return gb(fn,Ar,Nt)},n.addHook=function(In,Ae){typeof Ae=="function"&&(On[In]=On[In]||[],XC(On[In],Ae))},n.removeHook=function(In){if(On[In])return vF(On[In])},n.removeHooks=function(In){On[In]&&(On[In]=[])},n.removeAllHooks=function(){On={}},n}var MM=RM();const NM=Ze.each,zO=Ze.trim,UO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],WO={ftp:21,http:80,https:443,mailto:25},BM=["img","video"],PM=(e,n)=>ze(e)?!e:ze(n)?!an(BM,n):!0,TF=e=>{try{return decodeURIComponent(e)}catch(n){return unescape(e)}},Rm=(e,n,o)=>{const r=TF(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?PM(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class qu{constructor(n,o={}){this.path="",this.directory="",n=zO(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new qu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&NM(UO,(b,C)=>{let E=f[C];E&&(E=E.replace(/\(mce_at\)/g,"@@")),c[b]=E}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=tl.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!Rm(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new qu(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new qu(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?WO[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(b.length>=C.length){for(u=0,f=b.length;u<f;u++)if(u>=C.length||b[u]!==C[u]){r=u+1;break}}if(b.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=b.length||b[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?c+="/"+C[u]:c+=C[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];NM(u,R=>{R&&b.push(R)});const C=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}C.push(f[R])}const E=b.length-r;let N;return E<=0?N=Vo(C).join("/"):N=b.slice(0,E).join("/")+"/"+Vo(C).join("/"),N.indexOf("/")!==0&&(N="/"+N),c&&N.lastIndexOf("/")!==N.length-1&&(N+=c),N}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const EF=Ze.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ZO="data-mce-type";let jO=0;const GO=(e,n,o,r)=>{var c,u,f,b;const C=n.validate,E=o.getSpecialElements();e.nodeType===pr&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const N=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==zi||N==="body")return;const R=ne.fromDom(e),F=ra(R,ZO),Y=Ka(R,"data-mce-bogus");if(!F&&re(Y)){Y==="all"?os(R):Tr(R);return}const ee=o.getElementRule(N);if(C&&!ee){tn(E,N)?os(R):Tr(R);return}else ze(r)&&(r.allowedTags[N]=!0);if(C&&ee&&!F){if(Ie((f=ee.attributesForced)!==null&&f!==void 0?f:[],j=>{Qs(R,j.name,j.value==="{$uid}"?`mce_${jO++}`:j.value)}),Ie((b=ee.attributesDefault)!==null&&b!==void 0?b:[],j=>{ra(R,j.name)||Qs(R,j.name,j.value==="{$uid}"?`mce_${jO++}`:j.value)}),ee.attributesRequired&&!Xo(ee.attributesRequired,j=>ra(R,j))){Tr(R);return}if(ee.removeEmptyAttrs&&dc(R)){Tr(R);return}ee.outputName&&ee.outputName!==N&&rk(R,ee.outputName)}},e0=(e,n,o,r,c)=>!(r in EF&&Rm(e,c,o))&&(!e.validate||n.isValid(o,r)||Io(r,"data-")||Io(r,"aria-")),$M=(e,n)=>e.hasAttribute(ZO)&&(n==="id"||n==="class"||n==="style"),IM=(e,n)=>e in n.getBoolAttrs(),kF=(e,n,o)=>{const{attributes:r}=e;for(let c=r.length-1;c>=0;c--){const u=r[c],f=u.name,b=u.value;!e0(n,o,e.tagName.toLowerCase(),f,b)&&!$M(e,f)?e.removeAttribute(f):IM(f,o)&&e.setAttribute(f,f)}},_F=(e,n)=>{const o=MM();return o.addHook("uponSanitizeElement",(r,c)=>{GO(r,e,n,c)}),o.addHook("uponSanitizeAttribute",(r,c)=>{const u=r.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=e0(e,n,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,IM(f,n)&&(c.attrValue=f),e.allow_svg_data_urls&&Io(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):$M(r,f)&&(c.forceKeepAttr=!0)}),o},OF=(e,n)=>{const r=J({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},LM=(e,n)=>{if(e.sanitize){const o=_F(e,n);return(r,c)=>{o.sanitize(r,OF(e,c)),o.removed=[]}}else return(o,r)=>{const c=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=c.nextNode();)GO(u,e,n),Me(u)&&kF(u,e,n)}},FM=Ze.makeMap,HM=Ze.extend,VM=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const C=u[f],E=new ci(C.nodeName.toLowerCase(),C.nodeType);if(Me(C)){const N=C.attributes;for(let R=0,F=N.length;R<F;R++){const Y=N[R];E.attr(Y.name,Y.value)}}else Je(C)?(E.value=C.data,c&&(E.raw=!0)):(Du(C)||Op(C)||G0(C))&&(E.value=C.data);VM(E,C,o),e.append(E)}},zM=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;Ie(n,b=>b(f)),Jt(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];Ie(o,f=>f(u))}},qO=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=HM(FM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=oy(n),E=/[ \t\r\n]+/g,N=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,F=de=>{let be=de.parent;for(;ze(be);){if(be.name in f)return!0;be=be.parent}return!1},Y=de=>{let be=de;for(;ze(be);){if(be.name in C)return Hd(n,u,f,be);be=be.parent}return!1},ee=de=>de.name in b&&!ey(n,de),j=(de,be)=>{const we=be?de.prev:de.next;return ze(we)||Jt(de.parent)?!1:ee(de.parent)&&(de.parent!==e||r.isRootContent===!0)};return[de=>{var be;if(de.type===3&&!F(de)){let we=(be=de.value)!==null&&be!==void 0?be:"";we=we.replace(E," "),(kR(de.prev,ee)||j(de,!0))&&(we=we.replace(N,"")),we.length===0?de.remove():de.value=we}},de=>{var be;if(de.type===1){const we=n.getElementRule(de.name);if(c&&we){const He=Hd(n,u,f,de);we.paddInEmptyBlock&&He&&Y(de)?qh(r,ee,de):we.removeEmpty&&He?ee(de)?de.remove():de.unwrap():we.paddEmpty&&(He||rO(de))&&qh(r,ee,de)}}else if(de.type===3&&!F(de)){let we=(be=de.value)!==null&&be!==void 0?be:"";(de.next&&ee(de.next)||j(de,!1))&&(we=we.replace(R,"")),we.length===0?de.remove():de.value=we}}]},UM=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},q1=(e={},n=Pl())=>{const o=fM(),r=fM(),c=J({validate:!0,root_name:"body",sanitize:!0},e),u=new DOMParser,f=LM(c,n),b=(be,we,He="html")=>{const gt=He==="xhtml"?"application/xhtml+xml":"text/html",ot=tn(n.getSpecialElements(),we.toLowerCase()),Ee=ot?`<${we}>${be}</${we}>`:be,ke=He==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ee}</body></html>`:`<body>${Ee}</body>`,xt=u.parseFromString(ke,gt).body;return f(xt,gt),ot?xt.firstChild:xt},C=o.addFilter,E=o.getFilters,N=o.removeFilter,R=r.addFilter,F=r.getFilters,Y=r.removeFilter,ee=(be,we)=>{xL(n,be)&&we.push(be)},j=(be,we)=>{const He=re(we.attr(ZO)),gt=we.type===1&&!tn(be,we.name)&&!Q2(n,we);return we.type===3||gt&&!He},X=(be,we)=>{const He=HM(FM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),gt=/^[ \t\r\n]+/,ot=/[ \t\r\n]+$/;let Ee=be.firstChild,ke=null;const xt=Ft=>{var Qt,On;Ft&&(Ee=Ft.firstChild,Ee&&Ee.type===3&&(Ee.value=(Qt=Ee.value)===null||Qt===void 0?void 0:Qt.replace(gt,"")),Ee=Ft.lastChild,Ee&&Ee.type===3&&(Ee.value=(On=Ee.value)===null||On===void 0?void 0:On.replace(ot,"")))};if(n.isValidChild(be.name,we.toLowerCase())){for(;Ee;){const Ft=Ee.next;j(He,Ee)?(ke||(ke=new ci(we,1),ke.attr(c.forced_root_block_attrs),be.insert(ke,Ee)),ke.append(Ee)):(xt(ke),ke=null),Ee=Ft}xt(ke)}},de={schema:n,addAttributeFilter:R,getAttributeFilters:F,removeAttributeFilter:Y,addNodeFilter:C,getNodeFilters:E,removeNodeFilter:N,parse:(be,we={})=>{var He;const gt=c.validate,ot=(He=we.context)!==null&&He!==void 0?He:c.root_name,Ee=b(be,ot,we.format);Mp(n,Ee);const ke=new ci(ot,11);VM(ke,Ee,n.getSpecialElements()),Ee.innerHTML="";const[xt,Ft]=qO(ke,n,c,we),Qt=[],On=gt?wr=>ee(wr,Qt):Fe,Kn={nodes:{},attributes:{}},Ro=wr=>Mx(E(),F(),wr,Kn);if(zM(ke,[xt,Ro],[Ft,On]),Qt.reverse(),gt&&Qt.length>0)if(we.context){const{pass:wr,fail:zc}=Sr(Qt,Ma=>Ma.parent===ke);$x(zc,n,ke,Ro),we.invalid=wr.length>0}else $x(Qt,n,ke,Ro);const cs=UM(c,we);return cs&&(ke.name==="body"||we.isRootContent)&&X(ke,cs),we.invalid||Nx(Kn,we),ke}};return dF(de,c),xW(de,c,n),de},KO=e=>I1(e)?Zh({validate:!1}).serialize(e):e,YO=(e,n,o)=>{const r=KO(e),c=n(r);if(c.isDefaultPrevented())return c;if(I1(e))if(c.content!==r){const u=q1({validate:!1,forced_root_block:!1,sanitize:o}).parse(c.content,{context:e.name});return We(J({},c),{content:u})}else return We(J({},c),{content:e});else return c},XO=(e,n)=>{if(n.no_events)return Vs.value(n);{const o=JS(e,n);return o.isDefaultPrevented()?Vs.error(Pv(e,J({content:""},o)).content):Vs.value(o)}},JO=(e,n,o)=>o.no_events?n:YO(n,c=>Pv(e,We(J({},o),{content:c})),lv(e)).content,sT=(e,n)=>{if(n.no_events)return Vs.value(n);{const o=YO(n.content,r=>XS(e,We(J({},n),{content:r})),lv(e));return o.isDefaultPrevented()?(Bv(e,o),Vs.error(void 0)):Vs.value(o)}},QO=(e,n,o)=>{o.no_events||Bv(e,We(J({},o),{content:n}))},e2=(e,n,o)=>({element:e,width:n,rows:o}),WM=(e,n)=>({element:e,cells:n}),rT=(e,n)=>({x:e,y:n}),ZM=(e,n)=>Ac(e,n).bind(kc).getOr(1),AF=(e,n,o,r,c)=>{const u=ZM(c,"rowspan"),f=ZM(c,"colspan"),b=e.rows;for(let C=o;C<o+u;C++){b[C]||(b[C]=WM(Ew(r),[]));for(let E=n;E<n+f;E++){const N=b[C].cells;N[E]=C===o&&E===n?c:df(c)}}},DF=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},jM=(e,n,o)=>{for(;DF(e,n,o);)n++;return n},eA=e=>Jo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),GM=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(ho(c[u],n))return V.some(rT(u,r))}return V.none()},qM=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const C=f[b].cells,E=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(WM(f[b].element,E))}return u},RF=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?qM(e,r,c,u,f):qM(e,r,f,u,c);return e2(e.element,eA(b),b)},MF=(e,n)=>{const o=df(e.element),r=ne.fromTag("tbody");return _u(r,n),js(o,r),o},KM=e=>Vt(e.rows,n=>{const o=Vt(n.cells,c=>{const u=Ew(c);return Ls(u,"colspan"),Ls(u,"rowspan"),u}),r=df(n.element);return _u(r,o),r}),kW=e=>{const n=e2(df(e),0,[]);return Ie(wa(e,"tr"),(o,r)=>{Ie(wa(o,"td,th"),(c,u)=>{AF(n,jM(n,u,r),r,o,c)})}),e2(n.element,eA(n.rows),n.rows)},NF=e=>MF(e,KM(e)),BF=(e,n,o)=>GM(e,n).bind(r=>GM(e,o).map(c=>RF(e,r,c))),PF=e=>us(e,n=>zo(n)==="ul"||zo(n)==="ol"),$F=(e,n)=>us(e,o=>zo(o)==="li"&&FS(o,n)).fold(Ge([]),o=>PF(e).map(r=>{const c=ne.fromTag(zo(r)),u=$o(bl(r),(f,b)=>Io(b,"list-style"));return Uf(c,u),[ne.fromTag("li"),c]}).getOr([])),IF=(e,n)=>{const o=Jo(n,(r,c)=>(js(c,r),c),e);return n.length>0?k1([o]):o},LF=e=>ec(e)?Kc(e).filter(ye).fold(Ge([]),n=>[e,n]):ye(e)?[e]:[],FF=(e,n)=>{const o=ne.fromDom(n.commonAncestorContainer),r=_g(o,e),c=jt(r,Ir),u=$F(r,n),f=c.concat(u.length?u:LF(o));return Vt(f,df)},tA=()=>k1([]),HF=(e,n)=>IF(ne.fromDom(n.cloneContents()),FF(e,n)),VF=(e,n)=>le(n,"table",Ve(ho,e)),zF=(e,n)=>VF(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=kW(o);return BF(u,r,c).map(f=>k1([NF(f)]))}).getOrThunk(tA),UF=(e,n)=>n.length>0&&n[0].collapsed?tA():HF(e,n[0]),WF=(e,n)=>{const o=LS(n,e);return o.length>0?zF(e,o):UF(e,n)},nA=(e,n)=>n>=0&&n<e.length&&Mh(e.charAt(n)),ZF=e=>Oe(e.innerText),jF=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),GF=e=>V.from(e.selection.getRng()).map(n=>{var o;const r=V.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=jF(r),f=ne.fromDom(n.cloneContents());xD(f),TD(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=ZF(b),E=Oe((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),nA(E,0)||nA(E,E.length-1)){const N=r.getOr(c),R=ZF(N),F=R.indexOf(C);if(F===-1)return C;{const Y=nA(R,F-1),ee=nA(R,F+C.length);return(Y?" ":"")+C+(ee?" ":"")}}else return C}).getOr(""),_W=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=A_(e,m1(c)),f=n.contextual?WF(ne.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},qF=(e,n)=>{if(n.format==="text")return GF(e);{const o=_W(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},Cr=(e,n)=>We(J({},e),{format:n,get:!0,selection:!0,getInner:!0}),oA=(e,n,o={})=>{const r=Cr(o,n);return XO(e,r).fold(Dn,c=>{const u=qF(e,c);return JO(e,u,c)})},YM=0,XM=1,JM=2,t0=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(N,R,F)=>({start:N,end:R,diag:F}),f=(N,R,F,Y,ee)=>{const j=C(N,R,F,Y);if(j===null||j.start===R&&j.diag===R-Y||j.end===N&&j.diag===N-F){let X=N,fe=F;for(;X<R||fe<Y;)X<R&&fe<Y&&e[X]===n[fe]?(ee.push([YM,e[X]]),++X,++fe):R-N>Y-F?(ee.push([JM,e[X]]),++X):(ee.push([XM,n[fe]]),++fe)}else{f(N,j.start,F,j.start-j.diag,ee);for(let X=j.start;X<j.end;++X)ee.push([YM,e[X]]);f(j.end,R,j.end-j.diag,Y,ee)}},b=(N,R,F,Y)=>{let ee=N;for(;ee-R<Y&&ee<F&&e[ee]===n[ee-R];)++ee;return u(N,ee,R)},C=(N,R,F,Y)=>{const ee=R-N,j=Y-F;if(ee===0||j===0)return null;const X=ee-j,fe=j+ee,de=(fe%2===0?fe:fe+1)/2;r[1+de]=N,c[1+de]=R+1;let be,we,He,gt,ot;for(be=0;be<=de;++be){for(we=-be;we<=be;we+=2){for(He=we+de,we===-be||we!==be&&r[He-1]<r[He+1]?r[He]=r[He+1]:r[He]=r[He-1]+1,gt=r[He],ot=gt-N+F-we;gt<R&&ot<Y&&e[gt]===n[ot];)r[He]=++gt,++ot;if(X%2!==0&&X-be<=we&&we<=X+be&&c[He-X]<=r[He])return b(c[He-X],we+N-F,R,Y)}for(we=X-be;we<=X+be;we+=2){for(He=we+de-X,we===X-be||we!==X+be&&c[He+1]<=c[He-1]?c[He]=c[He+1]-1:c[He]=c[He-1],gt=c[He]-1,ot=gt-N+F-we;gt>=N&&ot>=F&&e[gt]===n[ot];)c[He]=gt--,ot--;if(X%2===0&&-be<=we&&we<=be&&c[He]<=r[He+X])return b(c[He],we+N-F,R,Y)}}return null},E=[];return f(0,e.length,0,n.length,E),E},KF=e=>Me(e)?e.outerHTML:Je(e)?tl.encodeRaw(e.data,!1):Du(e)?"<!--"+e.data+"-->":"",OW=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},Vc=(e,n,o)=>{const r=OW(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},QM=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},eN=(e,n)=>{let o=0;Ie(e,r=>{r[0]===YM?o++:r[0]===XM?(Vc(n,r[1],o),o++):r[0]===JM&&QM(n,o)})},tN=e=>jt(Vt(dr(e.childNodes),KF),n=>n.length>0),YF=(e,n)=>{const o=Vt(dr(n.childNodes),KF);return eN(t0(o,e),n),n},XF=Tc(()=>document.implementation.createHTMLDocument("undo")),aT=e=>e.indexOf("</iframe>")!==-1,JF=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),sA=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),cT=e=>{const n=tN(e.getBody()),o=ea(n,c=>{const u=SD(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return aT(r)?JF(o):sA(r)},lT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?YF(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:ze(r)&&yv(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},iT=e=>e.type==="fragmented"?e.fragments.join(""):e.content,uT=e=>{const n=ne.fromTag("body",XF());return wd(n,iT(e)),Ie(wa(n,"*[data-mce-bogus]"),Tr),cm(n)},nN=(e,n)=>iT(e)===iT(n),rA=(e,n)=>uT(e)===uT(n),aA=(e,n)=>!e||!n?!1:nN(e,n)?!0:rA(e,n),cA=e=>e.get()===0,dT=(e,n,o)=>{cA(o)&&(e.typing=n)},mu=(e,n)=>{e.typing&&(dT(e,!1,n),e.add())},QF=e=>{e.typing&&(e.typing=!1,e.add())},e6=(e,n,o)=>{cA(n)&&o.set(Cy(e.selection))},t6=(e,n,o,r,c,u,f)=>{const b=cT(e),C=Ze.extend(u||{},b);if(!cA(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&aA(E,C))return null;n.data[o.get()]&&c.get().each(F=>{n.data[o.get()].beforeBookmark=F});const N=Ck(e);if(N&&n.data.length>N){for(let F=0;F<n.data.length-1;F++)n.data[F]=n.data[F+1];n.data.length--,o.set(n.data.length)}C.bookmark=Cy(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const R={level:C,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),C},n6=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},o6=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];lT(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},oN=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],lT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},s6=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,dT(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],lT(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},r6=e=>{e.clear(),e.add()},a6=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!aA(cT(e),n.data[0]),mT=(e,n)=>n.get()<e.data.length-1&&!e.typing,c6=(e,n,o)=>(mu(e,n),e.beforeChange(),e.ignore(o),e.add()),l6=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},sN=(e,n)=>{const o=e.dom,r=ze(n)?n:e.getBody();Ie(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=Tk(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,C=cS(e);b&&e.hasVisual?o.addClass(c,C):o.removeClass(c,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},fT=e=>({init:{bindEvents:Fe},undoManager:{beforeChange:(n,o)=>e6(e,n,o),add:(n,o,r,c,u,f)=>t6(e,n,o,r,c,u,f),undo:(n,o,r)=>s6(e,n,o,r),redo:(n,o)=>oN(e,n,o),clear:(n,o)=>n6(e,n,o),reset:n=>r6(n),hasUndo:(n,o)=>a6(e,n,o),hasRedo:(n,o)=>mT(n,o),transact:(n,o,r)=>c6(n,o,r),ignore:(n,o)=>l6(n,o),extra:(n,o,r,c)=>o6(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>Kv(e,n,o,r,c),matchAll:(n,o)=>Rg(e,n,o),matchNode:(n,o,r,c)=>Ef(e,n,o,r,c),canApply:n=>fO(e,n),closest:n=>zL(e,n),apply:(n,o,r)=>Jv(e,n,o,r),remove:(n,o,r,c)=>rM(e,n,o,r,c),toggle:(n,o,r)=>lF(e,n,o,r),formatChanged:(n,o,r,c,u)=>mM(e,n,o,r,c,u)},editor:{getContent:n=>qI(e,n),setContent:(n,o)=>HL(e,n,o),insertContent:(n,o)=>LR(e,n,o),addVisual:n=>sN(e,n)},selection:{getContent:(n,o)=>oA(e,n,o)},autocompleter:{addDecoration:n=>LI(e,n),removeDecoration:()=>vD(e,ne.fromDom(e.getBody()))},raw:{getModel:()=>V.none()}}),i6=e=>{const n=E=>Ut(E)?E:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,N,R)=>r.transact(R),ignore:(E,N)=>r.ignore(N),extra:(E,N,R,F)=>r.extra(R,F)},formatter:{match:(E,N,R,F)=>c.match(E,n(N),F),matchAll:c.matchAll,matchNode:c.matchNode,canApply:E=>c.canApply(E),closest:E=>c.closest(E),apply:(E,N,R)=>c.apply(E,n(N)),remove:(E,N,R,F)=>c.remove(E,n(N)),toggle:(E,N,R)=>c.toggle(E,n(N)),formatChanged:(E,N,R,F,Y)=>c.formatChanged(N,R,F,Y)},editor:{getContent:E=>u.getContent(E),setContent:(E,N)=>({content:u.setContent(E,N),html:""}),insertContent:(E,N)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,N)=>f.getContent(N)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>V.some(C.getRawModel())}}},u6=()=>{const e=Ge(null),n=Ge("");return{init:{bindEvents:Fe},undoManager:{beforeChange:Fe,add:e,undo:e,redo:e,clear:Fe,reset:Fe,hasUndo:Ne,hasRedo:Ne,transact:e,ignore:Fe,extra:Fe},formatter:{match:Ne,matchAll:Ge([]),matchNode:Ge(void 0),canApply:Ne,closest:n,apply:Fe,remove:Fe,toggle:Fe,formatChanged:Ge({unbind:Fe})},editor:{getContent:n,setContent:Ge({content:"",html:""}),insertContent:Ge(""),addVisual:Fe},selection:{getContent:n},autocompleter:{addDecoration:Fe,removeDecoration:Fe},raw:{getModel:Ge(V.none())}}},Ng=e=>tn(e.plugins,"rtc"),d6=e=>vo(e.plugins,"rtc").bind(n=>V.from(n.setup)),m6=e=>{const n=e;return d6(e).fold(()=>(n.rtcInstance=fT(e),V.none()),o=>(n.rtcInstance=u6(),V.some(()=>o().then(r=>(n.rtcInstance=i6(r),r.rtc.isRemote)))))},lA=e=>e.rtcInstance?e.rtcInstance:fT(e),da=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},t2=(e,n,o)=>{da(e).undoManager.beforeChange(n,o)},gT=(e,n,o,r,c,u,f)=>da(e).undoManager.add(n,o,r,c,u,f),n2=(e,n,o,r)=>da(e).undoManager.undo(n,o,r),rN=(e,n,o)=>da(e).undoManager.redo(n,o),aN=(e,n,o)=>{da(e).undoManager.clear(n,o)},f6=(e,n)=>{da(e).undoManager.reset(n)},cN=(e,n,o)=>da(e).undoManager.hasUndo(n,o),g6=(e,n,o)=>da(e).undoManager.hasRedo(n,o),h6=(e,n,o,r)=>da(e).undoManager.transact(n,o,r),p6=(e,n,o)=>{da(e).undoManager.ignore(n,o)},b6=(e,n,o,r,c)=>{da(e).undoManager.extra(n,o,r,c)},lN=(e,n,o,r,c)=>da(e).formatter.match(n,o,r,c),v6=(e,n,o)=>da(e).formatter.matchAll(n,o),y6=(e,n,o,r,c)=>da(e).formatter.matchNode(n,o,r,c),o2=(e,n)=>da(e).formatter.canApply(n),iN=(e,n)=>da(e).formatter.closest(n),uN=(e,n,o,r)=>{da(e).formatter.apply(n,o,r)},C6=(e,n,o,r,c)=>{da(e).formatter.remove(n,o,r,c)},w6=(e,n,o,r)=>{da(e).formatter.toggle(n,o,r)},S6=(e,n,o,r,c,u)=>da(e).formatter.formatChanged(n,o,r,c,u),dN=(e,n)=>lA(e).editor.getContent(n),x6=(e,n,o)=>lA(e).editor.setContent(n,o),T6=(e,n,o)=>lA(e).editor.insertContent(n,o),E6=(e,n,o)=>da(e).selection.getContent(n,o),k6=(e,n)=>da(e).editor.addVisual(n),_6=e=>da(e).init.bindEvents(),Mm=(e,n)=>da(e).autocompleter.addDecoration(n),iA=e=>da(e).autocompleter.removeDecoration(),O6=(e,n={})=>{const o=n.format?n.format:"html";return E6(e,o,n)},mN=e=>e.dom.length===0?(os(e),V.none()):V.some(e),A6=(e,n)=>e.filter(o=>wf.isBookmarkNode(o.dom)).bind(n?hd:mc),D6=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(W_(c,u,!1,!r),o.setStart(u,f)):(W_(u,c,!1,!r),o.setEnd(u,f))},wo=(e,n)=>{Kc(e).each(o=>{const r=e.dom;n&&MC(o,De(r,0))?vx(r,0):!n&&NC(o,De(r,r.length))&&U_(r,r.length)})},R6=(e,n,o,r)=>{e.bind(c=>((r?U_:vx)(c.dom,r?c.dom.length:0),n.filter(La).map(f=>D6(c,f,o,r)))).orThunk(()=>A6(n,r).or(n).filter(La).map(u=>wo(u,r)))},M6=(e,n)=>{const o=V.from(n.firstChild).map(ne.fromDom),r=V.from(n.lastChild).map(ne.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(mc).filter(La).bind(mN),u=r.bind(hd).filter(La).bind(mN);R6(c,o,e,!0),R6(u,r,e,!1),e.collapse(!1)},N6=(e,n)=>We(J({format:"html"},e),{set:!0,selection:!0,content:n}),cr=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,J(J({forced_root_block:!1},c),n));return Zh({validate:!1},e.schema).serialize(u)}else return n.content},B6=(e,n,o={})=>{const r=N6(o,n);sT(e,r).each(c=>{const u=cr(e,c),f=e.selection.getRng();M6(f,f.createContextualFragment(u)),e.selection.setRng(f),Pe(e,f),QO(e,u,c)})},n0=(e,n,o)=>{if(tn(e,n)){const r=jt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var P6=(e,n)=>{let o,r;const c=(b,C)=>us(C,E=>e.is(E,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const C=b.element,E=u(C),N={};ut(o,(R,F)=>{c(F,E).each(Y=>{r[F]||(Ie(R,ee=>{ee(!0,{node:Y,selector:F,parents:E})}),r[F]=R),N[F]=R})}),ut(r,(R,F)=>{N[F]||(delete r[F],Ie(R,Y=>{Y(!1,{node:C,selector:F,parents:E})}))})})};return{selectorChangedWithUnbind:(b,C)=>(o||f(),o[b]||(o[b]=[]),o[b].push(C),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{n0(o,b,C),n0(r,b,C)}})}};const fN=e=>!!(e&&e.ownerDocument)&&hl(ne.fromDom(e.ownerDocument),ne.fromDom(e)),$6=e=>e?fN(e.startContainer)&&fN(e.endContainer):!1,uA=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=P6(e,r),b=(st,Mt)=>{const io=e.createRng();ze(st)&&ze(Mt)?(io.setStart(st,Mt),io.setEnd(st,Mt),we(io),fe(!1)):(f1(e,io,r.getBody(),!0),we(io))},C=st=>O6(r,st),E=(st,Mt)=>B6(r,st,Mt),N=st=>mD(r.getBody(),be(),st),R=st=>fD(r.getBody(),be(),st),F=(st,Mt)=>zc.getBookmark(st,Mt),Y=st=>zc.moveToBookmark(st),ee=(st,Mt)=>(MI(e,st,Mt).each(we),st),j=()=>{const st=be(),Mt=de();return!st||st.item?!1:st.compareEndPoints?st.compareEndPoints("StartToEnd",st)===0:!Mt||st.collapsed},X=()=>{const st=be(),Mt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Mt.length>0?Es(Mt,io=>e.isEditable(io.parentElement)):st.startContainer===st.endContainer?e.isEditable(st.startContainer):e.isEditable(st.startContainer)&&e.isEditable(st.endContainer)},fe=st=>{const Mt=be();Mt.collapse(!!st),we(Mt)},de=()=>n.getSelection?n.getSelection():n.document.selection,be=()=>{let st;const Mt=(yt,Kt,nn)=>{try{return Kt.compareBoundaryPoints(yt,nn)}catch(Ct){return-1}},io=n.document;if(ze(r.bookmark)&&!Wh(r)){const yt=Vl(r);if(yt.isSome())return yt.map(Kt=>A_(r,[Kt])[0]).getOr(io.createRange())}try{const yt=de();yt&&!Mc(yt.anchorNode)&&(yt.rangeCount>0?st=yt.getRangeAt(0):st=io.createRange(),st=A_(r,[st])[0])}catch(yt){}if(st||(st=io.createRange()),wi(st.startContainer)&&st.collapsed){const yt=e.getRoot();st.setStart(yt,0),st.setEnd(yt,0)}return c&&u&&(Mt(st.START_TO_START,st,c)===0&&Mt(st.END_TO_END,st,c)===0?st=u:(c=null,u=null)),st},we=(st,Mt)=>{if(!$6(st))return;const io=de();if(st=r.dispatch("SetSelectionRange",{range:st,forward:Mt}).range,io){u=st;try{io.removeAllRanges(),io.addRange(st)}catch(Kt){}Mt===!1&&io.extend&&(io.collapse(st.endContainer,st.endOffset),io.extend(st.startContainer,st.startOffset)),c=io.rangeCount>0?io.getRangeAt(0):null}if(!st.collapsed&&st.startContainer===st.endContainer&&(io!=null&&io.setBaseAndExtent)&&st.endOffset-st.startOffset<2&&st.startContainer.hasChildNodes()){const Kt=st.startContainer.childNodes[st.startOffset];Kt&&Kt.nodeName==="IMG"&&(io.setBaseAndExtent(st.startContainer,st.startOffset,st.endContainer,st.endOffset),(io.anchorNode!==st.startContainer||io.focusNode!==st.endContainer)&&io.setBaseAndExtent(Kt,0,Kt,1))}r.dispatch("AfterSetSelectionRange",{range:st,forward:Mt})},He=st=>(E(e.getOuterHTML(st)),st),gt=()=>DI(r.getBody(),be()),ot=(st,Mt)=>RI(e,be(),st,Mt),Ee=()=>{const st=de(),Mt=st==null?void 0:st.anchorNode,io=st==null?void 0:st.focusNode;if(!st||!Mt||!io||Mc(Mt)||Mc(io))return!0;const yt=e.createRng(),Kt=e.createRng();try{yt.setStart(Mt,st.anchorOffset),yt.collapse(!0),Kt.setStart(io,st.focusOffset),Kt.collapse(!0)}catch(nn){return!0}return yt.compareBoundaryPoints(yt.START_TO_START,Kt)<=0},wr={dom:e,win:n,serializer:o,editor:r,expand:(st={type:"word"})=>we(Tg(e).expand(be(),st)),collapse:fe,setCursorLocation:b,getContent:C,setContent:E,getBookmark:F,moveToBookmark:Y,select:ee,isCollapsed:j,isEditable:X,isForward:Ee,setNode:He,getNode:gt,getSel:de,setRng:we,getRng:be,getStart:N,getEnd:R,getSelectedBlocks:ot,normalize:()=>{const st=be(),Mt=de();if(!Tm(Mt)&&g1(r)){const io=xg(e,st);return io.each(yt=>{we(yt,Ee())}),io.getOr(st)}return st},selectorChanged:(st,Mt)=>(f(st,Mt),wr),selectorChangedWithUnbind:f,getScrollContainer:()=>{let st,Mt=e.getRoot();for(;Mt&&Mt.nodeName!=="BODY";){if(Mt.scrollHeight>Mt.clientHeight){st=Mt;break}Mt=Mt.parentNode}return st},scrollIntoView:(st,Mt)=>{ze(st)?ht(r,st,Mt):Pe(r,be(),Mt)},placeCaretAt:(st,Mt)=>we(_1(st,Mt,r.getDoc())),getBoundingClientRect:()=>{const st=be();return st.collapsed?De.fromRangeStart(st).getClientRects()[0]:st.getBoundingClientRect()},destroy:()=>{n=c=u=null,Ma.destroy()}},zc=wf(wr),Ma=T1(wr,r);return wr.bookmarkManager=zc,wr.controlSelection=Ma,wr},sp=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let C=r.length;for(;C--;){const E=r[C];let N=E.attr(u);N!==void 0?(E.attr(c,N.length>0?N:null),E.attr(u,null)):(N=E.attr(c),c==="style"?N=o.serializeStyle(o.parseStyle(N),E.name):f&&(N=f.call(b,N,c,E.name)),E.attr(c,N.length>0?N:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(V.from(b.firstChild).exists(E=>{var N;return!ie((N=E.value)!==null&&N!==void 0?N:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=tl.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const C=r[b],E=C.firstChild,N=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(c==="script"){const R=C.attr("type");R&&C.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&N.length>0&&(E.value=`// <![CDATA[
`+f(N)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&N.length>0&&(E.value=`<!--
`+f(N)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Ie(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},Ri=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},s2=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Ze.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{b.body.appendChild(b.importNode(C,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return t_(e,We(J({},o),{node:u})),r&&(c.doc=r),u},K1=(e,n)=>ze(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,kf=(e,n,o)=>K1(e,o)?s2(e,n,o):n,r2=(e,n,o)=>{Ze.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},dA=(e,n,o)=>!n.no_events&&e?cC(e,We(J({},n),{content:o})).content:o,mA=(e,n,o)=>{const r=Oe(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Rl(ne.fromDom(n))?r:Ze.trim(r)},gN=(e,n,o)=>{const r=o.selection?J({forced_root_block:!1},o):o,c=e.parse(n,r);return Ri(c),c},hN=(e,n,o)=>Zh(e,n).serialize(o),I6=(e,n,o,r,c)=>{const u=hN(n,o,r);return dA(e,c,u)},L6=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:rs.DOM,c=n&&n.schema?n.schema:Pl(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=q1(e,c);sp(u,e,r);const f=(b,C={})=>{const E=J({format:"html"},C),N=kf(n,b,E),R=mA(r,N,E),F=gN(u,R,E);return E.format==="tree"?F:I6(n,e,c,F,E)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:Ve(r2,u,o),getTempAttrs:Ge(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},fA=(e,n)=>{const o=L6(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},pN="html",bN=(e,n)=>We(J({},e),{format:n,get:!0,getInner:!0}),vN=(e,n={})=>{const o=n.format?n.format:pN,r=bN(n,o);return XO(e,r).fold(Dn,c=>{const u=dN(e,c);return JO(e,u,c)})},gA="html",AW=(e,n)=>We(J({format:gA},e),{set:!0,content:n}),hA=(e,n,o={})=>{const r=AW(o,n);return sT(e,r).map(c=>{const u=x6(e,c.content,c);return QO(e,u.html,c),u.content}).getOr(n)},DW="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),F6="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),H6="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Nm=[{name:"template",replacedWith:"Advanced Template"}],V6=(e,n)=>{const o=jt(n,r=>tn(e,r));return Qo(o)},RW=e=>{const n=V6(e,DW),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Qo(n)},z6=e=>V6(e,F6),o0=(e,n)=>{const o=Ze.makeMap(e.plugins," "),c=jt(n,u=>tn(o,u));return Qo(c)},U6=e=>o0(e,H6),yN=e=>o0(e,Nm.map(n=>n.name)),CN=(e,n)=>{const o=RW(e),r=U6(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,C=f?`

Themes:${b}mobile`:"",E=c?`

Plugins:${b}${r.join(b)}`:"",N=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+C+E+N)}},wN=e=>us(Nm,n=>n.name===e).fold(()=>e,n=>`${e}, replaced by ${n.replacedWith}`),W6=(e,n)=>{const o=z6(e),r=yN(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(wN).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+C)}},Z6=(e,n)=>{CN(e,n),W6(e,n)},Bm=rs.DOM,j6=e=>{Bm.setStyle(e.id,"display",e.orgDisplay)},hT=e=>V.from(e).each(n=>n.destroy()),G6=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},q6=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Bm.unbind(n,"submit reset",e.formEventDelegate))},K6=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ze(c==null?void 0:c.nextSibling)&&Bm.remove(c.nextSibling),lC(e),e.editorManager.remove(e),!e.inline&&r&&j6(e),iC(e),Bm.remove(e.getContainer()),hT(n),hT(o),e.destroy()}},Y6=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),hT(o),hT(r)),q6(e),G6(e),e.destroyed=!0}},pT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>tn(e,c)}})(),s0=nl.ModelManager,SN=(e,n)=>n.dom[e],xN=(e,n)=>parseInt(Yl(n,e),10),NW=Ve(SN,"clientWidth"),a2=Ve(SN,"clientHeight"),X6=Ve(xN,"margin-top"),pA=Ve(xN,"margin-left"),J6=e=>e.dom.getBoundingClientRect(),Q6=(e,n,o)=>{const r=NW(e),c=a2(e);return n>=0&&o>=0&&n<=r&&o<=c},e8=(e,n,o,r)=>{const c=J6(n),u=e?c.left+n.dom.clientLeft+pA(n):0,f=e?c.top+n.dom.clientTop+X6(n):0,b=o-u,C=r-f;return{x:b,y:C}},t8=(e,n,o)=>{const r=ne.fromDom(e.getBody()),c=e.inline?r:Zg(r),u=e8(e.inline,c,n,o);return Q6(c,u.x,u.y)},Y1=e=>V.from(e).map(ne.fromDom),X1=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return Y1(n).map(bi).getOr(!1)};var bT=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const c2=e=>{const n=[],o=()=>{const F=e.theme;return F&&F.getNotificationManagerImpl?F.getNotificationManagerImpl():bT()},r=()=>V.from(n[0]),c=(F,Y)=>F.type===Y.type&&F.text===Y.text&&!F.progressBar&&!F.timeout&&!Y.progressBar&&!Y.timeout,u=()=>{Ie(n,F=>{F.reposition()})},f=F=>{n.push(F)},b=F=>{Dr(n,Y=>Y===F).each(Y=>{n.splice(Y,1)})},C=(F,Y=!0)=>e.removed||!X1(e)?{}:(Y&&e.dispatch("BeforeOpenNotification",{notification:F}),us(n,ee=>c(o().getArgs(ee),F)).getOrThunk(()=>{e.editorManager.setActive(e);const ee=o().open(F,()=>{b(ee),u(),r().fold(()=>e.focus(),j=>Dt(ne.fromDom(j.getEl())))});return f(ee),u(),e.dispatch("OpenNotification",{notification:J({},ee)}),ee})),E=()=>{r().each(F=>{o().close(F),b(F),u()})},N=Ge(n);return(F=>{F.on("SkinLoaded",()=>{const Y=eS(F);Y&&C({text:Y,type:"warning",timeout:0},!1),u()}),F.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),F.on("remove",()=>{Ie(n.slice(),Y=>{o().close(Y)})})})(e),{open:C,close:E,getNotifications:N}},Ud=nl.PluginManager,Ku=nl.ThemeManager;var vT=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const l2=e=>{let n=[];const o=()=>{const j=e.theme;return j&&j.getWindowManagerImpl?j.getWindowManagerImpl():vT()},r=(j,X)=>(...fe)=>X?X.apply(j,fe):void 0,c=j=>{e.dispatch("OpenWindow",{dialog:j})},u=j=>{e.dispatch("CloseWindow",{dialog:j})},f=j=>{n.push(j),c(j)},b=j=>{u(j),n=jt(n,X=>X!==j),n.length===0&&e.focus()},C=()=>V.from(n[n.length-1]),E=j=>{e.editorManager.setActive(e),ai(e),e.ui.show();const X=j();return f(X),X},N=(j,X)=>E(()=>o().open(j,X,b)),R=j=>E(()=>o().openUrl(j,b)),F=(j,X,fe)=>{const de=o();de.alert(j,r(fe||de,X))},Y=(j,X,fe)=>{const de=o();de.confirm(j,r(fe||de,X))},ee=()=>{C().each(j=>{o().close(j),b(j)})};return e.on("remove",()=>{Ie(n,j=>{o().close(j)})}),{open:N,openUrl:R,alert:F,confirm:Y,close:ee}},bA=(e,n)=>{e.notificationManager.open({type:"error",text:n})},r0=(e,n)=>{e._skinLoaded?bA(e,n):e.on("SkinLoaded",()=>{bA(e,n)})},vA=(e,n)=>{r0(e,$u.translate(["Failed to upload image: {0}",n]))},a0=(e,n,o)=>{zu(e,n,{message:o}),console.error(o)},c0=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,l0=(e,n,o)=>{a0(e,"PluginLoadError",c0("plugin",n,o))},TN=(e,n,o)=>{a0(e,"IconsLoadError",c0("icons",n,o))},EN=(e,n,o)=>{a0(e,"LanguageLoadError",c0("language",n,o))},kN=(e,n,o)=>{a0(e,"ThemeLoadError",c0("theme",n,o))},yT=(e,n,o)=>{a0(e,"ModelLoadError",c0("model",n,o))},_N=(e,n,o)=>{const r=$u.translate(["Failed to initialize plugin: {0}",n]);zu(e,"PluginLoadError",{message:r}),i2(r,o),r0(e,r)},i2=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},ON=e=>/^[a-z0-9\-]+$/i.test(e),AN=e=>Pg(e,Yw(e)),Bg=e=>Pg(e,Xw(e)),Pg=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Vt(n,u=>ON(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},Wd=e=>{e.contentCSS=e.contentCSS.concat(AN(e),Bg(e))},n8=e=>e?dr(e.getElementsByTagName("img")):[],o8=(e,n)=>{const o={};return{findAll:(c,u=mt)=>{const f=jt(n8(c),C=>{const E=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!E||E===so.transparentSrc?!1:Io(E,"blob:")?!e.isUploaded(E)&&u(C):Io(E,"data:")?u(C):!1}),b=Vt(f,C=>{const E=C.src;if(tn(o,E))return o[E].then(N=>re(N)?N:{image:C,blobInfo:N.blobInfo});{const N=RO(n,E).then(R=>(delete o[E],{image:C,blobInfo:R})).catch(R=>(delete o[E],R));return o[E]=N,N}});return Promise.all(b)}}},DN=()=>{let o={};const r=(F,Y)=>({status:F,resultUri:Y}),c=F=>F in o;return{hasBlobUri:c,getResultUri:F=>{const Y=o[F];return Y?Y.resultUri:null},isPending:F=>c(F)?o[F].status===1:!1,isUploaded:F=>c(F)?o[F].status===2:!1,markPending:F=>{o[F]=r(1,null)},markUploaded:(F,Y)=>{o[F]=r(2,Y)},removeFailed:F=>{delete o[F]},destroy:()=>{o={}}}};let s8=0;const r8=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},a8=e=>e+s8+++r8(),c8=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,F,Y,ee,j)=>{if(re(R))return r({id:R,name:ee,filename:j,blob:F,base64:Y});if(Ut(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const F=R.id||a8("blobid"),Y=R.name||F,ee=R.blob;return{id:Ge(F),name:Ge(Y),filename:Ge(R.filename||Y+"."+n(ee.type)),blob:Ge(ee),base64:Ge(R.base64),blobUri:Ge(R.blobUri||URL.createObjectURL(ee)),uri:Ge(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>us(e,R).getOrUndefined(),f=R=>u(F=>F.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(F=>F.blobUri()===R),getByData:(R,F)=>u(Y=>Y.base64()===R&&Y.blob().type===F),findFirst:u,removeByUri:R=>{e=jt(e,F=>F.blobUri()===R?(URL.revokeObjectURL(F.blobUri()),!1):!0)},destroy:()=>{Ie(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},l8=(e,n)=>{const o={},r=(j,X)=>j?j.replace(/\/$/,"")+"/"+X.replace(/^\//,""):X,c=(j,X)=>new Promise((fe,de)=>{const be=new XMLHttpRequest;be.open("POST",n.url),be.withCredentials=n.credentials,be.upload.onprogress=He=>{X(He.loaded/He.total*100)},be.onerror=()=>{de("Image upload failed due to a XHR Transport error. Code: "+be.status)},be.onload=()=>{if(be.status<200||be.status>=300){de("HTTP Error: "+be.status);return}const He=JSON.parse(be.responseText);if(!He||!re(He.location)){de("Invalid JSON: "+be.responseText);return}fe(r(n.basePath,He.location))};const we=new FormData;we.append("file",j.blob(),j.filename()),be.send(we)}),u=ue(n.handler)?n.handler:c,f=()=>new Promise(j=>{j([])}),b=(j,X)=>({url:X,blobInfo:j,status:!0}),C=(j,X)=>({url:"",blobInfo:j,status:!1,error:X}),E=(j,X)=>{Ze.each(o[j],fe=>{fe(X)}),delete o[j]},N=(j,X,fe)=>(e.markPending(j.blobUri()),new Promise(de=>{let be,we;try{const He=()=>{be&&(be.close(),we=Fe)},gt=Ee=>{He(),e.markUploaded(j.blobUri(),Ee),E(j.blobUri(),b(j,Ee)),de(b(j,Ee))},ot=Ee=>{He(),e.removeFailed(j.blobUri()),E(j.blobUri(),C(j,Ee)),de(C(j,Ee))};we=Ee=>{Ee<0||Ee>100||V.from(be).orThunk(()=>V.from(fe).map(xo)).each(ke=>{be=ke,ke.progressBar.value(Ee)})},X(j,we).then(gt,Ee=>{ot(re(Ee)?{message:Ee}:Ee)})}catch(He){de(C(j,He))}})),R=j=>j===c,F=j=>{const X=j.blobUri();return new Promise(fe=>{o[X]=o[X]||[],o[X].push(fe)})},Y=(j,X)=>(j=Ze.grep(j,fe=>!e.isUploaded(fe.blobUri())),Promise.all(Ze.map(j,fe=>e.isPending(fe.blobUri())?F(fe):N(fe,u,X))));return{upload:(j,X)=>!n.url&&R(u)?f():Y(j,X)}},RN=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),MN=(e,n)=>l8(n,{url:tv(e),basePath:gf(e),credentials:qw(e),handler:Oy(e)}),i8=e=>{const n=DN(),o=MN(e,n);return{upload:(r,c=!0)=>o.upload(r,c?RN(e):void 0)}},u8=e=>{const n=c8();let o,r;const c=DN(),u=[],f=be=>we=>e.selection?be(we):[],b=be=>be+(be.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(be,we,He)=>{let gt=0;do gt=be.indexOf(we,gt),gt!==-1&&(be=be.substring(0,gt)+He+be.substr(gt+we.length),gt+=He.length-we.length+1);while(gt!==-1);return be},E=(be,we,He)=>{const gt=`src="${He}"${He===so.transparentSrc?' data-mce-placeholder="1"':""}`;return be=C(be,`src="${we}"`,gt),be=C(be,'data-mce-src="'+we+'"','data-mce-src="'+He+'"'),be},N=(be,we)=>{Ie(e.undoManager.data,He=>{He.type==="fragmented"?He.fragments=Vt(He.fragments,gt=>E(gt,be,we)):He.content=E(He.content,be,we)})},R=(be,we)=>{const He=e.convertURL(we,"src");N(be.src,we),Ca(ne.fromDom(be),{src:ev(e)?b(we):we,"data-mce-src":He})},F=()=>(o||(o=MN(e,c)),X().then(f(be=>{const we=Vt(be,He=>He.blobInfo);return o.upload(we,RN(e)).then(f(He=>{const gt=[];let ot=!1;const Ee=Vt(He,(ke,xt)=>{const{blobInfo:Ft,image:Qt}=be[xt];let On=!1;return ke.status&&nu(e)?(ke.url&&!_s(Qt.src,ke.url)&&(ot=!0),n.removeByUri(Qt.src),Ng(e)||R(Qt,ke.url)):ke.error&&(ke.error.remove&&(N(Qt.src,so.transparentSrc),gt.push(Qt),On=!0),vA(e,ke.error.message)),{element:Qt,status:ke.status,uploadUri:ke.url,blobInfo:Ft,removed:On}});return gt.length>0&&!Ng(e)?e.undoManager.transact(()=>{Ie(gt,ke=>{e.dom.remove(ke),n.removeByUri(ke.src)})}):ot&&e.undoManager.dispatchChange(),Ee}))}))),Y=()=>tu(e)?F():Promise.resolve([]),ee=be=>Es(u,we=>we(be)),j=be=>{u.push(be)},X=()=>(r||(r=o8(c,n)),r.findAll(e.getBody(),ee).then(f(be=>{const we=jt(be,He=>re(He)?(r0(e,He),!1):He.uriType!=="blob");return Ng(e)||Ie(we,He=>{N(He.image.src,He.blobInfo.blobUri()),He.image.src=He.blobInfo.blobUri(),He.image.removeAttribute("data-mce-src")}),we}))),fe=()=>{n.destroy(),c.destroy(),r=o=null},de=be=>be.replace(/src="(blob:[^"]+)"/g,(we,He)=>{const gt=c.getResultUri(He);if(gt)return'src="'+gt+'"';let ot=n.getByUri(He);return ot||(ot=Jo(e.editorManager.get(),(Ee,ke)=>Ee||ke.editorUpload&&ke.editorUpload.blobCache.getByUri(He),void 0)),ot?'src="data:'+ot.blob().type+";base64,"+ot.base64()+'"':we});return e.on("SetContent",()=>{tu(e)?Y():X()}),e.on("RawSaveContent",be=>{be.content=de(be.content)}),e.on("GetContent",be=>{be.source_view||be.format==="raw"||be.format==="tree"||(be.content=de(be.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",be=>{Ie(be,we=>{const He=we.attr("src");if(!He||n.getByUri(He))return;const gt=c.getResultUri(He);gt&&we.attr("src",gt)})})}),{blobCache:n,addFilter:j,uploadImages:F,uploadImagesAuto:Y,scanForImages:X,destroy:fe}},yA=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Me(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Ze.each(f,(b,C)=>{n.setAttrib(c,C,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ze.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},CT={remove_similar:!0,inherit:!1},J1=J({selector:"td,th"},CT),d8={tablecellbackgroundcolor:J({styles:{backgroundColor:"%value"}},J1),tablecellverticalalign:J({styles:{"vertical-align":"%value"}},J1),tablecellbordercolor:J({styles:{borderColor:"%value"}},J1),tablecellclass:J({classes:["%value"]},J1),tableclass:J({selector:"table",classes:["%value"]},CT),tablecellborderstyle:J({styles:{borderStyle:"%value"}},J1),tablecellborderwidth:J({styles:{borderWidth:"%value"}},J1)},m8=Ge(d8),NN=e=>{const n={},o=f=>ze(f)?n[f]:n,r=f=>tn(n,f),c=(f,b)=>{f&&(re(f)?(Fn(b)||(b=[b]),Ie(b,C=>{Go(C.deep)&&(C.deep=!si(C)),Go(C.split)&&(C.split=!si(C)||Lr(C)),Go(C.remove)&&si(C)&&!Lr(C)&&(C.remove="none"),si(C)&&Lr(C)&&(C.mixed=!0,C.block_expand=!0),re(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=b):ut(f,(C,E)=>{c(E,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(yA(e)),c(m8()),c(tS(e)),{get:o,has:r,register:c,unregister:u}},u2=Ze.each,Mi=rs.DOM,wT=e=>ze(e)&&Ut(e),CA=(e,n)=>{const o=n&&n.schema||Pl({}),r=(C,E)=>{E.classes.length>0&&Mi.addClass(C,E.classes.join(" ")),Mi.setAttribs(C,E.attrs)},c=C=>{const E=re(C)?{name:C,classes:[],attrs:{}}:C,N=Mi.create(E.name);return r(N,E),N},u=(C,E)=>{const N=o.getElementRule(C.nodeName.toLowerCase()),R=N==null?void 0:N.parentsRequired;return R&&R.length?E&&an(R,E)?E:R[0]:!1},f=(C,E,N)=>{let R;const F=E[0],Y=wT(F)?F.name:void 0,ee=u(C,Y);if(ee)Y===ee?(R=F,E=E.slice(1)):R=ee;else if(F)R=F,E=E.slice(1);else if(!N)return C;const j=R?c(R):Mi.create("div");j.appendChild(C),N&&Ze.each(N,fe=>{const de=c(fe);j.insertBefore(de,C)});const X=wT(R)?R.siblings:void 0;return f(j,E,X)},b=Mi.create("div");if(e.length>0){const C=e[0],E=c(C),N=wT(C)?C.siblings:void 0;b.appendChild(f(E,e.slice(1),N))}return b},wA=e=>{e=Ze.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Ze.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},f8=e=>re(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ze.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Ze.map(n.split(/(?:~\+|~|\+)/),wA),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],g8=(e,n)=>{let o="",r=Hc(e);if(r==="")return"";const c=F=>re(F)?F.replace(/%(\w+)/g,""):"",u=(F,Y)=>Mi.getStyle(Y!=null?Y:e.getBody(),F,!0);if(re(n)){const F=e.formatter.get(n);if(!F)return"";n=F[0]}if("preview"in n){const F=n.preview;if(F===!1)return"";r=F||r}let f=n.block||n.inline||"span",b;const C=f8(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,b=CA(C,e)):b=CA([f],e);const E=Mi.select(f,b)[0]||b.firstChild;u2(n.styles,(F,Y)=>{const ee=c(F);ee&&Mi.setStyle(E,Y,ee)}),u2(n.attributes,(F,Y)=>{const ee=c(F);ee&&Mi.setAttrib(E,Y,ee)}),u2(n.classes,F=>{const Y=c(F);Mi.hasClass(E,Y)||Mi.addClass(E,Y)}),e.dispatch("PreviewFormats"),Mi.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const N=u("fontSize"),R=/px$/.test(N)?parseInt(N,10):0;return u2(r.split(" "),F=>{let Y=u(F,E);if(!(F==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Y)&&(Y=u(F),Ky(Y).toLowerCase()==="#ffffff"))&&!(F==="color"&&Ky(Y).toLowerCase()==="#000000")){if(F==="font-size"&&/em|%$/.test(Y)){if(R===0)return;Y=parseFloat(Y)/(/%$/.test(Y)?100:1)*R+"px"}F==="border"&&Y&&(o+="padding:0 2px;"),o+=F+":"+Y+";"}}),e.dispatch("AfterPreviewFormats"),Mi.remove(b),o},_f=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Yu=e=>{const n=NN(e),o=Va({});return _f(e),ZL(e),Ng(e)||CW(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{uN(e,r,c,u)},remove:(r,c,u,f)=>{C6(e,r,c,u,f)},toggle:(r,c,u)=>{w6(e,r,c,u)},match:(r,c,u,f)=>lN(e,r,c,u,f),closest:r=>iN(e,r),matchAll:(r,c)=>v6(e,r,c),matchNode:(r,c,u,f)=>y6(e,r,c,u,f),canApply:r=>o2(e,r),formatChanged:(r,c,u,f)=>S6(e,o,r,c,u,f),getCssText:Ve(g8,e)}},d2=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},BN=(e,n,o)=>{const r=Va(!1),c=C=>{dT(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const E=C.command;d2(E)||(mu(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const E=C.command;d2(E)||c(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",C=>{const E=C.keyCode;C.isDefaultPrevented()||((E>=33&&E<=36||E>=37&&E<=40||E===45||C.ctrlKey)&&(c(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!aA(cT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",C=>{const E=C.keyCode;if(C.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&c(C);return}const N=C.ctrlKey&&!C.altKey||C.metaKey;(E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!N&&(n.beforeChange(),dT(n,!0,o),n.add({},C),r.set(!0))}),e.on("mousedown",C=>{n.typing&&c(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,b=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||b(C))&&c(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},ST=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},SA=e=>{const n=ms(),o=Va(0),r=Va(0),c={data:[],typing:!1,beforeChange:()=>{t2(e,o,n)},add:(u,f)=>gT(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=cT(e);u.bookmark=Cy(e.selection),e.dispatch("change",{level:u,lastLevel:No(c.data,r.get()).getOrUndefined()})},undo:()=>n2(e,c,o,r),redo:()=>rN(e,r,c.data),clear:()=>{aN(e,c,r)},reset:()=>{f6(e,c)},hasUndo:()=>cN(e,c,r),hasRedo:()=>g6(e,c,r),transact:u=>h6(e,c,o,u),ignore:u=>{p6(e,o,u)},extra:(u,f)=>{b6(e,c,r,u,f)}};return Ng(e)||BN(e,c,o),ST(e),c},PN=[9,27,At.HOME,At.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,At.DOWN,At.UP,At.LEFT,At.RIGHT].concat(so.browser.isFirefox()?[224]:[]),xA="data-mce-placeholder",TA=e=>e.type==="keydown"||e.type==="keyup",EA=e=>{const n=e.keyCode;return n===At.BACKSPACE||n===At.DELETE},$N=e=>{if(TA(e)){const n=e.keyCode;return!EA(e)&&(At.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||an(PN,n))}else return!1},xT=e=>TA(e)&&!(EA(e)||e.type==="keyup"&&e.keyCode===229),kA=(e,n,o)=>{if(Gs(ne.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},h8=e=>{var n;const o=e.dom,r=kr(e),c=(n=Qw(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if($N(f))return;const C=e.getBody(),E=xT(f)?!1:kA(o,C,r);(o.getAttrib(C,xA)!==""!==E||b)&&(o.setAttrib(C,xA,E?c:null),o.setAttrib(C,"aria-placeholder",E?c:null),as(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};mo(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Rs.setEditorTimeout(e,()=>u(b)))})},p8=(e,n)=>({block:e,position:n}),b8=(e,n)=>({from:e,to:n}),_A=(e,n)=>{const o=ne.fromDom(e),r=ne.fromDom(n.container());return Cx(o,r).map(c=>p8(c,n))},IN=e=>!ho(e.from.block,e.to.block),LN=(e,n)=>k(n,c=>Ha(c)||Si(c.dom),c=>ho(c,e)).filter(Uo).getOr(e),v8=(e,n)=>{const o=ne.fromDom(e);return ho(LN(o,n.from.block),LN(o,n.to.block))},OA=e=>En(e.from.block.dom)===!1&&En(e.to.block.dom)===!1,y8=e=>{const n=o=>th(o)||Nu(o.dom);return n(e.from.block)&&n(e.to.block)},C8=(e,n,o)=>Ds(o.position.getNode())&&!Gs(o.block)?Dh(!1,o.block.dom).bind(r=>r.isEqual(o.position)?oi(n,e,r).bind(c=>_A(e,c)):V.some(o)).getOr(o):o,w8=(e,n,o)=>{const r=_A(e,De.fromRangeStart(o)),c=r.bind(u=>oi(n,e,u.position).bind(f=>_A(e,f).map(b=>C8(e,n,b))));return Pr(r,c,b8).filter(u=>IN(u)&&v8(e,u)&&OA(u)&&y8(u))},S8=(e,n,o)=>o.collapsed?w8(e,n,o):V.none(),x8=e=>{const n=Zr(e);return Dr(n,$c).fold(Ge(n),o=>n.slice(0,o))},FN=e=>{const n=x8(e);return Ie(n,os),n},HN=(e,n)=>{const o=_g(n,e);return us(o.reverse(),r=>Gs(r)).each(os)},TT=e=>jt(Gg(e),n=>!Gs(n)).length===0,AA=(e,n,o,r)=>{if(Gs(o))return S(o),Ll(o.dom);TT(r)&&Gs(n)&&yo(r,ne.fromTag("br"));const c=su(o.dom,De.before(r.dom));return Ie(FN(n),u=>{yo(r,u)}),HN(e,n),c},T8=(e,n,o)=>{if(Gs(o)){if(Gs(n)){const u=cl((f=>{const b=(C,E)=>bd(C).fold(()=>E,N=>qf(N)?b(N,E.concat(df(N))):E);return b(f,[])})(o),(f,b)=>(Cb(f,b),b),w());Yo(n),js(n,u)}return os(o),Ll(n.dom)}const r=$d(o.dom);return Ie(FN(n),c=>{js(o,c)}),HN(e,n),r},E8=(e,n)=>{const o=_g(n,e);return V.from(o[o.length-1])},k8=(e,n)=>hl(n,e)?E8(n,e):V.none(),VN=(e,n)=>{Dh(e,n.dom).bind(o=>V.from(o.getNode())).map(ne.fromDom).filter(la).each(os)},DA=(e,n,o)=>(VN(!0,n),VN(!1,o),k8(n,o).fold(Ve(T8,e,n,o),Ve(AA,e,n,o))),zN=(e,n,o,r)=>n?DA(e,r,o):DA(e,o,r),RA=(e,n)=>{const o=ne.fromDom(e.getBody());return S8(o.dom,n,e.selection.getRng()).map(c=>()=>{zN(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},MA=(e,n)=>{const o=n.getRng();return Pr(Cx(e,ne.fromDom(o.startContainer)),Cx(e,ne.fromDom(o.endContainer)),(r,c)=>ho(r,c)?V.none():V.some(()=>{o.deleteContents(),zN(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(V.none())},UN=(e,n)=>{const o=ne.fromDom(n),r=Ve(ho,e);return is(o,Ha,r).isSome()},_8=(e,n)=>UN(e,n.startContainer)||UN(e,n.endContainer),O8=(e,n)=>{const o=su(e.dom,De.fromRangeStart(n)).isNone(),r=bc(e.dom,De.fromRangeEnd(n)).isNone();return!_8(e,n)&&o&&r},A8=e=>V.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),D8=e=>{const n=ne.fromDom(e.getBody()),o=e.selection.getRng();return O8(n,o)?A8(e):MA(n,e.selection)},NA=(e,n)=>e.selection.isCollapsed()?V.none():D8(e),$g=(e,n,o,r,c)=>V.from(n._selectionOverrides.showCaret(e,o,r,c)),ET=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},rp=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?V.none():V.some(ET(n)),R8=(e,n,o)=>{const r=Fy(1,e.getBody(),n),c=De.fromRangeStart(r),u=c.getNode();if(mg(u))return $g(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(mg(f))return $g(1,e,f,!1,!1);const b=Ag(e.dom.getRoot(),c.getNode());return mg(b)?$g(1,e,b,!1,o):V.none()},BA=(e,n,o)=>n.collapsed?R8(e,n,o).getOr(n):n,kT=e=>R1(e)||un(e),M8=e=>M1(e)||RC(e),N8=(e,n)=>{Je(n)&&n.data.length===0&&e.remove(n)},WN=(e,n,o,r,c,u)=>{$g(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),N8(e.dom,o)},B8=(e,n)=>{const o=e.selection.getRng();if(!Je(o.commonAncestorContainer))return V.none();const r=n?ua.Forwards:ua.Backwards,c=Vu(e.getBody()),u=Ve(xm,n?c.next:c.prev),f=n?kT:M8,b=Hy(r,e.getBody(),o),C=u(b),E=C&&Us(n,C);if(!E||!fv(b,E))return V.none();if(f(E))return V.some(()=>WN(e,o,b.getNode(),r,n,E));const N=u(E);return N&&f(N)&&fv(E,N)?V.some(()=>WN(e,o,b.getNode(),r,n,N)):V.none()},PA=(e,n)=>B8(e,n),$A=(e,n)=>{const o=e.getBody();return n?Ll(o).filter(R1):$d(o).filter(M1)},IA=e=>{const n=e.selection.getRng();return!n.collapsed&&($A(e,!0).exists(o=>o.isEqual(De.fromRangeStart(n)))||$A(e,!1).exists(o=>o.isEqual(De.fromRangeEnd(n))))},P8=e=>ze(e)&&(Ha(ne.fromDom(e))||ec(ne.fromDom(e))),fu=zs.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),$8=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Me(o)&&o.getAttribute("data-mce-caret")===r},I8=(e,n,o,r)=>{const c=u=>qf(ne.fromDom(u))&&!_r(o,r,e);return Oh(!n,o).fold(()=>Oh(n,r).fold(Ne,c),c)},L8=(e,n,o,r)=>{const c=r.getNode(!n);return Cx(ne.fromDom(e),ne.fromDom(o.getNode())).map(u=>Gs(u)?fu.remove(u.dom):fu.moveToElement(c)).orThunk(()=>V.some(fu.moveToElement(c)))},Xu=(e,n,o)=>oi(n,e,o).bind(r=>P8(r.getNode())||I8(e,n,o,r)?V.none():n&&En(r.getNode())||!n&&En(r.getNode(!0))?L8(e,n,o,r):n&&M1(o)||!n&&R1(o)?V.some(fu.moveToPosition(r)):V.none()),LA=(e,n)=>Jt(n)?V.none():e&&En(n.nextSibling)?V.some(fu.moveToElement(n.nextSibling)):!e&&En(n.previousSibling)?V.some(fu.moveToElement(n.previousSibling)):V.none(),ZN=(e,n,o)=>o.fold(r=>V.some(fu.remove(r)),r=>V.some(fu.moveToElement(r)),r=>_r(n,r,e)?V.none():V.some(fu.moveToPosition(r))),jN=(e,n,o)=>$8(n,o)?LA(n,o.getNode(!n)).orThunk(()=>Xu(e,n,o)):Xu(e,n,o).bind(r=>ZN(e,o,r)),F8=(e,n,o)=>{const r=Fy(n?1:-1,e,o),c=De.fromRangeStart(r),u=ne.fromDom(e);return!n&&M1(c)?V.some(fu.remove(c.getNode(!0))):n&&R1(c)?V.some(fu.remove(c.getNode())):!n&&R1(c)&&L_(u,c)?hW(u,c).map(f=>fu.remove(f.getNode())):n&&M1(c)&&hx(u,c)?pW(u,c).map(f=>fu.remove(f.getNode())):jN(e,n,c)},GN=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),B1(e,n,ne.fromDom(o)),!0),H8=(e,n)=>o=>{const r=n?De.before(o):De.after(o);return e.selection.setRng(r.toRange()),!0},qN=e=>n=>(e.selection.setRng(n.toRange()),!0),KN=(e,n)=>V.from(Ag(e.getBody(),n)),V8=(e,n)=>{const o=e.selection.getNode();return KN(e,o).filter(En).fold(()=>F8(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(GN(e,n),H8(e,n),qN(e))),()=>V.some(Fe))},z8=e=>{Ie(wa(e,".mce-offscreen-selection"),os)},i0=(e,n)=>{const o=e.selection.getNode();return En(o)&&!vl(o)?KN(e,o.parentNode).filter(En).fold(()=>V.some(()=>{z8(ne.fromDom(e.getBody())),B1(e,n,ne.fromDom(e.selection.getNode())),G_(e)}),()=>V.some(Fe)):IA(e)?V.some(()=>{Zu(e,e.selection.getRng(),ne.fromDom(e.getBody()))}):V.none()},FA=e=>{const n=e.dom,o=e.selection,r=Ag(e.getBody(),o.getNode());if(Si(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(De.before(c).toRange())}return!0},_T=(e,n)=>e.selection.isCollapsed()?V8(e,n):i0(e,n),YN=(e,n)=>{const o=De.fromRangeStart(e.selection.getRng());return oi(n,e.getBody(),o).filter(r=>n?fW(r):XI(r)).bind(r=>hg(n?0:-1,r)).map(r=>()=>e.selection.select(r))},m2=(e,n)=>e.selection.isCollapsed()?YN(e,n):V.none(),u0=Je,XN=e=>u0(e)&&e.data[0]===W,JN=e=>u0(e)&&e.data[e.data.length-1]===W,U8=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(W)},BW=e=>{var n;if(u0(e.previousSibling))return JN(e.previousSibling)||e.previousSibling.appendData(W),e.previousSibling;if(u0(e))return XN(e)||e.insertData(0,W),e;{const o=U8(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},PW=e=>{var n,o;if(u0(e.nextSibling))return XN(e.nextSibling)||e.nextSibling.insertData(0,W),e.nextSibling;if(u0(e))return JN(e)||e.appendData(W),e;{const r=U8(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Ni=(e,n)=>e?BW(n):PW(n),W8=Ve(Ni,!0),Z8=Ve(Ni,!1),HA=(e,n)=>Je(e.container())?Ni(n,e.container()):Ni(n,e.getNode()),OT=(e,n)=>{const o=n.get();return o&&e.container()===o&&pn(o)},QN=(e,n)=>n.fold(o=>{pf(e.get());const r=W8(o);return e.set(r),V.some(De(r,r.length-1))},o=>Ll(o).map(r=>{if(OT(r,e)){const c=e.get();return De(c,1)}else{pf(e.get());const c=HA(r,!0);return e.set(c),De(c,1)}}),o=>$d(o).map(r=>{if(OT(r,e)){const c=e.get();return De(c,c.length-1)}else{pf(e.get());const c=HA(r,!1);return e.set(c),De(c,c.length-1)}}),o=>{pf(e.get());const r=Z8(o);return e.set(r),V.some(De(r,1))}),j8=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return V.none()},li=zs.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),gu=(e,n)=>{const o=bf(n,e);return o||e},G8=(e,n,o)=>{const r=Do(o),c=gu(n,r.container());return Ms(e,c,r).fold(()=>bc(c,r).bind(Ve(Ms,e,c)).map(u=>li.before(u)),V.none)},q8=(e,n)=>Kr(e,n)===null,eB=(e,n,o)=>Ms(e,n,o).filter(Ve(q8,n)),K8=(e,n,o)=>{const r=iu(o);return eB(e,n,r).bind(c=>su(c,r).isNone()?V.some(li.start(c)):V.none())},Y8=(e,n,o)=>{const r=Do(o);return eB(e,n,r).bind(c=>bc(c,r).isNone()?V.some(li.end(c)):V.none())},X8=(e,n,o)=>{const r=iu(o),c=gu(n,r.container());return Ms(e,c,r).fold(()=>su(c,r).bind(Ve(Ms,e,c)).map(u=>li.after(u)),V.none)},ap=e=>!pL(VA(e)),Of=(e,n,o)=>j8([G8,K8,Y8,X8],[e,n,o]).filter(ap),VA=e=>e.fold(Dn,Dn,Dn,Dn),tB=e=>e.fold(Ge("before"),Ge("start"),Ge("end"),Ge("after")),d0=e=>e.fold(li.before,li.before,li.after,li.after),f2=e=>e.fold(li.start,li.start,li.end,li.end),nB=(e,n)=>tB(e)===tB(n)&&VA(e)===VA(n),oB=(e,n,o,r,c,u)=>Pr(Ms(n,o,r),Ms(n,o,c),(f,b)=>f!==b&&yx(o,f,b)?li.after(e?f:b):u).getOr(u),sB=(e,n)=>e.fold(mt,o=>!nB(o,n)),J8=(e,n,o,r,c)=>{const u=Us(e,c);return oi(e,o,u).map(Ve(Us,e)).fold(()=>r.map(d0),C=>Of(n,o,C).map(Ve(oB,e,n,o,u,C)).filter(Ve(sB,r))).filter(ap)},g2=(e,n)=>e?n.fold(O(V.some,li.start),V.none,O(V.some,li.after),V.none):n.fold(V.none,O(V.some,li.before),V.none,O(V.some,li.end)),Q8=(e,n,o,r)=>{const c=Us(e,r),u=Of(n,o,c);return Of(n,o,c).bind(Ve(g2,e)).orThunk(()=>J8(e,n,o,u,r))},e7=e=>ue(e.selection.getSel().modify),rB=(e,n,o)=>{const r=e?1:-1;return n.setRng(De(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},t7=(e,n)=>{const o=n.selection.getRng(),r=e?De.fromRangeEnd(o):De.fromRangeStart(o);return e7(n)?e&&Ic(r)?rB(!0,n.selection,r):!e&&xa(r)?rB(!1,n.selection,r):!1:!1};var Af;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Af||(Af={}));const AT=(e,n)=>e===ua.Backwards?Vo(n):n,n7=(e,n,o)=>e===ua.Forwards?n.next(o):n.prev(o),aB=(e,n,o,r)=>Ds(r.getNode(n===ua.Forwards))?Af.Br:_r(o,r)===!1?Af.Block:Af.Wrap,cB=(e,n,o,r)=>{const c=Vu(o);let u=r;const f=[];for(;u;){const b=n7(n,c,u);if(!b)break;if(Ds(b.getNode(!1)))return n===ua.Forwards?{positions:AT(n,f).concat([b]),breakType:Af.Br,breakAt:V.some(b)}:{positions:AT(n,f),breakType:Af.Br,breakAt:V.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const C=aB(o,n,u,b);return{positions:AT(n,f),breakType:C,breakAt:V.some(b)}}f.push(b),u=b}return{positions:AT(n,f),breakType:Af.Eol,breakAt:V.none()}},cp=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===ua.Backwards?u.concat(c):[c].concat(u)}).getOr([]),DT=(e,n)=>Jo(e,(o,r)=>o.fold(()=>V.some(r),c=>Pr(To(c.getClientRects()),To(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),V.none()),m0=(e,n)=>To(n.getClientRects()).bind(o=>DT(e,o.left)),f0=Ve(cB,De.isAbove,-1),Q1=Ve(cB,De.isBelow,1),Ig=Ve(cp,-1,f0),zA=Ve(cp,1,Q1),Ju=(e,n)=>f0(e,n).breakAt.isNone(),eb=(e,n)=>Q1(e,n).breakAt.isNone(),UA=e=>Ll(e).map(n=>[n].concat(Q1(e,n).positions)).getOr([]),o7=e=>$d(e).map(n=>f0(e,n).positions.concat(n)).getOr([]),lB=(e,n)=>m0(Ig(e,n),n),s7=(e,n)=>m0(zA(e,n),n),r7=En,iB=(e,n)=>Math.abs(e.left-n),uB=(e,n)=>Math.abs(e.right-n),a7=e=>Ur(e,"node"),WA=(e,n)=>ha(e,(o,r)=>{const c=Math.min(iB(o,n),uB(o,n)),u=Math.min(iB(r,n),uB(r,n));return u===c&&a7(r)&&r7(r.node)||u<c?r:o}),c7=e=>{const n=o=>Vt(o,r=>{const c=Cm(r);return c.node=e,c});if(Me(e))return n(e.getClientRects());if(Je(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},dB=e=>ea(e,c7);var Df;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Df||(Df={}));const ZA=(e,n,o,r)=>{let c=r;for(;c=kh(c,e,kb,n);)if(o(c))return},jA=(e,n,o,r,c,u)=>{let f=0;const b=[],C=R=>{let F=dB([R]);e===-1&&(F=F.reverse());for(let Y=0;Y<F.length;Y++){const ee=F[Y];if(!o(ee,E)){if(b.length>0&&n(ee,fr(b))&&f++,ee.line=f,c(ee))return!0;b.push(ee)}}return!1},E=fr(u.getClientRects());if(!E)return b;const N=u.getNode();return N&&(C(N),ZA(e,r,C,N)),b},mB=(e,n)=>n.line>e,GA=(e,n)=>n.line===e,l7=Ve(jA,Df.Up,ka,yl),i7=Ve(jA,Df.Down,yl,ka),fB=e=>fr(e.getClientRects()),u7=(e,n,o,r)=>{const c=Vu(n);let u,f,b,C;const E=[];let N=0;e===1?(u=c.next,f=yl,b=ka,C=De.after(r)):(u=c.prev,f=ka,b=yl,C=De.before(r));const R=fB(C);do{if(!C.isVisible())continue;const F=fB(C);if(b(F,R))continue;E.length>0&&f(F,fr(E))&&N++;const Y=Cm(F);if(Y.position=C,Y.line=N,o(Y))return E;E.push(Y)}while(C=u(C));return E},gB=e=>n=>mB(e,n),qA=e=>n=>GA(e,n),Lg=(e,n)=>{e.selection.setRng(n),Pe(e,e.selection.getRng())},RT=(e,n,o)=>V.some(BA(e,n,o)),hB=(e,n,o,r,c,u)=>{const f=n===ua.Forwards,b=Vu(e.getBody()),C=Ve(xm,f?b.next:b.prev),E=f?r:c;if(!o.collapsed){const ee=zp(o);if(u(ee))return $g(n,e,ee,n===ua.Backwards,!1);if(IA(e)){const j=o.cloneRange();return j.collapse(n===ua.Backwards),V.from(j)}}const N=Hy(n,e.getBody(),o);if(E(N))return rp(e,N.getNode(!f));let R=C(N);const F=dm(o);if(R)R=Us(f,R);else return F?V.some(o):V.none();if(E(R))return $g(n,e,R.getNode(!f),f,!1);const Y=C(R);return Y&&E(Y)&&fv(R,Y)?$g(n,e,Y.getNode(!f),f,!1):F?RT(e,R.toRange(),!1):V.none()},pB=(e,n,o,r,c,u)=>{const f=Hy(n,e.getBody(),o),b=fr(f.getClientRects()),C=n===Df.Down,E=e.getBody();if(!b)return V.none();if(IA(e)){const X=C?De.fromRangeEnd(o):De.fromRangeStart(o);return(C?s7:lB)(E,X).orThunk(()=>V.from(X)).map(de=>de.toRange())}const R=(C?i7:l7)(E,gB(1),f),F=jt(R,qA(1)),Y=b.left,ee=WA(F,Y);if(ee&&u(ee.node)){const X=Math.abs(Y-ee.left),fe=Math.abs(Y-ee.right);return $g(n,e,ee.node,X<fe,!1)}let j;if(r(f)?j=f.getNode():c(f)?j=f.getNode(!0):j=zp(o),j){const X=u7(n,E,gB(1),j);let fe=WA(jt(X,qA(1)),Y);if(fe||(fe=fr(jt(X,qA(0))),fe))return RT(e,fe.position.toRange(),!1)}return F.length===0?ii(e,C).filter(C?c:r).map(X=>BA(e,X.toRange(),!1)):V.none()},ii=(e,n)=>{const o=e.selection.getRng(),r=n?De.fromRangeEnd(o):De.fromRangeStart(o),c=mv(r.container(),e.getBody());if(n){const u=Q1(c,r);return $s(u.positions)}else{const u=f0(c,r);return To(u.positions)}},bB=(e,n,o)=>ii(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),g0=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},KA=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},MT=(e,n,o)=>QN(n,o).map(r=>(g0(e,r),o)),d7=(e,n,o)=>{const r=De.fromRangeStart(e);if(e.collapsed)return r;{const c=De.fromRangeEnd(e);return o?su(n,c).getOr(c):bc(n,r).getOr(r)}},m7=(e,n,o)=>{const r=e.getBody(),c=d7(e.selection.getRng(),r,o),u=Ve(Wu,e);return Q8(o,u,r,c).bind(b=>MT(e,n,b))},f7=(e,n,o)=>{const r=Vt(wa(ne.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=jt(r,e),u=jt(o,e);Ie(di(c,u),Ve(KA,!1)),Ie(di(u,c),Ve(KA,!0))},g7=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=De.fromRangeStart(e.selection.getRng());De.isTextPosition(r)&&!bW(r)&&(g0(e,xS(o,r)),n.set(null))}},h7=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=jt(r,e);Ie(c,u=>{const f=De.fromRangeStart(n.selection.getRng());Of(e,n.getBody(),f).bind(b=>MT(n,o,b))})}},YA=(e,n,o)=>Bo(e)?m7(e,n,o).isSome():!1,vB=(e,n,o)=>Bo(n)?t7(e,n):!1,p7=e=>{const n=Va(null),o=Ve(Wu,e);return e.on("NodeChange",r=>{Bo(e)&&(f7(o,e.dom,r.parents),g7(e,n),h7(o,e,n,r.parents))}),n},h2=Ve(vB,!0),Fg=Ve(vB,!1),Rf=(e,n,o)=>{if(Bo(e)){const r=ii(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?De.fromRangeEnd(c):De.fromRangeStart(c)});return Of(Ve(Wu,e),e.getBody(),r).exists(c=>{const u=d0(c);return QN(o,u).exists(f=>(g0(e,f),!0))})}else return!1},NT=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},XA=e=>Pr(Ll(e),$d(e),(n,o)=>{const r=Us(!0,n),c=Us(!1,o);return bc(e,r).forall(u=>u.isEqual(c))}).getOr(!0),BT=(e,n)=>o=>QN(n,o).map(r=>()=>g0(e,r)),JA=(e,n,o,r)=>{const c=e.getBody(),u=Ve(Wu,e);e.undoManager.ignore(()=>{e.selection.setRng(NT(o,r)),BC(e),Of(u,c,De.fromRangeStart(e.selection.getRng())).map(f2).bind(BT(e,n)).each(nr)}),e.nodeChanged()},b7=(e,n)=>{const o=bf(n,e);return o||e},yB=(e,n,o,r)=>{const c=b7(e.getBody(),r.container()),u=Ve(Wu,e),f=Of(u,c,r);return f.bind(C=>o?C.fold(Ge(V.some(f2(C))),V.none,Ge(V.some(d0(C))),V.none):C.fold(V.none,Ge(V.some(d0(C))),V.none,Ge(V.some(f2(C))))).map(BT(e,n)).getOrThunk(()=>{const C=vv(o,c,r),E=C.bind(N=>Of(u,c,N));return Pr(f,E,()=>Ms(u,c,r).bind(N=>XA(N)?V.some(()=>{B1(e,o,ne.fromDom(N))}):V.none())).getOrThunk(()=>E.bind(()=>C.map(N=>()=>{o?JA(e,n,r,N):JA(e,n,N,r)})))})},PT=(e,n,o)=>{if(e.selection.isCollapsed()&&Bo(e)){const r=De.fromRangeStart(e.selection.getRng());return yB(e,n,o,r)}return V.none()},v7=e=>Xa(e)>1,CB=(e,n)=>{const o=ne.fromDom(e.getBody()),r=ne.fromDom(e.selection.getStart()),c=_g(r,o);return Dr(c,n).fold(Ge(c),u=>c.slice(0,u))},y7=e=>CB(e,n=>$c(n)||v7(n)),C7=e=>CB(e,$c),wB=(e,n)=>{const o=Ve(Gu,e);return ea(n,r=>o(r)?[r.dom]:[])},SB=e=>{const n=C7(e);return wB(e,n)},xB=(e,n,o,r)=>{const c=wB(n,r);if(c.length===0)B1(n,e,o);else{const u=WC(o.dom,c);n.selection.setRng(u.toRange())}},TB=(e,n)=>{const o=y7(e);return $s(o).bind(r=>{const c=De.fromRangeStart(e.selection.getRng());return q_(n,c,r.dom)&&!ZC(r)?V.some(()=>xB(n,e,r,o)):V.none()})},$W=(e,n)=>{const o=n.parentElement;return Ds(n)&&!Q(o)&&e.dom.isEmpty(o)},IW=e=>ZC(ne.fromDom(e)),w7=(e,n)=>{const o=e.selection.getStart(),r=$W(e,o)||IW(o)?WC(o,n):jL(e,n);e.selection.setRng(r.toRange())},S7=(e,n)=>{const o=di(n,SB(e));o.length>0&&w7(e,o)},x7=e=>Je(e.startContainer),LW=e=>e.startOffset===0&&x7(e),T7=(e,n)=>{const o=n.startContainer.parentElement;return!Q(o)&&Gu(e,ne.fromDom(o))},E7=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!Q(n)&&!Q(o)&&n.isEqualNode(o)},FW=e=>{const n=e.endContainer;return e.endOffset===(Je(n)?n.length:n.childNodes.length)},k7=e=>E7(e)&&FW(e),Bi=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),EB=e=>k7(e)||Bi(e),p2=e=>{const n=e.selection.getRng();return LW(n)&&T7(e,n)&&EB(n)},_7=e=>{if(p2(e)){const n=SB(e);return V.some(()=>{BC(e),S7(e,n)})}else return V.none()},$T=(e,n)=>e.selection.isCollapsed()?TB(e,n):_7(e),kB=e=>Hx(e,n=>sl(n.dom),$c),QA=e=>kB(ne.fromDom(e.selection.getStart())),O7=e=>{const n=e.selection.getRng();return n.collapsed&&(x7(n)||e.dom.isEmpty(n.startContainer))&&!QA(e)},b2=e=>(O7(e)&&w7(e,[]),!0),IT=(e,n,o)=>ze(o)?V.some(()=>{e._selectionOverrides.hideFakeCaret(),B1(e,n,ne.fromDom(o))}):V.none(),A7=(e,n)=>{const o=n?un:RC,r=n?ua.Forwards:ua.Backwards,c=Hy(r,e.getBody(),e.selection.getRng());return o(c)?IT(e,n,c.getNode(!n)):V.from(Us(n,c)).filter(u=>o(u)&&fv(c,u)).bind(u=>IT(e,n,u.getNode(!n)))},D7=(e,n)=>{const o=e.selection.getNode();return Jc(o)?IT(e,n,o):V.none()},v2=(e,n)=>e.selection.isCollapsed()?A7(e,n):D7(e,n),R7=e=>k(e,n=>Si(n.dom)||En(n.dom)).exists(n=>Si(n.dom)),_B=e=>kc(e!=null?e:"").getOr(0),OB=(e,n)=>{const o=e||im(n)?"margin":"padding",r=Yl(n,"direction")==="rtl"?"-right":"-left";return o+r},M7=(e,n,o,r,c,u)=>{const f=OB(o,ne.fromDom(u)),b=_B(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,b-r);e.setStyle(u,f,C?C+c:"")}else{const C=b+r+c;e.setStyle(u,f,C)}},e4=(e,n)=>Es(n,o=>{const r=OB(Kw(e),o),c=Ja(o,r).map(_B).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),t4=e=>{const n=AB(e);return!e.mode.isReadOnly()&&(n.length>1||e4(e,n))},N7=e=>ye(e)||ec(e),B7=e=>Kc(e).exists(N7),AB=e=>jt(Cd(e.selection.getSelectedBlocks()),n=>!N7(n)&&!B7(n)&&R7(n)),DB=(e,n)=>{var o,r;const{dom:c}=e,u=Ch(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=_B(u),C=Kw(e);Ie(AB(e),E=>{M7(c,n,C,b,f,E.dom)})},n4=e=>DB(e,"indent"),y2=e=>DB(e,"outdent"),o4=e=>{if(e.selection.isCollapsed()&&t4(e)){const n=e.dom,o=e.selection.getRng(),r=De.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&I_(ne.fromDom(c),r))return V.some(()=>y2(e))}return V.none()},s4=(e,n,o)=>cc([o4,_T,PA,(r,c)=>PT(r,n,c),RA,Ox,m2,v2,NA,$T],r=>r(e,o)).filter(r=>e.selection.isEditable()),P7=(e,n)=>{s4(e,n,!1).fold(()=>{BC(e),G_(e)},nr)},$7=(e,n)=>{s4(e,n,!0).fold(()=>j_(e),nr)},r4=(e,n)=>{e.addCommand("delete",()=>{P7(e,n)}),e.addCommand("forwardDelete",()=>{$7(e,n)})},RB=5,I7=400,MB=e=>e.touches===void 0||e.touches.length!==1?V.none():V.some(e.touches[0]),L7=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>RB||r>RB},Zd=e=>{const n=ms(),o=Va(!1),r=Ji(c=>{e.dispatch("longpress",We(J({},c),{type:"longpress"})),o.set(!0)},I7);e.on("touchstart",c=>{MB(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),MB(c).each(u=>{n.on(f=>{L7(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",We(J({},c),{type:"tap"}))})},!0)},LT=(e,n)=>tn(e,n.nodeName),NB=(e,n)=>Je(n)?!0:Me(n)?!LT(e.getBlockElements(),n)&&!_a(n)&&!sf(e,n):!1,HW=(e,n,o)=>Xo(QI(ne.fromDom(o),ne.fromDom(n)),r=>LT(e,r.dom)),VW=(e,n)=>{if(Je(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||LT(e,n.nextSibling)))return!0}return!1},F7=e=>e.dom.create(kr(e),Qb(e)),zW=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,C,E=!1;const N=kr(e);if(!u||!Me(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,N.toLowerCase())||HW(c,f,u))return;const F=o.getRng(),{startContainer:Y,startOffset:ee,endContainer:j,endOffset:X}=F,fe=Wh(e);let de=f.firstChild;for(;de;)if(Me(de)&&Xf(r,de),NB(r,de)){if(VW(c,de)){C=de,de=de.nextSibling,n.remove(C);continue}b||(b=F7(e),f.insertBefore(b,de),E=!0),C=de,de=de.nextSibling,b.appendChild(C)}else b=null,de=de.nextSibling;E&&fe&&(F.setStart(Y,ee),F.setEnd(j,X),o.setRng(F),e.nodeChanged())},BB=(e,n,o)=>{const r=ne.fromDom(F7(e)),c=w();js(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},FT=e=>{e.on("NodeChange",Ve(zW,e))},PB=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,a4=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},$B=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],a4(e,c,gS(e)));o.content=c}},IB=e=>{const n="contenteditable",o=" "+Ze.trim(hS(e))+" ",r=" "+Ze.trim(gS(e))+" ",c=PB(o),u=PB(r),f=Ak(e);f.length>0&&e.on("BeforeSetContent",b=>{$B(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let C=b.length;for(;C--;){const E=b[C];c(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let C=b.length;for(;C--;){const E=b[C];!c(E)&&!u(E)||(f.length>0&&E.attr("data-mce-content")?(E.name="#text",E.type=3,E.raw=!0,E.value=E.attr("data-mce-content")):E.attr(n,null))}})},LB=e=>lt(ne.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),FB=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Nl(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},H7=(e,n)=>{const o=LB(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),FB(e,o);return}Lo(o)&&(FB(e,o),e.undoManager.add())}},V7=e=>{e.on("keyup compositionstart",Ve(H7,e))},HB=En,HT=(e,n,o)=>hB(n,e,o,R1,M1,HB),z7=(e,n,o)=>pB(n,e,o,u=>R1(u)||kn(u),u=>M1(u)||P_(u),HB),U7=e=>{const n=e.dom.create(kr(e));return n.innerHTML='<br data-mce-bogus="1">',n},VB=(e,n,o)=>{const r=Vu(e.getBody()),c=Ve(xm,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(De.fromRangeStart(o))){const b=ne.fromDom(U7(e));n===1?ku(ne.fromDom(u),b):yo(ne.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},c4=(e,n)=>{const o=n?ua.Forwards:ua.Backwards,r=e.selection.getRng();return HT(o,e,r).orThunk(()=>(VB(e,o,r),V.none()))},W7=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return z7(o,e,r).orThunk(()=>(VB(e,o,r),V.none()))},zB=(e,n)=>c4(e,n).exists(o=>(Lg(e,o),!0)),l4=(e,n)=>W7(e,n).exists(o=>(Lg(e,o),!0)),UB=(e,n)=>bB(e,n,n?M1:R1),VT=(e,n)=>$A(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Lg(e,o),!0)),Z7=e=>an(["figcaption"],zo(e)),j7=(e,n)=>{const o=Ve(ho,n);return k(ne.fromDom(e.container()),$c,o).filter(Z7)},G7=(e,n,o)=>n?eb(e.dom,o):Ju(e.dom,o),q7=(e,n)=>{const o=ne.fromDom(e.getBody()),r=De.fromRangeStart(e.selection.getRng());return j7(r,o).exists(()=>{if(G7(o,n,r)){const u=BB(e,o,n?js:vd);return e.selection.setRng(u),!0}else return!1})},zT=(e,n)=>e.selection.isCollapsed()?q7(e,n):!1,WB={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ZB=e=>Vt(e,n=>J(J({},WB),n)),K7=e=>Vt(e,n=>J(J({},WB),n)),jB=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Y7=(e,n)=>ea(ZB(e),o=>jB(o,n)?[o]:[]),X7=(e,n)=>ea(K7(e),o=>jB(o,n)?[o]:[]),Rn=(e,...n)=>()=>e.apply(null,n),C2=(e,n)=>us(Y7(e,n),o=>o.action()),ma=(e,n)=>cc(X7(e,n),o=>o.action()),GB=(e,n)=>{const o=n?ua.Forwards:ua.Backwards,r=e.selection.getRng();return hB(e,o,r,un,RC,Jc).exists(c=>(Lg(e,c),!0))},qB=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return pB(e,o,r,un,RC,Jc).exists(c=>(Lg(e,c),!0))},KB=(e,n)=>bB(e,n,n?RC:un),i4=zs.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),u4=e=>i4.none(e),h0=We(J({},i4),{none:u4}),lp=(e,n)=>UT(e,n,mt),UT=(e,n,o)=>ea(Zr(e),r=>Ya(r,n)?o(r)?[r]:[]:UT(r,n,o)),YB=(e,n,o=Ne)=>{if(o(n))return V.none();if(an(e,zo(n)))return V.some(n);const r=c=>Ya(c,"table")||o(c);return le(n,e.join(","),r)},d4=(e,n)=>YB(["td","th"],e,n),m4=e=>lp(e,"th,td"),WT=(e,n)=>qt(e,"table",n),ZT=(e,n,o,r,c=mt)=>{const u=r===1;if(!u&&o<=0)return h0.first(e[0]);if(u&&o>=e.length-1)return h0.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?h0.middle(n,b):ZT(e,n,f,r,c)}},w2=(e,n)=>WT(e,n).bind(o=>{const r=m4(o);return Dr(r,u=>ho(e,u)).map(u=>({index:u,all:r}))}),jT=(e,n,o)=>w2(e,o).fold(()=>h0.none(e),c=>ZT(c.all,e,c.index,1,n)),S2=(e,n,o)=>w2(e,o).fold(()=>h0.none(),c=>ZT(c.all,e,c.index,-1,n)),x2=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Mf=(e,n)=>ea(n,o=>{const r=x2(Cm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),T2=(e,n,o)=>Jo(e,(r,c)=>r.fold(()=>V.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return V.some(b<f?c:u)}),V.none()),f4=(e,n,o,r,c)=>{const u=wa(ne.fromDom(o),"td,th,caption").map(b=>b.dom),f=jt(Mf(e,u),b=>n(b,c));return T2(f,r,c).map(b=>b.cell)},XB=e=>e.bottom,J7=e=>e.top,JB=(e,n)=>e.y<n,Q7=(e,n)=>e.y>n,eH=Ve(f4,XB,JB),QB=Ve(f4,J7,Q7),tH=(e,n)=>To(n.getClientRects()).bind(o=>eH(e,o.left,o.top)).bind(o=>m0(o7(o),n)),nH=(e,n)=>$s(n.getClientRects()).bind(o=>QB(e,o.left,o.top)).bind(o=>m0(UA(o),n)),oH=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),sH=e=>e.breakType===Af.Wrap&&e.positions.length===0,rH=e=>e.breakType===Af.Br&&e.positions.length===1,eP=(e,n,o)=>{const r=e(n,o);return sH(r)||!Ds(o.getNode())&&rH(r)?!oH(e,n,r):r.breakAt.isNone()},aH=Ve(eP,f0),cH=Ve(eP,Q1),lH=(e,n,o)=>{const r=De.fromRangeStart(n);return Dh(!e,o).exists(c=>c.isEqual(r))},iH=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return ES()&&lH(n,c,o)?($g(u,e,o,!n,!1).each(f=>{Lg(e,f)}),!0):!1},uH=(e,n,o)=>tH(n,o).orThunk(()=>To(o.getClientRects()).bind(r=>DT(Ig(e,De.before(n)),r.left))).getOr(De.before(n)),dH=(e,n,o)=>nH(n,o).orThunk(()=>To(o.getClientRects()).bind(r=>DT(zA(e,De.after(n)),r.left))).getOr(De.after(n)),tP=(e,n)=>{const o=n.getNode(e);return Jl(o)?V.some(o):V.none()},nP=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?ku:yo,c=BB(n,ne.fromDom(o),r);Lg(n,c)})},g4=(e,n,o)=>{const r=tP(!!n,o),c=n===!1;r.fold(()=>Lg(e,o.toRange()),u=>Dh(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Lg(e,o.toRange()),f=>nP(n,e,u)))},oP=(e,n,o,r)=>{const c=e.selection.getRng(),u=De.fromRangeStart(c),f=e.getBody();if(!n&&aH(r,u)){const b=uH(f,o,u);return g4(e,n,b),!0}else if(n&&cH(r,u)){const b=dH(f,o,u);return g4(e,n,b),!0}else return!1},sP=(e,n,o)=>V.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>V.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),rP=(e,n)=>sP(e,n,iH),aP=(e,n)=>sP(e,n,oP),mH=e=>{const n=Sf.exact(e,0,e,0);return b_(n)},h4=(e,n,o)=>o.fold(V.none,V.none,(r,c)=>hD(c).map(u=>mH(u)),r=>(e.execCommand("mceTableInsertRowAfter"),cP(e,n,r))),cP=(e,n,o)=>h4(e,n,jT(o,Pn)),lP=(e,n,o)=>h4(e,n,S2(o,Pn)),iP=(e,n)=>{const o=["table","li","dl"],r=ne.fromDom(e.getBody()),c=b=>{const C=zo(b);return ho(b,r)||an(o,C)},u=e.selection.getRng(),f=ne.fromDom(n?u.endContainer:u.startContainer);return d4(f,c).map(b=>(WT(b,c).each(N=>{e.model.table.clearSelectedCells(N.dom)}),e.selection.collapse(!n),(n?cP:lP)(e,c,b).each(N=>{e.selection.setRng(N)}),!0)).getOr(!1)},uP=(e,n,o)=>{const r=so.os.isMacOS()||so.os.isiOS();C2([{keyCode:At.RIGHT,action:Rn(zB,e,!0)},{keyCode:At.LEFT,action:Rn(zB,e,!1)},{keyCode:At.UP,action:Rn(l4,e,!1)},{keyCode:At.DOWN,action:Rn(l4,e,!0)},...r?[{keyCode:At.UP,action:Rn(VT,e,!1),metaKey:!0,shiftKey:!0},{keyCode:At.DOWN,action:Rn(VT,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:At.RIGHT,action:Rn(rP,e,!0)},{keyCode:At.LEFT,action:Rn(rP,e,!1)},{keyCode:At.UP,action:Rn(aP,e,!1)},{keyCode:At.DOWN,action:Rn(aP,e,!0)},{keyCode:At.RIGHT,action:Rn(GB,e,!0)},{keyCode:At.LEFT,action:Rn(GB,e,!1)},{keyCode:At.UP,action:Rn(qB,e,!1)},{keyCode:At.DOWN,action:Rn(qB,e,!0)},{keyCode:At.RIGHT,action:Rn(YA,e,n,!0)},{keyCode:At.LEFT,action:Rn(YA,e,n,!1)},{keyCode:At.RIGHT,ctrlKey:!r,altKey:r,action:Rn(h2,e,n)},{keyCode:At.LEFT,ctrlKey:!r,altKey:r,action:Rn(Fg,e,n)},{keyCode:At.UP,action:Rn(zT,e,!1)},{keyCode:At.DOWN,action:Rn(zT,e,!0)}],o).each(c=>{o.preventDefault()})},dP=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||uP(e,n,o)})},Pm=(e,n)=>({container:e,offset:n}),GT=rs.DOM,qT=e=>n=>e===n?-1:0,mP=e=>n=>e.isBlock(n)||an(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",p4=(e,n,o)=>{if(Je(e)&&n>=0)return V.some(Pm(e,n));{const r=og(GT);return V.from(r.backwards(e,n,qT(e),o)).map(c=>Pm(c.container,c.container.data.length))}},fH=(e,n,o)=>{if(Je(e)&&n>=e.length)return V.some(Pm(e,n));{const r=og(GT);return V.from(r.forwards(e,n,qT(e),o)).map(c=>Pm(c.container,0))}},KT=(e,n,o)=>{if(!Je(e))return V.none();const r=e.data;if(n>=0&&n<=r.length)return V.some(Pm(e,n));{const c=og(GT);return V.from(c.backwards(e,n,qT(e),o)).bind(u=>{const f=u.container.data;return KT(u.container,n+f.length,o)})}},fP=(e,n,o)=>{if(!Je(e))return V.none();const r=e.data;if(n<=r.length)return V.some(Pm(e,n));{const c=og(GT);return V.from(c.forwards(e,n,qT(e),o)).bind(u=>fP(u.container,n-r.length,o))}},b4=(e,n,o,r,c)=>{const u=og(e,mP(e));return V.from(u.backwards(n,o,r,c))},gP=e=>e.collapsed&&Je(e.startContainer),hP=e=>Oe(e.toString().replace(/\u00A0/g," ")),pP=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,v4=(e,n)=>e.substring(n.length),bP=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(pP(u))return V.none();if(c===u&&_s(e,o,r,n))break}return V.some(r)},vP=(e,n,o,r=0)=>{if(!gP(n))return V.none();const c={text:"",offset:0},u=(b,C,E)=>(c.text=E+c.text,c.offset+=C,bP(c.text,c.offset,o).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return b4(e,n.startContainer,n.startOffset,u,f).bind(b=>{const C=n.cloneRange();if(C.setStart(b.container,b.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return V.none();const E=hP(C);return E.lastIndexOf(o)!==0||v4(E,o).length<r?V.none():V.some({text:v4(E,o),range:C,trigger:o})})},yP=(e,n,o,r=0)=>FI(ne.fromDom(n.startContainer)).fold(()=>vP(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=hP(u);return V.some({range:u,text:v4(f,o),trigger:o})}),gH=e=>e.nodeType===Qd,hH=e=>e.nodeType===zi,CP=e=>{if(gH(e))return Pm(e,e.data.length);{const n=e.childNodes;return n.length>0?CP(n[n.length-1]):Pm(e,n.length)}},wP=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?wP(o[n],0):o.length>0&&hH(e)&&o.length===n?CP(o[o.length-1]):Pm(e,n)},pH=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return b4(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!pP(u)}).isSome()},bH=e=>n=>{const o=wP(n.startContainer,n.startOffset);return!pH(e,o)},vH=(e,n,o)=>cc(o.triggers,r=>yP(e,n,r)),UW=(e,n)=>{const o=n(),r=e.selection.getRng();return vH(e.dom,r,o).bind(c=>SP(e,n,c))},SP=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",C=jt(u.lookupByTrigger(o.trigger),N=>o.text.length>=N.minChars&&N.matches.getOrThunk(()=>bH(e.dom))(o.range,b,o.text));if(C.length===0)return V.none();const E=Promise.all(Vt(C,N=>N.fetch(o.text,N.maxResults,r).then(F=>({matchText:o.text,items:F,columns:N.columns,onAction:N.onAction,highlightOn:N.highlightOn}))));return V.some({lookupData:E,context:o})};var hu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(hu||(hu={}));const YT=(e,n,o)=>e.stype===hu.Error?n(e.serror):o(e.svalue),xP=e=>{const n=[],o=[];return Ie(e,r=>{YT(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},yH=(e,n)=>e.stype===hu.Error?{stype:hu.Error,serror:n(e.serror)}:e,TP=(e,n)=>e.stype===hu.Value?{stype:hu.Value,svalue:n(e.svalue)}:e,EP=(e,n)=>e.stype===hu.Value?n(e.svalue):e,CH=(e,n)=>e.stype===hu.Error?n(e.serror):e,kP=e=>({stype:hu.Value,svalue:e}),_P=e=>({stype:hu.Error,serror:e}),oc={fromResult:e=>e.fold(_P,kP),toResult:e=>YT(e,Vs.error,Vs.value),svalue:kP,partition:xP,serror:_P,bind:EP,bindError:CH,map:TP,mapError:yH,fold:YT},y4=e=>Ut(e)&&Is(e).length>100?" removed due to size":JSON.stringify(e,null,2),SH=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ge("... (only showing first ten failures)")}]):e;return Vt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},XT=(e,n)=>oc.serror([{path:e,getErrorInfo:n}]),OP=(e,n,o)=>XT(e,()=>'Could not find valid *required* value for "'+n+'" in '+y4(o)),xH=(e,n)=>XT(e,()=>'Choice schema did not contain choice key: "'+n+'"'),TH=(e,n,o)=>XT(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+y4(n)),EH=(e,n)=>XT(e,Ge(n)),kH=(e,n,o,r)=>vo(o,r).fold(()=>TH(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),_H=(e,n)=>({extract:(c,u)=>vo(u,e).fold(()=>xH(c,e),b=>kH(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Is(n)}),ja=(e,n)=>n,Nf=(e,n)=>Ba(e)&&Ba(n)?C4(e,n):n,AP=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)tn(c,u)&&(o[u]=e(o[u],c[u]))}return o},C4=AP(Nf),OH=AP(ja),DP=()=>({tag:"required",process:{}}),AH=e=>({tag:"defaultedThunk",process:e}),RP=e=>AH(Ge(e)),MP=()=>({tag:"option",process:{}}),p0=(e,n)=>e.length>0?oc.svalue(C4(n,OH.apply(void 0,e))):oc.svalue(n),DH=e=>O(oc.serror,Wc)(e),$m={consolidateObj:(e,n)=>{const o=oc.partition(e);return o.errors.length>0?DH(o.errors):p0(o.values,n)},consolidateArr:e=>{const n=oc.partition(e);return n.errors.length>0?DH(n.errors):oc.svalue(n.values)}},RH=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),MH=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),w4=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},S4=e=>{const n=(r,c)=>oc.bindError(e(c),u=>EH(r,u)),o=Ge("val");return{extract:n,toString:o}},x4=S4(oc.svalue),NP=(e,n,o,r)=>vo(n,o).fold(()=>OP(e,o,n),r),BP=(e,n,o,r)=>{const c=vo(e,n).getOrThunk(()=>o(e));return r(c)},NH=(e,n,o)=>o(vo(e,n)),BH=(e,n,o,r)=>{const c=vo(e,n).map(u=>u===!0?o(e):u);return r(c)},PP=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>oc.svalue(V.none()),C=>{const E=c.extract(n.concat([r]),C);return oc.map(E,V.some)});switch(e.tag){case"required":return NP(n,o,r,u);case"defaultedThunk":return BP(o,r,e.process,u);case"option":return NH(o,r,f);case"defaultedOptionThunk":return BH(o,r,e.process,f);case"mergeWithThunk":return BP(o,r,Ge({}),b=>{const C=C4(e.process(o),b);return u(C)})}},$P=(e,n,o)=>{const r={},c=[];for(const u of o)w4(u,(f,b,C,E)=>{const N=PP(C,e,n,f,E);oc.fold(N,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(n)});return c.length>0?oc.serror(c):oc.svalue(r)},E2=e=>({extract:(r,c)=>$P(r,c,e),toString:()=>`obj{
`+Vt(e,c=>w4(c,(u,f,b,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),JT=e=>({extract:(r,c)=>{const u=Vt(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return $m.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),T4=e=>S4(n=>e(n).fold(oc.serror,oc.svalue)),PH=(e,n,o)=>{const r=n.extract([e],o);return oc.mapError(r,c=>({input:o,errors:c}))},$H=(e,n,o)=>oc.toResult(PH(e,n,o)),IH=e=>`Errors: 
`+SH(e.errors).join(`
`)+`

Input object: `+y4(e.input),IP=(e,n)=>_H(e,Bn(n,E2)),E4=Ge(x4),k2=(e,n)=>S4(o=>{const r=typeof o;return e(o)?oc.svalue(o):oc.serror(`Expected type: ${n} but got: ${r}`)}),LH=k2(Ps,"number"),_2=k2(re,"string"),FH=k2(cn,"boolean"),O2=k2(ue,"function"),A2=RH,LP=MH,HH=e=>T4(n=>an(e,n)?Vs.value(n):Vs.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),FP=(e,n)=>A2(e,e,DP(),n),HP=e=>FP(e,_2),k4=e=>FP(e,O2),_4=(e,n)=>A2(e,e,DP(),JT(n)),QT=(e,n)=>A2(e,e,MP(),n),D2=e=>QT(e,_2),VH=e=>QT(e,O2),zH=(e,n)=>A2(e,e,RP(n),E4()),b0=(e,n,o)=>A2(e,e,RP(n),o),R2=(e,n)=>b0(e,n,LH),VP=(e,n)=>b0(e,n,_2),O4=(e,n,o)=>b0(e,n,HH(o)),A4=(e,n)=>b0(e,n,FH),D4=(e,n)=>b0(e,n,O2),GW=(e,n,o)=>b0(e,n,JT(o)),qW=HP("type"),KW=k4("fetch"),R4=k4("onAction"),YW=D4("onSetup",()=>Fe),UH=D2("text"),WH=D2("icon"),XW=D2("tooltip"),ZH=D2("label"),fa=A4("active",!1),M4=A4("enabled",!0),Im=A4("primary",!1),zP=e=>zH("columns",e),v0=e=>VP("type",e),jH=E2([qW,HP("trigger"),R2("minChars",1),zP(1),R2("maxResults",10),VH("matches"),KW,R4,GW("highlightOn",[],_2)]),N4=e=>$H("Autocompleter",jH,J({trigger:e.ch},e)),M2=[M4,XW,WH,UH,YW],B4=[fa].concat(M2),UP=[D4("predicate",Ne),O4("scope","node",["node","editor"]),O4("position","selection",["node","selection","line"])],GH=M2.concat([v0("contextformbutton"),Im,R4,LP("original",Dn)]),qH=B4.concat([v0("contextformbutton"),Im,R4,LP("original",Dn)]),KH=M2.concat([v0("contextformbutton")]),YH=B4.concat([v0("contextformtogglebutton")]),XH=IP("type",{contextformbutton:GH,contextformtogglebutton:qH});E2([v0("contextform"),D4("initValue",Ge("")),ZH,_4("commands",XH),QT("launch",IP("type",{contextformbutton:KH,contextformtogglebutton:YH}))].concat(UP));const WP=e=>{const n=e.ui.registry.getAll().popups,o=Bn(n,f=>N4(f).fold(b=>{throw new Error(IH(b))},Dn)),r=wc(yc(o,f=>f.trigger)),c=lc(o);return{dataset:o,triggers:r,lookupByTrigger:f=>jt(c,b=>b.trigger===f)}},JH=(e,n)=>{const o=Ji(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},QH=e=>{const n=ms(),o=Va(!1),r=n.isSet,c=()=>{r()&&(iA(e),ex(e),o.set(!1),n.clear())},u=E=>{r()||(Mm(e,E.range),n.set({trigger:E.trigger,matchLength:E.text.length}))},f=Tc(()=>WP(e)),b=E=>n.get().map(N=>yP(e.dom,e.selection.getRng(),N.trigger).bind(R=>SP(e,f,R,E))).getOrThunk(()=>UW(e,f)),C=E=>{b(E).fold(c,N=>{u(N.context),N.lookupData.then(R=>{n.get().map(F=>{const Y=N.context;F.trigger===Y.trigger&&(Y.text.length-F.matchLength>=10?c():(n.set(We(J({},F),{matchLength:Y.text.length})),o.get()?r_(e,{lookupData:R}):(o.set(!0),QS(e,{lookupData:R}))))})})})};e.addCommand("mceAutocompleterReload",(E,N)=>{const R=Ut(N)?N.fetchOptions:{};C(R)}),e.addCommand("mceAutocompleterClose",c),JH(e,{cancelIfNecessary:c,load:C})},ZP=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Fe,inputType:o},f=gh(new InputEvent(e));return n.dispatch(e,J(J(J({},f),u),r))},P4=ZP("input"),$4=ZP("beforeinput"),jP=(e,n,o)=>{const r=o.keyCode===At.BACKSPACE?"deleteContentBackward":"deleteContentForward";ma([{keyCode:At.BACKSPACE,action:Rn(o4,e)},{keyCode:At.BACKSPACE,action:Rn(_T,e,!1)},{keyCode:At.DELETE,action:Rn(_T,e,!0)},{keyCode:At.BACKSPACE,action:Rn(PA,e,!1)},{keyCode:At.DELETE,action:Rn(PA,e,!0)},{keyCode:At.BACKSPACE,action:Rn(PT,e,n,!1)},{keyCode:At.DELETE,action:Rn(PT,e,n,!0)},{keyCode:At.BACKSPACE,action:Rn(Ox,e,!1)},{keyCode:At.DELETE,action:Rn(Ox,e,!0)},{keyCode:At.BACKSPACE,action:Rn(m2,e,!1)},{keyCode:At.DELETE,action:Rn(m2,e,!0)},{keyCode:At.BACKSPACE,action:Rn(v2,e,!1)},{keyCode:At.DELETE,action:Rn(v2,e,!0)},{keyCode:At.BACKSPACE,action:Rn(NA,e,!1)},{keyCode:At.DELETE,action:Rn(NA,e,!0)},{keyCode:At.BACKSPACE,action:Rn(RA,e,!1)},{keyCode:At.DELETE,action:Rn(RA,e,!0)},{keyCode:At.BACKSPACE,action:Rn($T,e,!1)},{keyCode:At.DELETE,action:Rn($T,e,!0)}],o).filter(c=>e.selection.isEditable()).each(c=>{o.preventDefault(),$4(e,r).isDefaultPrevented()||(c(),P4(e,r))})},GP=(e,n,o)=>{const r=to(),c=r.os,u=r.browser,f=c.isMacOS()?[{keyCode:At.BACKSPACE,altKey:!0,action:Rn(b2,e)},{keyCode:At.DELETE,altKey:!0,action:Rn(b2,e)}]:[{keyCode:At.BACKSPACE,ctrlKey:!0,action:Rn(b2,e)},{keyCode:At.DELETE,ctrlKey:!0,action:Rn(b2,e)}];c.isMacOS()&&o&&f.push({keyCode:u.isFirefox()?224:91,action:Rn(b2,e)}),C2([{keyCode:At.BACKSPACE,action:Rn(FA,e)},{keyCode:At.DELETE,action:Rn(FA,e)},...f],n)},eV=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===At.BACKSPACE,r.isDefaultPrevented()||jP(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||GP(e,r,o),o=!1})},tV=e=>{for(;e;){if(Me(e)||Je(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},eE=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=tV(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Ao),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Er(n,n);let f=n,b;for(;b=u.current();){if(Je(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else Ds(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Pe(e,c)},y0=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},I4=e=>V.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),nV=e=>I4(e).fold(Ge(""),n=>n.nodeName.toUpperCase()),oV=e=>I4(e).filter(n=>ec(ne.fromDom(n))).isSome(),qP=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,sV=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},L4=(e,n)=>{const o=e==null?void 0:e.parentNode;return ze(o)&&o.nodeName===n},KP=e=>ze(e)&&/^(OL|UL|LI)$/.test(e.nodeName),rV=e=>ze(e)&&/^(LI|DT|DD)$/.test(e.nodeName),aV=e=>KP(e)&&KP(e.parentNode),sc=e=>{const n=e.parentNode;return rV(n)?n:e},tE=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Me(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},cV=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;aV(o)&&(c="LI");let C=n(c);if(tE(o,r,!0)&&tE(o,r,!1))if(L4(o,"LI")){const E=sc(o);u.insertAfter(C,E),sV(o)?u.remove(E):u.remove(o)}else u.replace(C,o);else if(tE(o,r,!0))L4(o,"LI")?(u.insertAfter(C,sc(o)),C.appendChild(u.doc.createTextNode(" ")),C.appendChild(o)):b.insertBefore(C,o),u.remove(r);else if(tE(o,r,!1))u.insertAfter(C,sc(o)),u.remove(r);else{o=sc(o);const E=f.cloneRange();E.setStartAfter(r),E.setEndAfter(o);const N=E.extractContents();c==="LI"&&qP(N,"LI")?(C=N.firstChild,u.insertAfter(N,o)):(u.insertAfter(N,o),u.insertAfter(C,o)),u.remove(r)}eE(e,C)},lV=e=>{Ie(Tp(ne.fromDom(e),La),n=>{const o=n.dom;o.nodeValue=Oe(o.data)})},iV=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},uV=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),F4=e=>{e.innerHTML='<br data-mce-bogus="1">'},H4=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,C0=(e,n)=>ze(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",dV=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Me(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||uV(e,u))&&e.remove(u)},V4=(e,n,o)=>Je(n)?e?o===1&&n.data.charAt(o-1)===W?0:o:o===n.data.length-1&&n.data.charAt(o)===W?n.data.length:o:o,z4=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,V4(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,V4(!1,e.endContainer,e.endOffset)),n},U4=e=>{let n=e;do Je(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},mV=(e,n,o)=>{const r=e.dom;V.from(o.style).map(r.parseStyle).each(C=>{const E=bl(ne.fromDom(n)),N=J(J({},E),C);r.setStyles(n,N)});const c=V.from(o.class).map(C=>C.split(/\s+/)),u=V.from(n.className).map(C=>jt(C.split(/\s+/),E=>E!==""));Pr(c,u,(C,E)=>{const N=jt(E,F=>!an(C,F)),R=[...C,...N];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],b=$o(o,(C,E)=>!an(f,E));r.setAttribs(n,b)},nE=(e,n)=>{if(kr(e).toLowerCase()===n.tagName.toLowerCase()){const r=Qb(e);mV(e,n,r)}},JW=(e,n,o,r,c)=>{var u,f;const b=e.dom,C=(u=y0(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!C0(b,E)){if(E=E||C,!E.hasChildNodes()){const Y=b.create(n);return nE(e,Y),E.appendChild(Y),o.setStart(Y,0),o.setEnd(Y,0),Y}let N=r;for(;N&&N.parentNode!==E;)N=N.parentNode;let R;for(;N&&!b.isBlock(N);)R=N,N=N.previousSibling;const F=(f=R==null?void 0:R.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&F&&e.schema.isValidChild(F,n.toLowerCase())){const Y=R.parentNode,ee=b.create(n);for(nE(e,ee),Y.insertBefore(ee,R),N=R;N&&!b.isBlock(N);){const j=N.nextSibling;ee.appendChild(N),N=j}o.setStart(r,c),o.setEnd(r,c)}}return r},fV=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Me(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},gV=(e,n)=>{const o=Bd(e);return Jt(n)?!1:re(o)?an(Ze.explode(o),n.nodeName.toLowerCase()):o},Bf={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,C=e.schema,E=C.getNonEmptyElements(),N=e.selection.getRng(),R=kr(e),F=gt=>{let ot=o;const Ee=C.getTextInlineElements();let ke;gt||c==="TABLE"||c==="HR"?ke=b.create(gt||R):ke=de.cloneNode(!1);let xt=ke;if(Xp(e)===!1)b.setAttrib(ke,"style",null),b.setAttrib(ke,"class",null);else do if(Ee[ot.nodeName]){if(sl(ot)||_a(ot))continue;const Ft=ot.cloneNode(!1);b.setAttrib(Ft,"id",""),ke.hasChildNodes()?(Ft.appendChild(ke.firstChild),ke.appendChild(Ft)):(xt=Ft,ke.appendChild(Ft))}while((ot=ot.parentNode)&&ot!==fe);return nE(e,ke),F4(xt),ke},Y=gt=>{const ot=V4(gt,o,r);if(Je(o)&&(gt?ot>0:ot<o.data.length))return!1;if(o.parentNode===de&&f&&!gt||gt&&Me(o)&&o===de.firstChild)return!0;if(H4(o,"TABLE")||H4(o,"HR"))return f&&!gt||!f&&gt;const Ee=new Er(o,de);Je(o)&&(gt&&ot===0?Ee.prev():!gt&&ot===o.data.length&&Ee.next());let ke;for(;ke=Ee.current();){if(Me(ke)){if(!ke.getAttribute("data-mce-bogus")){const xt=ke.nodeName.toLowerCase();if(E[xt]&&xt!=="br")return!1}}else if(Je(ke)&&!of(ke.data))return!1;gt?Ee.prev():Ee.next()}return!0},ee=()=>{let gt;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&be!=="HGROUP"?gt=F(R):gt=F(),gV(e,u)&&C0(b,u)&&b.isEmpty(de)?gt=b.split(u,de):b.insertAfter(gt,de),eE(e,gt),gt};xg(b,N).each(gt=>{N.setStart(gt.startContainer,gt.startOffset),N.setEnd(gt.endContainer,gt.endOffset)}),o=N.startContainer,r=N.startOffset;const j=!!(n&&n.shiftKey),X=!!(n&&n.ctrlKey);Me(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&Je(o)?r=o.data.length:r=0);const fe=y0(b,o);if(!fe||iV(e,o))return;j||(o=JW(e,R,N,o,r));let de=b.getParent(o,b.isBlock)||b.getRoot();u=ze(de==null?void 0:de.parentNode)?b.getParent(de.parentNode,b.isBlock):null,c=de?de.nodeName.toUpperCase():"";const be=u?u.nodeName.toUpperCase():"";if(be==="LI"&&!X){const gt=u;de=gt,u=gt.parentNode,c=be}if(/^(LI|DT|DD)$/.test(c)&&Me(u)&&b.isEmpty(de)){cV(e,F,u,de,R);return}if(de===e.getBody()||!C0(b,de))return;const we=de.parentNode;let He;if(hn(de))He=Nl(de),b.isEmpty(de)&&F4(de),nE(e,He),eE(e,He);else if(Y(!1))He=ee();else if(Y(!0)&&we)He=we.insertBefore(F(),de),eE(e,H4(de,"HR")?He:de);else{const gt=z4(N).cloneRange();gt.setEndAfter(de);const ot=gt.extractContents();lV(ot),U4(ot),He=ot.firstChild,b.insertAfter(ot,de),dV(b,E,He),fV(b,de),b.isEmpty(de)&&F4(de),He.normalize(),b.isEmpty(He)?(b.remove(He),ee()):(nE(e,He),eE(e,He))}b.setAttrib(He,"id",""),e.dispatch("NewBlock",{newBlock:He})},fakeEventName:"insertParagraph"},hV=(e,n,o)=>{const r=new Er(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||Je(c)&&c.length>0)return!0;return!1},YP=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Pe(e,r)},ip=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;xg(r,c).each(Y=>{c.setStart(Y.startContainer,Y.startOffset),c.setEnd(Y.endContainer,Y.endOffset)});let b=c.startOffset,C=c.startContainer;if(Me(C)&&C.hasChildNodes()){const Y=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,Y&&Je(C)?b=C.data.length:b=0}let E=r.getParent(C,r.isBlock);const N=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,R=N?N.nodeName.toUpperCase():"",F=!!(n&&n.ctrlKey);R==="LI"&&!F&&(E=N),Je(C)&&b>=C.data.length&&(hV(e.schema,C,E||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),jp(r,c,u),YP(e,u,f),e.undoManager.add()},pV=(e,n)=>{const o=ne.fromTag("br");yo(ne.fromDom(n),o),e.undoManager.add()},XP=(e,n)=>{vV(e.getBody(),n)||ku(ne.fromDom(n),ne.fromTag("br"));const o=ne.fromTag("br");ku(ne.fromDom(n),o),YP(e,o.dom,!1),e.undoManager.add()},bV=e=>Ds(e.getNode()),vV=(e,n)=>bV(De.after(n))?!0:bc(e,De.after(n)).map(o=>Ds(o.getNode())).getOr(!1),JP=e=>e&&e.nodeName==="A"&&"href"in e,yV=e=>e.fold(Ne,JP,JP,Ne),CV=e=>{const n=Ve(Wu,e),o=De.fromRangeStart(e.selection.getRng());return Of(n,e.getBody(),o).filter(yV)},wV=(e,n)=>{n.fold(Fe,Ve(pV,e),Ve(XP,e),Fe)},W4={insert:(e,n)=>{const o=CV(e);o.isSome()?o.each(Ve(wV,e)):ip(e,n)},fakeEventName:"insertLineBreak"},N2=(e,n)=>I4(e).filter(o=>n.length>0&&Ya(ne.fromDom(o),n)).isSome(),SV=e=>N2(e,eu(e)),xV=e=>N2(e,ky(e)),Qu=zs.generate([{br:[]},{block:[]},{none:[]}]),TV=(e,n)=>xV(e),e$=e=>(n,o)=>oV(n)===e,Z4=(e,n)=>(o,r)=>nV(o)===e.toUpperCase()===n,EV=e=>{const n=y0(e.dom,e.selection.getStart());return Jt(n)},w0=e=>Z4("pre",e),t$=()=>Z4("summary",!0),oE=e=>(n,o)=>fk(n)===e,kV=(e,n)=>SV(e),S0=(e,n)=>n,_V=e=>{const n=kr(e),o=y0(e.dom,e.selection.getStart());return ze(o)&&e.schema.isValidChild(o.nodeName,n)},jd=(e,n)=>(o,r)=>Jo(e,(u,f)=>u&&f(o,r),!0)?V.some(n):V.none(),sE=(e,n)=>j8([jd([TV],Qu.none()),jd([w0(!0),EV],Qu.none()),jd([t$()],Qu.br()),jd([w0(!0),oE(!1),S0],Qu.br()),jd([w0(!0),oE(!1)],Qu.block()),jd([w0(!0),oE(!0),S0],Qu.block()),jd([w0(!0),oE(!0)],Qu.br()),jd([e$(!0),S0],Qu.br()),jd([e$(!0)],Qu.block()),jd([kV],Qu.br()),jd([S0],Qu.br()),jd([_V],Qu.block())],[e,!!(n&&n.shiftKey)]).getOr(Qu.none()),rE=(e,n,o)=>{n.selection.isCollapsed()||sR(n),!(ze(o)&&$4(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),ze(o)&&P4(n,e.fakeEventName))},aE=(e,n)=>{const o=()=>rE(W4,e,n),r=()=>rE(Bf,e,n),c=sE(e,n);switch(gk(e)){case"linebreak":c.fold(o,o,Fe);break;case"block":c.fold(r,r,Fe);break;case"invert":c.fold(r,o,Fe);break;default:c.fold(o,r,Fe);break}},j4=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),QF(e.undoManager),e.undoManager.transact(()=>{aE(e,n)}))},n$=e=>{e.on("keydown",n=>{n.keyCode===At.ENTER&&j4(e,n)})},OV=(e,n,o)=>{const r=so.os.isMacOS()||so.os.isiOS();C2([{keyCode:At.END,action:Rn(UB,e,!0)},{keyCode:At.HOME,action:Rn(UB,e,!1)},...r?[]:[{keyCode:At.HOME,action:Rn(VT,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:At.END,action:Rn(VT,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:At.END,action:Rn(KB,e,!0)},{keyCode:At.HOME,action:Rn(KB,e,!1)},{keyCode:At.END,action:Rn(Rf,e,!0,n)},{keyCode:At.HOME,action:Rn(Rf,e,!1,n)}],o).each(c=>{o.preventDefault()})},tZ=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||OV(e,n,o)})},up=e=>{e.on("input",n=>{n.isComposing||rL(e)})},AV=to(),DV=(e,n,o)=>{C2([{keyCode:At.PAGE_UP,action:Rn(Rf,e,!1,n)},{keyCode:At.PAGE_DOWN,action:Rn(Rf,e,!0,n)}],o)},o$=e=>e.stopImmediatePropagation(),B2=e=>e.keyCode===At.PAGE_UP||e.keyCode===At.PAGE_DOWN,G4=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",o$,!0):!o&&e.get()&&n.off("NodeChange",o$),e.set(o)},s$=(e,n)=>{if(AV.os.isMacOS())return;const o=Va(!1);e.on("keydown",r=>{B2(r)&&G4(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||DV(e,n,r),B2(r)&&o.get()&&(G4(o,e,!1),e.nodeChanged())})},r$=(e,n)=>{const o=n.container(),r=n.offset();return Je(o)?(o.insertData(r,e),V.some(De(o,r+e.length))):c1(n).map(c=>{const u=ne.fromText(e);return n.isAtEnd()?ku(c,u):yo(c,u),De(u.dom,e.length)})},a$=Ve(r$,Ao),RV=Ve(r$," "),MV=e=>n=>n.fold(o=>su(e.dom,De.before(o)),o=>Ll(o),o=>$d(o),o=>bc(e.dom,De.after(o))),NV=(e,n)=>o=>WD(e,o)?a$(n):RV(n),c$=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),q4=e=>{const n=De.fromRangeStart(e.selection.getRng()),o=ne.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ve(Wu,e),c=De.fromRangeStart(e.selection.getRng());return Of(r,e.getBody(),c).bind(MV(o)).map(u=>()=>NV(o,n)(u).each(c$(e)))}else return V.none()},BV=(e,n)=>{ma([{keyCode:At.SPACEBAR,action:Rn(q4,e)}],n).each(o=>{n.preventDefault(),$4(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),P4(e,"insertText",{data:" "}))})},K4=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||BV(e,n)})},l$=e=>vS(e)?[{keyCode:At.TAB,action:Rn(iP,e,!0)},{keyCode:At.TAB,shiftKey:!0,action:Rn(iP,e,!1)}]:[],cE=(e,n)=>{C2([...l$(e)],n).each(o=>{n.preventDefault()})},i$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||cE(e,n)})},u$=e=>{if(e.addShortcut("Meta+P","","mcePrint"),QH(e),Ng(e))return Va(null);{const n=p7(e);return V7(e),dP(e,n),eV(e,n),n$(e),K4(e),up(e),i$(e),tZ(e,n),s$(e,n),n}};class PV{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Vv(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&g1(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&g1(n)&&(n.selection.getNode().nodeName==="IMG"?Rs.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!wk(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",We(J({},n),{element:r,parents:u}))}}isSameElementPath(n){let o;const r=this.editor,c=Vo(r.dom.getParents(n,mt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const d$="x-tinymce/html",tb=Ge(d$),lE="<!-- "+d$+" -->",$V=e=>lE+e,IV=e=>e.replace(lE,""),Y4=e=>e.indexOf(lE)!==-1,LV=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),FV=(e,n)=>{let o="<"+e;const r=yc(n,(c,u)=>u+'="'+tl.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},HV=(e,n,o)=>{const r=e.split(/\n\n/),c=FV(n,o),u="</"+n+">",f=Vt(r,C=>C.split(/\n/).join("<br />")),b=C=>c+C+u;return f.length===1?f[0]:Vt(f,b).join("")},m$="%MCEPASTEBIN%",VV=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},m$);so.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},f$=(e,n)=>{const o=e.dom;if(X4(e)){let r;const c=n.get();for(;r=X4(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},X4=e=>e.dom.get("mcepastebin"),g$=e=>ze(e)&&e.id==="mcepastebin",zV=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=jt(e.getBody().childNodes,g$);Ie(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},h$=e=>e===m$,UV=e=>{const n=Va(null);return{create:()=>VV(e,n),remove:()=>f$(e,n),getEl:()=>X4(e),getHtml:()=>zV(e),getLastRng:n.get}},p$=(e,n)=>(Ze.each(n,o=>{Qe(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),WV=e=>{const n=Pl(),o=q1({},n);let r="";const c=n.getVoidElements(),u=Ze.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=C=>{const E=C.name,N=C;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(c[E]&&(r+=" "),u[E]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let R=C.firstChild;if(R)do b(R);while(R=R.next)}f[E]&&N.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=p$(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},nb=e=>(e=p$(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Ao],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),ZV=e=>{let n=0;return()=>e+n++},jV=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ze.hasOwn(o,n)?"image/"+o[n]:"image/"+n},b$=(e,n)=>{const o=q1({sanitize:lv(e)},e.schema);o.addNodeFilter("meta",c=>{Ze.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Zh({validate:!0},e.schema).serialize(r)},v$=(e,n)=>({content:e,cancelled:n}),GV=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=hC(e,r,o);return v$(c.node.innerHTML,c.isDefaultPrevented())},qV=(e,n,o)=>{const r=a_(e,n,o),c=b$(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?GV(e,c,o):v$(c,r.isDefaultPrevented())},y$=(e,n,o)=>qV(e,n,o),J4=(e,n)=>(e.insertContent(n,{merge:cv(e),paste:!0}),!0),Q4=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),nZ=(e,n)=>Q4(n)&&Xo(Ry(e),o=>ml(n.toLowerCase(),`.${o.toLowerCase()}`)),iE=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),KV=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),YV=(e,n,o)=>!e.selection.isCollapsed()&&Q4(n)?KV(e,n,o):!1,XV=(e,n,o)=>nZ(e,n)?iE(e,n,o):!1,JV=(e,n)=>{Ze.each([YV,XV,J4],o=>!o(e,n,J4))},QV=(e,n,o)=>{o||!mS(e)?J4(e,n):JV(e,n)},ez=ZV("mceclip"),C$=(e,n,o,r)=>{const c=y$(e,n,o);c.cancelled||QV(e,c.content,r)},uE=(e,n,o)=>{const r=o||Y4(n);C$(e,IV(n),r,!1)},e3=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=Dp(o,hf(e)),c=HV(r,kr(e),Qb(e));C$(e,c,!1,!0)},w$=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch(c){n[r]=""}}return n},dp=(e,n)=>n in e&&e[n].length>0,S$=e=>dp(e,"text/html")||dp(e,"text/plain"),tz=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ze(o)?e.dom.encode(o[1]):void 0},hs=(e,n,o,r)=>{const c=ez(),u=ev(e)&&ze(o.name),f=u?tz(e,o.name):c,b=u?o.name:void 0,C=n.create(c,o,r,f,b);return n.add(C),C},nz=(e,n)=>{du(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,C=b.getByData(u,r),E=C!=null?C:hs(e,b,f,u);uE(e,`<img src="${E.blobUri()}">`,!1)})},x$=e=>e.type==="paste",oz=e=>Promise.all(Vt(e,n=>hM(n).then(o=>({file:n,uri:o})))),t3=e=>{const n=Ry(e);return o=>Io(o.type,"image/")&&Xo(n,r=>jV(r)===o.type)},T$=(e,n)=>{const o=n.items?ea(dr(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?dr(n.files):[];return jt(o.length>0?o:r,t3(e))},n3=(e,n,o)=>{const r=x$(n)?n.clipboardData:n.dataTransfer;if(dg(e)&&r){const c=T$(e,r);if(c.length>0)return n.preventDefault(),oz(c).then(u=>{o&&e.selection.setRng(o),Ie(u,f=>{nz(e,f)})}),!0}return!1},sz=e=>{var n,o;return so.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},E$=e=>At.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,o3=(e,n,o,r)=>{let c=nb(o);const u=dp(n,tb())||Y4(o),f=!u&&LV(c),b=Q4(c);(h$(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(dp(n,"text/plain")&&f?c=n["text/plain"]:c=WV(c)),!h$(c)&&(r?e3(e,c):uE(e,c,u))},rz=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{E$(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||sz(u))return;const f=o.get()==="text"||r;r=!1;const b=w$(u.clipboardData);!S$(b)&&n3(e,u,c())||(dp(b,"text/html")?(u.preventDefault(),o3(e,b,b["text/html"],f)):dp(b,"text/plain")&&dp(b,"text/uri-list")?(u.preventDefault(),o3(e,b,b["text/plain"],f)):(n.create(),Rs.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),o3(e,b,C,f)},0)))})},k$=e=>{const n=c=>Io(c,"webkit-fake-url"),o=c=>Io(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!dg(e)&&r(f))for(const b of c){const C=b.attr("src");re(C)&&!b.attr("data-mce-object")&&C!==so.transparentSrc&&(n(C)||!Dy(e)&&o(C))&&b.remove()}})},az=(e,n,o)=>{rz(e,n,o),k$(e)},cz=(e,n)=>{n.get()==="text"?(n.set("html"),tx(e,!1)):(n.set("text"),tx(e,!0)),e.focus()},dE=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{cz(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&uE(e,r.html,r.internal),r.text&&e3(e,r.text)})},P2=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(tb(),n),!0}catch(r){return!1}else return!1},s3=(e,n,o,r)=>{P2(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},pu=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),c.setRng(C),Rs.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},_$=e=>({html:$V(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),x0=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),T0=e=>!e.selection.isCollapsed()||x0(e),lz=e=>n=>{!n.isDefaultPrevented()&&T0(e)&&s3(n,_$(e),pu(e),()=>{if(so.browser.isChromium()||so.browser.isFirefox()){const o=e.selection.getRng();Rs.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},iz=e=>n=>{!n.isDefaultPrevented()&&T0(e)&&s3(n,_$(e),pu(e),Fe)},E0=e=>{e.on("cut",lz(e)),e.on("copy",iz(e))},O$=(e,n)=>{var o,r;return Tg.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},r3=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},mE=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},A$=e=>Xo(e.files,n=>/^image\//.test(n.type)),uz=(e,n,o,r)=>{const c=e.getParent(o,u=>sf(n,u));if(c&&tn(r,"text/html")){const u=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!Q(u.querySelector(c.nodeName.toLowerCase()))}else return!1},dz=(e,n)=>{Th(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),dg(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&A$(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=O$(e,o);if(Jt(r))return;const c=w$(o.dataTransfer),u=dp(c,tb());if((!S$(c)||r3(c))&&n3(e,o,r))return;const f=c[tb()],b=f||c["text/html"]||c["text/plain"],C=uz(e.dom,e.schema,r.startContainer,c);n.get()&&!C||b&&(o.preventDefault(),Rs.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),mE(e,r);const E=nb(b);c["text/html"]?uE(e,E,u):e3(e,E)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{dg(e)&&!n.get()&&(o.preventDefault(),mE(e,O$(e,o))),o.type==="dragend"&&n.set(!1)})},D$=e=>{const n=c=>u=>{c(e,u)},o=rv(e);ue(o)&&e.on("PastePreProcess",n(o));const r=av(e);ue(r)&&e.on("PastePostProcess",n(r))},R$=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},mz=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,M$=e=>Ze.trim(e).replace(mz,Ky).toLowerCase(),fz=(e,n,o)=>{const r=dS(e);if(o||r==="all"||!Pd(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,C,E,N)=>{const R=u.parseStyle(u.decode(E)),F={};for(let ee=0;ee<c.length;ee++){const j=R[c[ee]];let X=j,fe=u.getStyle(f,c[ee],!0);/color/.test(c[ee])&&(X=M$(X),fe=M$(fe)),fe!==X&&(F[c[ee]]=j)}const Y=u.serializeStyle(F,"span");return Y?C+' style="'+Y+'"'+N:C+N})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,C)=>f+' style="'+b+'"'+C),n},N$=e=>{(so.browser.isChromium()||so.browser.isSafari())&&R$(e,fz)},gz=e=>{const n=Va(!1),o=Va(Lu(e)?"text":"html"),r=UV(e);N$(e),dE(e,o),D$(e),e.on("PreInit",()=>{E0(e),dz(e,n),az(e,r,o)})},B$=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},hz=e=>{e.parser.addNodeFilter("details",n=>{Ie(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{Ie(n,o=>{const r=o.attr("data-mce-open");o.attr("open",re(r)?r:null),o.attr("data-mce-open",null)})})},pz=e=>{B$(e),hz(e)},bz=Ds,P$=Je,vz=e=>En(e.dom),fE=e=>Si(e.dom),$$=e=>n=>ho(ne.fromDom(e),n),I$=(e,n)=>k(ne.fromDom(e),o=>fE(o)||$c(o),$$(n)).getOr(ne.fromDom(n)).dom,L$=(e,n)=>k(ne.fromDom(e),vz,$$(n)),F$=(e,n,o)=>{const r=new Er(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!bz(f);f=c())Wo(f)&&(u=f);return u},yz=(e,n)=>{const r=De.fromRangeStart(e).getNode(),c=I$(r,n),u=F$(r,c,!1),f=F$(r,c,!0),b=document.createRange();return L$(u,c).fold(()=>{P$(u)?b.setStart(u,0):b.setStartBefore(u)},C=>b.setStartBefore(C.dom)),L$(f,c).fold(()=>{P$(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},C=>b.setEndAfter(C.dom)),b},Cz=e=>{const n=yz(e.selection.getRng(),e.getBody());e.selection.setRng(ju(n))},wz=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Cz(e))})};var k0;(function(e){e.Before="before",e.After="after"})(k0||(k0={}));const H$=(e,n)=>Math.abs(e.left-n),Sz=(e,n)=>Math.abs(e.right-n),xz=(e,n)=>e>=n.top&&e<=n.bottom,Tz=(e,n)=>e.top<n.bottom&&e.bottom>n.top,Ez=(e,n)=>{const o=ck(e,n)/Math.min(e.height,n.height);return Tz(e,n)&&o>.5},kz=(e,n)=>{const o=jt(e,r=>xz(n,r));return Vb(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=Sr(e,f=>Ez(f,r));return[c,u]})},_z=(e,n)=>({node:e.node,position:H$(e,n)<Sz(e,n)?k0.Before:k0.After}),Oz=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),gE=(e,n,o)=>{const r=N=>Wo(N.node)?V.some(N):Me(N.node)?gE(dr(N.node.childNodes),n,o):V.none(),c=(N,R)=>{if(N.length>=2){const F=r(N[0]).getOr(N[0]),Y=r(N[1]).getOr(N[1]);if(Math.abs(R(F,n,o)-R(Y,n,o))<2){if(Je(F.node))return V.some(F);if(Je(Y.node))return V.some(Y)}}return V.none()},u=(N,R)=>{const F=Qo(N,(Y,ee)=>R(Y,n,o)-R(ee,n,o));return c(F,R).orThunk(()=>cc(F,r))},[f,b]=kz(dB(e),o),{pass:C,fail:E}=Sr(b,N=>N.top<o);return u(f,Oz).orThunk(()=>u(E,zb)).orThunk(()=>u(C,zb))},Az=(e,n,o,r)=>{const c=(u,f)=>{const b=E=>Me(E)&&E.classList.contains("mce-drag-container"),C=jt(u.dom.childNodes,So(b));return f.fold(()=>gE(C,o,r),E=>{const N=jt(C,R=>R!==E.dom);return gE(N,o,r)}).orThunk(()=>(ho(u,e)?V.none():om(u)).bind(N=>c(N,V.some(u))))};return c(n,V.none())},Dz=(e,n,o)=>{const r=ne.fromDom(e),c=Dc(r),f=ne.fromPoint(c,n,o).filter(b=>hl(r,b)).getOr(r);return Az(r,f,n,o)},V$=(e,n,o)=>Dz(e,n,o).filter(r=>s1(r.node)).map(r=>_z(r,n)),z$=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},Rz=e=>e.inline?z$(e.getBody()):{left:0,top:0},Mz=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Nz=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},hE=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=z$(e.getContentAreaContainer()),r=Nz(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},U$=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Bz=(e,n)=>U$(Rz(e),Mz(e),hE(e,n)),W$=(e,n,o)=>J(We(J({},n),{dataTransfer:null,type:e}),o),Z$=(e,n)=>{const o=qo("Function not supported on simulated event.");return J({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:e,composedPath:o,initEvent:o,preventDefault:Fe,stopImmediatePropagation:Fe,stopPropagation:Fe,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:null},n)},pE=e=>({target:e,srcElement:e}),Pz=e=>n=>Z$(e,pE(n)),bE=e=>(n,o)=>W$(e,n,pE(o)),$z=bE("dragstart"),j$=bE("drop"),Iz=Pz("dragend"),a3=bE("dragend"),vE=32,Lz=100,yE=8,mp=16,G$=En,Fz=Dd(G$,Si),q$=(e,n,o)=>G$(o)&&o!==n&&e.isEditable(o.parentElement),Hz=(e,n,o)=>Jt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Vz=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},zz=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},Uz=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},CE=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},$2=CE("left",-vE),c3=CE("left",vE),l3=CE("top",-vE),K$=CE("top",vE),Wz=(e,n,o,r,c,u,f,b,C,E,N,R)=>{let F=0,Y=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(F=n.pageX+o-c),n.pageY+r>u&&(Y=n.pageY+r-u),e.style.width=o-F+"px",e.style.height=r-Y+"px";const ee=C.clientHeight,j=C.clientWidth,X=f+C.getBoundingClientRect().top,fe=b+C.getBoundingClientRect().left;N.on(de=>{de.intervalId.clear(),de.dragging&&R&&(f+yE>=ee?de.intervalId.set(K$(E)):f-yE<=0?de.intervalId.set(l3(E)):b+yE>=j?de.intervalId.set(c3(E)):b-yE<=0?de.intervalId.set($2(E)):X+mp>=window.innerHeight?de.intervalId.set(K$(window)):X-mp<=0?de.intervalId.set(l3(window)):fe+mp>=window.innerWidth?de.intervalId.set(c3(window)):fe-mp<=0&&de.intervalId.set($2(window)))})},Y$=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},oZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);Y$(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&S(ne.fromDom(o))},Zz=e=>e.button===0,i3=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),u3=(e,n)=>o=>{if(Zz(o)){const r=us(n.dom.getParents(o.target),Fz).getOr(null);if(ze(r)&&q$(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:zz(n,r,r.offsetWidth,r.offsetHeight),intervalId:bw(Lz)})}}},wE=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),V$(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===k0.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},jz=(e,n)=>{const o=gc((c,u)=>wE(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",$z(c,u.element)).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,C=i3(u,Bz(n,c));Uz(u.ghost,n.getBody()),Wz(u.ghost,C,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Gz=e=>{const n=e.getSel();if(ze(n)){const r=n.getRangeAt(0).startContainer;return Je(r)?r.parentNode:r}else return null},X$=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(Hz(n,Gz(n.selection),r.element)){const u=Vz(r.element),f=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();n.dispatch("drop",j$(o,f)).isDefaultPrevented()||n.undoManager.transact(()=>{oZ(n.dom,r.element),n.insertContent(n.dom.getOuterHTML(u)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend",a3(o,n.getBody()))}}),m3(e)},J$=(e,n,o)=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){const c=o.fold(()=>Iz(r.element),u=>a3(u,r.element));n.dispatch("dragend",c)}}),m3(e)},d3=(e,n)=>o=>J$(e,n,V.some(o)),m3=e=>{e.on(n=>{n.intervalId.clear(),Y$(n.ghost)}),e.clear()},qz=e=>{const n=ms(),o=rs.DOM,r=document,c=u3(n,e),u=jz(n,e),f=X$(n,e),b=d3(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",C=>{C.keyCode===At.ESC&&J$(n,e,V.none())})},Kz=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(an(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&r0(e,"Dropped file type is not supported"))}},o=c=>{OC(e,c.target)&&n(c)},r=()=>{const c=rs.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];Ie(C,E=>{c.bind(f,E,o),u.bind(b,E,n)}),e.on("remove",()=>{Ie(C,E=>{c.unbind(f,E,o),u.unbind(b,E,n)})})};e.on("init",()=>{Rs.setEditorTimeout(e,r,0)})},Q$=e=>{qz(e),ig(e)&&Kz(e)},Yz=e=>{const n=gc(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=BA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},sZ=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Jc(o)){const r=Ag(e.getBody(),o),c=En(r)?r:o;e.selection.getNode()!==c&&rp(e,c).each(u=>e.selection.setRng(u))}})})},I2=En,e5=(e,n)=>Ag(e.getBody(),n),Xz=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=Ik(e,r,o.isBlock,()=>Wh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const C=ot=>ze(ot)&&o.hasClass(ot,"mce-offscreen-selection"),E=ot=>ot!==r&&(I2(ot)||Jc(ot))&&o.isChildOf(ot,r)&&o.isEditable(ot.parentNode),N=ot=>{ot&&n.setRng(ot)},R=(ot,Ee,ke,xt=!0)=>e.dispatch("ShowCaret",{target:Ee,direction:ot,before:ke}).isDefaultPrevented()?null:(xt&&n.scrollIntoView(Ee,ot===-1),c.show(ke,Ee)),F=ot=>{ot.hasAttribute("data-mce-caret")&&(Nl(ot),n.scrollIntoView(ot))},Y=()=>{e.on("click",Ee=>{o.isEditable(Ee.target)||(Ee.preventDefault(),e.focus())}),e.on("blur NewBlock",we),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Ee=>{const ke=Ee.target,xt=e5(e,ke);I2(xt)?(Ee.preventDefault(),rp(e,xt).each(be)):E(ke)&&rp(e,ke).each(be)},!0),e.on("mousedown",Ee=>{const ke=Ee.target;if(ke!==r&&ke.nodeName!=="HTML"&&!o.isChildOf(ke,r)||!t8(e,Ee.clientX,Ee.clientY))return;we(),gt();const xt=e5(e,ke);I2(xt)?(Ee.preventDefault(),rp(e,xt).each(be)):V$(r,Ee.clientX,Ee.clientY).each(Ft=>{Ee.preventDefault();const Qt=R(1,Ft.node,Ft.position===k0.Before,!1);N(Qt),Me(xt)?xt.focus():e.getBody().focus()})}),e.on("keypress",Ee=>{At.modifierPressed(Ee)||I2(n.getNode())&&Ee.preventDefault()}),e.on("GetSelectionRange",Ee=>{let ke=Ee.range;if(b){if(!b.parentNode){b=null;return}ke=ke.cloneRange(),ke.selectNode(b),Ee.range=ke}}),e.on("SetSelectionRange",Ee=>{Ee.range=X(Ee.range);const ke=be(Ee.range,Ee.forward);ke&&(Ee.range=ke)});const ot=Ee=>Me(Ee)&&Ee.id==="mcepastebin";e.on("AfterSetSelectionRange",Ee=>{const ke=Ee.range,xt=ke.startContainer.parentElement;!j(ke)&&!ot(xt)&&gt(),C(xt)||we()}),Q$(e),Yz(e),sZ(e)},ee=ot=>fo(ot)||Ml(ot)||um(ot),j=ot=>ee(ot.startContainer)||ee(ot.endContainer),X=ot=>{const Ee=e.schema.getVoidElements(),ke=o.createRng(),xt=ot.startContainer,Ft=ot.startOffset,Qt=ot.endContainer,On=ot.endOffset;return tn(Ee,xt.nodeName.toLowerCase())?Ft===0?ke.setStartBefore(xt):ke.setStartAfter(xt):ke.setStart(xt,Ft),tn(Ee,Qt.nodeName.toLowerCase())?On===0?ke.setEndBefore(Qt):ke.setEndAfter(Qt):ke.setEnd(Qt,On),ke},fe=(ot,Ee)=>{const ke=ne.fromDom(e.getBody()),xt=e.getDoc(),Ft=lt(ke,"#"+u).getOrThunk(()=>{const Kn=ne.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',xt);return Qs(Kn,"id",u),js(ke,Kn),Kn}),Qt=o.createRng();Yo(Ft),_u(Ft,[ne.fromText(Ao,xt),ne.fromDom(Ee),ne.fromText(Ao,xt)]),Qt.setStart(Ft.dom.firstChild,1),Qt.setEnd(Ft.dom.lastChild,0),Uf(Ft,{top:o.getPos(ot,e.getBody()).y+"px"}),Dt(Ft);const On=n.getSel();return On&&(On.removeAllRanges(),On.addRange(Qt)),Qt},de=ot=>{const Ee=ot.cloneNode(!0),ke=e.dispatch("ObjectSelected",{target:ot,targetClone:Ee});if(ke.isDefaultPrevented())return null;const xt=fe(ot,ke.targetClone),Ft=ne.fromDom(ot);return Ie(wa(ne.fromDom(e.getBody()),`*[${f}]`),Qt=>{ho(Ft,Qt)||Ls(Qt,f)}),o.getAttrib(ot,f)||ot.setAttribute(f,"1"),b=ot,gt(),xt},be=(ot,Ee)=>{if(!ot)return null;if(ot.collapsed){if(!j(ot)){const Qt=Ee?1:-1,On=Hy(Qt,r,ot),Kn=On.getNode(!Ee);if(ze(Kn)){if(s1(Kn))return R(Qt,Kn,Ee?!On.isAtEnd():!1,!1);if(pn(Kn)&&En(Kn.nextSibling)){const cs=o.createRng();return cs.setStart(Kn,0),cs.setEnd(Kn,0),cs}}const Ro=On.getNode(Ee);if(ze(Ro)){if(s1(Ro))return R(Qt,Ro,Ee?!1:!On.isAtEnd(),!1);if(pn(Ro)&&En(Ro.previousSibling)){const cs=o.createRng();return cs.setStart(Ro,1),cs.setEnd(Ro,1),cs}}}return null}let ke=ot.startContainer,xt=ot.startOffset;const Ft=ot.endOffset;if(Je(ke)&&xt===0&&I2(ke.parentNode)&&(ke=ke.parentNode,xt=o.nodeIndex(ke),ke=ke.parentNode),!Me(ke))return null;if(Ft===xt+1&&ke===ot.endContainer){const Qt=ke.childNodes[xt];if(E(Qt))return de(Qt)}return null},we=()=>{b&&b.removeAttribute(f),lt(ne.fromDom(e.getBody()),"#"+u).each(os),b=null},He=()=>{c.destroy(),b=null},gt=()=>{c.hide()};return Ng(e)||Y(),{showCaret:R,showBlockCaretContainer:F,hideFakeCaret:gt,destroy:He}},t5=(e,n)=>{let o=n;for(let r=e.previousSibling;Je(r);r=r.previousSibling)o+=r.data.length;return o},n5=(e,n,o,r,c)=>{if(Je(o)&&(r<0||r>o.data.length))return[];const u=c&&Je(o)?[t5(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},SE=(e,n,o,r,c,u,f=!1)=>{const b=n5(e,n,o,r,f),C=n5(e,n,c,u,f);return{start:b,end:C}},o5=(e,n)=>{const o=n.slice(),r=o.pop();return Ps(r)?Jo(o,(u,f)=>u.bind(b=>V.from(b.childNodes[f])),V.some(e)).bind(u=>Je(u)&&(r<0||r>u.data.length)?V.none():V.some({node:u,offset:r})):V.none()},s5=(e,n)=>o5(e,n.start).bind(({node:o,offset:r})=>o5(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),Jz=(e,n,o,r=!1)=>SE(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),_0=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),_0(e,r,o)}},xE=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Je(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Je(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),_0(e,c,o),c!==u&&_0(e,u,o))},TE=(e,n)=>V.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),Qz=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return We(J({},e),{blockPatterns:Kp(r).concat(e.blockPatterns),inlinePatterns:Kb(r).concat(e.inlinePatterns)})},r5=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},a5=e=>/^\s[^\s]/.test(e),c5=(e,n,o)=>{fH(n,0,n).each(c=>{const u=c.container;fP(u,o.start.length,n).each(C=>{const E=e.createRng();E.setStart(u,0),E.setEnd(C.container,C.offset),xE(e,E,N=>N===n)});const f=ne.fromDom(u),b=jf(f);a5(b)&&qi(f,b.slice(1))})},f3=(e,n)=>{const o=e.dom,r=n.pattern,c=s5(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const C=b.get(f);return Fn(C)&&To(C).exists(E=>tn(E,"block"))};return TE(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{c5(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{c5(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},e9=e=>Qo(e,(n,o)=>o.start.length-n.start.length),t9=(e,n)=>{const o=e9(e),r=n.replace(Ao," ");return us(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},n9=(e,n,o,r)=>{var c;const u=e.dom,f=kr(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return t9(o.blockPatterns,b).map(C=>Ze.trim(b).length===C.start.length?[]:[{pattern:C,range:SE(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},l5=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Ie(n,r=>f3(e,r)),e.selection.moveToBookmark(o)},L2=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),F2=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},g3=(e,n,o)=>{const r=s5(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),C=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(L2(e,n+"-end"),f),start:C.insertBefore(L2(e,n+"-start"),b)}},i5=(e,n,o)=>{_0(e,e.get(n.prefix+"-end"),o),_0(e,e.get(n.prefix+"-start"),o)},h3=e=>e.start.length===0,u5=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},d5=(e,n,o,r)=>{const c=n.start;return b4(e,r.container,r.offset,u5(c),o).bind(f=>{var b,C;const E=(C=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&C!==void 0?C:-1;if(E!==-1&&f.offset>=E+c.length){const R=e.createRng();return R.setStart(f.container,f.offset-c.length),R.setEnd(f.container,f.offset),V.some(R)}else{const R=f.offset-c.length;return KT(f.container,R,o).map(F=>{const Y=e.createRng();return Y.setStart(F.container,F.offset),Y.setEnd(f.container,f.offset),Y}).filter(F=>F.toString()===c).orThunk(()=>d5(e,n,o,Pm(f.container,0)))}})},o9=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),V.some(f)}return p4(o,r,c).bind(f=>d5(e,n,c,f).bind(C=>{var E;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return V.none();if(f.offset===0&&((E=C.endContainer.textContent)===null||E===void 0?void 0:E.length)===C.endOffset)return V.none()}return V.some(C)}))},s9=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,C=o.position.offset;return KT(b,C-o.pattern.end.length,n).bind(E=>{const N=SE(c,u,E.container,E.offset,b,C,r);if(h3(f))return V.some({matches:[{pattern:f,startRng:N,endRng:N}],position:E});{const R=O0(e,o.remainingPatterns,E.container,E.offset,n,r),F=R.getOr({matches:[],position:E}),Y=F.position;return o9(c,f,Y.container,Y.offset,n,R.isNone()).map(j=>{const X=Jz(c,u,j,r);return{matches:F.matches.concat([{pattern:f,startRng:X,endRng:N}]),position:Pm(j.startContainer,j.startOffset)}})}})},O0=(e,n,o,r,c,u)=>{const f=e.dom;return p4(o,r,f.getRoot()).bind(b=>{const C=r5(f,c,o,r);for(let E=0;E<n.length;E++){const N=n[E];if(!ml(C,N.end))continue;const R=n.slice();R.splice(E,1);const F=s9(e,c,{pattern:N,remainingPatterns:R,position:b},u);if(F.isNone()&&r>0)return O0(e,n,o,r-1,c,u);if(F.isSome())return F}return V.none()})},m5=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Ie(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},r9=(e,n,o,r)=>{const c=F2(e.dom,o);xE(e.dom,c,r),m5(e,n,c)},a9=(e,n,o,r,c)=>{const u=e.dom,f=F2(u,r),b=F2(u,o);xE(u,b,c),xE(u,f,c);const C={prefix:o.prefix,start:o.end,end:r.start},E=F2(u,C);m5(e,n,E)},c9=(e,n)=>{const o=ww("mce_textpattern"),r=cl(n,(c,u)=>{const f=g3(e,o+`_end${c.length}`,u.endRng);return c.concat([We(J({},u),{endMarker:f})])},[]);return cl(r,(c,u)=>{const f=r.length-c.length-1,b=h3(u.pattern)?u.endMarker:g3(e,o+`_start${f}`,u.startRng);return c.concat([We(J({},u),{startMarker:b})])},[])},l9=e=>Qo(e,(n,o)=>o.end.length-n.end.length),i9=(e,n)=>{const o=Es(e,r=>Xo(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},p3=(e,n,o,r,c,u)=>{const f=O0(e,c.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),b=O0(e,l9(c.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return i9(f,b)},b3=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=c9(o,n);Ie(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=C=>C===f;h3(u.pattern)?r9(e,u.pattern,u.endMarker,b):a9(e,u.pattern,u.startMarker,u.endMarker,b),i5(o,u.endMarker,b),i5(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},v3=(e,n)=>{const o=e.selection.getRng();return TE(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=Qz(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=p3(e,r,o.startContainer,u,f,!0),C=n9(e,r,f,!0);return C.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Dl),b3(e,b),l5(e,C);const E=e.selection.getRng(),N=p4(E.startContainer,E.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),N.each(R=>{const F=R.container;F.data.charAt(R.offset-1)===Dl&&(F.deleteData(R.offset-1,1),_0(e.dom,F.parentNode,Y=>Y===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},y3=(e,n)=>{const o=e.selection.getRng();TE(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=r5(e.dom,r,o.startContainer,c),f=Qz(n,r,u),b=p3(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{b3(e,b)})})},f5=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},C3=(e,n)=>f5(e,n,(o,r)=>o===r.keyCode&&!At.modifierPressed(r)),u9=(e,n)=>f5(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),d9=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Yb(fS(e),Ok(e)),c=()=>bS(e);e.on("keydown",f=>{if(f.keyCode===13&&!At.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&v3(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&y3(e,f)}};e.on("keyup",f=>{C3(o,f)&&u()}),e.on("keypress",f=>{u9(n,f)&&Rs.setEditorTimeout(e,u)})},g5=e=>{d9(e)},m9=e=>{const n=Ze.each,o=At.BACKSPACE,r=At.DELETE,c=e.dom,u=e.selection,f=e.parser,b=so.browser,C=b.isFirefox(),E=b.isChromium()||b.isSafari(),N=so.deviceType.isiPhone()||so.deviceType.isiPad(),R=so.os.isMacOS()||so.os.isiOS(),F=(yt,Kt)=>{try{e.getDoc().execCommand(yt,!1,String(Kt))}catch(nn){}},Y=yt=>yt.isDefaultPrevented(),ee=()=>{const yt=nn=>{const Ct=c.create("body"),Hn=nn.cloneContents();return Ct.appendChild(Hn),u.serializer.serialize(Ct,{format:"html"})},Kt=nn=>{const Ct=yt(nn),Hn=c.createRng();Hn.selectNode(e.getBody());const Mn=yt(Hn);return Ct===Mn};e.on("keydown",nn=>{const Ct=nn.keyCode;if(!Y(nn)&&(Ct===r||Ct===o)&&e.selection.isEditable()){const Hn=e.selection.isCollapsed(),Mn=e.getBody();if(Hn&&!c.isEmpty(Mn)||!Hn&&!Kt(e.selection.getRng()))return;nn.preventDefault(),e.setContent(""),Mn.firstChild&&c.isBlock(Mn.firstChild)?e.selection.setCursorLocation(Mn.firstChild,0):e.selection.setCursorLocation(Mn,0),e.nodeChanged()}})},j=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},X=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",yt=>{let Kt;if(yt.target===e.getDoc().documentElement)if(Kt=u.getRng(),e.getBody().focus(),yt.type==="mousedown"){if(fo(Kt.startContainer))return;u.placeCaretAt(yt.clientX,yt.clientY)}else u.setRng(Kt)})},fe=()=>{e.on("keydown",yt=>{if(!Y(yt)&&yt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Kt=u.getNode(),nn=Kt.previousSibling;if(Kt.nodeName==="HR"){c.remove(Kt),yt.preventDefault();return}nn&&nn.nodeName&&nn.nodeName.toLowerCase()==="hr"&&(c.remove(nn),yt.preventDefault())}}})},de=()=>{Range.prototype.getClientRects||e.on("mousedown",yt=>{if(!Y(yt)&&yt.target.nodeName==="HTML"){const Kt=e.getBody();Kt.blur(),Rs.setEditorTimeout(e,()=>{Kt.focus()})}})},be=()=>{const yt=cS(e);e.on("click",Kt=>{const nn=Kt.target;/^(IMG|HR)$/.test(nn.nodeName)&&c.isEditable(nn.parentNode)&&(Kt.preventDefault(),e.selection.select(nn),e.nodeChanged()),nn.nodeName==="A"&&c.hasClass(nn,yt)&&nn.childNodes.length===0&&c.isEditable(nn.parentNode)&&(Kt.preventDefault(),u.select(nn))})},we=()=>{const yt=()=>{const nn=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Ct=u.getStart();Ct!==e.getBody()&&(c.setAttrib(Ct,"style",null),n(nn,Hn=>{Ct.setAttributeNode(Hn.cloneNode(!0))}))}},Kt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",nn=>{let Ct;return!Y(nn)&&(nn.keyCode===8||nn.keyCode===46)&&Kt()?(Ct=yt(),e.getDoc().execCommand("delete",!1),Ct(),nn.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",nn=>{if(!Y(nn)&&Kt()){const Ct=yt();Rs.setEditorTimeout(e,()=>{Ct()})}})},He=()=>{e.on("keydown",yt=>{if(!Y(yt)&&yt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Kt=u.getNode().previousSibling;if(Kt&&Kt.nodeName&&Kt.nodeName.toLowerCase()==="table")return yt.preventDefault(),!1}return!0})},gt=()=>{e.on("keydown",yt=>{if(Y(yt)||yt.keyCode!==At.BACKSPACE)return;let Kt=u.getRng();const nn=Kt.startContainer,Ct=Kt.startOffset,Hn=c.getRoot();let Mn=nn;if(!(!Kt.collapsed||Ct!==0)){for(;Mn.parentNode&&Mn.parentNode.firstChild===Mn&&Mn.parentNode!==Hn;)Mn=Mn.parentNode;Mn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Mn),Kt=c.createRng(),Kt.setStart(nn,0),Kt.setEnd(nn,0),u.setRng(Kt))}})},ot=()=>{const yt=()=>{F("StyleWithCSS",!1),F("enableInlineTableEditing",!1),wh(e)||F("enableObjectResizing",!1)};aS(e)||e.on("BeforeExecCommand mousedown",yt)},Ee=()=>{const yt=()=>{n(c.select("a:not([data-mce-block])"),Kt=>{var nn;let Ct=Kt.parentNode;const Hn=c.getRoot();if((Ct==null?void 0:Ct.lastChild)===Kt){for(;Ct&&!c.isBlock(Ct);){if(((nn=Ct.parentNode)===null||nn===void 0?void 0:nn.lastChild)!==Ct||Ct===Hn)return;Ct=Ct.parentNode}c.add(Ct,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Kt=>{(Kt.type==="setcontent"||Kt.command==="mceInsertLink")&&yt()})},ke=()=>{e.on("init",()=>{F("DefaultParagraphSeparator",kr(e))})},xt=yt=>{const Kt=yt.getBody(),nn=yt.selection.getRng();return nn.startContainer===nn.endContainer&&nn.startContainer===Kt&&nn.startOffset===0&&nn.endOffset===Kt.childNodes.length},Ft=()=>{e.on("keyup focusin mouseup",yt=>{!At.modifierPressed(yt)&&!xt(e)&&u.normalize()},!0)},Qt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},On=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Kn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",yt=>{let Kt;yt.target.nodeName==="HTML"&&(Kt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Kt),e.selection.normalize(),e.nodeChanged())}))},Ro=()=>{R&&e.on("keydown",yt=>{At.metaKeyPressed(yt)&&!yt.shiftKey&&(yt.keyCode===37||yt.keyCode===39)&&(yt.preventDefault(),e.selection.getSel().modify("move",yt.keyCode===37?"backward":"forward","lineboundary"))})},cs=()=>{e.on("click",yt=>{let Kt=yt.target;do if(Kt.tagName==="A"){yt.preventDefault();return}while(Kt=Kt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},wr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",yt=>{yt.preventDefault()})})},zc=()=>{f.addNodeFilter("br",yt=>{let Kt=yt.length;for(;Kt--;)yt[Kt].attr("class")==="Apple-interchange-newline"&&yt[Kt].remove()})},Ma=Fe,st=()=>{if(!C||e.removed)return!1;const yt=e.selection.getSel();return!yt||!yt.rangeCount||yt.rangeCount===0},Mt=()=>{E&&(X(),be(),wr(),j(),N&&(On(),Kn(),cs())),C&&(de(),ot(),Qt(),Ro())},io=()=>{gt(),ee(),so.windowsPhone||Ft(),E&&(X(),be(),ke(),wr(),He(),zc(),N?(On(),Kn(),cs()):j()),C&&(fe(),de(),we(),ot(),Ee(),Qt(),Ro(),He())};return Ng(e)?Mt():io(),{refreshContentEditable:Ma,isHidden:st}},w3=rs.DOM,f9=(e,n)=>{const o=ne.fromDom(e.getBody()),r=sm(Ol(o)),c=ne.fromTag("style");Qs(c,"type","text/css"),js(c,ne.fromText(n)),js(r,c),e.on("remove",()=>{os(c)})},g9=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,S3=e=>$o(e,n=>Go(n)===!1),h5=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return S3({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:g9(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},p5=e=>{const n=e.options.get;return S3({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},b5=e=>{const n=e.options.get;return J(J(J({},h5(e)),p5(e)),S3({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")}))},h9=e=>{const n=q1(h5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let C=b.attr(r);if(C&&!b.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=c.serializeStyle(c.parseStyle(C),b.name),C.length||(C=null),b.attr(u,C),b.attr(r,C)):r==="tabindex"?(b.attr(u,C),b.attr(r,null)):b.attr(u,e.convertURL(C,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),Dk(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new ci("br",1))}}),n},x3=e=>{const n=Ek(e);n&&Rs.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},p9=e=>{const n=e.dom.getRoot();!e.inline&&(!g1(e)||e.selection.getStart(!0)===n)&&Ll(n).each(o=>{const r=o.getNode(),c=Jl(r)?Ll(r).getOr(o):o;e.selection.setRng(c.toRange())})},b9=e=>{e.bindPendingEventDelegates(),e.initialized=!0,mC(e),e.focus(!0),p9(e),e.nodeChanged({initial:!0});const n=ug(e);ue(n)&&n.call(e,e),x3(e)},v5=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,v9=(e,n,o)=>{const r=[v5(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},y5=e=>{const n=v5(e),o=Xw(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let C="";Ze.each(e.contentStyles,E=>{C+=E+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(v9(e,r,o)).then(u).catch(u),b=ov(e);return b&&f9(e,b),f},y9=e=>{const n=e.getDoc(),o=e.getBody();s_(e),kk(e)||(n.body.spellcheck=!1,w3.setAttrib(o,"spellcheck","false")),e.quirks=m9(e),dC(e);const r=Jw(e);r!==void 0&&(o.dir=r);const c=_k(e);c&&e.on("BeforeSetContent",u=>{Ze.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},EE=e=>{Ng(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},T3=e=>{e.removed!==!0&&(EE(e),b9(e))},C5=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(w3.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=aS(e),e.readonly||(e.inline&&w3.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=u8(e),e.schema=Pl(p5(e)),e.dom=rs(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:hk(e),referrerPolicy:nv(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=h9(e),e.serializer=fA(b5(e),e),e.selection=uA(e.dom,e.getWin(),e.serializer,e),e.annotator=ri(e),e.formatter=Yu(e),e.undoManager=SA(e),e._nodeChangeDispatcher=new PV(e),e._selectionOverrides=Xz(e),Zd(e),pz(e),IB(e),Ng(e)||(wz(e),g5(e));const c=u$(e);r4(e,c),FT(e),h8(e),gz(e);const u=m6(e);y9(e),u.fold(()=>{y5(e).then(()=>T3(e))},f=>{e.setProgressState(!0),y5(e).then(()=>{f().then(b=>{e.setProgressState(!1),T3(e),_6(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),T3(e),_6(e)})})})},C9=mt,w9=(e,n,o)=>Wf(e,n,C9,o),E3=rs.DOM,S9=(e,n,o,r)=>{const c=ne.fromTag("iframe");return r.each(u=>Qs(c,"tabindex",u)),Ca(c,o),Ca(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),xu(c,"tox-edit-area__iframe"),c},x9=e=>{let n=nt(e)+"<html><head>";jw(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Wa(e),r=mk(e),c=e.translate(lS(e));return Ey(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Ey(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},T9=(e,n)=>{const o=e.translate("Rich Text Area"),r=Ac(ne.fromDom(e.getElement()),"tabindex").bind(kc),c=S9(e.id,o,Zw(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=x9(e),E3.add(n.iframeContainer,c)},E9=e=>{const n=e.iframeElement,o=w9(ne.fromDom(n),"load",()=>{o.unbind(),e.contentDocument=n.contentDocument,C5(e)});if(so.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close()}else n.srcdoc=e.iframeHTML},w5=(e,n)=>{T9(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=E3.isHidden(n.editorContainer)),e.getElement().style.display="none",E3.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,E9(e)},S5=rs.DOM,x5=(e,n,o)=>{const r=Ud.get(o),c=Ud.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Ze.trim(o),r&&Ze.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,ue(u.init)&&(u.init(e,c),n.push(o))}catch(u){_N(e,o,u)}}},k9=e=>e.replace(/^\-/,""),_9=e=>{const n=[];Ie(e1(e),o=>{x5(e,n,k9(o))})},T5=e=>{const n=Ze.trim(Gw(e)),o=e.ui.registry.getAll().icons,r=J(J({},pT.get("default").icons),pT.get(n).icons);ut(r,(c,u)=>{tn(o,u)||e.ui.registry.addIcon(u,c)})},H2=e=>{const n=cg(e);if(re(n)){const o=Ku.get(n);e.theme=o(e,Ku.urls[n])||{},ue(e.theme.init)&&e.theme.init(e,Ku.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},O9=e=>{const n=Sh(e),o=s0.get(n);e.model=o(e,s0.urls[n])},E5=e=>{const n=e.theme.renderUI;return n?n():_5(e)},A9=e=>{const n=e.getElement(),r=cg(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},k5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),D9=e=>{const n=S5.create("div");return S5.insertAfter(n,e),k5(n,n)},_5=e=>{const n=e.getElement();return e.inline?k5(null):D9(n)},O5=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,re(cg(e))?E5(e):ue(cg(e))?A9(e):_5(e)},R9=(e,n)=>{const o={show:V.from(n.show).getOr(Fe),hide:V.from(n.hide).getOr(Fe),isEnabled:V.from(n.isEnabled).getOr(mt),setEnabled:r=>{e.mode.isReadOnly()||V.from(n.setEnabled).each(c=>c(r))}};e.ui=J(J({},e.ui),o)},A5=e=>Q3(this,null,function*(){e.dispatch("ScriptsLoaded"),T5(e),H2(e),O9(e),_9(e);const n=yield O5(e);R9(e,V.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Wd(e),e.inline?C5(e):w5(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})}),ob=rs.DOM,D5=e=>e.charAt(0)==="-",M9=(e,n)=>{const o=Jp(n),r=Za(n);if(!$u.hasCode(o)&&o!=="en"){const c=mo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{EN(n,c,o)})}},N9=(e,n)=>{const o=cg(e);if(re(o)&&!D5(o)&&!tn(Ku.urls,o)){const r=Qp(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Ku.load(o,c).catch(()=>{kN(e,c,o)})}},B9=(e,n)=>{const o=Sh(e);if(o!=="plugin"&&!tn(s0.urls,o)){const r=Iu(e),c=re(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;s0.load(o,c).catch(()=>{yT(e,c,o)})}},P9=e=>V.from(_y(e)).filter(mo).map(n=>({url:n,name:V.none()})),R5=(e,n,o)=>V.from(n).filter(r=>mo(r)&&!pT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:V.some(r)})),$9=(e,n,o)=>{const r=R5(n,"default",o),c=P9(n).orThunk(()=>R5(n,Gw(n),""));Ie(As([r,c]),u=>{e.add(u.url).catch(()=>{TN(n,u.url,u.name.getOrUndefined())})})},I9=(e,n)=>{const o=(r,c)=>{Ud.load(r,c).catch(()=>{l0(e,c,r)})};ut(Sk(e),(r,c)=>{o(c,r),e.options.set("plugins",e1(e).concat(c))}),Ie(e1(e),r=>{r=Ze.trim(r),r&&!Ud.urls[r]&&!D5(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},M5=e=>{const n=cg(e);return!re(n)||ze(Ku.get(n))},k3=e=>{const n=Sh(e);return ze(s0.get(n))},N5=(e,n)=>{const o=Ti.ScriptLoader,r=()=>{!e.removed&&M5(e)&&k3(e)&&A5(e)};N9(e,n),B9(e,n),M9(o,e),$9(o,e,n),I9(e,n),o.loadQueue().then(r,r)},B5=(e,n)=>ih.forElement(e,{contentCssCors:xh(n),referrerPolicy:nv(n)}),L9=e=>{const n=e.id;$u.setCode(Jp(e));const o=()=>{ob.unbind(window,"ready",o),e.render()};if(!Ta.Event.domLoaded){ob.bind(window,"ready",o);return}if(!e.getElement())return;const r=ne.fromDom(e.getElement()),c=tm(r);e.on("remove",()=>{ac(r.dom.attributes,f=>Ls(r,f.name)),Ca(r,c)}),e.ui.styleSheetLoader=B5(r,e),lg(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||ob.getParent(n,"form");u&&(e.formElement=u,vk(e)&&!lm(e.getElement())&&(ob.insertAfter(ob.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},ob.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),sS(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=l2(e),e.notificationManager=c2(e),Nk(e)&&e.on("GetContent",f=>{f.save&&(f.content=ob.encode(f.content))}),rS(e)&&e.on("submit",()=>{e.initialized&&e.save()}),yk(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),N5(e,e.suffix)},F9=(e,n)=>({sections:Ge(e),options:Ge(n)}),P5=to().deviceType,_3=P5.isPhone(),$5=P5.isTablet(),V2=e=>{if(Jt(e))return[];{const n=Fn(e)?e:e.split(/[ ,]/),o=Vt(n,Ec);return jt(o,mo)}},H9=(e,n)=>{const o=il(n,(r,c)=>an(e,c));return F9(o.t,o.f)},O3=(e,n,o={})=>{const r=e.sections(),c=vo(r,n).getOr({});return Ze.extend({},o,c)},A0=(e,n)=>tn(e.sections(),n),kE=(e,n)=>A0(e,n)?e.sections()[n]:{},Hg=(e,n)=>{const o={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:vo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},r={menubar:!1};return J(J({},o),n?r:{})},_E=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Ze.extend({},e.external_plugins,r):r},D0=(e,n)=>[...V2(e),...V2(n)],I5=(e,n,o,r)=>e&&A0(n,"mobile")?r:o,V9=(e,n,o,r)=>{const c=V2(o.forced_plugins),u=V2(r.plugins),f=kE(n,"mobile"),b=f.plugins?V2(f.plugins):u,C=I5(e,n,u,b),E=D0(c,C);return Ze.extend(r,{forced_plugins:c,plugins:E})},z9=(e,n)=>e&&A0(n,"mobile"),L5=(e,n,o,r,c)=>{var u;const f=e?{mobile:Hg((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=H9(["mobile"],C4(f,c)),C=Ze.extend(o,r,b.options(),z9(e,b)?O3(b,"mobile"):{},{external_plugins:_E(r,b.options())});return V9(e,b,r,C)},U9=(e,n)=>L5(_3||$5,_3,n,e,n),A3=(e,n)=>k6(e,n),OE=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{Ie("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},fp=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Xo(c,u=>ze(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},sb=e=>{OE(e),fp(e)},F5=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch(c){r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(so.os.isMacOS()||so.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},W9=(e,n,o)=>{const r=ne.fromDom(e.getRoot());return MC(r,De.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),NC(r,De.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},Z9=e=>{if(typeof e!="string"){const n=Ze.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},j9=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?W9(r,o.getRng(),n):n},AE=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=Z9(n);sT(e,We(J({},r),{content:j9(e,o),format:"html",set:!1,selection:!0})).each(c=>{const u=T6(e,c.content,r);QO(e,u,c),e.addVisual()})}},G9=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{AE(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{AE(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{AE(e,r)},mceInsertContent:(n,o,r)=>{AE(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},q9={"font-size":"size","font-family":"face"},H5=Kl("font"),K9=(e,n,o)=>{const r=u=>Ja(u,e).orThunk(()=>H5(u)?vo(q9,e).bind(f=>Ac(u,f)):V.none()),c=u=>ho(ne.fromDom(n),u);return mO(ne.fromDom(o),u=>r(u),c)},Y9=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),X9=(e,n)=>V.from(rs.DOM.getStyle(n,e,!0)),J9=e=>(n,o)=>V.from(o).map(ne.fromDom).filter(Uo).bind(r=>K9(e,n,r.dom).or(X9(e,r.dom))).getOr(""),Q9=J9("font-size"),D3=O(Y9,J9("font-family")),eU=e=>Ll(e.getBody()).bind(n=>{const o=n.container();return V.from(Je(o)?o.parentNode:o)}),tU=e=>V.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?V.none():V.from(e.selection.getStart(!0))}),V5=(e,n)=>tU(e).orThunk(Ve(eU,e)).map(ne.fromDom).filter(Uo).bind(n),R3=(e,n)=>V5(e,gn(V.some,n)),M3=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Rk(e),c=Mk(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},nU=e=>{const n=e.split(/\s*,\s*/);return Vt(n,o=>o.indexOf(" ")!==-1&&!(Io(o,'"')||Io(o,"'"))?`'${o}'`:o).join(",")},N3=(e,n)=>{const o=M3(e,n);e.formatter.toggle("fontname",{value:nU(o)}),e.nodeChanged()},oU=e=>R3(e,n=>D3(e.getBody(),n.dom)).getOr(""),sU=(e,n)=>{e.formatter.toggle("fontsize",{value:M3(e,n)}),e.nodeChanged()},rU=e=>R3(e,n=>Q9(e.getBody(),n.dom)).getOr(""),aU=e=>R3(e,n=>{const o=ne.fromDom(e.getBody()),r=mO(n,u=>Ja(u,"line-height"),Ve(ho,o)),c=()=>{const u=parseFloat(Yl(n,"line-height")),f=parseFloat(Yl(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),z5=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},B3=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{N3(e,c)},FontSize:(o,r,c)=>{sU(e,c)},LineHeight:(o,r,c)=>{z5(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(re(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},U5=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>oU(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>rU(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>aU(e))},P3=e=>{B3(e),U5(e)},cU=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},rZ=e=>{e.editorCommands.addCommands({Indent:()=>{n4(e)},Outdent:()=>{y2(e)}}),e.editorCommands.addCommands({Outdent:()=>t4(e)},"state")},aZ=e=>{const n=(o,r,c)=>{const u=re(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Ut(u)&&re(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},lU=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},W5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},iU=e=>{lU(e),W5(e)},uU=e=>{e.editorCommands.addCommands({insertParagraph:()=>{rE(Bf,e)},mceInsertNewLine:(n,o,r)=>{aE(e,r)},InsertLineBreak:(n,o,r)=>{rE(W4,e)}})},dU=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Me(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Si);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},cZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r!=null?r:e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{AI(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},lZ=e=>{sb(e),F5(e),cU(e),dU(e),G9(e),aZ(e),rZ(e),uU(e),iU(e),P3(e),cZ(e)},Z5=["toggleview"],$3=e=>an(Z5,e.toLowerCase());class j5{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Uh(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return ue(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!$3(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ue(r)?r(o):!1}queryCommandValue(n){if(!$3(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ue(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;ut(n,(c,u)=>{Ie(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r!=null?r:this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}}const rb="data-mce-contenteditable",mU=(e,n,o)=>{fd(e,n)&&!o?dd(e,n):o&&xu(e,n)},G5=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch(r){}},I3=(e,n)=>{e.dom.contentEditable=n?"true":"false"},iZ=e=>{Ie(wa(e,'*[contenteditable="true"]'),n=>{Qs(n,rb,"true"),I3(n,!1)})},fU=e=>{Ie(wa(e,`*[${rb}="true"]`),n=>{Ls(n,rb),I3(n,!0)})},uZ=e=>{V.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},gU=e=>{e.selection.setRng(e.selection.getRng())},ab=(e,n)=>{const o=ne.fromDom(e.getBody());mU(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),uZ(e),e.readonly=!0,I3(o,!1),iZ(o)):(e.readonly=!1,I3(o,!0),fU(o),G5(e,"StyleWithCSS",!1),G5(e,"enableInlineTableEditing",!1),G5(e,"enableObjectResizing",!1),iD(e)&&e.focus(),gU(e),e.nodeChanged())},Vg=e=>e.readonly,z2=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Vg(e)&&Ie(n,o=>{o.attr(rb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(rb,n=>{Vg(e)&&Ie(n,o=>{o.attr("contenteditable",o.attr(rb))})}),e.serializer.addTempAttr(rb)},q5=e=>{e.serializer?z2(e):e.on("PreInit",()=>{z2(e)})},K5=e=>e.type==="click",Y5=["copy"],hU=e=>an(Y5,e.type),pU=(e,n)=>qt(n,"a",r=>ho(r,ne.fromDom(e.getBody()))).bind(r=>Ac(r,"href")),bU=(e,n)=>{if(K5(n)&&!At.metaKeyPressed(n)){const o=ne.fromDom(n.target);pU(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${pa(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else hU(n)&&e.dispatch(n.type,n)},vU=e=>{e.on("ShowCaret",n=>{Vg(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Vg(e)&&n.preventDefault()})},cb=Ze.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class L3{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ne}static isNative(n){return!!cb[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=eg(r,o!=null?o:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),c.isImmediatePropagationStopped())return c;if(C.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Ne),o){const u={func:o,removed:!1};c&&Ze.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const C=f[b];let E=this.bindings[C];E||(E=[],this.toggleEvent(C,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[C]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return ut(this.bindings,(b,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const b=Sr(f,C=>C.func===o);f=b.fail,this.bindings[u]=f,Ie(b.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else ut(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const R0=e=>(e._eventDispatcher||(e._eventDispatcher=new L3({scope:e,toggleEvent:(n,o)=>{L3.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),F3={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return eg(e.toLowerCase(),n!=null?n:{},r);const c=R0(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return R0(this).on(e,n,o)},off(e,n){return R0(this).off(e,n)},once(e,n){return R0(this).once(e,n)},hasEventListeners(e){return R0(this).has(e)}},lb=rs.DOM;let ib;const DE=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=sv(e);return o?(e.eventRoot||(e.eventRoot=lb.select(o)[0]),e.eventRoot):e.getBody()},yU=e=>!e.hidden&&!Vg(e),H3=(e,n,o)=>{yU(e)?e.dispatch(n,o):Vg(e)&&bU(e,o)},X5=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=DE(e,n);if(sv(e)){if(ib||(ib={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||ib&&(ut(ib,(c,u)=>{e.dom.unbind(DE(e,u))}),ib=null)})),ib[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const C=f[b].getBody();(C===u||lb.isChildOf(u,C))&&H3(f[b],n,c)}};ib[n]=r,lb.bind(o,n,r)}else{const r=c=>{H3(e,n,c)};lb.bind(o,n,r),e.delegates[n]=r}},J5=We(J({},F3),{bindPendingEventDelegates(){const e=this;Ze.each(e._pendingNativeEvents,n=>{X5(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?X5(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(DE(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(ut(e.delegates,(r,c)=>{e.dom.unbind(DE(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}}),CU=e=>re(e)?{value:e.split(/[ ,]/),valid:!0}:et(e,re)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},wU=e=>{const n=(()=>{switch(e){case"array":return Fn;case"boolean":return cn;case"function":return ue;case"number":return Ps;case"object":return Ut;case"string":return re;case"string[]":return CU;case"object[]":return o=>et(o,Ut);case"regexp":return o=>Qe(o,RegExp);default:return mt}})();return o=>Xr(o,n,`The value must be a ${e}.`)},V3=e=>re(e.processor),Q5=(e,n)=>{const o=ba(n.message)?"":`. ${n.message}`;return e+o},eI=e=>e.valid,Xr=(e,n,o="")=>{const r=n(e);return cn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},SU=(e,n,o)=>{if(!Go(n)){const r=Xr(n,o);if(eI(r))return r.value;console.error(Q5(`Invalid default value passed for the "${e}" option`,r))}},xU=(e,n)=>{const o={},r={},c=(R,F,Y)=>{const ee=Xr(F,Y);return eI(ee)?(r[R]=ee.value,!0):(console.warn(Q5(`Invalid value passed for the ${R} option`,ee)),!1)},u=(R,F)=>{const Y=V3(F)?wU(F.processor):F.processor,ee=SU(R,F.default,Y);o[R]=We(J({},F),{default:ee,processor:Y}),vo(r,R).orThunk(()=>vo(n,R)).each(X=>c(R,X,Y))},f=R=>tn(o,R);return{register:u,isRegistered:f,get:R=>vo(r,R).orThunk(()=>vo(o,R).map(F=>F.default)).getOrUndefined(),set:(R,F)=>{if(f(R)){const Y=o[R];return Y.immutable?(console.error(`"${R}" is an immutable option and cannot be updated`),!1):c(R,F,Y.processor)}else return console.warn(`"${R}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:R=>{const F=f(R);return F&&delete r[R],F},isSet:R=>tn(r,R)}},z3=["design","readonly"],U3=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&ab(e,u.editorReadOnly),n.set(r),n_(e,r)},W3=(e,n,o,r)=>{if(r!==o.get()){if(!tn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?U3(e,o,n,r):e.on("init",()=>U3(e,o,n,r))}},TU=(e,n,o)=>{if(an(z3,n))throw new Error(`Cannot override default mode ${n}`);return We(J({},e),{[n]:We(J({},o),{deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}})})},EU=e=>{const n=Va("design"),o=Va({design:{activate:Fe,deactivate:Fe,editorReadOnly:!1},readonly:{activate:Fe,deactivate:Fe,editorReadOnly:!0}});return q5(e),vU(e),{isReadOnly:()=>Vg(e),set:r=>W3(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(TU(o.get(),r,c))}}},Z3=Ze.each,j3=Ze.explode,kU={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},tI=Ze.makeMap("alt,ctrl,shift,meta,access"),_U=e=>e in tI,OU=e=>{const n={},o=so.os.isMacOS()||so.os.isiOS();Z3(j3(e.toLowerCase(),"+"),u=>{_U(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=kU[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in tI)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class ub{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(Z3(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return Z3(j3(Ze.trim(n)),b=>{const C=u.createShortcut(b,o,f,c);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Ze.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Ze.map(j3(n,">"),OU);return u[u.length-1]=Ze.extend(u[u.length-1],{func:r,scope:c||this.editor}),Ze.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const Lm=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},C=(N,R)=>(F,Y)=>{N[F.toLowerCase()]=We(J({},Y),{type:R})},E=(N,R)=>r[N.toLowerCase()]=R;return{addButton:C(e,"button"),addGroupToolbarButton:C(e,"grouptoolbarbutton"),addToggleButton:C(e,"togglebutton"),addMenuButton:C(e,"menubutton"),addSplitButton:C(e,"splitbutton"),addMenuItem:C(n,"menuitem"),addNestedMenuItem:C(n,"nestedmenuitem"),addToggleMenuItem:C(n,"togglemenuitem"),addAutocompleter:C(o,"autocompleter"),addContextMenu:C(c,"contextmenu"),addContextToolbar:C(u,"contexttoolbar"),addContextForm:C(u,"contextform"),addSidebar:C(f,"sidebar"),addView:C(b,"views"),addIcon:E,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},AU=()=>{const e=Lm();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},db=rs.DOM,nI=Ze.extend,DU=Ze.each;class RE{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,nI(this,J5);const c=this;this.id=n,this.hidden=!1;const u=U9(r.defaultOptions,o);this.options=xU(c,u),dk(c);const f=this.options.get;f("deprecation_warnings")&&Z6(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const E=nv(c);E&&(Ti.ScriptLoader._setReferrerPolicy(E),rs.DOM.styleSheetLoader._setReferrerPolicy(E));const N=xh(c);ze(N)&&rs.DOM.styleSheetLoader._setContentCssCors(N),nl.languageLoad=f("language_load"),nl.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new qu(jw(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=lg(c),this.hasVisual=xk(c),this.shortcuts=new ub(this),this.editorCommands=new j5(this),lZ(this);const R=f("cache_suffix");R&&(so.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:AU(),styleSheetLoader:void 0,show:Fe,hide:Fe,setEnabled:Fe,isEnabled:mt},this.mode=EU(c),r.dispatch("SetupEditor",{editor:this});const F=iS(c);ue(F)&&F.call(c,c)}render(){L9(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Wh(this)}translate(n){return $u.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(ze(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:mt,default:o})),!c.isSet(n)&&!Go(o)?o:c.get(n)}hasPlugin(n,o){return an(e1(this),n)?o?Ud.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(db.show(n.getContainer()),db.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(db.hide(n.getContainer()),db.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c=We(J({},n),{load:!0}),u=lm(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",We(J({},c),{element:r})),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c=We(J({},n),{save:!0,element:r});let u=o.getContent(c);const f=We(J({},c),{content:u});if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,lm(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=db.getParent(o.id,"form");b&&DU(b.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return hA(this,n,o)}getContent(n){return vN(this,n)}insertContent(n,o){o&&(n=nI({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?hA(this,this.startContent,{format:"raw"}):hA(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||db.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=db.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=uS(c);return ue(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||Ut(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){A3(this,n)}remove(){K6(this)}destroy(n){Y6(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const M0=rs.DOM,ME=Ze.each;let oI=!1,NE,Pi=[];const BE=e=>{const n=e.type;ME(gp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},sI=e=>{if(e!==oI){const n=rs.DOM;e?(n.bind(window,"resize",BE),n.bind(window,"scroll",BE)):(n.unbind(window,"resize",BE),n.unbind(window,"scroll",BE)),oI=e}},rI=e=>{const n=Pi;return Pi=jt(Pi,o=>e!==o),gp.activeEditor===e&&(gp.activeEditor=Pi.length>0?Pi[0]:null),gp.focusedEditor===e&&(gp.focusedEditor=null),n.length!==Pi.length},RU=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(rI(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},MU=document.compatMode!=="CSS1Compat",gp=We(J({},F3),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.2",releaseDate:"2023-04-26",i18n:$u,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=qu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new qu(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new qu(e.baseURL),e.suffix=o,k_(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&ut(r,(c,u)=>{nl.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Ze.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(N,R)=>N.inline&&R.tagName.toLowerCase()in r,u=N=>{let R=N.id;return R||(R=vo(N,"name").filter(F=>!M0.get(F)).getOrThunk(M0.uniqueId),N.setAttribute("id",R)),R},f=N=>{const R=e[N];if(R)return R.apply(n,[])},b=N=>so.browser.isIE()||so.browser.isEdge()?(i2("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):MU?(i2("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):re(N.selector)?M0.select(N.selector):ze(N.target)?[N.target]:[];let C=N=>{o=N};const E=()=>{let N=0;const R=[];let F;const Y=(ee,j,X)=>{const fe=new RE(ee,j,n);R.push(fe),fe.on("init",()=>{++N===F.length&&C(R)}),fe.targetElm=fe.targetElm||X,fe.render()};M0.unbind(window,"ready",E),f("onpageload"),F=Rr(b(e)),Ze.each(F,ee=>{RU(n.get(ee.id))}),F=Ze.grep(F,ee=>!n.get(ee.id)),F.length===0?C([]):ME(F,ee=>{c(e,ee)?i2("Could not initialize inline editor on invalid inline target element",ee):Y(u(ee),e,ee)})};return M0.bind(window,"ready",E),new Promise(N=>{o?N(o):C=R=>{N(R)}})},get(e){return arguments.length===0?Pi.slice(0):re(e)?us(Pi,n=>n.id===e).getOr(null):Ps(e)&&Pi[e]?Pi[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Pi.push(e),sI(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),NE||(NE=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",NE))),e},createEditor(e,n){return this.add(new RE(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Pi.length-1;r>=0;r--)n.remove(Pi[r]);return}if(re(e)){ME(M0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,Q(n.get(o.id))?null:(rI(o)&&n.dispatch("RemoveEditor",{editor:o}),Pi.length===0&&window.removeEventListener("beforeunload",NE),o.remove(),sI(Pi.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Ut(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new RE(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{ME(Pi,e=>{e.save()})},addI18n:(e,n)=>{$u.add(e,n)},translate:e=>$u.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new qu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new qu(this.baseURL)}});gp.setup();const NU=(()=>{const e=ms(),n=u=>({items:u,types:Is(u),getType:f=>vo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),aI=Math.min,N0=Math.max,PE=Math.round,cI=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,C=n.h,E=(o||"").split("");return E[0]==="b"&&(c+=C),E[1]==="r"&&(r+=b),E[0]==="c"&&(c+=PE(C/2)),E[1]==="c"&&(r+=PE(b/2)),E[3]==="b"&&(c-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(c-=PE(f/2)),E[4]==="c"&&(r-=PE(u/2)),B0(r,c,u,f)},BU=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=cI(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},PU=(e,n,o)=>B0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),$U=(e,n)=>{const o=N0(e.x,n.x),r=N0(e.y,n.y),c=aI(e.x+e.w,n.x+n.w),u=aI(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:B0(o,r,c-o,u-r)},IU=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,C=n.y+n.h,E=N0(0,n.x-r),N=N0(0,n.y-c),R=N0(0,u-b),F=N0(0,f-C);return r+=E,c+=N,o&&(u+=E,f+=N,r-=R,c-=F),u-=R,f-=F,B0(r,c,u-r,f-c)},B0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),LU={inflate:PU,relativePosition:cI,findBestRelativePosition:BU,intersect:$U,clamp:IU,create:B0,fromClientRect:e=>B0(e.left,e.top,e.width,e.height)},FU=(e,n,o=1e3)=>{let r=!1,c=null;const u=E=>(...N)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),E.apply(null,N))},f=u(e),b=u(n);return{start:(...E)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},HU=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,C=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const E=new Promise((N,R)=>{const F=FU(N,R);n[u]=F.resolve,Ti.ScriptLoader.loadScript(f).then(()=>F.start(C),()=>F.reject(b))});return e[u]=E,E}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),VU=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let P0;try{const e="__storage_test__";P0=window.localStorage,P0.setItem(e,e),P0.removeItem(e)}catch(e){P0=VU()}var zU=P0;const UU={geom:{Rect:LU},util:{Delay:Rs,Tools:Ze,VK:At,URI:qu,EventDispatcher:L3,Observable:F3,I18n:$u,LocalStorage:zU,ImageUploader:i8},dom:{EventUtils:Ta,TreeWalker:Er,TextSeeker:og,DOMUtils:rs,ScriptLoader:Ti,RangeUtils:Tg,Serializer:fA,StyleSheetLoader:kd,ControlSelection:T1,BookmarkManager:wf,Selection:uA,Event:Ta.Event},html:{Styles:bm,Entities:tl,Node:ci,Schema:Pl,DomParser:q1,Writer:kD,Serializer:Zh},Env:so,AddOnManager:nl,Annotator:ri,Formatter:Yu,UndoManager:SA,EditorCommands:j5,WindowManager:l2,NotificationManager:c2,EditorObservable:J5,Shortcuts:ub,Editor:RE,FocusManager:jv,EditorManager:gp,DOM:rs.DOM,ScriptLoader:Ti.ScriptLoader,PluginManager:Ud,ThemeManager:Ku,ModelManager:s0,IconManager:pT,Resource:HU,FakeClipboard:NU,trim:Ze.trim,isArray:Ze.isArray,is:Ze.is,toArray:Ze.toArray,makeMap:Ze.makeMap,each:Ze.each,map:Ze.map,grep:Ze.grep,inArray:Ze.inArray,extend:Ze.extend,walk:Ze.walk,resolve:Ze.resolve,explode:Ze.explode,_addCacheSuffix:Ze._addCacheSuffix},lI=Ze.extend(gp,UU),WU=e=>{try{it.exports=e}catch(n){}};(e=>{window.tinymce=e,window.tinyMCE=e})(lI),WU(lI)})()})(dj);var YG=dj.exports;const lj=SG(YG);(function(){const it=Object.getPrototypeOf,en=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},Yt=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&en(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},sn=t=>s=>Yt(s)===t,An=t=>s=>typeof s===t,eo=t=>s=>t===s,ao=(t,s)=>Bt(t)&&en(t,s,(a,l)=>it(a)===l),kt=sn("string"),Bt=sn("object"),xs=t=>ao(t,Object),Ln=sn("array"),Ts=eo(null),Ho=An("boolean"),Nn=eo(void 0),Mo=t=>t==null,Jn=t=>!Mo(t),dt=An("function"),ur=An("number"),Qe=(t,s)=>{if(Ln(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},re=()=>{},Ut=t=>()=>t(),Ba=(t,s)=>(...a)=>t(s.apply(null,a)),Fn=(t,s)=>a=>t(s(a)),Q=t=>()=>t,cn=t=>t,Go=(t,s)=>t===s;function Jt(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const ze=t=>s=>!t(s),ue=t=>()=>{throw new Error(t)},Ps=t=>t(),et=Q(!1),Fe=Q(!0);class O{constructor(s,a){this.tag=s,this.value=a}static some(s){return new O(!0,s)}static none(){return O.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?O.some(s(this.value)):O.none()}bind(s){return this.tag?s(this.value):O.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:O.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s!=null?s:"Called getOrDie on None")}static from(s){return Jn(s)?O.some(s):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const gn=Array.prototype.slice,Ge=Array.prototype.indexOf,Dn=Array.prototype.push,Ht=(t,s)=>Ge.call(t,s),Ve=(t,s)=>{const a=Ht(t,s);return a===-1?O.none():O.some(a)},So=(t,s)=>Ht(t,s)>-1,qo=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return!0}return!1},xo=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},nr=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const d=gn.call(t,l,l+s);a.push(d)}return a},Ne=(t,s)=>{const a=t.length,l=new Array(a);for(let d=0;d<a;d++){const g=t[d];l[d]=s(g,d)}return l},mt=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];s(d,a)}},V=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},vc=(t,s)=>{const a=[],l=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:l).push(p)}return{pass:a,fail:l}},Sn=(t,s)=>{const a=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&a.push(g)}return a},Ws=(t,s,a)=>(V(t,(l,d)=>{a=s(a,l,d)}),a),vn=(t,s,a)=>(mt(t,(l,d)=>{a=s(a,l,d)}),a),cd=(t,s,a)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return O.some(g);if(a(g,l))break}return O.none()},an=(t,s)=>cd(t,s,et),Xo=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return O.some(a)}return O.none()},Vt=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!Ln(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Dn.apply(s,t[a])}return s},Ie=(t,s)=>Vt(Ne(t,s)),ac=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Sr=t=>{const s=gn.call(t,0);return s.reverse(),s},jt=(t,s)=>Sn(t,a=>!So(s,a)),cl=(t,s)=>{const a={};for(let l=0,d=t.length;l<d;l++){const g=t[l];a[String(g)]=s(g,l)}return a},Jo=t=>[t],ll=(t,s)=>{const a=gn.call(t,0);return a.sort(s),a},us=(t,s)=>s>=0&&s<t.length?O.some(t[s]):O.none(),Dr=t=>us(t,0),Wc=t=>us(t,t.length-1),ea=dt(Array.from)?Array.from:t=>gn.call(t),Es=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return O.none()},Vo=Object.keys,di=Object.hasOwnProperty,Ko=(t,s)=>{const a=Vo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];s(p,g)}},Qo=(t,s)=>No(t,(a,l)=>({k:l,v:s(a,l)})),No=(t,s)=>{const a={};return Ko(t,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},To=t=>(s,a)=>{t[a]=s},$s=(t,s,a,l)=>{Ko(t,(d,g)=>{(s(d,g)?a:l)(d,g)})},dr=(t,s)=>{const a={},l={};return $s(t,s,To(a),To(l)),{t:a,f:l}},cc=(t,s)=>{const a={};return $s(t,s,To(a),re),a},Rr=(t,s)=>{const a=[];return Ko(t,(l,d)=>{a.push(s(l,d))}),a},Is=(t,s)=>{const a=Vo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];if(s(p,g,t))return O.some(p)}return O.none()},zr=t=>Rr(t,cn),ut=(t,s)=>Bn(t,s)?O.from(t[s]):O.none(),Bn=(t,s)=>di.call(t,s),Pa=(t,s)=>Bn(t,s)&&t[s]!==void 0&&t[s]!==null,Ks=(t,s,a=Go)=>t.exists(l=>a(l,s)),El=(t,s,a=Go)=>yc(t,s,a).getOr(t.isNone()&&s.isNone()),il=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},$o=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return O.none()}return O.some(s)},yc=(t,s,a)=>t.isSome()&&s.isSome()?O.some(a(t.getOrDie(),s.getOrDie())):O.none(),lc=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?O.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):O.none(),vo=(t,s)=>t!=null?O.some(s(t)):O.none(),tn=(t,s)=>t?O.some(s):O.none(),Ur=(t,s)=>t+s,Cc=(t,s)=>t.substring(s),wc=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Sc=(t,s)=>es(t,s)?Cc(t,s.length):t,ks=(t,s)=>mr(t,s)?t:Ur(t,s),or=(t,s,a=0,l)=>{const d=t.indexOf(s,a);return d!==-1?Nn(l)?!0:d+s.length<=l:!1},es=(t,s)=>wc(t,s,0),mr=(t,s)=>wc(t,s,t.length-s.length),ts=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),ha=t=>t.length>0,ns=t=>!ha(t),fr=t=>t.style!==void 0&&dt(t.style.getPropertyValue),Tc=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return ta(l.childNodes[0])},mi=(t,s)=>{const l=(s||document).createElement(t);return ta(l)},Zc=(t,s)=>{const l=(s||document).createTextNode(t);return ta(l)},ta=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},pe={fromHtml:Tc,fromTag:mi,fromText:Zc,fromDom:ta,fromPoint:(t,s,a)=>O.from(t.dom.elementFromPoint(s,a)).map(ta)},Mr=typeof window!="undefined"?window:Function("return this;")(),jl=(t,s)=>{let a=s!=null?s:Mr;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},ul=(t,s)=>{const a=t.split(".");return jl(a,s)},Cu=(t,s)=>ul(t,s),Oo=(t,s)=>{const a=Cu(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Jd=Object.getPrototypeOf,Li=t=>Oo("HTMLElement",t),dl=t=>{const s=ul("ownerDocument.defaultView",t);return Bt(t)&&(Li(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Jd(t).constructor.name))},pa=9,_s=11,Io=1,ml=3,Ga=t=>t.dom.nodeName.toLowerCase(),Ec=t=>t.dom.nodeType,kl=t=>s=>Ec(s)===t,_l=t=>mo(t)&&dl(t.dom),mo=kl(Io),ba=kl(ml),jc=kl(pa),kc=kl(_s),$a=t=>s=>mo(s)&&Ga(s)===t,sr=(t,s)=>{const a=t.dom;if(a.nodeType!==Io)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},ls=t=>t.nodeType!==Io&&t.nodeType!==pa&&t.nodeType!==_s||t.childElementCount===0,ld=(t,s)=>{const a=s===void 0?document:s.dom;return ls(a)?[]:Ne(a.querySelectorAll(t),pe.fromDom)},Fi=(t,s)=>{const a=s===void 0?document:s.dom;return ls(a)?O.none():O.from(a.querySelector(t)).map(pe.fromDom)},Eo=(t,s)=>t.dom===s.dom,Nr=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},na=t=>pe.fromDom(t.dom.ownerDocument),Os=t=>jc(t)?t:na(t),fi=t=>pe.fromDom(Os(t).dom.documentElement),qa=t=>pe.fromDom(Os(t).dom.defaultView),oa=t=>O.from(t.dom.parentNode).map(pe.fromDom),ic=t=>O.from(t.dom.parentElement).map(pe.fromDom),Hi=(t,s)=>{const a=dt(s)?s:et;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,p=pe.fromDom(g);if(d.push(p),a(p)===!0)break;l=g}return d},gi=t=>O.from(t.dom.offsetParent).map(pe.fromDom),wu=t=>O.from(t.dom.nextSibling).map(pe.fromDom),sa=t=>Ne(t.dom.childNodes,pe.fromDom),Gc=(t,s)=>{const a=t.dom.childNodes;return O.from(a[s]).map(pe.fromDom)},hi=t=>Gc(t,0),fl=(t,s)=>({element:t,offset:s}),Vi=(t,s)=>{const a=sa(t);return a.length>0&&s<a.length?fl(a[s],0):fl(t,s)},Z=t=>kc(t)&&Jn(t.dom.host),ce=dt(Element.prototype.attachShadow)&&dt(Node.prototype.getRootNode),ge=Q(ce),_e=ce?t=>pe.fromDom(t.dom.getRootNode()):Os,Ke=t=>Z(t)?t:pe.fromDom(Os(t).dom.body),Gt=t=>ko(t).isSome(),ko=t=>{const s=_e(t);return Z(s)?O.some(s):O.none()},Ys=t=>pe.fromDom(t.dom.host),to=t=>{if(ge()&&Jn(t.target)){const s=pe.fromDom(t.target);if(mo(s)&&Xs(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Dr(a)}}return O.from(t.target)},Xs=t=>Jn(t.dom.shadowRoot),no=t=>{const s=ba(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return ko(pe.fromDom(s)).fold(()=>a.body.contains(s),Fn(no,Ys))},vs=()=>_c(pe.fromDom(document)),_c=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return pe.fromDom(s)},uc=(t,s,a)=>{if(kt(a)||Ho(a)||ur(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},bn=(t,s,a)=>{uc(t.dom,s,a)},so=(t,s)=>{const a=t.dom;Ko(s,(l,d)=>{uc(a,d,l)})},Br=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},P=(t,s)=>O.from(Br(t,s)),G=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},te=(t,s)=>{t.dom.removeAttribute(s)},Te=t=>vn(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),wt=(t,s,a)=>{if(!kt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);fr(t)&&t.style.setProperty(s,a)},xn=(t,s)=>{fr(t)&&t.style.removeProperty(s)},_t=(t,s,a)=>{const l=t.dom;wt(l,s,a)},rr=(t,s)=>{const a=t.dom;Ko(s,(l,d)=>{wt(a,d,l)})},xr=(t,s)=>{const a=t.dom;Ko(s,(l,d)=>{l.fold(()=>{xn(a,d)},g=>{wt(a,d,g)})})},Ze=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!no(t)?gr(a,s):d},gr=(t,s)=>fr(t)?t.style.getPropertyValue(s):"",As=(t,s)=>{const a=t.dom,l=gr(a,s);return O.from(l).filter(d=>d.length>0)},Pr=t=>{const s={},a=t.dom;if(fr(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},Wm=(t,s,a)=>{const l=pe.fromTag(t);return _t(l,s,a),As(l,s).isSome()},Vn=(t,s)=>{const a=t.dom;xn(a,s),Ks(P(t,"style").map(ts),"")&&te(t,"style")},Gl=t=>t.dom.offsetWidth,Ia=(t,s)=>{const a=(y,x)=>{if(!ur(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const _=y.dom;fr(_)&&(_.style[t]=x+"px")},l=y=>{const x=s(y);if(x<=0||x===null){const _=Ze(y,t);return parseFloat(_)||0}return x},d=l,g=(y,x)=>vn(x,(_,D)=>{const B=Ze(y,D),I=B===void 0?0:parseInt(B,10);return isNaN(I)?_:_+I},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(y,x,_)=>{const D=g(y,_);return x>D?x-D:0}}},Js=Ia("height",t=>{const s=t.dom;return no(t)?s.getBoundingClientRect().height:s.offsetHeight}),hr=t=>Js.get(t),ql=t=>Js.getOuter(t),vb=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Js.max(t,s,a);_t(t,"max-height",l+"px")},Lf=(t,s)=>({left:t,top:s,translate:(l,d)=>Lf(t+l,s+d)}),ys=Lf,pr=t=>{const s=t.getBoundingClientRect();return ys(s.left,s.top)},Su=(t,s)=>t!==void 0?t:s!==void 0?s:0,va=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===t.dom)return ys(a.offsetLeft,a.offsetTop);const g=Su(l==null?void 0:l.pageYOffset,d.scrollTop),p=Su(l==null?void 0:l.pageXOffset,d.scrollLeft),y=Su(d.clientTop,a.clientTop),x=Su(d.clientLeft,a.clientLeft);return zi(t).translate(p-x,g-y)},zi=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?ys(l.offsetLeft,l.offsetTop):no(t)?pr(s):ys(0,0)},Qd=Ia("width",t=>t.dom.offsetWidth),zo=(t,s)=>Qd.set(t,s),ya=t=>Qd.get(t),Wr=t=>Qd.getOuter(t),em=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Qd.max(t,s,a);_t(t,"max-width",l+"px")},Ui=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},Uo=(t,s,a,l)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),y=p||l("(pointer:coarse)"),x=d||!g&&p&&l("(min-device-width:768px)"),_=g||p&&!x,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,B=!_&&!x&&!D;return{isiPad:Q(d),isiPhone:Q(g),isTablet:Q(x),isPhone:Q(_),isTouch:Q(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Q(D),isDesktop:Q(B)}},La=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},gl=(t,s)=>{const a=La(t,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return Oc(l(1),l(2))},id=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Kl():gl(t,a)},Kl=()=>Oc(0,0),Oc=(t,s)=>({major:t,minor:s}),Qs={nu:Oc,detect:id,unknown:Kl},Ca=(t,s)=>Es(s.brands,a=>{const l=a.brand.toLowerCase();return an(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Qs.nu(parseInt(a.version,10),0)}))}),Ka=(t,s)=>{const a=String(s).toLowerCase();return an(t,l=>l.search(a))},Ac=(t,s)=>Ka(t,s).map(a=>{const l=Qs.detect(a.versionRegexes,s);return{current:a.name,version:l}}),ra=(t,s)=>Ka(t,s).map(a=>{const l=Qs.detect(a.versionRegexes,s);return{current:a.name,version:l}}),Ls=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dc=t=>s=>or(s,t),tm=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>or(t,"edge/")&&or(t,"chrome")&&or(t,"safari")&&or(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ls],search:t=>or(t,"chrome")&&!or(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>or(t,"msie")||or(t,"trident")},{name:"Opera",versionRegexes:[Ls,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dc("firefox")},{name:"Safari",versionRegexes:[Ls,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(or(t,"safari")||or(t,"mobile/"))&&or(t,"applewebkit")}],Wi=[{name:"Windows",search:dc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>or(t,"iphone")||or(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dc("linux"),versionRegexes:[]},{name:"Solaris",search:dc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Zi={browsers:Q(tm),oses:Q(Wi)},Zm="Edge",qc="Chromium",ji="IE",ud="Opera",Zs="Firefox",nm="Safari",xu=()=>Tu({current:void 0,version:Qs.unknown()}),Tu=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(Zm),isChromium:l(qc),isIE:l(ji),isOpera:l(ud),isFirefox:l(Zs),isSafari:l(nm)}},dd={unknown:xu,nu:Tu,edge:Q(Zm),chromium:Q(qc),ie:Q(ji),opera:Q(ud),firefox:Q(Zs),safari:Q(nm)},md="Windows",fd="iOS",Eu="Android",jm="Linux",Gm="macOS",Gi="Solaris",vp="FreeBSD",ne="ChromeOS",gd=()=>Ya({current:void 0,version:Qs.unknown()}),Ya=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(md),isiOS:l(fd),isAndroid:l(Eu),isMacOS:l(Gm),isLinux:l(jm),isSolaris:l(Gi),isFreeBSD:l(vp),isChromeOS:l(ne)}},Ff={unknown:gd,nu:Ya,windows:Q(md),ios:Q(fd),android:Q(Eu),linux:Q(jm),macos:Q(Gm),solaris:Q(Gi),freebsd:Q(vp),chromeos:Q(ne)},Cp={detect:(t,s,a)=>{const l=Zi.browsers(),d=Zi.oses(),g=s.bind(x=>Ca(l,x)).orThunk(()=>Ac(l,t)).fold(dd.unknown,dd.nu),p=ra(d,t).fold(Ff.unknown,Ff.nu),y=Uo(p,g,t,a);return{browser:g,os:p,deviceType:y}}},ho=t=>window.matchMedia(t).matches;let hl=Ui(()=>Cp.detect(navigator.userAgent,O.from(navigator.userAgentData),ho));const Fa=()=>hl(),Dc=(t,s,a,l,d,g,p)=>({target:t,x:s,y:a,stop:l,prevent:d,kill:g,raw:p}),Zg=t=>{const s=pe.fromDom(to(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Ba(l,a);return Dc(s,t.clientX,t.clientY,a,l,d,t)},pi=(t,s)=>a=>{t(a)&&s(Zg(a))},Kc=(t,s,a,l,d)=>{const g=pi(a,l);return t.dom.addEventListener(s,g,d),{unbind:Jt(jg,t,s,g,d)}},om=(t,s,a,l)=>Kc(t,s,a,l,!1),Hf=(t,s,a,l)=>Kc(t,s,a,l,!0),jg=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},mc=(t,s)=>{oa(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},hd=(t,s)=>{wu(t).fold(()=>{oa(t).each(d=>{Rc(d,s)})},l=>{mc(l,s)})},Gg=(t,s)=>{hi(t).fold(()=>{Rc(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},Rc=(t,s)=>{t.dom.appendChild(s.dom)},Zr=(t,s,a)=>{Gc(t,a).fold(()=>{Rc(t,s)},l=>{mc(l,s)})},pd=(t,s)=>{mt(s,a=>{Rc(t,a)})},bd=t=>{t.dom.textContent="",mt(sa(t),s=>{pl(s)})},pl=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Xa=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return ys(a,l)},qm=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Km=t=>{const s=t===void 0?window:t;return Fa().browser.isFirefox()?O.none():O.from(s.visualViewport)},Ym=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),Xm=t=>{const s=t===void 0?window:t,a=s.document,l=Xa(pe.fromDom(a));return Km(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Ym(l.left,l.top,g,p)},d=>Ym(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},Ol=()=>pe.fromDom(document),sm=(t,s)=>t.view(s).fold(Q([]),l=>{const d=t.owner(l),g=sm(t,d);return[l].concat(g)}),qg=(t,s)=>{const a=s.owner(t),l=sm(s,a);return O.some(l)};var rm=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?O.none():O.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(pe.fromDom)},owner:t=>na(t)});const Vf=t=>{const s=Ol(),a=Xa(s);return qg(t,rm).fold(Jt(va,t),d=>{const g=zi(t),p=Ws(d,(y,x)=>{const _=zi(x);return{left:y.left+_.left,top:y.top+_.top}},{left:0,top:0});return ys(p.left+g.left+a.left,p.top+g.top+a.top)})},bi=(t,s,a)=>({point:t,width:s,height:a}),zf=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),is=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),k=t=>{const s=va(t),a=Wr(t),l=ql(t);return is(s.left,s.top,a,l)},M=t=>{const s=Vf(t),a=Wr(t),l=ql(t);return is(s.left,s.top,a,l)},z=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,y=g-l;return is(a,l,p,y)},ae=(t,s)=>vn(s,(a,l)=>z(a,l),t),le=()=>Xm(window);var lt=tinymce.util.Tools.resolve("tinymce.ThemeManager");const qt=t=>{const s=g=>g(t),a=Q(t),l=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:Fe,isError:et,map:g=>at.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>O.some(t)};return d},mn=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:et,isError:Fe,map:s,mapError:l=>at.error(l(t)),bind:s,exists:et,forall:Fe,getOr:cn,or:cn,getOrThunk:Ps,orThunk:Ps,getOrDie:ue(String(t)),each:re,toOptional:O.none};return a},at={value:qt,error:mn,fromOption:(t,s)=>t.fold(()=>mn(s),qt)};var _o;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(_o||(_o={}));const $r=(t,s,a)=>t.stype===_o.Error?s(t.serror):a(t.svalue),Yc=t=>{const s=[],a=[];return mt(t,l=>{$r(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},am=(t,s)=>t.stype===_o.Error?{stype:_o.Error,serror:s(t.serror)}:t,Uf=(t,s)=>t.stype===_o.Value?{stype:_o.Value,svalue:s(t.svalue)}:t,Yl=(t,s)=>t.stype===_o.Value?s(t.svalue):t,Xc=(t,s)=>t.stype===_o.Error?s(t.serror):t,Ja=t=>({stype:_o.Value,svalue:t}),bl=t=>({stype:_o.Error,serror:t}),yo={fromResult:t=>t.fold(bl,Ja),toResult:t=>$r(t,at.error,at.value),svalue:Ja,partition:Yc,serror:bl,bind:Yl,bindError:Xc,map:Uf,mapError:am,fold:$r},ku=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),vd=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),js=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Cb=(t,s)=>s,W0=(t,s)=>xs(t)&&xs(s)?Yo(t,s):s,_u=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)Bn(d,g)&&(a[g]=t(a[g],d[g]))}return a},Yo=_u(W0),os=_u(Cb),Tr=()=>({tag:"required",process:{}}),yd=t=>({tag:"defaultedThunk",process:t}),Cd=t=>yd(Q(t)),cm=()=>({tag:"option",process:{}}),wd=t=>({tag:"mergeWithThunk",process:t}),zn=t=>wd(Q(t)),Yg=(t,s)=>t.length>0?yo.svalue(Yo(s,os.apply(void 0,t))):yo.svalue(s),wp=t=>Ba(yo.serror,Vt)(t),Wf={consolidateObj:(t,s)=>{const a=yo.partition(t);return a.errors.length>0?wp(a.errors):Yg(a.values,s)},consolidateArr:t=>{const s=yo.partition(t);return s.errors.length>0?wp(s.errors):yo.svalue(s.values)}},wb=t=>Bt(t)&&Vo(t).length>100?" removed due to size":JSON.stringify(t,null,2),Zf=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Q("... (only showing first ten failures)")}]):t;return Ne(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Xl=(t,s)=>yo.serror([{path:t,getErrorInfo:s}]),Sb=(t,s,a)=>Xl(t,()=>'Could not find valid *required* value for "'+s+'" in '+wb(a)),Xg=(t,s)=>Xl(t,()=>'Choice schema did not contain choice key: "'+s+'"'),xb=(t,s,a)=>Xl(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+wb(s)),vi=(t,s)=>Xl(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Sp=(t,s)=>Xl(t,Q(s)),yi=t=>{const s=(l,d)=>yo.bindError(t(d),g=>Sp(l,g)),a=Q("val");return{extract:s,toString:a}},Jm=yi(yo.svalue),Tb=(t,s,a,l)=>ut(s,a).fold(()=>Sb(t,a,s),l),Jg=(t,s,a,l)=>{const d=ut(t,s).getOrThunk(()=>a(t));return l(d)},xp=(t,s,a)=>a(ut(t,s)),Tp=(t,s,a,l)=>{const d=ut(t,s).map(g=>g===!0?a(t):g);return l(d)},wa=(t,s,a,l,d)=>{const g=y=>d.extract(s.concat([l]),y),p=y=>y.fold(()=>yo.svalue(O.none()),x=>{const _=d.extract(s.concat([l]),x);return yo.map(_,O.some)});switch(t.tag){case"required":return Tb(s,a,l,g);case"defaultedThunk":return Jg(a,l,t.process,g);case"option":return xp(a,l,p);case"defaultedOptionThunk":return Tp(a,l,t.process,p);case"mergeWithThunk":return Jg(a,l,Q({}),y=>{const x=Yo(t.process(a),y);return g(x)})}},Ep=(t,s,a)=>{const l={},d=[];for(const g of a)js(g,(p,y,x,_)=>{const D=wa(x,t,s,p,_);yo.fold(D,B=>{d.push(...B)},B=>{l[y]=B})},(p,y)=>{l[p]=y(s)});return d.length>0?yo.serror(d):yo.svalue(l)},Er=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),Sd=t=>Vo(cc(t,Jn)),Mc=t=>{const s=Me(t),a=Ws(t,(d,g)=>js(g,p=>Yo(d,{[p]:!0}),Q(d)),{});return{extract:(d,g)=>{const p=Ho(g)?[]:Sd(g),y=Sn(p,x=>!Pa(a,x));return y.length===0?s.extract(d,g):vi(d,y)},toString:s.toString}},Me=t=>({extract:(l,d)=>Ep(l,d,t),toString:()=>`obj{
`+Ne(t,d=>js(d,(g,p,y,x)=>g+" -> "+x.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Ci=t=>({extract:(l,d)=>{const g=Ne(d,(p,y)=>t.extract(l.concat(["["+y+"]"]),p));return Wf.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Al=(t,s)=>{const a=s!==void 0?s:cn;return{extract:(g,p)=>{const y=[];for(const x of t){const _=x.extract(g,p);if(_.stype===_o.Value)return{stype:_o.Value,svalue:a(_.svalue)};y.push(_)}return Wf.consolidateArr(y)},toString:()=>"oneOf("+Ne(t,g=>g.toString()).join(", ")+")"}},Ou=(t,s)=>{const a=(g,p)=>Ci(yi(t)).extract(g,p);return{extract:(g,p)=>{const y=Vo(p),x=a(g,y);return yo.bind(x,_=>{const D=Ne(_,B=>ku(B,B,Tr(),s));return Me(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},kp=(t,s)=>{const a=Ui(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},_p=Ba(Ci,Me),Sa=Q(Jm),Au=(t,s)=>yi(a=>{const l=typeof a;return t(a)?yo.svalue(a):yo.serror(`Expected type: ${s} but got: ${l}`)}),Jl=Au(ur,"number"),ca=Au(kt,"string"),lm=Au(Ho,"boolean"),Je=Au(dt,"function"),Op=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Op(t[s]));default:return!1}},G0=yi(t=>Op(t)?yo.svalue(t):yo.serror("Expected value to be acceptable for sending via postMessage")),Du=(t,s,a,l)=>ut(a,l).fold(()=>xb(t,a,l),g=>g.extract(t.concat(["branch: "+l]),s)),wi=(t,s)=>({extract:(d,g)=>ut(g,t).fold(()=>Xg(d,t),y=>Du(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+Vo(s)}),Qg=()=>Ci(Jm),Ds=t=>yi(s=>t(s).fold(yo.serror,yo.svalue)),Qm=(t,s)=>Ou(a=>yo.fromResult(t(a)),s),Si=(t,s,a)=>{const l=s.extract([t],a);return yo.mapError(l,d=>({input:a,errors:d}))},En=(t,s,a)=>yo.toResult(Si(t,s,a)),vl=t=>t.fold(s=>{throw new Error(Jc(s))},cn),Nc=(t,s,a)=>vl(En(t,s,a)),Jc=t=>`Errors: 
`+Zf(t.errors).join(`
`)+`

Input object: `+wb(t.input),Bc=(t,s)=>wi(t,Qo(s,Me)),Dl=(t,s)=>kp(t,s),Ao=ku,Qa=vd,eh=t=>Ds(s=>So(t,s)?at.value(s):at.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ue=t=>Ao(t,t,Tr(),Sa()),Pc=(t,s)=>Ao(t,t,Tr(),s),jf=t=>Pc(t,Jl),br=t=>Pc(t,ca),qi=(t,s)=>Ao(t,t,Tr(),eh(s)),Ap=t=>Pc(t,lm),Ql=t=>Pc(t,Je),q0=(t,s)=>Ao(t,t,cm(),yi(a=>yo.serror("The field: "+t+" is forbidden. "+s))),Ru=(t,s)=>Ao(t,t,Tr(),Me(s)),Eb=(t,s)=>Ao(t,t,Tr(),_p(s)),Qc=(t,s)=>Ao(t,t,Tr(),Ci(s)),po=t=>Ao(t,t,cm(),Sa()),Ki=(t,s)=>Ao(t,t,cm(),s),Gf=t=>Ki(t,Jl),vr=t=>Ki(t,ca),$c=(t,s)=>Ki(t,eh(s)),im=t=>Ki(t,Je),qf=(t,s)=>Ki(t,Ci(s)),la=(t,s)=>Ki(t,Me(s)),th=(t,s)=>Ki(t,Mc(s)),ye=(t,s)=>Ao(t,t,Cd(s),Sa()),ec=(t,s,a)=>Ao(t,t,Cd(s),a),ef=(t,s)=>ec(t,s,Jl),Ha=(t,s)=>ec(t,s,ca),Rl=(t,s,a)=>ec(t,s,eh(a)),tc=(t,s)=>ec(t,s,lm),Ir=(t,s)=>ec(t,s,Je),K0=(t,s)=>ec(t,s,G0),nh=(t,s,a)=>ec(t,s,Ci(a)),w=(t,s,a)=>ec(t,s,Me(a)),S=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},W={generate:t=>{if(!Ln(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return mt(t,(l,d)=>{const g=Vo(l);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],y=l[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ln(y))throw new Error("case arguments must be an array");s.push(p),a[p]=(...x)=>{const _=x.length;if(_!==y.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+y.length+" ("+y+"), got "+_);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,x)},match:B=>{const I=Vo(B);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!ac(s,q=>So(I,q)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return B[p].apply(null,x)},log:B=>{}}}}),a}};W.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ie=t=>{const s=[],a=[];return mt(t,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Oe=(t,s)=>{const a={};return Ko(t,(l,d)=>{So(s,d)||(a[d]=l)}),a},tt=(t,s)=>({[t]:s}),Et=t=>{const s={};return mt(t,a=>{s[a.key]=a.value}),s},hn=(t,s)=>Oe(t,s),pn=(t,s)=>tt(t,s),fo=t=>Et(t),Lo=(t,s)=>t.length===0?at.value(s):at.value(Yo(s,os.apply(void 0,t))),Cs=t=>at.error(Vt(t)),Ic=(t,s)=>{const a=ie(t);return a.errors.length>0?Cs(a.errors):Lo(a.values,s)},xa=t=>dt(t)?t:et,Mu=(t,s,a)=>{let l=t.dom;const d=xa(a);for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l),p=s(g);if(p.isSome())return p;if(d(g))break}return O.none()},Ml=(t,s,a)=>{const l=s(t),d=xa(a);return l.orThunk(()=>d(t)?O.none():Mu(t,s,d))},um=(t,s)=>Eo(t.element,s.event.target),Kf={can:Fe,abort:et,run:re},Nl=t=>{if(!Pa(t,"can")&&!Pa(t,"abort")&&!Pa(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return J(J({},Kf),t)},dm=(t,s)=>(...a)=>vn(t,(l,d)=>l&&s(d).apply(void 0,a),!0),oh=(t,s)=>(...a)=>vn(t,(l,d)=>l||s(d).apply(void 0,a),!1),sh=t=>dt(t)?{can:Fe,abort:et,run:t}:t,tf=t=>{const s=dm(t,d=>d.can),a=oh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{mt(t,g=>{g.run.apply(void 0,d)})}}},jr=Q,Yi=jr("touchstart"),Gn=jr("touchmove"),ss=jr("touchend"),fc=jr("touchcancel"),Wo=jr("mousedown"),rh=jr("mousemove"),mm=jr("mouseout"),fm=jr("mouseup"),ei=jr("mouseover"),nf=jr("focusin"),kb=jr("focusout"),Bl=jr("keydown"),of=jr("keyup"),xd=jr("input"),Xi=jr("change"),xi=jr("click"),Dp=jr("transitioncancel"),ah=jr("transitionend"),X2=jr("transitionstart"),WE=jr("selectstart"),er=t=>Q("alloy."+t),ZE={tap:er("tap")},Td=er("focus"),Y0=er("blur.post"),X0=er("paste.post"),Gs=er("receive"),Lc=er("execute"),ch=er("focus.item"),Yf=ZE.tap,J2=er("longpress"),lh=er("sandbox.close"),Rp=er("typeahead.cancel"),_b=er("system.init"),jE=er("system.touchmove"),J0=er("system.touchend"),Mp=er("system.scroll"),Xf=er("system.resize"),Ed=er("system.attached"),Nu=er("system.detached"),gm=er("system.dismissRequested"),Ob=er("system.repositionRequested"),sf=er("focusmanager.shifted"),Q0=er("slotcontainer.visibility"),Q2=er("system.external.element.scroll"),ey=er("change.tab"),ew=er("dismiss.tab"),ty=er("highlight"),Ab=er("dehighlight"),co=(t,s)=>{ih(t,t.element,s,{})},Wt=(t,s,a)=>{ih(t,t.element,s,a)},kd=t=>{co(t,Lc())},Np=(t,s,a)=>{ih(t,s,a,{})},ih=(t,s,a,l)=>{const d=J({target:s},l);t.getSystem().triggerEvent(a,s,d)},GE=(t,s,a,l)=>{const d=We(J({},l),{target:s});t.getSystem().triggerEvent(a,s,d)},Db=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},ds=t=>fo(t),ny=(t,s)=>({key:t,value:Nl({abort:s})}),tw=(t,s)=>({key:t,value:Nl({can:s})}),nw=t=>({key:t,value:Nl({run:(s,a)=>{a.event.prevent()}})}),je=(t,s)=>({key:t,value:Nl({run:s})}),Bp=(t,s,a)=>({key:t,value:Nl({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),qE=t=>s=>je(t,s),_d=t=>s=>({key:t,value:Nl({run:(a,l)=>{um(a,l)&&s(a,l)}})}),Rb=(t,s)=>je(t,(a,l)=>{a.getSystem().getByUid(s).each(d=>{Db(d,d.element,t,l)})}),uh=(t,s,a)=>{const l=s.partUids[a];return Rb(t,l)},Pp=(t,s)=>je(t,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Ml(d.target,y=>a.getSystem().getByDom(y).toOptional(),et).getOr(a));s(a,g,l)}),Jf=t=>je(t,(s,a)=>{a.cut()}),hm=t=>je(t,(s,a)=>{a.stop()}),dh=(t,s)=>_d(t)(s),qs=_d(Ed()),el=_d(Nu()),mh=_d(_b()),Od=qE(Lc()),KE=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,sa(pe.fromDom(l))},Mb=t=>t.dom.innerHTML,pm=(t,s)=>{const l=na(t).dom,d=pe.fromDom(l.createDocumentFragment()),g=KE(s,l);pd(d,g),bd(t),Rc(t,d)},eD=t=>{const s=pe.fromTag("div"),a=pe.fromDom(t.dom.cloneNode(!0));return Rc(s,a),Mb(s)},ow=(t,s)=>pe.fromDom(t.dom.cloneNode(s)),tl=t=>ow(t,!1),Nb=t=>{if(Z(t))return"#shadow-root";{const s=tl(t);return eD(s)}},Bu=t=>Nb(t),YE=(t,s,a)=>Eo(s,t.element)&&!Eo(s,a),fh=ds([tw(Td(),(t,s)=>{const a=s.event,l=a.originator,d=a.target;return YE(t,l,d)?(console.warn(Td()+` did not get interpreted by the desired target. 
Originator: `+Bu(l)+`
Target: `+Bu(d)+`
Check the `+Td()+" event handlers"),!1):!0})]);var Fc=Object.freeze({__proto__:null,events:fh});let rf=0;const Ot=t=>{const a=new Date().getTime(),l=Math.floor(Math.random()*1e9);return rf++,t+"_"+l+rf+String(a)},sw=Q("alloy-id-"),nc=Q("data-alloy-id"),rw=sw(),oy=nc(),XE=(t,s)=>{const a=Ot(rw+t);return $p(s,a),a},$p=(t,s)=>{Object.defineProperty(t.dom,oy,{value:s,writable:!0})},Pl=t=>{const s=mo(t)?t.dom[oy]:null;return O.from(s)},bm=t=>Ot(t),aw=cn,Qf=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Bu(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:Q("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:et}},JE=Qf(),cw=(t,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),p=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:gh(p.slice(0,1).concat(p.slice(3)))}),t},gh=t=>Ne(t,s=>mr(s,"/*")?s.substring(0,s.length-2):s),eg=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:gh(g)}),t},Bb=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:gh(g.slice(1))}),t},tg=Ot("alloy-premade"),Pb=t=>(Object.defineProperty(t.element.dom,tg,{value:t.uid,writable:!0}),pn(tg,t)),Ip=t=>Bn(t.dom,tg),$b=t=>ut(t,tg),af=t=>Bb((s,...a)=>t(s.getApis(),s,...a),t),Pu={init:()=>Ta({readState:Q("No State required")})},Ta=t=>t,Lp=(t,s)=>{const a=Ne(s,d=>la(d.name(),[Ue("config"),ye("state",Pu)])),l=En("component.behaviours",Me(a),t.behaviours).fold(d=>{throw new Error(Jc(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},cn);return{list:s,data:Qo(l,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return Q(g)})}},lw=t=>t.list,Ib=t=>t.data,sy=(t,s)=>{const a={};return Ko(t,(l,d)=>{Ko(l,(g,p)=>{const y=ut(a,p).getOr([]);a[p]=y.concat([s(d,g)])})}),a},$l=t=>({classes:Nn(t.classes)?[]:t.classes,attributes:Nn(t.attributes)?{}:t.attributes,styles:Nn(t.styles)?{}:t.styles}),QE=(t,s)=>We(J({},t),{attributes:J(J({},t.attributes),s.attributes),styles:J(J({},t.styles),s.styles),classes:t.classes.concat(s.classes)}),Ad=(t,s,a,l)=>{const d=J({},s);mt(a,D=>{d[D.name()]=D.exhibit(t,l)});const g=sy(d,(D,B)=>({name:D,modification:B})),p=D=>Ws(D,(B,I)=>J(J({},I.modification),B),{}),y=Ws(g.classes,(D,B)=>B.modification.concat(D),[]),x=p(g.attributes),_=p(g.styles);return $l({classes:y,attributes:x,styles:_})},hh=(t,s,a,l)=>{try{const d=ll(a,(g,p)=>{const y=g[s],x=p[s],_=l.indexOf(y),D=l.indexOf(x);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(l,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(l,null,2));return _<D?-1:D<_?1:0});return at.value(d)}catch(d){return at.error([d])}},iw=(t,s)=>({handler:t,purpose:s}),uw=(t,s)=>({cHandler:t,purpose:s}),ek=(t,s)=>uw(Jt.apply(void 0,[t.handler].concat(s)),t.purpose),rs=t=>t.cHandler,tk=(t,s)=>({name:t,handler:s}),nk=(t,s)=>{const a={};return mt(t,l=>{a[l.name()]=l.handlers(s)}),a},dw=(t,s,a)=>{const l=J(J({},a),nk(s,t));return sy(l,tk)},Lb=(t,s,a,l)=>{const d=dw(t,a,l);return Fb(d,s)},mw=t=>{const s=sh(t);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Ti=(t,s)=>at.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ne(s,a=>a.name),null,2)]),Va=(t,s,a)=>{const l=s[a];return l?hh("Event: "+a,"name",t,l).map(d=>{const g=Ne(d,p=>p.handler);return tf(g)}):Ti(a,t)},Fb=(t,s)=>{const a=Rr(t,(l,d)=>(l.length===1?at.value(l[0].handler):Va(l,s,d)).map(p=>{const y=mw(p),x=l.length>1?Sn(s[d],_=>qo(l,D=>D.name===_)).join(" > "):l[0].name;return pn(d,iw(y,x))}));return Ic(a,{})},vm="alloy.base.behaviour",ng=Me([Ao("dom","dom",Tr(),Me([Ue("tag"),ye("styles",{}),ye("classes",[]),ye("attributes",{}),po("value"),po("innerHtml")])),Ue("components"),Ue("uid"),ye("events",{}),ye("apis",{}),Ao("eventOrder","eventOrder",zn({[Lc()]:["disabling",vm,"toggling","typeaheadevents"],[Td()]:[vm,"focusing","keying"],[_b()]:[vm,"disabling","toggling","representing"],[xd()]:[vm,"representing","streaming","invalidating"],[Nu()]:[vm,"representing","item-events","tooltipping"],[Wo()]:["focusing",vm,"item-type-events"],[Yi()]:["focusing",vm,"item-type-events"],[ei()]:["item-type-events","tooltipping"],[Gs()]:["receiving","reflecting","tooltipping"]}),Sa()),po("domModification")]),Ea=t=>En("custom.definition",ng,t),fw=t=>We(J({},t.dom),{uid:t.uid,domChildren:Ne(t.components,s=>s.element)}),gw=t=>t.domModification.fold(()=>$l({}),$l),tD=t=>t.events,hw=(t,s)=>{const a=Br(t,s);return a===void 0||a===""?[]:a.split(" ")},cf=(t,s,a)=>{const d=hw(t,s).concat([a]);return bn(t,s,d.join(" ")),!0},lf=(t,s,a)=>{const l=Sn(hw(t,s),d=>d!==a);return l.length>0?bn(t,s,l.join(" ")):te(t,s),!1},Hb=t=>t.dom.classList!==void 0,pw=t=>hw(t,"class"),$u=(t,s)=>cf(t,"class",s),nl=(t,s)=>lf(t,"class",s),Gr=(t,s)=>{Hb(t)?t.dom.classList.add(s):$u(t,s)},bw=t=>{(Hb(t)?t.dom.classList:pw(t)).length===0&&te(t,"class")},ms=(t,s)=>{Hb(t)?t.dom.classList.remove(s):nl(t,s),bw(t)},gc=(t,s)=>Hb(t)&&t.dom.classList.contains(s),Ji=(t,s)=>{mt(s,a=>{Gr(t,a)})},hc=(t,s)=>{mt(s,a=>{ms(t,a)})},ym=(t,s)=>ac(s,a=>gc(t,a)),Fp=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},uf=t=>Hb(t)?Fp(t):pw(t),ti=t=>t.dom.value,Ei=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},ry=(t,s,a)=>Gc(t,s).map(d=>{if(a.exists(p=>!Eo(p,d))){const p=a.map(Ga).getOr("span"),y=pe.fromTag(p);return mc(d,y),y}else return d}),Hp=(t,s,a)=>{a.fold(()=>Rc(t,s),l=>{Eo(l,s)||(mc(l,s),pl(l))})},vw=(t,s,a)=>{const l=Ne(s,a),d=sa(t);return mt(d.slice(l.length),pl),l},ay=(t,s,a,l)=>{const d=Gc(t,s),g=l(a,d),p=ry(t,s,d);return Hp(t,g.element,p),g},yw=(t,s,a)=>vw(t,s,(l,d)=>ay(t,d,l,a)),ph=(t,s)=>vw(t,s,(a,l)=>{const d=Gc(t,l);return Hp(t,a,d),a}),Cw=(t,s)=>{const a=Vo(t),l=Vo(s),d=jt(l,a),g=dr(t,(p,y)=>!Bn(s,y)||p!==s[y]).t;return{toRemove:d,toSet:g}},ok=(t,s)=>{const $e=Te(s),{class:a,style:l}=$e,d=G2($e,["class","style"]),{toSet:g,toRemove:p}=Cw(t.attributes,d),y=()=>{mt(p,Be=>te(s,Be)),so(s,g)},x=Pr(s),{toSet:_,toRemove:D}=Cw(t.styles,x),B=()=>{mt(D,Be=>Vn(s,Be)),rr(s,_)},I=uf(s),H=jt(I,t.classes),q=jt(t.classes,I),se=()=>{Ji(s,q),hc(s,H)},Ce=Be=>{pm(s,Be)},he=()=>{const Be=t.domChildren;ph(s,Be)},me=()=>{const Be=s,ct=t.value.getOrUndefined();ct!==ti(Be)&&Ei(Be,ct!=null?ct:"")};return y(),se(),B(),t.innerHtml.fold(he,Ce),me(),s},sk=t=>{const s=pe.fromTag(t.tag);so(s,t.attributes),Ji(s,t.classes),rr(s,t.styles),t.innerHtml.each(l=>pm(s,l));const a=t.domChildren;return pd(s,a),t.value.each(l=>{Ei(s,l)}),s},cy=(t,s)=>{try{const a=ok(t,s);return O.some(a)}catch(a){return O.none()}},ww=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Sw=(t,s)=>{const a=d=>Ga(d)===t.tag&&!ww(t)&&!Ip(d),l=s.filter(a).bind(d=>cy(t,d)).getOrThunk(()=>sk(t));return $p(l,t.uid),l},xw=t=>{const s=ut(t,"behaviours").getOr({});return Ie(Vo(s),a=>{const l=s[a];return Jn(l)?[l.me]:[]})},Tw=(t,s)=>Lp(t,s),df=t=>{const s=xw(t);return Tw(t,s)},Ew=(t,s,a)=>{const l=fw(t),d=gw(t),g={"alloy.base.modification":d},p=s.length>0?Ad(a,g,s,l):d;return QE(l,p)},kw=(t,s,a)=>{const l={"alloy.base.behaviour":tD(t)};return Lb(a,t.eventOrder,s,l).getOrDie()},rk=(t,s)=>{const a=()=>$e,l=S(JE),d=vl(Ea(t)),g=df(t),p=lw(g),y=Ib(g),x=Ew(d,p,y),_=Sw(x,s),D=kw(d,p,y),B=S(d.components),I=Be=>{l.set(Be)},H=()=>{l.set(Qf(a))},q=()=>{const Be=sa(_),ct=Ie(Be,qe=>l.get().getByDom(qe).fold(()=>[],Jo));B.set(ct)},se=Be=>{const ct=y;return(dt(ct[Be.name()])?ct[Be.name()]:()=>{throw new Error("Could not find "+Be.name()+" in "+JSON.stringify(t,null,2))})()},Ce=Be=>dt(y[Be.name()]),he=()=>d.apis,me=Be=>y[Be]().map(ct=>ct.state.readState()).getOr("not enabled"),$e={uid:t.uid,getSystem:l.get,config:se,hasConfigured:Ce,spec:t,readState:me,getApis:he,connect:I,disconnect:H,element:_,syncComponents:q,components:B.get,events:D};return $e},_w=(t,s)=>{const a=ut(t,"components").getOr([]);return s.fold(()=>Ne(a,ka),l=>Ne(a,(d,g)=>Vp(d,Gc(l,g))))},og=(t,s)=>{const p=aw(t),{events:a}=p,l=G2(p,["events"]),d=_w(l,s),g=We(J({},l),{events:J(J({},Fc),a),components:d});return at.value(rk(g,s))},Fs=t=>{const s=pe.fromText(t);return Cm({element:s})},Cm=t=>{const s=Nc("external.component",Mc([Ue("element"),po("uid")]),t),a=S(Qf()),l=y=>{a.set(y)},d=()=>{a.set(Qf(()=>p))},g=s.uid.getOrThunk(()=>bm("external"));$p(s.element,g);const p={uid:g,getSystem:a.get,config:O.none,hasConfigured:et,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:Q("No state"),syncComponents:re,components:Q([]),events:{}};return Pb(p)},Ow=bm,ak=t=>Bn(t,"uid"),Vp=(t,s)=>$b(t).getOrThunk(()=>{const a=ak(t)?t:J({uid:Ow("")},t);return og(a,s).getOrDie()}),ka=t=>Vp(t,O.none()),yl=Pb;var ly=(t,s,a,l,d)=>t(a,l)?O.some(a):dt(d)&&d(a)?O.none():s(a,l,d);const Vb=(t,s,a)=>{let l=t.dom;const d=dt(a)?a:et;for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l);if(s(g))return O.some(g);if(d(g))break}return O.none()},zb=(t,s,a)=>ly((d,g)=>g(d),Vb,t,s,a),ck=(t,s)=>{const a=d=>s(pe.fromDom(d));return an(t.dom.childNodes,a).map(pe.fromDom)},Aw=(t,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=pe.fromDom(l.childNodes[d]);if(s(g))return O.some(g);const p=a(l.childNodes[d]);if(p.isSome())return p}return O.none()};return a(t.dom)},zp=(t,s,a)=>zb(t,s,a).isSome(),Cl=(t,s,a)=>Vb(t,l=>sr(l,s),a),Dw=(t,s)=>ck(t,a=>sr(a,s)),Hs=(t,s)=>Fi(s,t),Qi=(t,s,a)=>ly((d,g)=>sr(d,g),Cl,t,s,a),Dd="aria-controls",lk=t=>zb(t,a=>{if(!mo(a))return!1;const l=Br(a,"id");return l!==void 0&&l.indexOf(Dd)>-1}).bind(a=>{const l=Br(a,"id"),d=_e(a);return Hs(d,`[${Dd}="${l}"]`)}),iy=()=>{const t=Ot(Dd);return{id:t,link:l=>{bn(l,Dd,t)},unlink:l=>{te(l,Dd)}}},Rw=(t,s)=>lk(s).exists(a=>mf(t,a)),mf=(t,s)=>zp(s,a=>Eo(a,t.element),et)||Rw(t,s),Mw="unknown";var Rd;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Rd||(Rd={}));const uy=S({}),Up=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();So(["mousemove","mouseover","mouseout",_b()],t)||(d-l,s.dom,Ne(a,g=>So(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Bu(g.target)+")":g.outcome))}}},dy=(t,s,a)=>{switch(ut(uy.get(),t).orThunk(()=>{const d=Vo(uy.get());return Es(d,g=>t.indexOf(g)>-1?O.some(uy.get()[g]):O.none())}).getOr(Rd.NORMAL)){case Rd.NORMAL:return a(Nw());case Rd.LOGGING:{const d=Up(t,s),g=a(d);return d.write(),g}case Rd.STOP:return!0}},Ub=["alloy/data/Fields","alloy/debugging/Debugging"],Wp=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return an(s,a=>a.indexOf("alloy")>0&&!qo(Ub,l=>a.indexOf(l)>-1)).getOr(Mw)}else return Mw},my={logEventCut:re,logEventStopped:re,logNoParent:re,logEventNoHandlers:re,logEventResponse:re,write:re},Zp=(t,s,a)=>dy(t,s,a),Nw=Q(my),wm=Q([Ue("menu"),Ue("selectedMenu")]),Wb=Q([Ue("item"),Ue("selectedItem")]);Q(Me(Wb().concat(wm())));const Bw=Q(Me(Wb())),fy=Ru("initSize",[Ue("numColumns"),Ue("numRows")]),ff=()=>Pc("markers",Bw()),Md=()=>Ru("markers",[Ue("backgroundMenu")].concat(wm()).concat(Wb())),sg=t=>Ru("markers",Ne(t,Ue)),De=(t,s,a)=>(Wp(),Ao(s,s,a,Ds(l=>at.value((...d)=>l.apply(void 0,d))))),qn=t=>De("onHandler",t,Cd(re)),tr=t=>De("onKeyboardHandler",t,Cd(O.none)),rg=t=>De("onHandler",t,Tr()),jp=t=>De("onKeyboardHandler",t,Tr()),Co=(t,s)=>Qa(t,Q(s)),gy=t=>Qa(t,cn),Gp=Q(fy),ia=(t,s,a,l,d,g,p,y=!1)=>({x:t,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:y}),Nd=W.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ik=(t,s,a,l,d,g,p,y,x)=>t.fold(s,a,l,d,g,p,y,x),Pw=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),$w=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),bh=Nd.southeast,vh=Nd.southwest,Zb=Nd.northeast,hy=Nd.northwest,ol=Nd.south,yh=Nd.north,qp=Nd.east,Iw=Nd.west,ag=(t,s,a,l)=>{const d=t+s;return d>l?a:d<a?l:d},ni=(t,s,a)=>Math.min(Math.max(t,s),a),py=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},za=(t,s)=>cl(["left","right","top","bottom"],a=>ut(s,a).map(l=>py(t,l))),Lw=(t,s,a)=>{const l=(x,_)=>s[x].map(D=>{const B=x==="top"||x==="bottom",I=B?a.top:a.left,q=(x==="left"||x==="top"?Math.max:Math.min)(D,_)+I;return B?ni(q,t.y,t.bottom):ni(q,t.x,t.right)}).getOr(_),d=l("left",t.x),g=l("top",t.y),p=l("right",t.right),y=l("bottom",t.bottom);return is(d,g,p-d,y-g)},Sm="layout",jb=t=>t.x,by=(t,s)=>t.x+t.width/2-s.width/2,Fw=(t,s)=>t.x+t.width-s.width,vy=(t,s)=>t.y-s.height,Gb=t=>t.y+t.height,yy=(t,s)=>t.y+t.height/2-s.height/2,uk=t=>t.x+t.width,Cy=(t,s)=>t.x-s.width,Ua=(t,s,a)=>ia(jb(t),Gb(t),a.southeast(),bh(),"southeast",za(t,{left:1,top:3}),Sm),qr=(t,s,a)=>ia(Fw(t,s),Gb(t),a.southwest(),vh(),"southwest",za(t,{right:0,top:3}),Sm),Il=(t,s,a)=>ia(jb(t),vy(t,s),a.northeast(),Zb(),"northeast",za(t,{left:1,bottom:2}),Sm),Vs=(t,s,a)=>ia(Fw(t,s),vy(t,s),a.northwest(),hy(),"northwest",za(t,{right:0,bottom:2}),Sm),ki=(t,s,a)=>ia(by(t,s),vy(t,s),a.north(),yh(),"north",za(t,{bottom:2}),Sm),zs=(t,s,a)=>ia(by(t,s),Gb(t),a.south(),ol(),"south",za(t,{top:3}),Sm),wy=(t,s,a)=>ia(uk(t),yy(t,s),a.east(),qp(),"east",za(t,{left:0}),Sm),Sy=(t,s,a)=>ia(Cy(t,s),yy(t,s),a.west(),Iw(),"west",za(t,{right:1}),Sm),Hw=()=>[Ua,qr,Il,Vs,zs,ki,wy,Sy],qb=()=>[qr,Ua,Vs,Il,zs,ki,wy,Sy],Kp=()=>[Il,Vs,Ua,qr,ki,zs],Kb=()=>[Vs,Il,qr,Ua,ki,zs],Yb=()=>[Ua,qr,Il,Vs,zs,ki],Yp=()=>[qr,Ua,Vs,Il,zs,ki],Vw=(t,s)=>s.universal?t:Sn(t,a=>So(s.channels,a));var Uw=Object.freeze({__proto__:null,events:t=>ds([je(Gs(),(s,a)=>{const l=t.channels,d=Vo(l),g=a,p=Vw(d,g);mt(p,y=>{const x=l[y],_=x.schema,D=Nc("channel["+y+`] data
Receiver: `+Bu(s.element),_,g.data);x.onReceive(s,D)})})])}),xy=[Pc("channels",Qm(at.value,Mc([rg("onReceive"),ye("schema",Sa())])))];const Xb=(t,s,a)=>Od(l=>{a(l,t,s)}),Jb=(t,s,a)=>mh((l,d)=>{a(l,t,s)}),Rt=(t,s,a,l,d,g)=>{const p=Mc(t),y=la(s,[th("config",t)]);return Zw(p,y,s,a,l,d,g)},Ty=(t,s,a,l,d,g)=>{const p=t,y=la(s,[Ki("config",t)]);return Zw(p,y,s,a,l,d,g)},Ww=(t,s,a)=>cw((d,...g)=>{const p=[d].concat(g);return d.config({name:Q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},y=>{const x=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,y.config,y.state].concat(x))})},a,s),dk=t=>({key:t,value:void 0}),Zw=(t,s,a,l,d,g,p)=>{const y=B=>Pa(B,a)?B[a]():O.none(),x=Qo(d,(B,I)=>Ww(a,B,I)),_=Qo(g,(B,I)=>eg(B,I)),D=We(J(J({},_),x),{revoke:Jt(dk,a),config:B=>{const I=Nc(a+"-config",t,B);return{key:a,value:{config:I,me:D,configAsRaw:Ui(()=>Nc(a+"-config",t,B)),initialConfig:B,state:p}}},schema:Q(s),exhibit:(B,I)=>yc(y(B),ut(l,"exhibit"),(H,q)=>q(I,H.config,H.state)).getOrThunk(()=>$l({})),name:Q(a),handlers:B=>y(B).map(I=>ut(l,"events").getOr(()=>({}))(I.config,I.state)).getOr({})});return D},nt=t=>fo(t),jw=Mc([Ue("fields"),Ue("name"),ye("active",{}),ye("apis",{}),ye("state",Pu),ye("extra",{})]),Wa=t=>{const s=Nc("Creating behaviour: "+t.name,jw,t);return Rt(s.fields,s.name,s.active,s.apis,s.extra,s.state)},mk=Mc([Ue("branchKey"),Ue("branches"),Ue("name"),ye("active",{}),ye("apis",{}),ye("state",Pu),ye("extra",{})]),Ey=t=>{const s=Nc("Creating behaviour: "+t.name,mk,t);return Ty(Bc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},fk=Q(void 0),kr=Wa({fields:xy,name:"receiving",active:Uw});var gk=Object.freeze({__proto__:null,exhibit:(t,s)=>$l({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const eu=t=>t.dom.focus(),ky=t=>t.dom.blur(),Xp=t=>{const s=_e(t).dom;return t.dom===s.activeElement},Bd=(t=Ol())=>O.from(t.dom.activeElement).map(pe.fromDom),tu=t=>Bd(_e(t)).filter(s=>t.dom.contains(s.dom)),ev=(t,s)=>{const a=_e(s),l=Bd(a).bind(g=>{const p=y=>Eo(g,y);return p(s)?O.some(s):Aw(s,p)}),d=t(s);return l.each(g=>{Bd(a).filter(p=>Eo(p,g)).fold(()=>{eu(g)},re)}),d},nu=(t,s,a,l,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},Gw=t=>We(J({},t),{position:O.some(t.position)}),_y=(t,s)=>{xr(t,Gw(s))},tv=W.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),gf=(t,s,a,l,d,g)=>{const p=s.rect,y=p.x-a,x=p.y-l,_=p.width,D=p.height,B=d-(y+_),I=g-(x+D),H=O.some(y),q=O.some(x),se=O.some(B),Ce=O.some(I),he=O.none();return ik(s.direction,()=>nu(t,H,q,he,he),()=>nu(t,he,q,se,he),()=>nu(t,H,he,he,Ce),()=>nu(t,he,he,se,Ce),()=>nu(t,H,q,he,he),()=>nu(t,H,he,he,Ce),()=>nu(t,H,q,he,he),()=>nu(t,he,q,se,he))},qw=(t,s)=>t.fold(()=>{const a=s.rect;return nu("absolute",O.some(a.x),O.some(a.y),O.none(),O.none())},(a,l,d,g)=>gf("absolute",s,a,l,d,g),(a,l,d,g)=>gf("fixed",s,a,l,d,g)),Oy=(t,s)=>{const a=Jt(Vf,s),l=t.fold(a,a,()=>{const p=Xa();return Vf(s).translate(-p.left,-p.top)}),d=Wr(s),g=ql(s);return is(l.left,l.top,d,g)},hk=(t,s)=>s.fold(()=>t.fold(le,le,is),a=>t.fold(Q(a),Q(a),()=>{const l=nv(t,a.x,a.y);return is(l.left,l.top,a.width,a.height)})),nv=(t,s,a)=>{const l=ys(s,a),d=()=>{const g=Xa();return l.translate(-g.left,-g.top)};return t.fold(Q(l),Q(l),d)},Jp=(t,s,a,l)=>t.fold(s,a,l);tv.none;const Za=tv.relative,Kw=tv.fixed,Ch=(t,s)=>({anchorBox:t,origin:s}),Yw=(t,s)=>Ch(t,s),ov="data-alloy-placement",Xw=(t,s)=>{bn(t,ov,s)},Jw=t=>P(t,ov),pk=t=>te(t,ov),wh=W.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),bk=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y,right:x,bottom:_,width:D,height:B}=t,I=p>=a&&p<=d,H=y>=l&&y<=g,q=I&&H,se=x<=d&&x>=a,Ce=_<=g&&_>=l,he=se&&Ce,me=Math.min(D,p>=a?d-p:x-a),$e=Math.min(B,y>=l?g-y:_-l);return{originInBounds:q,sizeInBounds:he,visibleW:me,visibleH:$e}},Qw=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y,width:x,height:_}=t,D=Math.max(a,d-x),B=Math.max(l,g-_),I=ni(p,a,D),H=ni(y,l,B),q=Math.min(I+x,d)-I,se=Math.min(H+_,g)-H;return is(I,H,q,se)},sv=(t,s,a)=>{const l=Q(s.bottom-a.y),d=Q(a.bottom-s.y),g=Pw(t,d,d,l),p=Q(s.right-a.x),y=Q(a.right-s.x);return{maxWidth:$w(t,y,y,p),maxHeight:g}},eS=(t,s,a,l)=>{const d=t.bubble,g=d.offset,p=Lw(l,t.restriction,g),y=t.x+g.left,x=t.y+g.top,_=is(y,x,s,a),{originInBounds:D,sizeInBounds:B,visibleW:I,visibleH:H}=bk(_,p),q=D&&B,se=q?_:Qw(_,p),Ce=se.width>0&&se.height>0,{maxWidth:he,maxHeight:me}=sv(t.direction,se,l),$e={rect:se,maxHeight:me,maxWidth:he,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:x};return q||t.alwaysFit?wh.fit($e):wh.nofit($e,I,H,Ce)},cg=(t,s,a,l,d,g)=>{const p=l.width,y=l.height,x=(D,B,I,H,q)=>{const se=D(a,l,d,t,g),Ce=eS(se,p,y,g);return Ce.fold(Q(Ce),(he,me,$e,Be)=>(q===Be?$e>H||me>I:!q&&Be)?Ce:wh.nofit(B,I,H,q))};return vn(s,(D,B)=>{const I=Jt(x,B);return D.fold(Q(D),I)},wh.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:bh(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(cn,cn)},Qp=t=>{const s=S(O.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(O.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{a(),s.set(O.some(y))}}},Sh=()=>Qp(t=>t.destroy()),Iu=()=>Qp(t=>t.unbind()),Bo=()=>{const t=Qp(re),s=a=>t.get().each(a);return We(J({},t),{on:s})},tS=Fe,Hc=(t,s,a)=>om(t,s,tS,a),Ay=(t,s,a)=>Hf(t,s,tS,a),nS=Zg,oS=["top","bottom","right","left"],lg="data-alloy-transition-timer",vk=(t,s)=>ym(t,s.classes),sS=(t,s,a)=>a.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),rS=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return Is(s,(l,d)=>{const g=t[d].map(a),p=l.map(a);return!El(g,p)}).isSome()},yk=t=>{const s=g=>{const y=Ze(t,g).split(/\s*,\s*/);return Sn(y,ha)},a=g=>{if(kt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return mr(g,"ms")?p:p*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return vn(d,(g,p,y)=>{const x=a(l[y])+a(p);return Math.max(g,x)},0)},Ck=(t,s)=>{const a=Iu(),l=Iu();let d;const g=_=>{var D;const B=(D=_.raw.pseudoElement)!==null&&D!==void 0?D:"";return Eo(_.target,t)&&ns(B)&&So(oS,_.raw.propertyName)},p=_=>{if(Mo(_)||g(_)){a.clear(),l.clear();const D=_==null?void 0:_.raw.type;(Mo(D)||D===ah())&&(clearTimeout(d),te(t,lg),hc(t,s.classes))}},y=Hc(t,X2(),_=>{g(_)&&(y.unbind(),a.set(Hc(t,ah(),p)),l.set(Hc(t,Dp(),p)))}),x=yk(t);requestAnimationFrame(()=>{d=setTimeout(p,x+17),bn(t,lg,d)})},wk=(t,s)=>{Ji(t,s.classes),P(t,lg).each(a=>{clearTimeout(parseInt(a,10)),te(t,lg)}),Ck(t,s)},aS=(t,s,a,l,d,g)=>{const p=sS(l,d,g);if(p||vk(t,l)){_t(t,"position",a.position);const y=Oy(s,t),x=qw(s,We(J({},d),{rect:y})),_=cl(oS,D=>x[D]);rS(a,_)&&(xr(t,_),p&&wk(t,l),Gl(t))}else hc(t,l.classes)},xh=t=>({width:Wr(t),height:ql(t)}),e1=(t,s,a,l)=>{Vn(s,"max-height"),Vn(s,"max-width");const d=xh(s);return cg(s,l.preference,t,d,a,l.bounds)},Sk=(t,s)=>{const a=s.classes;hc(t,a.off),Ji(t,a.on)},ig=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},xk=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},Tk=(t,s,a)=>{const l=qw(a.origin,s);a.transition.each(d=>{aS(t,a.origin,l,d,s,a.lastPlacement)}),_y(t,l)},cS=(t,s)=>{Xw(t,s.placement)},lS=(t,s)=>{vb(t,Math.floor(s))},iS=Q((t,s)=>{lS(t,s),rr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),ug=Q((t,s)=>{lS(t,s)}),uS=(t,s,a)=>t[s]===void 0?a:t[s],Ek=(t,s,a,l,d,g,p,y)=>{const x=uS(p,"maxHeightFunction",iS()),_=uS(p,"maxWidthFunction",re),D=t.anchorBox,B=t.origin,I={bounds:hk(B,g),origin:B,preference:l,maxHeightFunction:x,maxWidthFunction:_,lastPlacement:d,transition:y};return kk(D,s,a,I)},kk=(t,s,a,l)=>{const d=e1(t,s,a,l);return Tk(s,d,l),cS(s,d),Sk(s,d),ig(s,d,l),xk(s,d,l),{layout:d.layout,placement:d.placement}},_k=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Th=(t,s,a,l=1)=>{const d=t*l,g=s*l,p=x=>ut(a,x).getOr([]),y=(x,_,D)=>{const B=jt(_k,D);return{offset:ys(x,_),classesOn:Ie(D,p),classesOff:Ie(B,p)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},dg=()=>Th(0,0,{}),rv=cn,av=(t,s)=>a=>dS(a)==="rtl"?s:t,dS=t=>Ze(t,"direction")==="rtl"?"rtl":"ltr";var Pd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Pd||(Pd={}));const cv="data-alloy-vertical-dir",mS=t=>zp(t,s=>mo(s)&&Br(s,"data-alloy-vertical-dir")===Pd.BottomToTop),Lu=()=>la("layouts",[Ue("onLtr"),Ue("onRtl"),po("onBottomLtr"),po("onBottomRtl")]),hf=(t,s,a,l,d,g,p)=>{const y=p.map(mS).getOr(!1),x=s.layouts.map(H=>H.onLtr(t)),_=s.layouts.map(H=>H.onRtl(t)),D=y?s.layouts.bind(H=>H.onBottomLtr.map(q=>q(t))).or(x).getOr(d):x.getOr(a),B=y?s.layouts.bind(H=>H.onBottomRtl.map(q=>q(t))).or(_).getOr(g):_.getOr(l);return av(D,B)(t)},Dy=(t,s,a)=>{const l=s.hotspot,d=Oy(a,l.element),g=hf(t.element,s,Yb(),Yp(),Kp(),Kb(),O.some(s.hotspot.element));return O.some(rv({anchorBox:d,bubble:s.bubble.getOr(dg()),overrides:s.overrides,layouts:g}))};var fS=[Ue("hotspot"),po("bubble"),ye("overrides",{}),Lu(),Co("placement",Dy)];const Ok=(t,s,a)=>{const l=nv(a,s.x,s.y),d=is(l.left,l.top,s.width,s.height),g=hf(t.element,s,Hw(),qb(),Hw(),qb(),O.none());return O.some(rv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var gS=[Ue("x"),Ue("y"),ye("height",0),ye("width",0),ye("bubble",dg()),ye("overrides",{}),Lu(),Co("placement",Ok)];const hS=W.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Ak=t=>t.fold(cn,(s,a,l)=>s.translate(-a,-l)),Dk=t=>t.fold(cn,cn),pS=t=>vn(t,(s,a)=>s.translate(a.left,a.top),ys(0,0)),lv=t=>{const s=Ne(t,Ak);return pS(s)},bS=t=>{const s=Ne(t,Dk);return pS(s)},Rk=hS.screen,Mk=hS.absolute,Nk=(t,s,a)=>{const l=qa(a.root).dom,d=g=>{const p=na(g),y=na(t.element);return Eo(p,y)};return O.from(l.frameElement).map(pe.fromDom).filter(d).map(va)},Ry=(t,s,a)=>{const l=na(t.element),d=Xa(l),g=Nk(t,s,a).getOr(d);return Mk(g,d.left,d.top)},vS=(t,s,a,l)=>{const d=Rk(ys(t,s));return O.some(bi(d,a,l))},yS=(t,s,a,l,d)=>t.map(g=>{const p=[s,g.point],y=Jp(l,()=>bS(p),()=>bS(p),()=>lv(p)),x=zf(y.left,y.top,g.width,g.height),_=a.showAbove?Kp():Yb(),D=a.showAbove?Kb():Yp(),B=hf(d,a,_,D,_,D,O.none());return rv({anchorBox:x,bubble:a.bubble.getOr(dg()),overrides:a.overrides,layouts:B})}),CS=(t,s,a)=>{const l=Ry(t,a,s);return s.node.filter(no).bind(d=>{const g=d.dom.getBoundingClientRect(),p=vS(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return yS(p,l,s,a,y)})};var wS=[Ue("node"),Ue("root"),po("bubble"),Lu(),ye("overrides",{}),ye("showAbove",!1),Co("placement",CS)];const t1="\uFEFF",My=" ",n1={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},iv=W.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),By=(t,s,a,l)=>t.fold(s,a,l),SS=t=>t.fold(cn,cn,cn),xS=iv.before,pf=iv.on,Bk=iv.after,TS={before:xS,on:pf,after:Bk,cata:By,getStart:SS},o1=W.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Pk=t=>o1.exact(t.start,t.soffset,t.finish,t.foffset),uv=t=>t.match({domRange:s=>pe.fromDom(s.startContainer),relative:(s,a)=>TS.getStart(s),exact:(s,a,l,d)=>s}),$k=o1.domRange,Ik=o1.relative,ES=o1.exact,mg=t=>{const s=uv(t);return qa(s)},s1=n1.create,r1={domRange:$k,relative:Ik,exact:ES,exactFromRange:Pk,getWin:mg,range:s1},Py=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},Lk=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},$y=(t,s,a)=>{const l=t.document.createRange();return Py(l,s),Lk(l,a),l},pc=(t,s,a,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},kS=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Eh=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?O.some(a).map(kS):O.none()},Fk=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?O.some(s).map(kS):O.none()},a1=W.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fg=(t,s,a)=>s(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset),gg=(t,s)=>s.match({domRange:a=>({ltr:Q(a),rtl:O.none}),relative:(a,l)=>({ltr:Ui(()=>$y(t,a,l)),rtl:Ui(()=>O.some($y(t,l,a)))}),exact:(a,l,d,g)=>({ltr:Ui(()=>pc(t,a,l,d,g)),rtl:Ui(()=>O.some(pc(t,d,g,a,l)))})}),dv=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>a1.rtl(pe.fromDom(d.endContainer),d.endOffset,pe.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>fg(t,a1.ltr,a)):fg(t,a1.ltr,a)},kh=(t,s)=>{const a=gg(t,s);return dv(t,a)},mv=(t,s)=>kh(t,s).match({ltr:(l,d,g,p)=>{const y=t.document.createRange();return y.setStart(l.dom,d),y.setEnd(g.dom,p),y},rtl:(l,d,g,p)=>{const y=t.document.createRange();return y.setStart(g.dom,p),y.setEnd(l.dom,d),y}});a1.ltr,a1.rtl;const bf=(t,s,a)=>Sn(Hi(t,a),s),_r=(t,s)=>ld(s,t),hg=(t,s,a,l)=>{const g=na(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,l),g},Iy=(t,s,a,l)=>{const d=hg(t,s,a,l),g=Eo(t,a)&&s===l;return d.collapsed&&!g},Hk=t=>O.from(t.getSelection()),Ly=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return O.some(n1.create(pe.fromDom(s.startContainer),s.startOffset,pe.fromDom(a.endContainer),a.endOffset))}else return O.none()},_h=t=>{if(t.anchorNode===null||t.focusNode===null)return Ly(t);{const s=pe.fromDom(t.anchorNode),a=pe.fromDom(t.focusNode);return Iy(s,t.anchorOffset,a,t.focusOffset)?O.some(n1.create(s,t.anchorOffset,a,t.focusOffset)):Ly(t)}},pg=t=>Hk(t).filter(s=>s.rangeCount>0).bind(_h),Fy=(t,s)=>{const a=mv(t,s);return Eh(a)},Oh=(t,s)=>{const a=mv(t,s);return Fk(a)},c1=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?O.from(g.dom.nodeValue):O.none();return{get:a,getOption:l,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(ba,"text"),_S=t=>c1.get(t),xm=(t,s)=>({element:t,offset:s}),fv=(t,s)=>{const a=sa(t);if(a.length===0)return xm(t,s);if(s<a.length)return xm(a[s],0);{const l=a[a.length-1],d=ba(l)?_S(l).length:sa(l).length;return xm(l,d)}},ua=(t,s)=>ba(t)?xm(t,s):fv(t,s),OS=(t,s)=>s.getSelection.getOrThunk(()=>()=>pg(t))().map(l=>{const d=ua(l.start,l.soffset),g=ua(l.finish,l.foffset);return r1.range(d.element,d.offset,g.element,g.offset)}),ou=(t,s,a)=>{const l=qa(s.root).dom,d=Ry(t,a,s),g=OS(l,s).bind(x=>Oh(l,r1.exactFromRange(x)).orThunk(()=>{const D=pe.fromText(t1);mc(x.start,D);const B=Fy(l,r1.exact(D,0,D,1));return pl(D),B}).bind(D=>vS(D.left,D.top,D.width,D.height))),y=OS(l,s).bind(x=>mo(x.start)?O.some(x.start):ic(x.start)).getOr(t.element);return yS(g,d,s,a,y)};var Vy=[po("getSelection"),Ue("root"),po("bubble"),Lu(),ye("overrides",{}),ye("showAbove",!1),Co("placement",ou)];const Fu="link-layout",Hu=t=>t.x+t.width,zy=(t,s)=>t.x-s.width,Ah=(t,s)=>t.y-s.height+t.height,Vk=t=>t.y,AS=(t,s,a)=>ia(Hu(t),Vk(t),a.southeast(),bh(),"southeast",za(t,{left:0,top:2}),Fu),gv=(t,s,a)=>ia(zy(t,s),Vk(t),a.southwest(),vh(),"southwest",za(t,{right:1,top:2}),Fu),hv=(t,s,a)=>ia(Hu(t),Ah(t,s),a.northeast(),Zb(),"northeast",za(t,{left:0,bottom:3}),Fu),pv=(t,s,a)=>ia(zy(t,s),Ah(t,s),a.northwest(),hy(),"northwest",za(t,{right:1,bottom:3}),Fu),Vu=()=>[AS,gv,hv,pv],Uy=()=>[gv,AS,pv,hv],zk=(t,s,a)=>{const l=Oy(a,s.item.element),d=hf(t.element,s,Vu(),Uy(),Vu(),Uy(),O.none());return O.some(rv({anchorBox:l,bubble:dg(),overrides:s.overrides,layouts:d}))};var DS=[Ue("item"),Lu(),ye("overrides",{}),Co("placement",zk)],Wy=Bc("type",{selection:Vy,node:wS,hotspot:fS,submenu:DS,makeshift:gS});const Zy=[Qc("classes",ca),Rl("mode","all",["all","layout","placement"])],bv=[ye("useFixed",et),po("getBounds")],RS=[Pc("anchor",Wy),la("transition",Zy)],oi=()=>{const t=document.documentElement;return Kw(0,0,t.clientWidth,t.clientHeight)},vv=t=>{const s=va(t.element),a=t.element.dom.getBoundingClientRect();return Za(s.left,s.top,a.width,a.height)},MS=(t,s,a,l,d,g)=>{const p=Yw(s.anchorBox,t);return Ek(p,l.element,s.bubble,s.layouts,d,a,s.overrides,g)},Dh=(t,s,a,l,d)=>{const g=O.none();bc(t,s,a,l,d,g)},bc=(t,s,a,l,d,g)=>{const p=Nc("placement.info",Me(RS),d),y=p.anchor,x=l.element,_=a.get(l.uid);ev(()=>{_t(x,"position","fixed");const D=As(x,"visibility");_t(x,"visibility","hidden");const B=s.useFixed()?oi():vv(t);y.placement(t,y,B).each(I=>{const H=g.orThunk(()=>s.getBounds.map(Ps)),q=MS(B,I,H,l,_,p.transition);a.set(l.uid,q)}),D.fold(()=>{Vn(x,"visibility")},I=>{_t(x,"visibility",I)}),As(x,"left").isNone()&&As(x,"top").isNone()&&As(x,"right").isNone()&&As(x,"bottom").isNone()&&Ks(As(x,"position"),"fixed")&&Vn(x,"position")},x)};var $d=Object.freeze({__proto__:null,position:Dh,positionWithinBounds:bc,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const d=l.element;mt(["position","left","right","top","bottom"],g=>Vn(d,g)),pk(d),a.clear(l.uid)}}),sl=Object.freeze({__proto__:null,init:()=>{let t={};return Ta({readState:()=>t,clear:d=>{Jn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>ut(t,d)})}});const Kr=Wa({fields:bv,name:"positioning",active:gk,apis:$d,state:sl}),jy=t=>t.getSystem().isConnected(),l1=t=>{co(t,Nu());const s=t.components();mt(s,l1)},bg=t=>{const s=t.components();mt(s,bg),co(t,Ed())},i1=(t,s)=>{t.getSystem().addToWorld(s),no(t.element)&&bg(s)},yv=t=>{l1(t),t.getSystem().removeFromWorld(t)},u1=(t,s)=>{Rc(t.element,s.element)},BS=t=>{mt(t.components(),s=>pl(s.element)),bd(t.element),t.syncComponents()},Uk=(t,s,a)=>{const l=t.components();BS(t);const d=a(s),g=jt(l,d);mt(g,p=>{l1(p),t.getSystem().removeFromWorld(p)}),mt(d,p=>{jy(p)?u1(t,p):(t.getSystem().addToWorld(p),u1(t,p),no(t.element)&&bg(p))}),t.syncComponents()},Wk=(t,s,a)=>{const l=t.components(),d=Ie(s,y=>$b(y).toArray());mt(l,y=>{So(d,y)||yv(y)});const g=a(s),p=jt(l,g);mt(p,y=>{jy(y)&&yv(y)}),mt(g,y=>{jy(y)||i1(t,y)}),t.syncComponents()},Id=(t,s)=>{d1(t,s,Rc)},d1=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),no(t.element)&&bg(s),t.syncComponents()},Cv=t=>{l1(t),pl(t.element),t.getSystem().removeFromWorld(t)},Ld=t=>{const s=oa(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Cv(t),s.each(a=>{a.syncComponents()})},wv=t=>{const s=t.components();mt(s,Cv),bd(t.element),t.syncComponents()},Sv=(t,s)=>{Gy(t,s,Rc)},vg=(t,s)=>{Gy(t,s,hd)},Gy=(t,s,a)=>{a(t,s.element);const l=sa(s.element);mt(l,d=>{s.getByDom(d).each(bg)})},PS=t=>{const s=sa(t.element);mt(s,a=>{t.getByDom(a).each(l1)}),pl(t.element)},qy=(t,s,a,l)=>{a.get().each(p=>{wv(t)});const d=s.getAttachPoint(t);Id(d,t);const g=t.getSystem().build(l);return Id(t,g),a.set(g),g},vf=(t,s,a,l)=>{const d=qy(t,s,a,l);return s.onOpen(t,d),d},Zk=(t,s,a,l)=>a.get().map(()=>qy(t,s,a,l)),_a=(t,s,a,l,d)=>{xv(t,s),vf(t,s,a,l),d(),Tv(t,s)},jk=(t,s,a)=>{a.get().each(l=>{wv(t),Ld(t),s.onClose(t,l),a.clear()})},Rh=(t,s,a)=>a.isOpen(),Mh=(t,s,a,l)=>Rh(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,l)),$S=(t,s,a)=>a.get(),Gk=(t,s,a,l)=>{As(t.element,s).fold(()=>{te(t.element,a)},d=>{bn(t.element,a,d)}),_t(t.element,s,l)},qk=(t,s,a)=>{P(t.element,a).fold(()=>Vn(t.element,s),l=>_t(t.element,s,l))},xv=(t,s,a)=>{const l=s.getAttachPoint(t);_t(t.element,"position",Kr.getMode(l)),Gk(t,"visibility",s.cloakVisibilityAttr,"hidden")},Kk=t=>qo(["top","left","right","bottom"],s=>As(t,s).isSome()),Tv=(t,s,a)=>{Kk(t.element)||Vn(t.element,"position"),qk(t,"visibility",s.cloakVisibilityAttr)};var Yk=Object.freeze({__proto__:null,cloak:xv,decloak:Tv,open:vf,openWhileCloaked:_a,close:jk,isOpen:Rh,isPartOf:Mh,getState:$S,setContent:Zk}),Ev=Object.freeze({__proto__:null,events:(t,s)=>ds([je(lh(),(a,l)=>{jk(a,t,s)})])}),Xk=[qn("onOpen"),qn("onClose"),Ue("isPartOf"),Ue("getAttachPoint"),ye("cloakVisibilityAttr","data-precloak-visibility")],m1=Object.freeze({__proto__:null,init:()=>{const t=Bo(),s=Q("not-implemented");return Ta({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Qn=Wa({fields:Xk,name:"sandboxing",active:Ev,apis:Yk,state:m1}),Tm=Q("dismiss.popups"),Nh=Q("reposition.popups"),Yy=Q("mouse.released"),LS=Mc([ye("isExtraPart",et),la("fireEventInstead",[ye("event",gm())])]),Em=t=>{const s=Nc("Dismissal",LS,t);return{[Tm()]:{schema:Mc([Ue("target")]),onReceive:(a,l)=>{Qn.isOpen(a)&&(Qn.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Qn.close(a),g=>co(a,g.event)))}}}},Bh=Mc([la("fireEventInstead",[ye("event",Ob())]),Ql("doReposition")]),Xy=t=>{const s=Nc("Reposition",Bh,t);return{[Nh()]:{onReceive:a=>{Qn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>co(a,l.event))}}}},Jy=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},kv=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var g1=Object.freeze({__proto__:null,onLoad:Jy,onUnload:kv,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),VS=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[qs((l,d)=>{Jy(l,t,s)}),el((l,d)=>{kv(l,t,s)})]:[Jb(t,s,Jy)];return ds(a)}});const Ph=()=>{const t=S(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return Ta({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},Ov=()=>Ta({readState:re}),yg=()=>{const t=S({}),s=S({});return Ta({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>ut(t.get(),p).orThunk(()=>ut(s.get(),p)),update:p=>{const y=t.get(),x=s.get(),_={},D={};mt(p,B=>{_[B.value]=B,ut(B,"meta").each(I=>{ut(I,"text").each(H=>{D[H]=B})})}),t.set(J(J({},y),_)),s.set(J(J({},x),D))},clear:()=>{t.set({}),s.set({})}})};var h1=Object.freeze({__proto__:null,memory:Ph,dataset:yg,manual:Ov,init:t=>t.store.manager.state(t)});const Cg=(t,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(t,l),s.onSetValue(t,l)},zS=(t,s,a)=>{const l=s.store,d=l.getDataKey(t);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},Qy=(t,s,a)=>{s.store.initialValue.each(d=>{Cg(t,s,a,d)})},$h=(t,s,a)=>{a.clear()};var eC=[po("initialValue"),Ue("getFallbackEntry"),Ue("getDataKey"),Ue("setValue"),Co("manager",{setValue:Cg,getValue:zS,onLoad:Qy,onUnload:$h,state:yg})];const Av=(t,s,a)=>s.store.getValue(t),Jk=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},US=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var Cf=[Ue("getValue"),ye("setValue",re),po("initialValue"),Co("manager",{setValue:Jk,getValue:Av,onLoad:US,onUnload:re,state:Pu.init})];const tC=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},nC=(t,s,a)=>a.get(),Dv=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},WS=(t,s,a)=>{a.clear()};var km=[po("initialValue"),Co("manager",{setValue:tC,getValue:nC,onLoad:Dv,onUnload:WS,state:Ph})],oC=[ec("store",{mode:"memory"},Bc("mode",{memory:km,manual:Cf,dataset:eC})),qn("onSetValue"),ye("resetOnDom",!1)];const St=Wa({fields:oC,name:"representing",active:VS,apis:g1,extra:{setValueFrom:(t,s)=>{const a=St.getValue(s);St.setValue(t,a)}},state:h1}),Oa=(t,s)=>w(t,{},Ne(s,a=>q0(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Qa("dump",cn)])),_i=t=>t.dump,Yr=(t,s)=>J(J({},nt(s)),t.dump),ru={field:Oa,augment:Yr,get:_i},si="placeholder",Lr=W.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),sC=t=>Bn(t,"uiType"),Ih=(t,s,a,l)=>t.exists(d=>d!==a.owner)?Lr.single(!0,Q(a)):ut(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Vo(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),wg=(t,s,a,l)=>sC(a)&&a.uiType===si?Ih(t,s,a,l):Lr.single(!1,Q(a)),p1=(t,s,a,l)=>wg(t,s,a,l).fold((g,p)=>{const y=sC(a)?p(s,a.config,a.validated):p(s),x=ut(y,"components").getOr([]),_=Ie(x,D=>p1(t,s,D,l));return[We(J({},y),{components:_})]},(g,p)=>{if(sC(a)){const y=p(s,a.config,a.validated);return a.validated.preprocess.getOr(cn)(y)}else return p(s)}),ZS=(t,s,a,l)=>Ie(a,d=>p1(t,s,d,l)),jS=(t,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,y)=>p,(p,y)=>p);return{name:Q(t),required:g,used:l,replace:d}},GS=(t,s,a,l)=>{const d=Qo(l,(p,y)=>jS(y,p)),g=ZS(t,s,a,d);return Ko(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Rv=Lr.single,rC=Lr.multiple,qS=Q(si),b1=W.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),v1=ye("factory",{sketch:cn}),y1=ye("schema",[]),C1=Ue("name"),Mv=Ao("pname","pname",yd(t=>"<alloy."+Ot(t.name)+">"),Sa()),Nv=Qa("schema",()=>[po("preprocess")]),Sg=ye("defaults",Q({})),Fl=ye("overrides",Q({})),w1=Me([v1,y1,C1,Mv,Sg,Fl]),KS=Me([v1,y1,C1,Sg,Fl]),aC=Me([v1,y1,C1,Mv,Sg,Fl]),Qk=Me([v1,Nv,C1,Ue("unit"),Mv,Sg,Fl]),YS=t=>t.fold(O.some,O.none,O.some,O.some),S1=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},e_=t=>t.fold(cn,cn,cn,cn),x1=(t,s)=>a=>{const l=Nc("Converting part type",s,a);return t(l)},Aa=x1(b1.required,w1),au=x1(b1.external,KS),ri=x1(b1.optional,aC),wf=x1(b1.group,Qk),cu=Q("entirety");var t_=Object.freeze({__proto__:null,required:Aa,external:au,optional:ri,group:wf,asNamedPart:YS,name:S1,asCommon:e_,original:cu});const cC=(t,s,a,l)=>Yo(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),lC=(t,s,a)=>{const l={},d={};return mt(a,g=>{g.fold(p=>{l[p.pname]=Rv(!0,(y,x,_)=>p.factory.sketch(cC(y,p,x,_)))},p=>{const y=s.parts[p.name];d[p.name]=Q(p.factory.sketch(cC(s,p,y[cu()]),y))},p=>{l[p.pname]=Rv(!1,(y,x,_)=>p.factory.sketch(cC(y,p,x,_)))},p=>{l[p.pname]=rC(!0,(y,x,_)=>{const D=y[p.name];return Ne(D,B=>p.factory.sketch(Yo(p.defaults(y,B,_),B,p.overrides(y,B))))})})}),{internals:Q(l),externals:Q(d)}},iC=(t,s)=>{const a={};return mt(s,l=>{YS(l).each(d=>{const g=n_(t,d.pname);a[d.name]=p=>{const y=Nc("Part: "+d.name+" in "+t,Me(d.schema),p);return We(J({},g),{config:p,validated:y})}})}),a},n_=(t,s)=>({uiType:qS(),owner:t,name:s}),uC=(t,s,a)=>({uiType:qS(),owner:t,name:s,config:a,validated:{}}),o_=t=>Ie(t,s=>s.fold(O.none,O.some,O.none,O.none).map(a=>Ru(a.name,a.schema.concat([gy(cu())]))).toArray()),s_=t=>Ne(t,S1),dC=(t,s,a)=>lC(t,s,a),mC=(t,s,a)=>GS(O.some(t),s,s.components,a),as=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},zu=(t,s,a)=>as(t,s,a).getOrDie("Could not find part: "+a),fC=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return mt(a,p=>{l[p]=Q(g.getByUid(d[p]))}),l},gC=(t,s)=>{const a=t.getSystem();return Qo(s.partUids,(l,d)=>Q(a.getByUid(l)))},XS=t=>Vo(t.partUids),Bv=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return mt(a,p=>{l[p]=Q(g.getByUid(d[p]).getOrDie())}),l},JS=(t,s)=>{const a=s_(s);return fo(Ne(a,l=>({key:l,value:t+"-"+l})))},Pv=t=>Ao("partUids","partUids",wd(s=>JS(s.uid,t)),Sa());var QS=Object.freeze({__proto__:null,generate:iC,generateOne:uC,schemas:o_,names:s_,substitutes:dC,components:mC,defaultUids:JS,defaultUidsSchema:Pv,getAllParts:gC,getAllPartNames:XS,getPart:as,getPartOrDie:zu,getParts:fC,getPartsOrDie:Bv});const r_=(t,s)=>(t.length>0?[Ru("parts",t)]:[]).concat([Ue("uid"),ye("dom",{}),ye("components",[]),gy("originalSpec"),ye("debug.sketcher",{})]).concat(s),ex=(t,s,a,l,d)=>{const g=r_(l,d);return Nc(t+" [SpecSchema]",Mc(g.concat(s)),a)},a_=(t,s,a,l)=>{const d=At(l),g=ex(t,s,d,[],[]);return a(g,d)},hC=(t,s,a,l,d)=>{const g=At(d),p=o_(a),y=Pv(a),x=ex(t,s,g,p,[y]),_=dC(t,x,a),D=mC(t,x,_.internals());return l(x,D,g,_.externals())},tx=t=>Bn(t,"uid"),At=t=>tx(t)?t:We(J({},t),{uid:bm("uid")}),Uu=t=>t.uid!==void 0,pC=Mc([Ue("name"),Ue("factory"),Ue("configFields"),ye("apis",{}),ye("extraApis",{})]),nx=Mc([Ue("name"),Ue("factory"),Ue("configFields"),Ue("partFields"),ye("apis",{}),ye("extraApis",{})]),ar=t=>{const s=Nc("Sketcher for "+t.name,pC,t),a=g=>a_(s.name,s.configFields,s.factory,g),l=Qo(s.apis,af),d=Qo(s.extraApis,(g,p)=>eg(g,p));return J(J({name:s.name,configFields:s.configFields,sketch:a},l),d)},Or=t=>{const s=Nc("Sketcher for "+t.name,nx,t),a=p=>hC(s.name,s.configFields,s.partFields,s.factory,p),l=iC(s.name,s.partFields),d=Qo(s.apis,af),g=Qo(s.extraApis,(p,y)=>eg(p,y));return J(J({name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l},d),g)},Lh=t=>$a("input")(t)&&Br(t,"type")!=="radio"||$a("textarea")(t);var c_=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const l_=[Ue("find")],Un=Wa({fields:l_,name:"composing",apis:c_}),bC=["input","button","textarea","select"],Fh=(t,s,a)=>{(s.disabled()?yC:CC)(t,s)},$v=(t,s)=>s.useNative===!0&&So(bC,Ga(t.element)),i_=t=>G(t.element,"disabled"),u_=t=>{bn(t.element,"disabled","disabled")},vC=t=>{te(t.element,"disabled")},nD=t=>Br(t.element,"aria-disabled")==="true",ox=t=>{bn(t.element,"aria-disabled","true")},d_=t=>{bn(t.element,"aria-disabled","false")},yC=(t,s,a)=>{s.disableClass.each(d=>{Gr(t.element,d)}),($v(t,s)?u_:ox)(t),s.onDisabled(t)},CC=(t,s,a)=>{s.disableClass.each(d=>{ms(t.element,d)}),($v(t,s)?vC:d_)(t),s.onEnabled(t)},sx=(t,s)=>$v(t,s)?i_(t):nD(t);var ax=Object.freeze({__proto__:null,enable:CC,disable:yC,isDisabled:sx,onLoad:Fh,set:(t,s,a,l)=>{(l?yC:CC)(t,s)}}),f_=Object.freeze({__proto__:null,exhibit:(t,s)=>$l({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>ds([ny(Lc(),(a,l)=>sx(a,t)),Jb(t,s,Fh)])}),oD=[Ir("disabled",et),ye("useNative",!0),po("disableClass"),qn("onDisabled"),qn("onEnabled")];const Xt=Wa({fields:oD,name:"disabling",active:f_,apis:ax}),Iv=(t,s,a,l)=>{const d=_r(t.element,"."+s.highlightClass);mt(d,g=>{qo(l,y=>Eo(y.element,g))||(ms(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),co(y,Ab())}))})},sD=(t,s,a)=>Iv(t,s,a,[]),g_=(t,s,a,l)=>{Sf(t,s,a,l)&&(ms(l.element,s.highlightClass),s.onDehighlight(t,l),co(l,Ab()))},E1=(t,s,a,l)=>{Iv(t,s,a,[l]),Sf(t,s,a,l)||(Gr(l.element,s.highlightClass),s.onHighlight(t,l),co(l,ty()))},rD=(t,s,a)=>{Hv(t,s).each(l=>{E1(t,s,a,l)})},Lv=(t,s,a)=>{SC(t,s).each(l=>{E1(t,s,a,l)})},h_=(t,s,a,l)=>{wC(t,s,a,l).fold(d=>{throw d},d=>{E1(t,s,a,d)})},p_=(t,s,a,l)=>{const d=_1(t,s);an(d,l).each(p=>{E1(t,s,a,p)})},Sf=(t,s,a,l)=>gc(l.element,s.highlightClass),Fv=(t,s,a)=>Hs(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),wC=(t,s,a,l)=>{const d=_r(t.element,"."+s.itemClass);return O.from(d[l]).fold(()=>at.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},Hv=(t,s,a)=>Hs(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),SC=(t,s,a)=>{const l=_r(t.element,"."+s.itemClass);return(l.length>0?O.some(l[l.length-1]):O.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},k1=(t,s,a,l)=>{const d=_r(t.element,"."+s.itemClass);return Xo(d,p=>gc(p,s.highlightClass)).bind(p=>{const y=ag(p,l,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},b_=(t,s,a)=>k1(t,s,a,-1),v_=(t,s,a)=>k1(t,s,a,1),_1=(t,s,a)=>{const l=_r(t.element,"."+s.itemClass);return il(Ne(l,d=>t.getSystem().getByDom(d).toOptional()))};var Vv=Object.freeze({__proto__:null,dehighlightAll:sD,dehighlight:g_,highlight:E1,highlightFirst:rD,highlightLast:Lv,highlightAt:h_,highlightBy:p_,isHighlighted:Sf,getHighlighted:Fv,getFirst:Hv,getLast:SC,getPrevious:b_,getNext:v_,getCandidates:_1}),y_=[Ue("highlightClass"),Ue("itemClass"),qn("onHighlight"),qn("onDehighlight")];const lo=Wa({fields:y_,name:"highlighting",apis:Vv}),C_=[8],Fd=[9],lu=[13],zv=[27],Hl=[32],Hh=[37],Vh=[38],xg=[39],_m=[40],xC=(t,s,a)=>{const l=Sr(t.slice(0,s)),d=Sr(t.slice(s+1));return an(l.concat(d),a)},Tg=(t,s,a)=>{const l=Sr(t.slice(0,s));return an(l,a)},SI=(t,s,a)=>{const l=t.slice(0,s),d=t.slice(s+1);return an(d.concat(l),a)},aD=(t,s,a)=>{const l=t.slice(s+1);return an(l,a)},oo=t=>s=>{const a=s.raw;return So(t,a.which)},Oi=t=>s=>ac(t,a=>a(s)),Eg=t=>t.raw.shiftKey===!0,w_=t=>t.raw.ctrlKey===!0,Uv=ze(Eg),ro=(t,s)=>({matches:t,classification:s}),TC=(t,s)=>an(t,l=>l.matches(s)).map(l=>l.classification),cx=(t,s,a)=>{s.exists(d=>a.exists(g=>Eo(g,d)))||Wt(t,sf(),{prevFocus:s,newFocus:a})},O1=()=>{const t=a=>tu(a.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().triggerFocus(l,a.element);const g=t(a);cx(a,d,g)}}},S_=()=>{const t=a=>lo.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().getByDom(l).fold(re,p=>{lo.highlight(a,p)});const g=t(a);cx(a,d,g)}}};var zh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(zh||(zh={}));const kg=(t,s,a,l,d)=>{const g=()=>t.concat([ye("focusManager",O1()),ec("focusInside","onFocus",Ds(_=>So(["onFocus","onEnterOrSpace","onApi"],_)?at.value(_):at.error("Invalid value for focusInside"))),Co("handler",x),Co("state",s),Co("sendFocusIn",d)]),p=(_,D,B,I,H)=>{const q=B(_,D,I,H);return TC(q,D.event).bind(se=>se(_,D,I,H))},x={schema:g,processKey:p,toEvents:(_,D)=>{const B=_.focusInside!==zh.OnFocusMode?O.none():d(_).map(q=>je(Td(),(se,Ce)=>{q(se,_,D),Ce.stop()})),I=(q,se)=>{const Ce=oo(Hl.concat(lu))(se.event);_.focusInside===zh.OnEnterOrSpaceMode&&Ce&&um(q,se)&&d(_).each(he=>{he(q,_,D),se.stop()})},H=[je(Bl(),(q,se)=>{p(q,se,a,_,D).fold(()=>{I(q,se)},Ce=>{se.stop()})}),je(of(),(q,se)=>{p(q,se,l,_,D).each(Ce=>{se.stop()})})];return ds(B.toArray().concat(H))}};return x},EC=t=>{const s=[po("onEscape"),po("onEnter"),ye("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ye("firstTabstop",0),ye("useTabstopAt",Fe),po("visibilitySelector")].concat([t]),a=(se,Ce)=>{const he=se.visibilitySelector.bind(me=>Qi(Ce,me)).getOr(Ce);return hr(he)>0},l=(se,Ce)=>{const he=_r(se.element,Ce.selector),me=Sn(he,$e=>a(Ce,$e));return O.from(me[Ce.firstTabstop])},d=(se,Ce)=>Ce.focusManager.get(se).bind(he=>Qi(he,Ce.selector)),g=(se,Ce)=>a(se,Ce)&&se.useTabstopAt(Ce),p=(se,Ce,he)=>{l(se,Ce).each(me=>{Ce.focusManager.set(se,me)})},y=(se,Ce,he,me,$e)=>$e(Ce,he,Be=>g(me,Be)).fold(()=>me.cyclic?O.some(!0):O.none(),Be=>(me.focusManager.set(se,Be),O.some(!0))),x=(se,Ce,he,me)=>{const $e=_r(se.element,he.selector);return d(se,he).bind(Be=>Xo($e,Jt(Eo,Be)).bind(qe=>y(se,$e,qe,he,me)))},_=(se,Ce,he)=>{const me=he.cyclic?xC:Tg;return x(se,Ce,he,me)},D=(se,Ce,he)=>{const me=he.cyclic?SI:aD;return x(se,Ce,he,me)},B=(se,Ce,he)=>he.onEnter.bind(me=>me(se,Ce)),I=(se,Ce,he)=>he.onEscape.bind(me=>me(se,Ce)),H=Q([ro(Oi([Eg,oo(Fd)]),_),ro(oo(Fd),D),ro(Oi([Uv,oo(lu)]),B)]),q=Q([ro(oo(zv),I)]);return kg(s,Pu.init,H,q,()=>O.some(p))};var i=EC(Qa("cyclic",et)),m=EC(Qa("cyclic",Fe));const h=(t,s,a)=>(Np(t,a,Lc()),O.some(!0)),v=(t,s,a)=>Lh(a)&&oo(Hl)(s.event)?O.none():h(t,s,a),T=(t,s)=>O.some(!0),A=[ye("execute",v),ye("useSpace",!1),ye("useEnter",!0),ye("useControlEnter",!1),ye("useDown",!1)],$=(t,s,a)=>a.execute(t,s,t.element),U=(t,s,a,l)=>{const d=a.useSpace&&!Lh(t.element)?Hl:[],g=a.useEnter?lu:[],p=a.useDown?_m:[],y=d.concat(g).concat(p);return[ro(oo(y),$)].concat(a.useControlEnter?[ro(Oi([w_,oo(lu)]),$)]:[])},K=(t,s,a,l)=>a.useSpace&&!Lh(t.element)?[ro(oo(Hl),T)]:[];var oe=kg(A,Pu.init,U,K,()=>O.none());const ve=()=>{const t=Bo();return Ta({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var vt=Object.freeze({__proto__:null,flatgrid:ve,init:t=>t.state(t)});const ft=t=>(s,a,l,d)=>{const g=t(s.element);return Dt(g,s,a,l,d)},Le=(t,s)=>{const a=av(t,s);return ft(a)},ht=(t,s)=>{const a=av(s,t);return ft(a)},Pe=t=>(s,a,l,d)=>Dt(t,s,a,l,d),Dt=(t,s,a,l,d)=>l.focusManager.get(s).bind(p=>t(s.element,p,l,d)).map(p=>(l.focusManager.set(s,p),!0)),ln=Pe,Tn=Pe,fs=Pe,Da=t=>t.offsetWidth<=0&&t.offsetHeight<=0,yr=t=>!Da(t.dom),wl=(t,s)=>Xo(t,s).map(a=>({index:a,candidates:t})),xf=(t,s,a)=>{const l=p=>Eo(p,s),d=_r(t,a),g=Sn(d,yr);return wl(g,l)},Wv=(t,s)=>Xo(t,a=>Eo(s,a)),kC=(t,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(p=>{const y=p.row*a+p.column;return y>=0&&y<t.length?O.some(t[y]):O.none()})},Zv=(t,s,a,l,d)=>kC(t,s,l,(g,p)=>{const x=g===a-1?t.length-g*l:l,_=ag(p,d,0,x-1);return O.some({row:g,column:_})}),Zo=(t,s,a,l,d)=>kC(t,s,l,(g,p)=>{const y=ag(g,d,0,a-1),_=y===a-1?t.length-y*l:l,D=ni(p,0,_-1);return O.some({row:y,column:D})}),rl=(t,s,a,l)=>Zv(t,s,a,l,1),al=(t,s,a,l)=>Zv(t,s,a,l,-1),ai=(t,s,a,l)=>Zo(t,s,a,l,-1),Vl=(t,s,a,l)=>Zo(t,s,a,l,1),Uh=[Ue("selector"),ye("execute",v),tr("onEscape"),ye("captureTab",!1),Gp()],Sl=(t,s,a)=>{Hs(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},jv=(t,s)=>s.focusManager.get(t).bind(a=>Qi(a,s.selector)),A1=(t,s,a,l)=>jv(t,a).bind(d=>a.execute(t,s,d)),Ai=t=>(s,a,l,d)=>xf(s,a,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),Rs=(t,s,a)=>a.captureTab?O.some(!0):O.none(),x_=(t,s,a)=>a.onEscape(t,s),lx=Ai(al),ix=Ai(rl),T_=Ai(ai),E_=Ai(Vl),Tf=Q([ro(oo(Hh),Le(lx,ix)),ro(oo(xg),ht(lx,ix)),ro(oo(Vh),ln(T_)),ro(oo(_m),Tn(E_)),ro(Oi([Eg,oo(Fd)]),Rs),ro(Oi([Uv,oo(Fd)]),Rs),ro(oo(Hl.concat(lu)),A1)]),_C=Q([ro(oo(zv),x_),ro(oo(Hl),T)]);var D1=kg(Uh,ve,Tf,_C,()=>O.some(Sl));const ux=(t,s,a,l,d)=>{const g=y=>Ga(y)==="button"&&Br(y,"disabled")==="disabled",p=(y,x,_)=>d(y,x,l,0,_.length-1,_[x],D=>g(_[D])?p(y,D,_):O.from(_[D]));return xf(t,a,s).bind(y=>{const x=y.index,_=y.candidates;return p(x,x,_)})},OC=(t,s,a,l)=>ux(t,s,a,l,(d,g,p,y,x,_,D)=>{const B=ni(g+p,y,x);return B===d?O.from(_):D(B)}),Gv=(t,s,a,l)=>ux(t,s,a,l,(d,g,p,y,x,_,D)=>{const B=ag(g,p,y,x);return B===d?O.none():D(B)}),xI=[Ue("selector"),ye("getInitial",O.none),ye("execute",v),tr("onEscape"),ye("executeOnMove",!1),ye("allowVertical",!0),ye("allowHorizontal",!0),ye("cycles",!0)],TI=(t,s)=>s.focusManager.get(t).bind(a=>Qi(a,s.selector)),k_=(t,s,a)=>TI(t,a).bind(l=>a.execute(t,s,l)),EI=(t,s,a)=>{s.getInitial(t).orThunk(()=>Hs(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},cD=(t,s,a)=>(a.cycles?Gv:OC)(t,a.selector,s,-1),lD=(t,s,a)=>(a.cycles?Gv:OC)(t,a.selector,s,1),__=t=>(s,a,l,d)=>t(s,a,l,d).bind(()=>l.executeOnMove?k_(s,a,l):O.some(!0)),O_=(t,s,a)=>a.onEscape(t,s),kI=(t,s,a,l)=>{const d=[...a.allowHorizontal?Hh:[]].concat(a.allowVertical?Vh:[]),g=[...a.allowHorizontal?xg:[]].concat(a.allowVertical?_m:[]);return[ro(oo(d),__(Le(cD,lD))),ro(oo(g),__(ht(cD,lD))),ro(oo(lu),k_),ro(oo(Hl),k_)]},_I=Q([ro(oo(Hl),T),ro(oo(zv),O_)]);var OI=kg(xI,Pu.init,kI,_I,()=>O.some(EI));const dx=(t,s,a)=>O.from(t[s]).bind(l=>O.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),Wh=(t,s,a,l)=>{const g=t[s].length,p=ag(a,l,0,g-1);return dx(t,s,p)},iD=(t,s,a,l)=>{const d=ag(a,l,0,t.length-1),g=t[d].length,p=ni(s,0,g-1);return dx(t,d,p)},uD=(t,s,a,l)=>{const g=t[s].length,p=ni(a+l,0,g-1);return dx(t,s,p)},mx=(t,s,a,l)=>{const d=ni(a+l,0,t.length-1),g=t[d].length,p=ni(s,0,g-1);return dx(t,d,p)},AI=(t,s,a)=>Wh(t,s,a,1),dD=(t,s,a)=>Wh(t,s,a,-1),mD=(t,s,a)=>iD(t,a,s,-1),fD=(t,s,a)=>iD(t,a,s,1),gD=(t,s,a)=>uD(t,s,a,-1),DI=(t,s,a)=>uD(t,s,a,1),RI=(t,s,a)=>mx(t,a,s,-1),MI=(t,s,a)=>mx(t,a,s,1),A_=[Ru("selectors",[Ue("row"),Ue("cell")]),ye("cycles",!0),ye("previousSelector",O.none),ye("execute",v)],NI=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Hs(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},BI=(t,s,a)=>tu(t.element).bind(l=>a.execute(t,s,l)),PI=(t,s)=>Ne(t,a=>_r(a,s.selectors.cell)),fx=(t,s)=>(a,l,d)=>{const g=d.cycles?t:s;return Qi(l,d.selectors.row).bind(p=>{const y=_r(p,d.selectors.cell);return Wv(y,l).bind(x=>{const _=_r(a,d.selectors.row);return Wv(_,p).bind(D=>{const B=PI(_,d);return g(B,D,x).map(I=>I.cell)})})})},D_=fx(dD,gD),hD=fx(AI,DI),$I=fx(mD,RI),II=fx(fD,MI),pD=Q([ro(oo(Hh),Le(D_,hD)),ro(oo(xg),ht(D_,hD)),ro(oo(Vh),ln($I)),ro(oo(_m),Tn(II)),ro(oo(Hl.concat(lu)),BI)]),LI=Q([ro(oo(Hl),T)]);var FI=kg(A_,Pu.init,pD,LI,()=>O.some(NI));const bD=[Ue("selector"),ye("execute",v),ye("moveOnTab",!1)],vD=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),HI=(t,s,a)=>{Hs(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},AC=(t,s,a)=>Gv(t,a.selector,s,-1),yD=(t,s,a)=>Gv(t,a.selector,s,1),CD=(t,s,a,l)=>a.moveOnTab?fs(AC)(t,s,a,l):O.none(),ci=(t,s,a,l)=>a.moveOnTab?fs(yD)(t,s,a,l):O.none(),VI=Q([ro(oo(Vh),fs(AC)),ro(oo(_m),fs(yD)),ro(Oi([Eg,oo(Fd)]),CD),ro(Oi([Uv,oo(Fd)]),ci),ro(oo(lu),vD),ro(oo(Hl),vD)]),wD=Q([ro(oo(Hl),T)]);var zI=kg(bD,Pu.init,VI,wD,()=>O.some(HI));const UI=[tr("onSpace"),tr("onEnter"),tr("onShiftEnter"),tr("onLeft"),tr("onRight"),tr("onTab"),tr("onShiftTab"),tr("onUp"),tr("onDown"),tr("onEscape"),ye("stopSpaceKeyup",!1),po("focusIn")],SD=(t,s,a)=>[ro(oo(Hl),a.onSpace),ro(Oi([Uv,oo(lu)]),a.onEnter),ro(Oi([Eg,oo(lu)]),a.onShiftEnter),ro(Oi([Eg,oo(Fd)]),a.onShiftTab),ro(Oi([Uv,oo(Fd)]),a.onTab),ro(oo(Vh),a.onUp),ro(oo(_m),a.onDown),ro(oo(Hh),a.onLeft),ro(oo(xg),a.onRight),ro(oo(Hl),a.onSpace)],WI=(t,s,a)=>[...a.stopSpaceKeyup?[ro(oo(Hl),T)]:[],ro(oo(zv),a.onEscape)];var xD=kg(UI,Pu.init,SD,WI,t=>t.focusIn);const TD=i.schema(),ZI=m.schema(),jI=OI.schema(),GI=D1.schema(),qI=FI.schema(),ED=oe.schema(),kD=zI.schema(),Zh=xD.schema();var _D=Object.freeze({__proto__:null,acyclic:TD,cyclic:ZI,flow:jI,flatgrid:GI,matrix:qI,execution:ED,menu:kD,special:Zh});const OD=t=>Pa(t,"setGridSize"),zt=Ey({branchKey:"mode",branches:_D,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,d)=>{OD(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:vt}),AD=(t,s)=>{ev(()=>{Uk(t,s,()=>Ne(s,t.getSystem().build))},t.element)},DD=(t,s)=>{ev(()=>{Wk(t,s,()=>yw(t.element,s,t.getSystem().buildOrPatch))},t.element)},KI=(t,s,a,l)=>{yv(s);const d=ay(t.element,a,l,t.getSystem().buildOrPatch);i1(t,d),t.syncComponents()},R_=(t,s,a)=>{const l=t.getSystem().build(a);d1(t,l,s)},RD=(t,s,a,l)=>{Ld(s),R_(t,(d,g)=>Zr(d,g,a),l)},M_=(t,s,a,l)=>(s.reuseDom?DD:AD)(t,l),N_=(t,s,a,l)=>{R_(t,Rc,l)},YI=(t,s,a,l)=>{R_(t,Gg,l)},jh=(t,s,a,l)=>{const d=DC(t);an(d,p=>Eo(l.element,p.element)).each(Ld)},DC=(t,s)=>t.components(),B_=(t,s,a,l,d)=>{const g=DC(t);return O.from(g[l]).map(p=>(d.fold(()=>Ld(p),y=>{(s.reuseDom?KI:RD)(t,p,l,y)}),p))};var XI=Object.freeze({__proto__:null,append:N_,prepend:YI,remove:jh,replaceAt:B_,replaceBy:(t,s,a,l,d)=>{const g=DC(t);return Xo(g,l).bind(p=>B_(t,s,a,p,d))},set:M_,contents:DC});const un=Wa({fields:[tc("reuseDom",!0)],name:"replacing",apis:XI}),RC=(t,s)=>{const a=ds(s);return Wa({fields:[Ue("enabled")],name:t,active:{events:Q(a)}})},kn=(t,s)=>{const a=RC(t,s);return{key:t,value:{config:{},me:a,configAsRaw:Q({}),initialConfig:{},state:Pu}}},P_=(t,s)=>{s.ignore||(eu(t.element),s.onFocus(t))};var JI=Object.freeze({__proto__:null,focus:P_,blur:(t,s)=>{s.ignore||ky(t.element)},isFocused:t=>Xp(t.element)}),_g=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return $l(a)},events:t=>ds([je(Td(),(s,a)=>{P_(s,t),a.stop()})].concat(t.stopMousedown?[je(Wo(),(s,a)=>{a.event.prevent()})]:[]))}),$_=[qn("onFocus"),ye("stopMousedown",!1),ye("ignore",!1)];const on=Wa({fields:$_,name:"focusing",active:_g,apis:JI}),MD=t=>({init:()=>{const a=S(t);return{get:()=>a.get(),set:y=>a.set(y),clear:()=>a.set(t),readState:()=>a.get()}}}),ND=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},I_=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?Gr(t.element,l):ms(t.element,l)})},qv=(t,s,a,l)=>{const d=a.get();a.set(l),I_(t,s,a),ND(t,s,a),d!==l&&s.onToggled(t,l)},BD=(t,s,a)=>{qv(t,s,a,!a.get())},eL=(t,s,a)=>{qv(t,s,a,!0)},tL=(t,s,a)=>{qv(t,s,a,!1)},gx=(t,s,a)=>a.get(),hx=(t,s,a)=>{qv(t,s,a,s.selected)};var L_=Object.freeze({__proto__:null,onLoad:hx,toggle:BD,isOn:gx,on:eL,off:tL,set:qv}),PD=Object.freeze({__proto__:null,exhibit:()=>$l({}),events:(t,s)=>{const a=Xb(t,s,BD),l=Jb(t,s,hx);return ds(Vt([t.toggleOnExecute?[a]:[],[l]]))}});const $D=(t,s,a)=>{bn(t.element,"aria-pressed",a),s.syncWithExpanded&&FD(t,s,a)},ID=(t,s,a)=>{bn(t.element,"aria-selected",a)},LD=(t,s,a)=>{bn(t.element,"aria-checked",a)},FD=(t,s,a)=>{bn(t.element,"aria-expanded",a)};var F_=[ye("selected",!1),po("toggleClass"),ye("toggleOnExecute",!0),qn("onToggled"),ec("aria",{mode:"none"},Bc("mode",{pressed:[ye("syncWithExpanded",!1),Co("update",$D)],checked:[Co("update",LD)],expanded:[Co("update",FD)],selected:[Co("update",ID)],none:[Co("update",re)]}))];const $n=Wa({fields:F_,name:"toggling",active:PD,apis:L_,state:MD(!1)}),HD=()=>{const t=(s,a)=>{a.stop(),kd(s)};return[je(xi(),t),je(Yf(),t),Jf(Yi()),Jf(Wo())]},px=t=>{const s=a=>Od((l,d)=>{a(l),d.stop()});return ds(Vt([t.map(s).toArray(),HD()]))},VD="alloy.item-hover",H_="alloy.item-focus",zD="alloy.item-toggled",UD=t=>{(tu(t.element).isNone()||on.isFocused(t))&&(on.isFocused(t)||on.focus(t),Wt(t,VD,{item:t}))},WD=t=>{Wt(t,H_,{item:t})},MC=(t,s)=>{Wt(t,zD,{item:t,state:s})},ZD=Q(VD),NC=Q(H_),V_=Q(zD),jD=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),GD=t=>We(J({aria:{mode:"checked"}},cc(t,(s,a)=>a!=="exclusive")),{onToggled:(s,a)=>{dt(t.onToggled)&&t.onToggled(s,a),MC(s,a)}}),nL=t=>({dom:t.dom,domModification:We(J({},t.domModification),{attributes:J(We(J({role:jD(t)},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:ru.augment(t.itemBehaviours,[t.toggling.fold($n.revoke,s=>$n.config(GD(s))),on.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{WD(s)}}),zt.config({mode:"execution"}),St.config({store:{mode:"memory",initialValue:t.data}}),kn("item-type-events",[...HD(),je(ei(),UD),je(ch(),on.focus)])]),components:t.components,eventOrder:t.eventOrder}),oL=[Ue("data"),Ue("components"),Ue("dom"),ye("hasSubmenu",!1),po("toggling"),ru.field("itemBehaviours",[$n,on,zt,St]),ye("ignoreFocus",!1),ye("domModification",{}),Co("builder",nL),ye("eventOrder",{})],qD=t=>({dom:t.dom,components:t.components,events:ds([hm(ch())])}),sL=[Ue("dom"),Ue("components"),Co("builder",qD)],bx=Q("item-widget"),z_=Q([Aa({name:"widget",overrides:t=>({behaviours:nt([St.config({store:{mode:"manual",getValue:s=>t.data,setValue:re}})])})})]),rL=t=>{const s=dC(bx(),t,z_()),a=mC(bx(),t,s.internals()),l=g=>as(g,t,"widget").map(p=>(zt.focusIn(p),p)),d=(g,p)=>Lh(p.event.target)?O.none():(()=>(t.autofocus&&p.setSource(g.element),O.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:ds([Od((g,p)=>{l(g).each(y=>{p.stop()})}),je(ei(),UD),je(ch(),(g,p)=>{t.autofocus?l(g):on.focus(g)})]),behaviours:ru.augment(t.widgetBehaviours,[St.config({store:{mode:"memory",initialValue:t.data}}),on.config({ignore:t.ignoreFocus,onFocus:g=>{WD(g)}}),zt.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:fk(),onLeft:d,onRight:d,onEscape:(g,p)=>!on.isFocused(g)&&!t.autofocus?(on.focus(g),O.some(!0)):(t.autofocus&&p.setSource(g.element),O.none())})])}},KD=[Ue("uid"),Ue("data"),Ue("components"),Ue("dom"),ye("autofocus",!1),ye("ignoreFocus",!1),ru.field("widgetBehaviours",[St,on,zt]),ye("domModification",{}),Pv(z_()),Co("builder",rL)],vx=Bc("type",{widget:KD,item:oL,separator:sL}),U_=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),W_=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),aL=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),cL=Q([wf({factory:{sketch:t=>{const s=Nc("menu.spec item",vx,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Bn(s,"uid")?s:We(J({},s),{uid:bm("item")}),overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),lL=Q([Ue("value"),Ue("items"),Ue("dom"),Ue("components"),ye("eventOrder",{}),Oa("menuBehaviours",[lo,St,Un,zt]),ec("movement",{mode:"menu",moveOnTab:!0},Bc("mode",{grid:[Gp(),Co("config",U_)],matrix:[Co("config",W_),Ue("rowSelector"),ye("previousSelector",O.none)],menu:[ye("moveOnTab",!0),Co("config",aL)]})),ff(),ye("fakeFocus",!1),ye("focusManager",O1()),qn("onHighlight"),qn("onDehighlight")]),YD=Q("alloy.menu-focus"),XD=(t,s)=>{const a=_r(t.element,'[role="menuitemradio"][aria-checked="true"]');mt(a,l=>{Eo(l,s.element)||t.getSystem().getByDom(l).each(d=>{$n.off(d)})})},JD=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Yr(t.menuBehaviours,[lo.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),St.config({store:{mode:"memory",initialValue:t.value}}),Un.config({find:O.some}),zt.config(t.movement.config(t,t.movement))]),events:ds([je(NC(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(y=>{lo.highlight(d,y),g.stop(),Wt(d,YD(),{menu:d,item:y})})}),je(ZD(),(d,g)=>{const p=g.event.item;lo.highlight(d,p)}),je(V_(),(d,g)=>{const{item:p,state:y}=g.event;y&&Br(p.element,"role")==="menuitemradio"&&XD(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),N1=Or({name:"Menu",configFields:lL(),partFields:cL(),factory:JD}),iL=t=>No(t,(s,a)=>({k:s,v:a})),QD=(t,s,a,l)=>ut(a,l).bind(d=>ut(t,d).bind(g=>{const p=QD(t,s,a,g);return O.some([g].concat(p))})).getOr([]),uL=(t,s)=>{const a={};Ko(t,(p,y)=>{mt(p,x=>{a[x]=y})});const l=s,d=iL(s),g=Qo(d,(p,y)=>[y].concat(QD(a,l,d,y)));return Qo(a,p=>ut(g,p).getOr([p]))},dL=()=>{const t=S({}),s=S({}),a=S({}),l=Bo(),d=S({}),g=()=>{t.set({}),s.set({}),a.set({}),l.clear()},p=()=>l.get().isNone(),y=(ct,qe)=>{s.set(We(J({},s.get()),{[ct]:{type:"prepared",menu:qe}}))},x=(ct,qe,pt,It)=>{l.set(ct),t.set(pt),s.set(qe),d.set(It);const Yn=uL(It,pt);a.set(Yn)},_=ct=>Is(t.get(),(qe,pt)=>qe===ct),D=(ct,qe,pt)=>se(ct).bind(It=>_(ct).bind(Yn=>qe(Yn).map(Lt=>({triggeredMenu:It,triggeringItem:Lt,triggeringPath:pt})))),B=(ct,qe)=>{const pt=Sn(he(ct).toArray(),It=>se(It).isSome());return ut(a.get(),ct).bind(It=>{const Yn=Sr(pt.concat(It)),Lt=Ie(Yn,(Wn,Cn)=>D(Wn,qe,Yn.slice(0,Cn+1)).fold(()=>Ks(l.get(),Wn)?[]:[O.none()],Zn=>[O.some(Zn)]));return $o(Lt)})},I=ct=>ut(t.get(),ct).map(qe=>{const pt=ut(a.get(),ct).getOr([]);return[qe].concat(pt)}),H=ct=>ut(a.get(),ct).bind(qe=>qe.length>1?O.some(qe.slice(1)):O.none()),q=ct=>ut(a.get(),ct),se=ct=>Ce(ct).bind(eR),Ce=ct=>ut(s.get(),ct),he=ct=>ut(t.get(),ct);return{setMenuBuilt:y,setContents:x,expand:I,refresh:q,collapse:H,lookupMenu:Ce,lookupItem:he,otherMenus:ct=>{const qe=d.get();return jt(Vo(qe),ct)},getPrimary:()=>l.get().bind(se),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:B}},eR=t=>t.type==="prepared"?O.some(t.menu):O.none(),Z_={init:dL,extractPreparedMenu:eR},tR=Ot("tiered-menu-item-highlight"),nR=Ot("tiered-menu-item-dehighlight");var zl;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(zl||(zl={}));const mL=(t,s)=>{const a=Bo(),l=(bt,Pt,Tt)=>Qo(Tt,(rn,_n)=>{const Xn=()=>N1.sketch(We(J({},rn),{value:_n,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Vr,bo)=>{Wt(Vr,tR,{menuComp:Vr,itemComp:bo})},onDehighlight:(Vr,bo)=>{Wt(Vr,nR,{menuComp:Vr,itemComp:bo})},focusManager:t.fakeFocus?S_():O1()}));return _n===Pt?{type:"prepared",menu:bt.getSystem().build(Xn())}:{type:"notbuilt",nbMenu:Xn}}),d=Z_.init(),g=bt=>{const Pt=l(bt,t.data.primary,t.data.menus),Tt=x();return d.setContents(t.data.primary,Pt,t.data.expansions,Tt),d.getPrimary()},p=bt=>St.getValue(bt).value,y=(bt,Pt,Tt)=>Es(Pt,rn=>{if(!rn.getSystem().isConnected())return O.none();const _n=lo.getCandidates(rn);return an(_n,Xn=>p(Xn)===Tt)}),x=bt=>Qo(t.data.menus,(Pt,Tt)=>Ie(Pt.items,rn=>rn.type==="separator"?[]:[rn.data.value])),_=lo.highlight,D=(bt,Pt)=>{_(bt,Pt),lo.getHighlighted(Pt).orThunk(()=>lo.getFirst(Pt)).each(Tt=>{t.fakeFocus?lo.highlight(Pt,Tt):Np(bt,Tt.element,ch())})},B=(bt,Pt)=>il(Ne(Pt,Tt=>bt.lookupMenu(Tt).bind(rn=>rn.type==="prepared"?O.some(rn.menu):O.none()))),I=(bt,Pt,Tt)=>{const rn=B(Pt,Pt.otherMenus(Tt));mt(rn,_n=>{hc(_n.element,[t.markers.backgroundMenu]),t.stayInDom||un.remove(bt,_n)})},H=bt=>a.get().getOrThunk(()=>{const Pt={},Tt=_r(bt.element,`.${t.markers.item}`),rn=Sn(Tt,_n=>Br(_n,"aria-haspopup")==="true");return mt(rn,_n=>{bt.getSystem().getByDom(_n).each(Xn=>{const Vr=p(Xn);Pt[Vr]=Xn})}),a.set(Pt),Pt}),q=(bt,Pt)=>{const Tt=H(bt);Ko(Tt,(rn,_n)=>{const Xn=So(Pt,_n);bn(rn.element,"aria-expanded",Xn)})},se=(bt,Pt,Tt)=>O.from(Tt[0]).bind(rn=>Pt.lookupMenu(rn).bind(_n=>{if(_n.type==="notbuilt")return O.none();{const Xn=_n.menu,Vr=B(Pt,Tt.slice(1));return mt(Vr,bo=>{Gr(bo.element,t.markers.backgroundMenu)}),no(Xn.element)||un.append(bt,yl(Xn)),hc(Xn.element,[t.markers.backgroundMenu]),D(bt,Xn),I(bt,Pt,Tt),O.some(Xn)}}));let Ce;(function(bt){bt[bt.HighlightSubmenu=0]="HighlightSubmenu",bt[bt.HighlightParent=1]="HighlightParent"})(Ce||(Ce={}));const he=(bt,Pt,Tt)=>{if(Tt.type==="notbuilt"){const rn=bt.getSystem().build(Tt.nbMenu());return d.setMenuBuilt(Pt,rn),rn}else return Tt.menu},me=(bt,Pt,Tt=Ce.HighlightSubmenu)=>{if(Pt.hasConfigured(Xt)&&Xt.isDisabled(Pt))return O.some(Pt);{const rn=p(Pt);return d.expand(rn).bind(_n=>(q(bt,_n),O.from(_n[0]).bind(Xn=>d.lookupMenu(Xn).bind(Vr=>{const bo=he(bt,Xn,Vr);return no(bo.element)||un.append(bt,yl(bo)),t.onOpenSubmenu(bt,Pt,bo,Sr(_n)),Tt===Ce.HighlightSubmenu?(lo.highlightFirst(bo),se(bt,d,_n)):(lo.dehighlightAll(bo),O.some(Pt))}))))}},$e=(bt,Pt)=>{const Tt=p(Pt);return d.collapse(Tt).bind(rn=>(q(bt,rn),se(bt,d,rn).map(_n=>(t.onCollapseMenu(bt,Pt,_n),_n))))},Be=(bt,Pt)=>{const Tt=p(Pt);return d.refresh(Tt).bind(rn=>(q(bt,rn),se(bt,d,rn)))},ct=(bt,Pt)=>Lh(Pt.element)?O.none():me(bt,Pt,Ce.HighlightSubmenu),qe=(bt,Pt)=>Lh(Pt.element)?O.none():$e(bt,Pt),pt=(bt,Pt)=>$e(bt,Pt).orThunk(()=>t.onEscape(bt,Pt).map(()=>bt)),It=bt=>(Pt,Tt)=>Qi(Tt.getSource(),`.${t.markers.item}`).bind(rn=>Pt.getSystem().getByDom(rn).toOptional().bind(_n=>bt(Pt,_n).map(Fe))),Yn=ds([je(YD(),(bt,Pt)=>{const Tt=Pt.event.item;d.lookupItem(p(Tt)).each(()=>{const rn=Pt.event.menu;lo.highlight(bt,rn);const _n=p(Pt.event.item);d.refresh(_n).each(Xn=>I(bt,d,Xn))})}),Od((bt,Pt)=>{const Tt=Pt.event.target;bt.getSystem().getByDom(Tt).each(rn=>{p(rn).indexOf("collapse-item")===0&&$e(bt,rn),me(bt,rn,Ce.HighlightSubmenu).fold(()=>{t.onExecute(bt,rn)},re)})}),qs((bt,Pt)=>{g(bt).each(Tt=>{un.append(bt,yl(Tt)),t.onOpenMenu(bt,Tt),t.highlightOnOpen===zl.HighlightMenuAndItem?D(bt,Tt):t.highlightOnOpen===zl.HighlightJustMenu&&_(bt,Tt)})}),je(tR,(bt,Pt)=>{t.onHighlightItem(bt,Pt.event.menuComp,Pt.event.itemComp)}),je(nR,(bt,Pt)=>{t.onDehighlightItem(bt,Pt.event.menuComp,Pt.event.itemComp)}),...t.navigateOnHover?[je(ZD(),(bt,Pt)=>{const Tt=Pt.event.item;Be(bt,Tt),me(bt,Tt,Ce.HighlightParent),t.onHover(bt,Tt)})]:[]]),Lt=bt=>lo.getHighlighted(bt).bind(lo.getHighlighted),Wn=bt=>{Lt(bt).each(Pt=>{$e(bt,Pt)})},Cn=bt=>{d.getPrimary().each(Pt=>{D(bt,Pt)})},Zn=bt=>O.from(bt.components()[0]).filter(Pt=>Br(Pt.element,"role")==="menu"),Po={collapseMenu:Wn,highlightPrimary:Cn,repositionMenus:bt=>{d.getPrimary().bind(Tt=>Lt(bt).bind(rn=>{const _n=p(rn),Xn=zr(d.getMenus()),Vr=il(Ne(Xn,Z_.extractPreparedMenu));return d.getTriggeringPath(_n,bo=>y(bt,Vr,bo))}).map(rn=>({primary:Tt,triggeringPath:rn}))).fold(()=>{Zn(bt).each(Tt=>{t.onRepositionMenu(bt,Tt,[])})},({primary:Tt,triggeringPath:rn})=>{t.onRepositionMenu(bt,Tt,rn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Yr(t.tmenuBehaviours,[zt.config({mode:"special",onRight:It(ct),onLeft:It(qe),onEscape:It(pt),focusIn:(bt,Pt)=>{d.getPrimary().each(Tt=>{Np(bt,Tt.element,ch())})}}),lo.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Un.config({find:bt=>lo.getHighlighted(bt)}),un.config({})]),eventOrder:t.eventOrder,apis:Po,events:Yn}},fL=Q("collapse-item"),B1=(t,s,a)=>({primary:t,menus:s,expansions:a}),gL=(t,s)=>({primary:t,menus:pn(t,s),expansions:{}}),hL=t=>({value:Ot(fL()),meta:{text:t}}),Wu=ar({name:"TieredMenu",configFields:[jp("onExecute"),jp("onEscape"),rg("onOpenMenu"),rg("onOpenSubmenu"),qn("onRepositionMenu"),qn("onCollapseMenu"),ye("highlightOnOpen",zl.HighlightMenuAndItem),Ru("data",[Ue("primary"),Ue("menus"),Ue("expansions")]),ye("fakeFocus",!1),qn("onHighlightItem"),qn("onDehighlightItem"),qn("onHover"),Md(),Ue("dom"),ye("navigateOnHover",!0),ye("stayInDom",!1),Oa("tmenuBehaviours",[zt,lo,Un,un]),ye("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:mL,extraApis:{tieredData:B1,singleData:gL,collapseItem:hL}}),pL=(t,s,a,l,d)=>{const g=()=>t.lazySink(s),p=l.type==="horizontal"?{layouts:{onLtr:()=>Yb(),onRtl:()=>Yp()}}:{},y=_=>_.length===2,x=_=>y(_)?p:{};return Wu.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Qn.close(s),t.onEscape.map(_=>_(s)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(_,D)=>{Kr.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(_,D,B,I)=>{const H=g().getOrDie();Kr.position(H,B,{anchor:J({type:"submenu",item:D},x(I))})},onRepositionMenu:(_,D,B)=>{const I=g().getOrDie();Kr.positionWithinBounds(I,D,a,d()),mt(B,H=>{const q=x(H.triggeringPath);Kr.position(I,H.triggeredMenu,{anchor:J({type:"submenu",item:H.triggeringItem},q)})})}})},bL=(t,s)=>{const a=(I,H)=>t.getRelated(I).exists(se=>mf(se,H)),l=(I,H)=>{Qn.setContent(I,H)},d=(I,H,q)=>{const se=O.none;g(I,H,q,se)},g=(I,H,q,se)=>{const Ce=t.lazySink(I).getOrDie();Qn.openWhileCloaked(I,H,()=>Kr.positionWithinBounds(Ce,I,q,se())),St.setValue(I,O.some({mode:"position",config:q,getBounds:se}))},p=(I,H,q)=>{y(I,H,q,O.none)},y=(I,H,q,se)=>{const Ce=pL(t,I,H,q,se);Qn.open(I,Ce),St.setValue(I,O.some({mode:"menu",menu:Ce}))},x=I=>{Qn.isOpen(I)&&(St.setValue(I,O.none()),Qn.close(I))},_=I=>Qn.getState(I),D=I=>{Qn.isOpen(I)&&St.getValue(I).each(H=>{switch(H.mode){case"menu":Qn.getState(I).each(Wu.repositionMenus);break;case"position":const q=t.lazySink(I).getOrDie();Kr.positionWithinBounds(q,I,H.config,H.getBounds());break}})},B={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:y,hide:x,getContent:_,reposition:D,isOpen:Qn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Yr(t.inlineBehaviours,[Qn.config({isPartOf:(I,H,q)=>mf(H,q)||a(I,q),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),St.config({store:{mode:"memory",initialValue:O.none()}}),kr.config({channels:J(J({},Em(J({isExtraPart:s.isExtraPart},t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})))),Xy(We(J({},t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})),{doReposition:D})))})]),eventOrder:t.eventOrder,apis:B}},Ms=ar({name:"InlineView",configFields:[Ue("lazySink"),qn("onShow"),qn("onHide"),im("onEscape"),Oa("inlineBehaviours",[Qn,St,kr]),la("fireDismissalEventInstead",[ye("event",gm())]),la("fireRepositionEventInstead",[ye("event",Ob())]),ye("getRelated",O.none),ye("isExtraPart",et),ye("eventOrder",O.none)],factory:bL,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,d)=>{t.showWithinBounds(s,a,l,d)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,d)=>{t.showMenuWithinBounds(s,a,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var yx=tinymce.util.Tools.resolve("tinymce.util.Delay");const Us=ar({name:"Button",factory:t=>{const s=px(t.action),a=t.dom.tag,l=g=>ut(t.dom,"attributes").bind(p=>ut(p,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),p=l("role").map(y=>({role:y})).getOr({});return J({type:g},p)}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:ru.augment(t.buttonBehaviours,[on.config({}),zt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[ye("uid",void 0),Ue("dom"),ye("components",[]),ru.field("buttonBehaviours",[on,zt]),po("action"),po("role"),ye("eventOrder",{})]}),Do=t=>{const s=Uu(t)&&Pa(t,"uid")?t.uid:bm("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>We(J({},t),{uid:s})}};var iu=tinymce.util.Tools.resolve("tinymce.util.I18n");const oR={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},sR="temporary-placeholder",BC=t=>()=>ut(t,sR).getOr("!not found!"),j_=(t,s)=>{const a=t.toLowerCase();if(iu.isRtl()){const l=ks(a,"-rtl");return Bn(s,l)?l:a}else return a},rR=(t,s)=>ut(s,j_(t,s)),aR=(t,s)=>{const a=s();return rR(t,a).getOrThunk(BC(a))},Cx=(t,s,a)=>{const l=s();return rR(t,l).or(a).getOrThunk(BC(l))},G_=t=>iu.isRtl()?Bn(oR,t):!1,q_=()=>kn("add-focusable",[qs(t=>{Dw(t.element,"svg").each(s=>bn(s,"focusable","false"))})]),K_=(t,s,a,l)=>{var d,g;const p=G_(s)?["tox-icon--flip"]:[],y=ut(a,j_(s,a)).or(l).getOrThunk(BC(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:y},behaviours:nt([...(g=t.behaviours)!==null&&g!==void 0?g:[],q_()])}},Zu=(t,s,a,l=O.none())=>K_(s,t,a(),l),vL=(t,s,a)=>{const l=a(),d=an(t,g=>Bn(l,j_(g,l)));return K_(s,d.getOr(sR),l,O.none())},Y_={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},PC=ar({name:"Notification",factory:t=>{const s=Do({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:nt([un.config({})])}),a=H=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${H}%`}}}),l=H=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${H}%`}}),d=Do({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:nt([un.config({})])}),y={updateProgress:(H,q)=>{H.getSystem().isConnected()&&d.getOpt(H).each(se=>{un.set(se,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(q)]},l(q)])})},updateText:(H,q)=>{if(H.getSystem().isConnected()){const se=s.get(H);un.set(se,[Fs(q)])}}},x=Vt([t.icon.toArray(),t.level.toArray(),t.level.bind(H=>O.from(Y_[H])).toArray()]),_=Do(Us.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Zu("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:H=>{t.onAction(H)}})),D=vL(x,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),B={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:nt([un.config({})])},I=[D,B];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(H=>["tox-notification","tox-notification--in",`tox-notification--${H}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:nt([on.config({}),kn("notification-events",[je(nf(),H=>{_.getOpt(H).each(on.focus)})])]),components:I.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[_.asSpec()]:[]),apis:y}},configFields:[po("level"),Ue("progress"),po("icon"),Ue("onAction"),Ue("text"),Ue("iconProvider"),Ue("translationProvider"),tc("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var yL=(t,s,a)=>{const l=s.backstage.shared,d=()=>{const x=k(pe.fromDom(t.getContentAreaContainer())),_=le(),D=ni(_.x,x.x,x.right),B=ni(_.y,x.y,x.bottom),I=Math.max(x.right,_.right),H=Math.max(x.bottom,_.bottom);return O.some(is(D,B,I-D,H-B))};return{open:(x,_)=>{const D=()=>{_(),Ms.hide(I)},B=ka(PC.sketch({text:x.text,level:So(["success","error","warning","warn","info"],x.type)?x.type:void 0,progress:x.progressBar===!0,icon:x.icon,closeButton:x.closeButton,onAction:D,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),I=ka(Ms.sketch(J({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{}},l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));a.add(I),ur(x.timeout)&&x.timeout>0&&yx.setEditorTimeout(t,()=>{D()},x.timeout);const q={close:D,reposition:()=>{const se=yl(B),Ce={maxHeightFunction:ug()},he=t.notificationManager.getNotifications();if(he[0]===q){const me=We(J({},l.anchors.banner()),{overrides:Ce});Ms.showWithinBounds(I,se,{anchor:me},d)}else Ve(he,q).each(me=>{const $e=he[me-1].getEl(),Be={type:"node",root:vs(),node:O.some(pe.fromDom($e)),overrides:Ce,layouts:{onRtl:()=>[zs],onLtr:()=>[zs]}};Ms.showWithinBounds(I,se,{anchor:Be},d)})},text:se=>{PC.updateText(B,se)},settings:x,getEl:()=>B.element.dom,progressBar:{value:se=>{PC.updateProgress(B,se)}}};return q},close:x=>{x.close()},getArgs:x=>x.settings}},Og=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),wx=tinymce.util.Tools.resolve("tinymce.EditorManager"),P1=tinymce.util.Tools.resolve("tinymce.Env"),uu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(uu||(uu={}));var $C;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})($C||($C={}));const gs=t=>s=>s.options.get(t),IC=t=>s=>O.from(t(s)),cR=t=>{const s=P1.deviceType.isPhone(),a=P1.deviceType.isTablet()||s,l=t.options.register,d=p=>kt(p)||p===!1,g=p=>kt(p)||ur(p);l("skin",{processor:p=>kt(p)||p===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:Og.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:p=>kt(p)||Ho(p),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:p=>Ho(p)||kt(p)||Ln(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),xo(9,p=>{l("toolbar"+(p+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:$C.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:p=>p==="both"||Ho(p),default:!P1.deviceType.isTouch()}),l("sidebar_show",{processor:"string"})},Sx=gs("readonly"),xx=gs("height"),Tx=gs("width"),LC=IC(gs("min_width")),X_=IC(gs("min_height")),FC=IC(gs("max_width")),J_=IC(gs("max_height")),lR=IC(gs("style_formats")),iR=gs("style_formats_merge"),Q_=gs("style_formats_autohide"),uR=gs("content_langs"),dR=gs("removed_menuitems"),Gh=gs("toolbar_mode"),eO=gs("toolbar_groups"),Ex=gs("toolbar_location"),CL=gs("fixed_toolbar_container"),tO=gs("fixed_toolbar_container_target"),mR=gs("toolbar_persist"),fR=gs("toolbar_sticky_offset"),gR=gs("menubar"),kx=gs("toolbar"),hR=gs("file_picker_callback"),nO=gs("file_picker_validator_handler"),_x=gs("font_size_input_default_unit"),pR=gs("file_picker_types"),HC=gs("typeahead_urls"),bR=gs("anchor_top"),vR=gs("anchor_bottom"),yR=gs("draggable_modal"),CR=gs("statusbar"),wR=gs("elementpath"),SR=gs("branding"),oO=gs("resize"),xR=gs("paste_as_text"),TR=gs("sidebar_show"),Ox=gs("promotion"),Ag=t=>t.options.get("skin")===!1,Ax=t=>t.options.get("menubar")!==!1,ER=t=>{const s=t.options.get("skin_url");if(Ag(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return wx.baseURL+"/skins/ui/"+a}},Dx=t=>t.options.get("line_height_formats").split(" "),Rx=t=>{const s=kx(t),a=kt(s),l=Ln(s)&&s.length>0;return!VC(t)&&(l||a||s===!0)},Mx=t=>{const s=xo(9,l=>t.options.get("toolbar"+(l+1))),a=Sn(s,kt);return tn(a.length>0,a)},VC=t=>Mx(t).fold(()=>{const s=kx(t);return Qe(s,kt)&&s.length>0},Fe),Nx=t=>Ex(t)===$C.bottom,sO=t=>{var s;if(!t.inline)return O.none();const a=(s=CL(t))!==null&&s!==void 0?s:"";if(a.length>0)return Hs(vs(),a);const l=tO(t);return Jn(l)?O.some(pe.fromDom(l)):O.none()},qh=t=>t.inline&&sO(t).isSome(),rO=t=>sO(t).getOrThunk(()=>Ke(_e(pe.fromDom(t.getElement())))),Bx=t=>t.inline&&!Ax(t)&&!Rx(t)&&!VC(t),zC=t=>(t.options.get("toolbar_sticky")||t.inline)&&!qh(t)&&!Bx(t),Hd=t=>!qh(t)&&t.options.get("ui_mode")==="split",kR=t=>{const s=t.options.get("menu");return Qo(s,a=>We(J({},a),{items:a.items}))};var wL=Object.freeze({__proto__:null,get ToolbarMode(){return uu},get ToolbarLocation(){return $C},register:cR,getSkinUrl:ER,isReadOnly:Sx,isSkinDisabled:Ag,getHeightOption:xx,getWidthOption:Tx,getMinWidthOption:LC,getMinHeightOption:X_,getMaxWidthOption:FC,getMaxHeightOption:J_,getUserStyleFormats:lR,shouldMergeStyleFormats:iR,shouldAutoHideStyleFormats:Q_,getLineHeightFormats:Dx,getContentLanguages:uR,getRemovedMenuItems:dR,isMenubarEnabled:Ax,isMultipleToolbars:VC,isToolbarEnabled:Rx,isToolbarPersist:mR,getMultipleToolbarsOption:Mx,getUiContainer:rO,useFixedContainer:qh,isSplitUiMode:Hd,getToolbarMode:Gh,isDraggableModal:yR,isDistractionFree:Bx,isStickyToolbar:zC,getStickyToolbarOffset:fR,getToolbarLocation:Ex,isToolbarLocationBottom:Nx,getToolbarGroups:eO,getMenus:kR,getMenubar:gR,getToolbar:kx,getFilePickerCallback:hR,getFilePickerTypes:pR,useTypeaheadUrls:HC,getAnchorTop:bR,getAnchorBottom:vR,getFilePickerValidatorHandler:nO,getFontSizeInputDefaultUnit:_x,useStatusBar:CR,useElementPath:wR,promotionEnabled:Ox,useBranding:SR,getResize:oO,getPasteAsText:xR,getSidebarShow:TR});const Px="[data-mce-autocompleter]",$x=t=>Qi(t,Px),SL=t=>Hs(t,Px),TL={setup:(t,s)=>{const a=(d,g)=>{Wt(d,Bl(),{raw:g})},l=()=>t.getMenu().bind(lo.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(kd),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(lo.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&$x(pe.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var aO;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(aO||(aO={}));var ju=aO;const cO="tox-menu-nav__js",Ix="tox-collection__item",lO="tox-swatch",EL={normal:cO,color:lO},_R="tox-collection__item--enabled",kL="tox-collection__group-heading",OR="tox-collection__item-icon",iO="tox-collection__item-label",_L="tox-collection__item-accessory",AR="tox-collection__item-caret",OL="tox-collection__item-checkmark",UC="tox-collection__item--active",Lx="tox-collection__item-container",AL="tox-collection__item-container--column",DR="tox-collection__item-container--row",DL="tox-collection__item-container--align-right",RR="tox-collection__item-container--align-left",RL="tox-collection__item-container--valign-top",ML="tox-collection__item-container--valign-middle",NL="tox-collection__item-container--valign-bottom",MR=t=>ut(EL,t).getOr(cO),BL=t=>t==="color"?"tox-swatches":"tox-menu",uO=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:BL(t),tieredMenu:"tox-tiered-menu"}),Dg=t=>{const s=uO(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:MR(t)}},PL=(t,s,a)=>{const l=uO(a);return{tag:"div",classes:Vt([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},$L=[N1.parts.items({})],Fx=(t,s,a)=>{const l=uO(a);return{dom:{tag:"div",classes:Vt([[l.tieredMenu]])},markers:Dg(a)}},NR=Q([po("data"),ye("inputAttributes",{}),ye("inputStyles",{}),ye("tag","input"),ye("inputClasses",[]),qn("onSetValue"),ye("styles",{}),ye("eventOrder",{}),Oa("inputBehaviours",[St,on]),ye("selectOnFocus",!0)]),BR=t=>nt([on.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=ti(a);a.dom.setSelectionRange(0,l.length)}:re})]),IL=t=>J(J({},BR(t)),Yr(t.inputBehaviours,[St.config({store:We(J({mode:"manual"},t.data.map(s=>({initialValue:s})).getOr({})),{getValue:s=>ti(s.element),setValue:(s,a)=>{ti(s.element)!==a&&Ei(s.element,a)}}),onSetValue:t.onSetValue})])),PR=t=>({tag:t.tag,attributes:J({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}),LL=(t,s)=>({uid:t.uid,dom:PR(t),components:[],behaviours:IL(t),eventOrder:t.eventOrder}),$1=ar({name:"Input",configFields:NR(),factory:LL}),$R=Ot("refetch-trigger-event"),IR=Ot("redirect-menu-item-interaction"),LR="tox-menu__searcher",I1=t=>Hs(t.element,`.${LR}`).bind(s=>t.getSystem().getByDom(s).toOptional()),FR=I1,dO=(t,s)=>{St.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},HR=t=>{const s=St.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},FL=(t,s)=>{P(s.element,"id").each(a=>bn(t.element,"aria-activedescendant",a))},HL=t=>{const s=(d,g)=>(g.cut(),O.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return Wt(d,IR,p),O.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Ix]},components:[$1.sketch({inputClasses:[LR,"tox-textfield"],inputAttributes:We(J({},t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({})),{type:"search","aria-autocomplete":"list"}),inputBehaviours:nt([kn(l,[je(xd(),d=>{co(d,$R)}),je(Bl(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),zt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,zt.name()]}})]}},Hx="tox-collection--results__js",VR=t=>{var s;return t.dom?We(J({},t),{dom:We(J({},t.dom),{attributes:We(J({},(s=t.dom.attributes)!==null&&s!==void 0?s:{}),{id:Ot("aria-item-search-result-id"),"aria-selected":"false"})})}):t},Vx=(t,s)=>a=>{const l=nr(a,s);return Ne(l,d=>({dom:t,components:d}))},VL=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[N1.parts.items({preprocess:t!=="auto"?Vx({tag:"div",classes:["tox-swatches__row"]},t):cn})]}]}),mO=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[N1.parts.items({preprocess:Vx({tag:"div",classes:["tox-collection__group"]},t)})]}),zx=(t,s)=>{const a=[];let l=[];return mt(t,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(Bn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),Ne(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},Ux=(t,s,a)=>N1.parts.items({preprocess:l=>{const d=Ne(l,a);return t!=="auto"&&t>1?Vx({tag:"div",classes:["tox-collection__group"]},t)(d):zx(d,(g,p)=>s[p].type==="separator")}}),Wx=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[Ux(t,s,cn)]}),Zx=(t,s,a=!0)=>{const l=Ot("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Hx].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[Ux(t,s,VR)]}},zR=(t,s,a)=>{const l=Ot("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[HL({i18n:iu.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Hx],attributes:{id:l}},components:[Ux(t,s,VR)]}]}},Ef=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[N1.parts.items({preprocess:a=>zx(a,(l,d)=>t[d].type==="separator")})]}),Kv=t=>qo(t,s=>"icon"in s&&s.icon!==void 0),Rg=t=>(console.error(Jc(t)),O.none()),zL=(t,s,a,l,d)=>{const g=Ef(a);return{value:t,dom:g.dom,components:g.components,items:a}},fO=(t,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?Wx(l,a):d.searchMode.searchMode==="search-with-field"?zR(l,a,d.searchMode):Zx(l,a);if(d.menuType==="color"){const p=VL(l);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const p=Wx(l,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const p=mO(l);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:PL(s,l,d.menuType),components:$L,items:a}},Fr=br("type"),Kh=br("name"),gO=br("label"),Mg=br("text"),hO=br("title"),jx=br("icon"),L1=br("value"),UL=Ql("fetch"),pO=Ql("getSubmenuItems"),Yh=Ql("onAction"),WL=Ql("onItemAction"),Xh=Ir("onSetup",()=>re),UR=vr("name"),Jh=vr("text"),Vd=vr("icon"),Gx=vr("tooltip"),bO=vr("label"),ZL=vr("shortcut"),WR=im("select"),WC=tc("active",!1),jL=tc("borderless",!1),Gu=tc("enabled",!0),ZC=tc("primary",!1),Yv=t=>ye("columns",t),qx=ye("meta",{}),vO=Ir("onAction",re),F1=t=>Ha("type",t),Kx=t=>Ao("name","name",yd(()=>Ot(`${t}-name`)),ca),GL=t=>Ao("value","value",yd(()=>Ot(`${t}-value`)),Sa()),ZR=Me([Fr,Jh]),jR=t=>En("separatormenuitem",ZR,t),GR=Me([F1("autocompleteitem"),WC,Gu,qx,L1,Jh,Vd]),qR=t=>En("Autocompleter.Separator",ZR,t),KR=t=>En("Autocompleter.Item",GR,t),jC=[Gu,Gx,Vd,Jh,Xh],qL=Me([Fr,Yh].concat(jC)),yO=t=>En("toolbarbutton",qL,t),GC=[WC].concat(jC),CO=Me(GC.concat([Fr,Yh])),wO=t=>En("ToggleButton",CO,t),SO=[Ir("predicate",et),Rl("scope","node",["node","editor"]),Rl("position","selection",["node","selection","line"])],YR=jC.concat([F1("contextformbutton"),ZC,Yh,Qa("original",cn)]),KL=GC.concat([F1("contextformbutton"),ZC,Yh,Qa("original",cn)]),xO=jC.concat([F1("contextformbutton")]),YL=GC.concat([F1("contextformtogglebutton")]),XR=Bc("type",{contextformbutton:YR,contextformtogglebutton:KL}),JR=Me([F1("contextform"),Ir("initValue",Q("")),bO,Qc("commands",XR),Ki("launch",Bc("type",{contextformbutton:xO,contextformtogglebutton:YL}))].concat(SO)),H1=t=>En("ContextForm",JR,t),XL=Me([F1("contexttoolbar"),br("items")].concat(SO)),TO=t=>En("ContextToolbar",XL,t),Yx=[Fr,br("src"),vr("alt"),nh("classes",[],ca)],JL=Me(Yx),QR=[Fr,Mg,UR,nh("classes",["tox-collection__item-label"],ca)],eM=Me(QR),EO=Er(()=>wi("type",{cardimage:JL,cardtext:eM,cardcontainer:kO})),kO=Me([Fr,Ha("direction","horizontal"),Ha("align","left"),Ha("valign","middle"),Qc("items",EO)]),V1=[Gu,Jh,ZL,GL("menuitem"),qx],QL=Me([Fr,bO,Qc("items",EO),Xh,vO].concat(V1)),tM=t=>En("cardmenuitem",QL,t),nM=Me([Fr,WC,Vd].concat(V1)),oM=t=>En("choicemenuitem",nM,t),_O=[Fr,br("fancytype"),vO],eF=[ye("initData",{})].concat(_O),sM=[im("select"),w("initData",{},[tc("allowCustomColors",!0),Ha("storageKey","default"),qf("colors",Sa())])].concat(_O),qC=Bc("fancytype",{inserttable:eF,colorswatch:sM}),tF=t=>En("fancymenuitem",qC,t),nF=Me([Fr,Xh,vO,Vd].concat(V1)),oF=t=>En("menuitem",nF,t),rM=Me([Fr,pO,Xh,Vd].concat(V1)),aM=t=>En("nestedmenuitem",rM,t),sF=Me([Fr,Vd,WC,Xh,Yh].concat(V1)),rF=t=>En("togglemenuitem",sF,t),OO=(t,s,a)=>{const l=_r(t.element,"."+a);if(l.length>0){const d=Xo(l,g=>{const p=g.dom.getBoundingClientRect().top,y=l[0].dom.getBoundingClientRect().top;return Math.abs(p-y)>s}).getOr(l.length);return O.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return O.none()},cM=(t,s)=>nt([kn(t,s)]),Qh={namedEvents:cM,unnamedEvents:t=>cM(Ot("unnamed-events"),t)},lM=Ot("tooltip.exclusive"),Xv=Ot("tooltip.show"),Jv=Ot("tooltip.hide"),AO=(t,s,a)=>{t.getSystem().broadcastOn([lM],{})};var iM=Object.freeze({__proto__:null,hideAllExclusive:AO,setComponents:(t,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&un.set(d,l)})}}),uM=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Ld(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},l=d=>{if(!s.isShowing()){AO(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ds(t.mode==="normal"?[je(ei(),y=>{co(d,Xv)}),je(mm(),y=>{co(d,Jv)})]:[]),behaviours:nt([un.config({})])});s.setTooltip(p),Id(g,p),t.onShow(d,p),Kr.position(g,p,{anchor:t.anchor(d)})}};return ds(Vt([[je(Xv,d=>{s.resetTimer(()=>{l(d)},t.delay)}),je(Jv,d=>{s.resetTimer(()=>{a(d)},t.delay)}),je(Gs(),(d,g)=>{const p=g;p.universal||So(p.channels,lM)&&a(d)}),el(d=>{a(d)})],t.mode==="normal"?[je(nf(),d=>{co(d,Xv)}),je(Y0(),d=>{co(d,Jv)}),je(ei(),d=>{co(d,Xv)}),je(mm(),d=>{co(d,Jv)})]:[je(ty(),(d,g)=>{co(d,Xv)}),je(Ab(),d=>{co(d,Jv)})]]))}}),dM=[Ue("lazySink"),Ue("tooltipDom"),ye("exclusive",!0),ye("tooltipComponents",[]),ye("delay",300),Rl("mode","normal",["normal","follow-highlight"]),ye("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:Q([zs,ki,Ua,Il,qr,Vs]),onRtl:Q([zs,ki,Ua,Il,qr,Vs])}})),qn("onHide"),qn("onShow")],cF=Object.freeze({__proto__:null,init:()=>{const t=Bo(),s=Bo(),a=()=>{t.on(clearTimeout)},l=(g,p)=>{a(),t.set(setTimeout(g,p))},d=Q("not-implemented");return Ta({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:l,readState:d})}});const mM=Wa({fields:dM,name:"tooltipping",active:uM,state:cF,apis:iM}),lF=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),DO="silver.readonly",fM=Me([Ap("readonly")]),Xx=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&mt(d,g=>{g.broadcastOn([Tm()],{target:l})}),mt(d,g=>{g.broadcastOn([DO],{readonly:s})})},gM=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&Xx(s,!0)}),t.on("SwitchMode",()=>Xx(s,t.mode.isReadOnly())),Sx(t)&&t.mode.set("readonly")},Ra=()=>kr.config({channels:{[DO]:{schema:fM,onReceive:(t,s)=>{Xt.set(t,s.readonly)}}}}),du={item:t=>Xt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Xt.config({disabled:t}),splitButton:t=>Xt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Xt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},KC=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},z1=(t,s)=>qs(a=>{KC(t,a)(d=>{const g=t.onSetup(d);dt(g)&&s.set(g)})}),U1=(t,s)=>el(a=>KC(t,a)(s.get())),hM=(t,s)=>Od((a,l)=>{KC(t,a)(t.onAction),!t.triggersSubmenu&&s===ju.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&co(a,lh()),l.stop())}),iF={[Lc()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Qv=il,W1=(t,s,a,l)=>{const d=S(re);return{type:"item",dom:s.dom,components:Qv(s.optComponents),data:t.data,eventOrder:iF,hasSubmenu:t.triggersSubmenu,itemBehaviours:nt([kn("item-events",[hM(t,a),z1(t,d),U1(t,d)]),du.item(()=>!t.enabled||l.isDisabled()),Ra(),un.config({})].concat(t.itemBehaviours))}},Z1=t=>({value:t.value,meta:J({text:t.text.getOr("")},t.meta)}),pM=t=>{const s=P1.os.isMacOS()||P1.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=Ne(g,y=>{const x=y.toLowerCase().trim();return Bn(d,x)?d[x]:y});return s?p.join(""):p.join("+")},RO=(t,s,a=[OR])=>Zu(t,{tag:"div",classes:a},s),bM=t=>({dom:{tag:"div",classes:[iO]},components:[Fs(iu.translate(t))]}),vM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),uF=(t,s)=>({dom:{tag:"div",classes:[iO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Fs(iu.translate(s))]}]}),dF=t=>({dom:{tag:"div",classes:[_L]},components:[Fs(pM(t))]}),ep=t=>RO("checkmark",t,[OL]),MO=t=>RO("chevron-right",t,[AR]),mF=t=>RO("chevron-down",t,[AR]),Jx=(t,s)=>{const a=t.direction==="vertical"?AL:DR,l=t.align==="left"?RR:DL;return{dom:{tag:"div",classes:[Lx,a,l,(()=>{switch(t.valign){case"top":return RL;case"middle":return ML;case"bottom":return NL}})()]},components:s}},Om=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),fF=(t,s,a)=>{const l="custom",d="remove",g=t.ariaLabel,p=t.value,y=t.iconContent.map(_=>Cx(_,s.icons,a));return{dom:(()=>{const _=lO,D=y.getOr(""),I={tag:"div",attributes:g.map(H=>({title:s.translate(H)})).getOr({}),classes:[_]};return p===l?We(J({},I),{tag:"button",classes:[...I.classes,"tox-swatches__picker-btn"],innerHtml:D}):p===d?We(J({},I),{classes:[...I.classes,"tox-swatch--remove"],innerHtml:D}):Jn(p)?We(J({},I),{attributes:We(J({},I.attributes),{"data-mce-color":p}),styles:{"background-color":p},innerHtml:D}):I})(),optComponents:[]}},yM=t=>{const s=t.map(a=>({attributes:{title:iu.translate(a)}})).getOr({});return J({tag:"div",classes:[cO,Ix]},s)},gF=(t,s,a,l)=>{const d={tag:"div",classes:[OR]},g=I=>Zu(I,d,s.icons,l),p=()=>O.some({dom:d}),y=a?t.iconContent.map(g).orThunk(p):O.none(),x=t.checkMark,_=O.from(t.meta).fold(()=>bM,I=>Bn(I,"style")?Jt(uF,I.style):bM),D=t.htmlContent.fold(()=>t.textContent.map(_),I=>O.some(vM(I,[iO])));return{dom:yM(t.ariaLabel),optComponents:[y,D,t.shortcutContent.map(dF),x,t.caret]}},j1=(t,s,a,l=O.none())=>t.presets==="color"?fF(t,s,l):gF(t,s,a,l),CM=(t,s)=>ut(t,"tooltipWorker").map(a=>[mM.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:ug}}),mode:"follow-highlight",onShow:(l,d)=>{a(g=>{mM.setComponents(l,[Cm({element:pe.fromDom(g)})])})}})]).getOr([]),hF=t=>Og.DOM.encode(t),NO=(t,s)=>{const a=iu.translate(t),l=hF(a);if(s.length>0){const d=new RegExp(lF(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},pF=(t,s,a,l,d,g,p,y=!0)=>{const x=j1({presets:l,textContent:O.none(),htmlContent:a?t.text.map(_=>NO(_,s)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},p.providers,y,t.icon);return W1({data:Z1(t),enabled:t.enabled,getApi:Q({}),onAction:_=>d(t.value,t.meta),onSetup:Q(re),triggersSubmenu:!1,itemBehaviours:CM(t.meta,p)},x,g,p.providers)},wM=(t,s)=>Ne(t,a=>{switch(a.type){case"cardcontainer":return Jx(a,wM(a.items,s));case"cardimage":return Om(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>So(s.cardText.highlightOn,g))?O.from(s.cardText.matchText).getOr(""):"";return vM(NO(a.text,d),a.classes)}}),bF=(t,s,a,l)=>{const d=p=>({isEnabled:()=>!Xt.isDisabled(p),setEnabled:y=>{Xt.set(p,!y),mt(_r(p.element,"*"),x=>{p.getSystem().getByDom(x).each(_=>{_.hasConfigured(Xt)&&Xt.set(_,!y)})})}}),g={dom:yM(t.label),optComponents:[O.some({dom:{tag:"div",classes:[Lx,DR]},components:wM(t.items,l)})]};return W1({data:Z1(J({text:O.none()},t)),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(l.itemBehaviours).getOr([])},g,s,a.providers)},Di=(t,s,a,l,d,g,p,y=!0)=>{const x=D=>({setActive:B=>{$n.set(D,B)},isActive:()=>$n.isOn(D),isEnabled:()=>!Xt.isDisabled(D),setEnabled:B=>Xt.set(D,!B)}),_=j1({presets:a,textContent:s?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:O.none(),checkMark:s?O.some(ep(p.icons)):O.none(),caret:O.none(),value:t.value},p,y);return Yo(W1({data:Z1(t),enabled:t.enabled,getApi:x,onAction:D=>l(t.value),onSetup:D=>(D.setActive(d),re),triggersSubmenu:!1,itemBehaviours:[]},_,g,p),{toggling:{toggleClass:_R,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Am=iC(bx(),z_()),SM=t=>({value:xM(t)}),BO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,YC=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Qx=t=>BO.test(t)||YC.test(t),xM=t=>Sc(t,"#").toUpperCase(),vF=t=>Qx(t)?O.some({value:xM(t)}):O.none(),XC=t=>({value:t.value.replace(BO,(a,l,d,g)=>l+l+d+d+g+g)}),eT=t=>{const s=XC(t),a=YC.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},PO=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},zd=t=>{const s=PO(t.red)+PO(t.green)+PO(t.blue);return SM(s)},TM=Math.min,EM=Math.max,xl=Math.round,$O=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Dm=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,tp=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),jo=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},np=t=>{let s,a,l;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=EM(0,TM(g,1)),p=EM(0,TM(p,1)),g===0)return s=a=l=xl(255*p),tp(s,a,l,1);const y=d/60,x=p*g,_=x*(1-Math.abs(y%2-1)),D=p-x;switch(Math.floor(y)){case 0:s=x,a=_,l=0;break;case 1:s=_,a=x,l=0;break;case 2:s=0,a=x,l=_;break;case 3:s=0,a=_,l=x;break;case 4:s=_,a=0,l=x;break;case 5:s=x,a=0,l=_;break;default:s=a=l=0}return s=xl(255*(s+D)),a=xl(255*(a+D)),l=xl(255*(l+D)),tp(s,a,l,1)},op=t=>{const s=eT(t),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return tp(a,l,d,1)},IO=(t,s,a,l)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),y=parseFloat(l);return tp(d,g,p,y)},JC=t=>{if(t==="transparent")return O.some(tp(0,0,0,0));const s=$O.exec(t);if(s!==null)return O.some(IO(s[1],s[2],s[3],"1"));const a=Dm.exec(t);return a!==null?O.some(IO(a[1],a[2],a[3],a[4])):O.none()},tT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,kM=tp(255,0,0,1),LO=t=>{t.dispatch("SkinLoaded")},yF=(t,s)=>{t.dispatch("SkinLoadError",s)},_M=t=>{t.dispatch("ResizeEditor")},nT=(t,s)=>{t.dispatch("ResizeContent",s)},FO=(t,s)=>{t.dispatch("ScrollContent",s)},HO=(t,s)=>{t.dispatch("TextColorChange",s)},oT=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},CF=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),wF=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var G1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const OM={},SF=(t,s=10)=>{const a=G1.getItem(t),l=kt(a)?JSON.parse(a):[],g=(_=>s-_.length<0?_.slice(0,s):_)(l),p=_=>{Ve(g,_).each(y),g.unshift(_),g.length>s&&g.pop(),G1.setItem(t,JSON.stringify(g))},y=_=>{g.splice(_,1)};return{add:p,state:()=>g.slice(0)}},AM=t=>ut(OM,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=G1.getItem(s);if(Mo(a)){const d=G1.getItem("tinymce-custom-colors");G1.setItem(s,Jn(d)?d:"[]")}const l=SF(s,10);return OM[t]=l,l}),xF=t=>Ne(AM(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),DM=(t,s)=>{AM(t).add(s)},QC=(t,s,a)=>({hue:t,saturation:s,value:a}),VO=t=>{let s=0,a=0,l=0;const d=t.red/255,g=t.green/255,p=t.blue/255,y=Math.min(d,Math.min(g,p)),x=Math.max(d,Math.max(g,p));if(y===x)return l=y,QC(0,0,l*100);const _=d===y?g-p:p===y?d-g:p-d;return s=d===y?3:p===y?1:5,s=60*(s-_/(x-y)),a=(x-y)/x,l=x,QC(Math.round(s),Math.round(a*100),Math.round(l*100))},RM=t=>VO(op(t)),MM=t=>zd(np(t)),NM=t=>vF(t).orThunk(()=>JC(t).map(zd)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],p=l[2],y=l[3];return zd(tp(d,g,p,y))}),zO="forecolor",UO="hilitecolor",WO=5,BM=t=>Math.max(WO,Math.ceil(Math.sqrt(t))),PM=(t,s)=>{const a=BM(s),l=Rm("color_cols")(t);return WO===a?l:a},TF=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+NM(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Rm=t=>s=>s.options.get(t),qu="#000000",EF=t=>{const s=t.options.register,a=l=>Qe(l,kt)?{value:TF(l),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:BM(e0(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:PM(t,e0(t,zO).length)}),s("color_cols_background",{processor:"number",default:PM(t,e0(t,UO).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:qu}),s("color_default_background",{processor:"string",default:qu})},ZO=(t,s)=>s===zO?Rm("color_cols_foreground")(t):s===UO?Rm("color_cols_background")(t):Rm("color_cols")(t),jO=(t,s)=>{const a=ZO(t,s);return a>0?a:WO},GO=Rm("custom_colors"),e0=(t,s)=>s===zO&&t.options.isSet("color_map_foreground")?Rm("color_map_foreground")(t):s===UO&&t.options.isSet("color_map_background")?Rm("color_map_background")(t):Rm("color_map")(t),$M=Rm("color_default_foreground"),IM=Rm("color_default_background"),kF="rgba(0, 0, 0, 0)",_F=t=>JC(t).exists(s=>s.alpha!==0),OF=t=>Ml(t,s=>{if(mo(s)){const a=Ze(s,"background-color");return tn(_F(a),a)}else return O.none()}).getOr(kF),LM=(t,s)=>{const a=pe.fromDom(t.selection.getStart()),l=s==="hilitecolor"?OF(a):Ze(a,"color");return JC(l).map(d=>"#"+zd(d).value)},FM=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},HM=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},VM=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{FM(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{HM(t,s)})},zM=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},qO=(t,s,a,l)=>{a==="custom"?sT(t)(g=>{g.each(p=>{DM(s,p),t.execCommand("mceApplyTextcolor",s,p),l(p)})},LM(t,s).getOr(qu)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},UM=(t,s,a)=>t.concat(xF(s).concat(zM(a))),q1=(t,s,a)=>l=>{l(UM(t,s,a))},KO=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},YO=(t,s)=>a=>{const l=LM(t,s);return Ks(l,a.toUpperCase())},XO=(t,s,a,l,d)=>{t.ui.registry.addSplitButton(s,{tooltip:l,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:YO(t,a),columns:jO(t,a),fetch:q1(e0(t,a),a,GO(t)),onAction:g=>{qO(t,a,d.get(),re)},onItemAction:(g,p)=>{qO(t,a,p,y=>{d.set(y),HO(t,{name:s,color:y})})},onSetup:g=>{KO(g,s,d.get());const p=y=>{y.name===s&&KO(g,y.name,y.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},JO=(t,s,a,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(KO(g,s,d.get()),re),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:YO(t,a),initData:{storageKey:a},onAction:g=>{qO(t,a,g.value,p=>{d.set(p),HO(t,{name:s,color:p})})}}]})},sT=t=>(s,a)=>{let l=!1;const d=y=>{const _=y.getData().colorpicker;l?(s(O.from(_)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(y,x)=>{x.name==="hex-valid"&&(l=x.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:re,onCancel:()=>{s(O.none())}})},QO=t=>{VM(t);const s=$M(t),a=IM(t),l=S(s),d=S(a);XO(t,"forecolor","forecolor","Text color",l),XO(t,"backcolor","hilitecolor","Background color",d),JO(t,"forecolor","forecolor","Text color",l),JO(t,"backcolor","hilitecolor","Background color",d)},e2=(t,s,a,l,d,g,p,y)=>{const x=Kv(s),D=WM(s,a,l,d!=="color"?"normal":"color",g,p,y);return fO(t,x,D,l,{menuType:d})},WM=(t,s,a,l,d,g,p)=>il(Ne(t,y=>y.type==="choiceitem"?oM(y).fold(Rg,x=>O.some(Di(x,a===1,l,s,g(x.value),d,p,Kv(t)))):O.none())),rT=(t,s)=>{const a=Dg(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Hs(d.element,"[aria-checked=true]"):O.none()}},ZM=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${lO}`:`.${Ix}`}},AF=(t,s)=>{const a=DF(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",g=e2(Ot("menu-value"),a,y=>{t.onAction({value:y})},l,d,ju.CLOSE_ON_EXECUTE,t.select.getOr(et),s.shared.providers),p=We(J({},g),{markers:Dg(d),movement:rT(l,d)});return{type:"widget",data:{value:Ot("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Am.widget(N1.sketch(p))]}},DF=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>UM(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(zM(a)))},jM=Ot("cell-over"),eA=Ot("cell-execute"),GM=(t,s,a)=>{const l=p=>Wt(p,jM,{row:t,col:s}),d=p=>Wt(p,eA,{row:t,col:s}),g=(p,y)=>{y.stop(),d(p)};return ka({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:nt([kn("insert-table-picker-cell",[je(ei(),on.focus),je(Lc(),d),je(xi(),g),je(Yf(),g)]),$n.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),on.config({onFocus:l})])})},qM=(t,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(GM(d,p,t));l.push(g)}return l},RF=(t,s,a,l,d)=>{for(let g=0;g<l;g++)for(let p=0;p<d;p++)$n.set(t[g][p],g<=s&&p<=a)},MF=t=>Ie(t,s=>Ne(s,yl)),KM=(t,s)=>Fs(`${s}x${t}`),NF={inserttable:t=>{const l=Ot("size-label"),d=qM(l,10,10),g=KM(0,0),p=Do({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:l}},components:[g],behaviours:nt([un.config({})])});return{type:"widget",data:{value:Ot("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Am.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:MF(d).concat(p.asSpec()),behaviours:nt([kn("insert-table-picker",[qs(y=>{un.set(p.get(y),[g])}),Pp(jM,(y,x,_)=>{const{row:D,col:B}=_.event;RF(d,D,B,10,10),un.set(p.get(y),[KM(D+1,B+1)])}),Pp(eA,(y,x,_)=>{const{row:D,col:B}=_.event;t.onAction({numRows:D+1,numColumns:B+1}),co(y,lh())})]),zt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:AF},BF=(t,s)=>ut(NF,t.fancytype).map(a=>a(t,s)),PF=(t,s,a,l=!0,d=!1)=>{const g=d?mF(a.icons):MO(a.icons),p=x=>({isEnabled:()=>!Xt.isDisabled(x),setEnabled:_=>Xt.set(x,!_),setIconFill:(_,D)=>{Hs(x.element,`svg path[id="${_}"], rect[id="${_}"]`).each(B=>{bn(B,"fill",D)})}}),y=j1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(g),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return W1({data:Z1(t),getApi:p,enabled:t.enabled,onAction:re,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,a)},$F=(t,s,a,l=!0)=>{const d=p=>({isEnabled:()=>!Xt.isDisabled(p),setEnabled:y=>Xt.set(p,!y)}),g=j1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return W1({data:Z1(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},IF=t=>({type:"separator",dom:{tag:"div",classes:[Ix,kL]},components:t.text.map(Fs).toArray()}),LF=(t,s,a,l=!0)=>{const d=p=>({setActive:y=>{$n.set(p,y)},isActive:()=>$n.isOn(p),isEnabled:()=>!Xt.isDisabled(p),setEnabled:y=>Xt.set(p,!y)}),g=j1({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(ep(a.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return Yo(W1({data:Z1(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:_R,toggleOnExecute:!1,selected:t.active}})},FF=pF,tA=IF,HF=$F,VF=PF,zF=LF,UF=BF,WF=bF;var jF=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),GF=[Pc("others",Qm(at.value,Sa()))],qF=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(Vo(g.others).length===0)throw new Error("Cannot find any known coupled components");return ut(t,p)},a=(g,p,y)=>s(p,y).getOrThunk(()=>{const _=ut(p.others,y).getOrDie("No information found for coupled component: "+y)(g),D=g.getSystem().build(_);return t[y]=D,D}),l=(g,p,y)=>s(p,y).orThunk(()=>(ut(p.others,y).getOrDie("No information found for coupled component: "+y),O.none())),d=Q({});return Ta({readState:d,getExisting:l,getOrCreate:a})}});const Cr=Wa({fields:GF,name:"coupling",apis:jF,state:qF}),oA=t=>{let s=O.none(),a=[];const l=_=>oA(D=>{d(B=>{D(_(B))})}),d=_=>{p()?x(_):a.push(_)},g=_=>{p()||(s=O.some(_),y(a),a=[])},p=()=>s.isSome(),y=_=>{mt(_,x)},x=_=>{s.each(D=>{setTimeout(()=>{_(D)},0)})};return t(g),{get:d,map:l,isReady:p}},XM={nu:oA,pure:t=>oA(s=>{s(t)})},JM=t=>{setTimeout(()=>{throw t},0)},t0=t=>{const s=x=>{t().then(x,JM)};return{map:x=>t0(()=>t().then(x)),bind:x=>t0(()=>t().then(_=>x(_).toPromise())),anonBind:x=>t0(()=>t().then(()=>x.toPromise())),toLazy:()=>XM.nu(s),toCached:()=>{let x=null;return t0(()=>(x===null&&(x=t()),x))},toPromise:t,get:s}},Vc={nu:t=>t0(()=>new Promise(t)),pure:t=>t0(()=>Promise.resolve(t))},QM=Q("sink"),eN=Q(ri({name:QM(),overrides:Q({dom:{tag:"div"},behaviours:nt([Kr.config({useFixed:Fe})]),events:ds([Jf(Bl()),Jf(Wo()),Jf(xi())])})})),tN=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},YF=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},XF=(t,s,a,l,d,g,p)=>{const y=YF(t,s,l),x=lT(l,t);return y.map(_=>_.bind(D=>O.from(Wu.sketch(We(J({},g.menu()),{uid:bm(""),data:D,highlightOnOpen:p,onOpenMenu:(B,I)=>{const H=x().getOrDie();Kr.position(H,I,{anchor:a}),Qn.decloak(d)},onOpenSubmenu:(B,I,H)=>{const q=x().getOrDie();Kr.position(q,H,{anchor:{type:"submenu",item:I}}),Qn.decloak(d)},onRepositionMenu:(B,I,H)=>{const q=x().getOrDie();Kr.position(q,I,{anchor:a}),mt(H,se=>{Kr.position(q,se.triggeredMenu,{anchor:{type:"submenu",item:se.triggeringItem}})})},onEscape:()=>(on.focus(l),Qn.close(d),O.some(!0))})))))},aT=(t,s,a,l,d,g,p)=>{const y=tN(t,a);return XF(t,s,y,a,l,d,p).map(_=>(_.fold(()=>{Qn.isOpen(l)&&Qn.close(l)},D=>{Qn.cloak(l),Qn.open(l,D),g(l)}),l))},JF=(t,s,a,l,d,g,p)=>(Qn.close(l),Vc.pure(l)),sA=(t,s,a,l,d,g)=>{const p=Cr.getCoupled(a,"sandbox");return(Qn.isOpen(p)?JF:aT)(t,s,a,p,l,d,g)},cT=(t,s,a)=>{const l=Un.getCurrent(s).getOr(s),d=ya(t.element);a?_t(l.element,"min-width",d+"px"):zo(l.element,d)},lT=(t,s)=>t.getSystem().getByUid(s.uid+"-"+QM()).map(a=>()=>at.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>at.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),iT=t=>{Qn.getState(t).each(s=>{Wu.repositionMenus(s)})},uT=(t,s,a)=>{const l=iy(),d=(y,x)=>{const _=tN(t,s);l.link(s.element),t.matchWidth&&cT(_.hotspot,x,t.useMinWidth),t.onOpen(_,y,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(y,x)},g=(y,x)=>{l.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(y,x)},p=lT(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:ru.augment(t.sandboxBehaviours,[St.config({store:{mode:"memory",initialValue:s}}),Qn.config({onOpen:d,onClose:g,isPartOf:(y,x,_)=>mf(x,_)||mf(s,_),getAttachPoint:()=>p().getOrDie()}),Un.config({find:y=>Qn.getState(y).bind(x=>Un.getCurrent(x))}),kr.config({channels:J(J({},Em({isExtraPart:et})),Xy({doReposition:iT}))})])}},nN=t=>{const s=Cr.getCoupled(t,"sandbox");iT(s)},rA=()=>[ye("sandboxClasses",[]),ru.field("sandboxBehaviours",[Un,kr,Qn,St])],aA=Q([Ue("dom"),Ue("fetch"),qn("onOpen"),tr("onExecute"),ye("getHotspot",O.some),ye("getAnchorOverrides",Q({})),Lu(),Oa("dropdownBehaviours",[$n,Cr,zt,on]),Ue("toggleClass"),ye("eventOrder",{}),po("lazySink"),ye("matchWidth",!1),ye("useMinWidth",!1),po("role")].concat(rA())),cA=Q([au({schema:[Md(),ye("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),eN()]),dT=(t,s,a,l)=>{const d=D=>ut(t.dom,"attributes").bind(B=>ut(B,D)),g=D=>{Qn.getState(D).each(B=>{Wu.highlightPrimary(B)})},p=(D,B,I)=>sA(t,cn,D,l,B,I),y=D=>{p(D,g,zl.HighlightMenuAndItem).get(re)},x={expand:D=>{$n.isOn(D)||p(D,re,zl.HighlightNone).get(re)},open:D=>{$n.isOn(D)||p(D,re,zl.HighlightMenuAndItem).get(re)},refetch:D=>Cr.getExistingCoupled(D,"sandbox").fold(()=>p(D,re,zl.HighlightMenuAndItem).map(re),I=>aT(t,cn,D,I,l,re,zl.HighlightMenuAndItem).map(re)),isOpen:$n.isOn,close:D=>{$n.isOn(D)&&p(D,re,zl.HighlightMenuAndItem).get(re)},repositionMenus:D=>{$n.isOn(D)&&nN(D)}},_=(D,B)=>(kd(D),O.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Yr(t.dropdownBehaviours,[$n.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Cr.config({others:{sandbox:D=>uT(t,D,{onOpen:()=>$n.on(D),onClose:()=>$n.off(D)})}}),zt.config({mode:"special",onSpace:_,onEnter:_,onDown:(D,B)=>{if(mu.isOpen(D)){const I=Cr.getCoupled(D,"sandbox");g(I)}else mu.open(D);return O.some(!0)},onEscape:(D,B)=>mu.isOpen(D)?(mu.close(D),O.some(!0)):O.none()}),on.config({})]),events:px(O.some(y)),eventOrder:We(J({},t.eventOrder),{[Lc()]:["disabling","toggling","alloy.base.behaviour"]}),apis:x,domModification:{attributes:J(J({"aria-haspopup":"true"},t.role.fold(()=>({}),D=>({role:D}))),t.dom.tag==="button"?{type:d("type").getOr("button")}:{})}}},mu=Or({name:"Dropdown",configFields:aA(),partFields:cA(),factory:dT,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),QF=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},e6=t=>{const s=St.getValue(t),a=I1(t).map(HR);mu.refetch(s).get(()=>{const l=Cr.getCoupled(s,"sandbox");a.each(d=>I1(l).each(g=>dO(g,d)))})},t6=(t,s)=>{n6(t).each(a=>{GE(t,a.element,s.event.eventType,s.event.interactionEvent)})},n6=t=>Qn.getState(t).bind(lo.getHighlighted).bind(lo.getHighlighted),o6=t=>gc(t.element,Hx)?O.some(t.element):Hs(t.element,"."+Hx),oN=(t,s,a)=>{FR(t).each(l=>{FL(l,a),o6(s).each(g=>{P(g,"id").each(p=>bn(l.element,"aria-controls",p))})}),bn(a.element,"aria-selected","true")},s6=(t,s,a)=>{bn(a.element,"aria-selected","false")},r6=t=>{FR(t).each(s=>on.focus(s))},a6=t=>Cr.getExistingCoupled(t,"sandbox").bind(I1).map(HR).map(a=>a.fetchPattern).getOr("");var mT;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(mT||(mT={}));const c6=(t,s,a,l,d)=>{const g=a.shared.providers,p=y=>d?We(J({},y),{shortcut:O.none(),icon:y.text.isSome()?O.none():y.icon}):y;switch(t.type){case"menuitem":return oF(t).fold(Rg,y=>O.some(HF(p(y),s,g,l)));case"nestedmenuitem":return aM(t).fold(Rg,y=>O.some(VF(p(y),s,g,l,d)));case"togglemenuitem":return rF(t).fold(Rg,y=>O.some(zF(p(y),s,g,l)));case"separator":return jR(t).fold(Rg,y=>O.some(tA(y)));case"fancymenuitem":return tF(t).fold(Rg,y=>UF(y,a));default:return console.error("Unknown item in general menu",t),O.none()}},l6=(t,s,a,l,d,g,p)=>{const y=l===1,x=!y||Kv(t);return il(Ne(t,_=>{switch(_.type){case"separator":return qR(_).fold(Rg,D=>O.some(tA(D)));case"cardmenuitem":return tM(_).fold(Rg,D=>O.some(WF(We(J({},D),{onAction:B=>{D.onAction(B),a(D.value,D.meta)}}),d,g,{itemBehaviours:CM(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return KR(_).fold(Rg,D=>O.some(FF(D,s,y,"normal",a,d,g,x)))}}))},sN=(t,s,a,l,d,g)=>{const p=Kv(s),y=il(Ne(s,D=>{const B=H=>d?!Bn(H,"text"):p,I=H=>c6(H,a,l,B(H),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?I(We(J({},D),{enabled:!1})):I(D)})),x=QF(g);return(d?zL:fO)(t,p,y,1,x)},fT=t=>Wu.singleData(t.value,t),i6=(t,s,a,l)=>{const d=rT(s,l),g=Dg(l);return{data:fT(We(J({},t),{movement:d,menuBehaviours:Qh.unnamedEvents(s!=="auto"?[]:[qs((p,y)=>{OO(p,4,g.item).each(({numColumns:x,numRows:_})=>{zt.setGridSize(p,_,x)})})])})),menu:{markers:Dg(l),fakeFocus:a===mT.ContentFocus}}},u6=(t,s)=>$x(pe.fromDom(s.startContainer)).map(a=>{const l=t.createRng();return l.selectNode(a.dom),l}),d6={register:(t,s)=>{const a=S(!1),l=S(!1),d=ka(Ms.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:nt([kn("dismissAutocompleter",[je(gm(),()=>_())])]),lazySink:s.getSink})),g=()=>Ms.isOpen(d),p=l.get,y=()=>{g()&&Ms.hide(d)},x=()=>Ms.getContent(d).bind(q=>us(q.components(),0)),_=()=>t.execCommand("mceAutocompleterClose"),D=q=>{const se=Es(q,Ce=>O.from(Ce.columns)).getOr(1);return Ie(q,Ce=>{const he=Ce.items;return l6(he,Ce.matchText,(me,$e)=>{const Be=t.selection.getRng();u6(t.dom,Be).each(ct=>{const qe={hide:()=>_(),reload:pt=>{y(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:pt})}};a.set(!0),Ce.onAction(qe,ct,me,$e),a.set(!1)})},se,ju.BUBBLE_TO_SANDBOX,s,Ce.highlightOn)})},B=(q,se)=>{SL(pe.fromDom(t.getBody())).each(Ce=>{const he=Es(q,me=>O.from(me.columns)).getOr(1);Ms.showMenuAt(d,{anchor:{type:"node",root:pe.fromDom(t.getBody()),node:O.from(Ce)}},i6(fO("autocompleter-value",!0,se,he,{menuType:"normal"}),he,mT.ContentFocus,"normal"))}),x().each(lo.highlightFirst)},I=q=>{const se=D(q);se.length>0?B(q,se):y()};t.on("AutocompleterStart",({lookupData:q})=>{l.set(!0),a.set(!1),I(q)}),t.on("AutocompleterUpdate",({lookupData:q})=>I(q)),t.on("AutocompleterEnd",()=>{y(),l.set(!1),a.set(!1)});const H={cancelIfNecessary:_,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:x};TL.setup(H,t)}},m6=["visible","hidden"],lA=t=>{if(_l(t)){const s=Ze(t,"overflow");return ts(s).length>0&&!So(m6,s)}else return!1},da=t=>{const s=bf(t,lA);return Dr(s).map(a=>({element:a,others:s.slice(1)}))},t2=(t,s)=>Hd(t)?da(s):O.none(),gT=t=>{const s=[...Ne(t.others,k),le()];return ae(k(t.element),s)},n2=(t,s,a)=>Qi(t,s,a).isSome(),rN=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},aN=5,f6=400,cN=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?O.none():O.some(s.touches[0])},g6=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>aN||l>aN},h6=t=>{const s=Bo(),a=S(!1),l=rN(_=>{t.triggerEvent(J2(),_),a.set(!0)},f6),d=_=>(cN(_).each(D=>{l.cancel();const B={x:D.clientX,y:D.clientY,target:_.target};l.schedule(_),a.set(!1),s.set(B)}),O.none()),g=_=>(l.cancel(),cN(_).each(D=>{s.on(B=>{g6(D,B)&&s.clear()})}),O.none()),p=_=>{l.cancel();const D=B=>Eo(B.target,_.target);return s.get().filter(D).map(B=>a.get()?(_.prevent(),!1):t.triggerEvent(Yf(),_))},y=fo([{key:Yi(),value:d},{key:Gn(),value:g},{key:ss(),value:p}]);return{fireIfReady:(_,D)=>ut(y,D).bind(B=>B(_))}},p6=t=>t.raw.which===C_[0]&&!So(["input","textarea"],Ga(t.target))&&!n2(t.target,'[contenteditable="true"]'),b6=(t,s)=>{const a=J({stopBackspace:!0},s),l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=h6(a),g=Ne(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),H=>Hc(t,H,q=>{d.fireIfReady(q,H).each(Ce=>{Ce&&q.kill()}),a.triggerEvent(H,q)&&q.kill()})),p=Bo(),y=Hc(t,"paste",H=>{d.fireIfReady(H,"paste").each(se=>{se&&H.kill()}),a.triggerEvent("paste",H)&&H.kill(),p.set(setTimeout(()=>{a.triggerEvent(X0(),H)},0))}),x=Hc(t,"keydown",H=>{a.triggerEvent("keydown",H)?H.kill():a.stopBackspace&&p6(H)&&H.prevent()}),_=Hc(t,"focusin",H=>{a.triggerEvent("focusin",H)&&H.kill()}),D=Bo(),B=Hc(t,"focusout",H=>{a.triggerEvent("focusout",H)&&H.kill(),D.set(setTimeout(()=>{a.triggerEvent(Y0(),H)},0))});return{unbind:()=>{mt(g,H=>{H.unbind()}),x.unbind(),_.unbind(),B.unbind(),y.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},lN=(t,s)=>{const a=ut(t,"target").getOr(s);return S(a)},v6=(t,s)=>{const a=S(!1),l=S(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},y6=t=>{const s=S(!1);return{stop:()=>{s.set(!0)},cut:re,isStopped:s.get,isCut:et,event:t,setSource:ue("Cannot set source of a broadcasted event"),getSource:ue("Cannot get source of a broadcasted event")}},o2=W.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),iN=(t,s,a,l,d,g)=>{const p=t(s,l),y=v6(a,d);return p.fold(()=>(g.logEventNoHandlers(s,l),o2.complete()),x=>{const _=x.descHandler;return rs(_)(y),y.isStopped()?(g.logEventStopped(s,x.element,_.purpose),o2.stopped()):y.isCut()?(g.logEventCut(s,x.element,_.purpose),o2.complete()):oa(x.element).fold(()=>(g.logNoParent(s,x.element,_.purpose),o2.complete()),B=>(g.logEventResponse(s,x.element,_.purpose),o2.resume(B)))})},uN=(t,s,a,l,d,g)=>iN(t,s,a,l,d,g).fold(Fe,p=>uN(t,s,a,p,d,g),et),C6=(t,s,a,l,d)=>{const g=lN(a,l);return iN(t,s,a,l,g,d)},w6=(t,s,a)=>{const l=y6(s);return mt(t,d=>{const g=d.descHandler;rs(g)(l)}),l.isStopped()},S6=(t,s,a,l)=>dN(t,s,a,a.target,l),dN=(t,s,a,l,d)=>{const g=lN(a,l);return uN(t,s,a,l,g,d)},x6=(t,s)=>({element:t,descHandler:s}),T6=(t,s)=>({id:t,descHandler:s}),E6=()=>{const t={},s=(p,y,x)=>{Ko(x,(_,D)=>{const B=t[D]!==void 0?t[D]:{};B[y]=ek(_,p),t[D]=B})},a=(p,y)=>Pl(y).bind(x=>ut(p,x)).map(x=>x6(y,x));return{registerId:s,unregisterId:p=>{Ko(t,(y,x)=>{Bn(y,p)&&delete y[p]})},filterByType:p=>ut(t,p).map(y=>Rr(y,(x,_)=>T6(_,x))).getOr([]),find:(p,y,x)=>ut(t,y).bind(_=>Ml(x,D=>a(_,D),p))}},k6=()=>{const t=E6(),s={},a=_=>{const D=_.element;return Pl(D).getOrThunk(()=>XE("uid-",_.element))},l=(_,D)=>{const B=s[D];if(B===_)g(_);else throw new Error('The tagId "'+D+'" is already used by: '+Bu(B.element)+`
Cannot use it for: `+Bu(_.element)+`
The conflicting element is`+(no(B.element)?" ":" not ")+"already in the DOM")},d=_=>{const D=a(_);Pa(s,D)&&l(_,D);const B=[_];t.registerId(B,D,_.events),s[D]=_},g=_=>{Pl(_.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(_,D,B)=>t.find(_,D,B),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>ut(s,_)}},Mm=ar({name:"Container",factory:t=>{const l=t.dom,{attributes:s}=l,a=G2(l,["attributes"]);return{uid:t.uid,dom:J({tag:"div",attributes:J({role:"presentation"},s)},a),components:t.components,behaviours:_i(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ye("components",[]),Oa("containerBehaviours",[]),ye("events",{}),ye("domModification",{}),ye("eventOrder",{})]}),iA=t=>{const s=he=>oa(t.element).fold(Fe,me=>Eo(he,me)),a=k6(),l=(he,me)=>a.find(s,he,me),d=b6(t.element,{triggerEvent:(he,me)=>Zp(he,me.target,$e=>S6(l,he,me,$e))}),g={debugInfo:Q("real"),triggerEvent:(he,me,$e)=>{Zp(he,me,Be=>dN(l,he,$e,me,Be))},triggerFocus:(he,me)=>{Pl(he).fold(()=>{eu(he)},$e=>{Zp(Td(),he,Be=>(C6(l,Td(),{originator:me,kill:re,prevent:re,target:he},he,Be),!1))})},triggerEscape:(he,me)=>{g.triggerEvent("keydown",he.element,me.event)},getByUid:he=>se(he),getByDom:he=>Ce(he),build:ka,buildOrPatch:Vp,addToGui:he=>{x(he)},removeFromGui:he=>{_(he)},addToWorld:he=>{p(he)},removeFromWorld:he=>{y(he)},broadcast:he=>{I(he)},broadcastOn:(he,me)=>{H(he,me)},broadcastEvent:(he,me)=>{q(he,me)},isConnected:Fe},p=he=>{he.connect(g),ba(he.element)||(a.register(he),mt(he.components(),p),g.triggerEvent(_b(),he.element,{target:he.element}))},y=he=>{ba(he.element)||(mt(he.components(),y),a.unregister(he)),he.disconnect()},x=he=>{Id(t,he)},_=he=>{Ld(he)},D=()=>{d.unbind(),pl(t.element)},B=he=>{const me=a.filter(Gs());mt(me,$e=>{const Be=$e.descHandler;rs(Be)(he)})},I=he=>{B({universal:!0,data:he})},H=(he,me)=>{B({universal:!1,channels:he,data:me})},q=(he,me)=>{const $e=a.filter(he);return w6($e,me)},se=he=>a.getById(he).fold(()=>at.error(new Error('Could not find component with uid: "'+he+'" in system.')),at.value),Ce=he=>{const me=Pl(he).getOr("not found");return se(me)};return p(t),{root:t,element:t.element,destroy:D,add:x,remove:_,getByUid:se,getByDom:Ce,addToWorld:p,removeFromWorld:y,broadcast:I,broadcastOn:H,broadcastEvent:q}},O6=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ne(t.items,s.interpreter)}),mN=Q([ye("prefix","form-field"),Oa("fieldBehaviours",[Un,St])]),A6=Q([ri({schema:[Ue("dom")],name:"label"}),ri({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ue("text")],name:"aria-descriptor"}),Aa({factory:{sketch:t=>{const s=hn(t,["factory"]);return t.factory.sketch(s)}},schema:[Ue("factory")],name:"field"})]),D6=(t,s,a,l)=>{const d=Yr(t.fieldBehaviours,[Un.config({find:y=>as(y,t,"field")}),St.config({store:{mode:"manual",getValue:y=>Un.getCurrent(y).bind(St.getValue),setValue:(y,x)=>{Un.getCurrent(y).each(_=>{St.setValue(_,x)})}}})]),g=ds([qs((y,x)=>{const _=fC(y,t,["label","field","aria-descriptor"]);_.field().each(D=>{const B=Ot(t.prefix);_.label().each(I=>{bn(I.element,"for",B),bn(D.element,"id",B)}),_["aria-descriptor"]().each(I=>{const H=Ot(t.prefix);bn(I.element,"id",H),bn(D.element,"aria-describedby",H)})})})]),p={getField:y=>as(y,t,"field"),getLabel:y=>as(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},wo=Or({name:"FormField",configFields:mN(),partFields:A6(),factory:D6,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var M6=Object.freeze({__proto__:null,exhibit:(t,s)=>$l({attributes:fo([{key:s.tabAttr,value:"true"}])})}),N6=[ye("tabAttr","data-alloy-tabstop")];const cr=Wa({fields:N6,name:"tabstopping",active:M6});var B6=tinymce.util.Tools.resolve("tinymce.html.Entities");const n0=(t,s,a,l)=>{const d=fN(t,s,a,l);return wo.sketch(d)},P6=(t,s)=>n0(t,s,[],[]),fN=(t,s,a,l)=>({dom:uA(a),components:t.toArray().concat([s]),fieldBehaviours:nt(l)}),$6=()=>uA([]),uA=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),sp=(t,s)=>wo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(t))]}),Ri=Ot("form-component-change"),s2=Ot("form-close"),K1=Ot("form-cancel"),kf=Ot("form-action"),r2=Ot("form-submit"),dA=Ot("form-block"),mA=Ot("form-unblock"),gN=Ot("form-tabchange"),hN=Ot("form-resize"),I6=(t,s,a)=>{const l=t.label.map(B=>sp(B,s)),d=B=>(I,H)=>{Qi(H.event.target,"[data-collection-item-value]").each(q=>{B(I,H,q,Br(q,"data-collection-item-value"))})},g=(B,I)=>{const H=Ne(I,Ce=>{const he=iu.translate(Ce.text),me=t.columns===1?`<div class="tox-collection__item-label">${he}</div>`:"",$e=`<div class="tox-collection__item-icon">${Ce.icon}</div>`,Be={_:" "," - ":" ","-":" "},ct=he.replace(/\_| \- |\-/g,pt=>Be[pt]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${B6.encodeAllRaw(Ce.value)}" title="${ct}" aria-label="${ct}">${$e}${me}</div>`}),q=t.columns!=="auto"&&t.columns>1?nr(H,t.columns):[H],se=Ne(q,Ce=>`<div class="tox-collection__group">${Ce.join("")}</div>`);pm(B.element,se.join(""))},p=d((B,I,H,q)=>{I.stop(),s.isDisabled()||Wt(B,kf,{name:t.name,value:q})}),y=[je(ei(),d((B,I,H)=>{eu(H)})),je(xi(),p),je(Yf(),p),je(nf(),d((B,I,H)=>{Hs(B.element,"."+UC).each(q=>{ms(q,UC)}),Gr(H,UC)})),je(kb(),d(B=>{Hs(B.element,"."+UC).each(I=>{ms(I,UC)})})),Od(d((B,I,H,q)=>{Wt(B,kf,{name:t.name,value:q})}))],x=(B,I)=>Ne(_r(B.element,".tox-collection__item"),I),_=wo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:cn},behaviours:nt([Xt.config({disabled:s.isDisabled,onDisabled:B=>{x(B,I=>{Gr(I,"tox-collection__item--state-disabled"),bn(I,"aria-disabled",!0)})},onEnabled:B=>{x(B,I=>{ms(I,"tox-collection__item--state-disabled"),te(I,"aria-disabled")})}}),Ra(),un.config({}),St.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(B,I)=>{g(B,I),t.columns==="auto"&&OO(B,5,"tox-collection__item").each(({numRows:H,numColumns:q})=>{zt.setGridSize(B,H,q)}),co(B,hN)}}),cr.config({}),zt.config(ZM(t.columns,"normal")),kn("collection-events",y)]),eventOrder:{[Lc()]:["disabling","alloy.base.behaviour","collection-events"]}});return n0(l,_,["tox-form__group--collection"],[])},L6=["input","textarea"],fA=t=>{const s=Ga(t);return So(L6,s)},pN=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ms(a,s.invalidClass),s.notify.each(l=>{fA(t.element)&&bn(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{pm(d,l.validHtml)}),l.onValid(t)})},bN=(t,s,a,l)=>{const d=s.getRoot(t).getOr(t.element);Gr(d,s.invalidClass),s.notify.each(g=>{fA(t.element)&&bn(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{pm(p,l)}),g.onInvalid(t,l)})},vN=(t,s,a)=>s.validator.fold(()=>Vc.pure(at.value(!0)),l=>l.validate(t)),gA=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),vN(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(bN(t,s,a,d),at.error(d)),d=>(pN(t,s),at.value(d))):at.error("No longer in system")));var hA=Object.freeze({__proto__:null,markValid:pN,markInvalid:bN,query:vN,run:gA,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return gc(a,s.invalidClass)}}),F6=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>ds([je(a.onEvent,l=>{gA(l,t,s).get(cn)})].concat(a.validateOnLoad?[qs(l=>{gA(l,t,s).get(re)})]:[]))).getOr({})}),H6=[Ue("invalidClass"),ye("getRoot",O.none),la("notify",[ye("aria","alert"),ye("getContainer",O.none),ye("validHtml",""),qn("onValid"),qn("onInvalid"),qn("onValidate")]),la("validator",[Ue("validate"),ye("onEvent","input"),ye("validateOnLoad",!0)])];const Nm=Wa({fields:H6,name:"invalidating",active:F6,apis:hA,extra:{validation:t=>s=>{const a=St.getValue(s);return Vc.pure(t(a))}}});var z6=Object.freeze({__proto__:null,events:()=>ds([ny(WE(),Fe)]),exhibit:()=>$l({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const o0=Wa({fields:[],name:"unselecting",active:z6}),U6=(t,s)=>mu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:nt([du.button(s.providers.isDisabled),Ra(),o0.config({}),cr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Vc.nu(l=>t.fetch(l)).map(l=>O.from(fT(Yo(e2(Ot("menu-value"),l,d=>{t.onItemAction(a,d)},t.columns,t.presets,ju.CLOSE_ON_EXECUTE,et,s.providers),{movement:rT(t.columns,t.presets)})))),parts:{menu:Fx(!1,1,t.presets)}}),yN=Ot("color-input-change"),CN=Ot("color-swatch-change"),wN=Ot("color-picker-cancel"),W6=(t,s,a,l)=>{const d=wo.parts.field({factory:$1,inputClasses:["tox-textfield"],data:l,onSetValue:_=>Nm.run(_).get(re),inputBehaviours:nt([Xt.config({disabled:s.providers.isDisabled}),Ra(),cr.config({}),Nm.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>ic(_.element),notify:{onValid:_=>{const D=St.getValue(_);Wt(_,yN,{color:D})}},validator:{validateOnLoad:!1,validate:_=>{const D=St.getValue(_);if(D.length===0)return Vc.pure(at.value(!0));{const B=pe.fromTag("span");_t(B,"background-color",D);const I=As(B,"background-color").fold(()=>at.error("blah"),H=>at.value(D));return Vc.pure(I)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>sp(_,s.providers)),p=(_,D)=>{Wt(_,CN,{value:D})},y=(_,D)=>{x.getOpt(_).each(B=>{D==="custom"?a.colorPicker(I=>{I.fold(()=>co(B,wN),H=>{p(B,H),DM(t.storageKey,H)})},"#ffffff"):D==="remove"?p(B,""):p(B,D)})},x=Do(U6({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[qr,Ua,zs],onLtr:()=>[Ua,qr,zs]},components:[],fetch:q1(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:y},s));return wo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:nt([kn("form-field-events",[je(yN,(_,D)=>{x.getOpt(_).each(B=>{_t(B.element,"background-color",D.event.color)}),Wt(_,Ri,{name:t.name})}),je(CN,(_,D)=>{wo.getField(_).each(B=>{St.setValue(B,D.event.value),Un.getCurrent(_).each(on.focus)})}),je(wN,(_,D)=>{wo.getField(_).each(B=>{Un.getCurrent(_).each(on.focus)})})])])})},Z6=ri({schema:[Ue("dom")],name:"label"}),Bm=t=>ri({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:ds([Bp(Yi(),(d,g,p)=>l(d,p),[s]),Bp(Wo(),(d,g,p)=>l(d,p),[s]),Bp(rh(),(d,g,p)=>{p.mouseIsDown.get()&&l(d,p)},[s])])}))}),j6=Bm("top-left"),hT=Bm("top"),G6=Bm("top-right"),q6=Bm("right"),K6=Bm("bottom-right"),Y6=Bm("bottom"),MW=Bm("bottom-left"),pT=Bm("left"),s0=Aa({name:"thumb",defaults:Q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ds([uh(Yi(),t,"spectrum"),uh(Gn(),t,"spectrum"),uh(ss(),t,"spectrum"),uh(Wo(),t,"spectrum"),uh(rh(),t,"spectrum"),uh(fm(),t,"spectrum")])})}),SN=Aa({schema:[Qa("mouseIsDown",()=>S(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:nt([zt.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),on.config({})]),events:ds([je(Yi(),l),je(Gn(),l),je(Wo(),l),je(rh(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var xN=[Z6,pT,q6,hT,Y6,j6,G6,MW,K6,s0,SN];const a2=Q("slider.change.value"),X6=t=>t.type.indexOf("touch")!==-1,pA=t=>{const s=t.event.raw;if(X6(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?O.some(a.touches[0]).map(l=>ys(l.clientX,l.clientY)):O.none()}else{const a=s;return a.clientX!==void 0?O.some(a).map(l=>ys(l.clientX,l.clientY)):O.none()}},J6="top",Q6="right",e8="bottom",t8="left",Y1=t=>t.model.minX,X1=t=>t.model.minY,bT=t=>t.model.minX-1,c2=t=>t.model.minY-1,Ud=t=>t.model.maxX,Ku=t=>t.model.maxY,vT=t=>t.model.maxX+1,l2=t=>t.model.maxY+1,bA=(t,s,a)=>s(t)-a(t),r0=t=>bA(t,Ud,Y1),vA=t=>bA(t,Ku,X1),a0=t=>r0(t)/2,c0=t=>vA(t)/2,l0=t=>t.stepSize,TN=t=>t.snapToGrid,EN=t=>t.snapStart,kN=t=>t.rounded,yT=(t,s)=>t[s+"-edge"]!==void 0,_N=t=>yT(t,t8),i2=t=>yT(t,Q6),ON=t=>yT(t,J6),AN=t=>yT(t,e8),Bg=t=>t.model.value.get(),Pg=(t,s)=>({x:t,y:s}),Wd=(t,s)=>{Wt(t,a2(),{value:s})},n8=(t,s)=>{Wd(t,Pg(bT(s),c2(s)))},o8=(t,s)=>{Wd(t,c2(s))},DN=(t,s)=>{Wd(t,Pg(a0(s),c2(s)))},s8=(t,s)=>{Wd(t,Pg(vT(s),c2(s)))},r8=(t,s)=>{Wd(t,vT(s))},a8=(t,s)=>{Wd(t,Pg(vT(s),c0(s)))},c8=(t,s)=>{Wd(t,Pg(vT(s),l2(s)))},l8=(t,s)=>{Wd(t,l2(s))},RN=(t,s)=>{Wd(t,Pg(a0(s),l2(s)))},MN=(t,s)=>{Wd(t,Pg(bT(s),l2(s)))},i8=(t,s)=>{Wd(t,bT(s))},u8=(t,s)=>{Wd(t,Pg(bT(s),c0(s)))},yA=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),CT=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),J1=(t,s,a)=>Math.max(s,Math.min(a,t)),d8=(t,s,a,l,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/l)*l;return J1(s+p,s-1,a+1)},g=>{const p=(t-g)%l,y=Math.round(p/l),x=Math.floor((t-g)/l),_=Math.floor((a-g)/l),D=Math.min(_,x+y),B=g+D*l;return Math.max(g,B)}),m8=(t,s,a)=>Math.min(a,Math.max(t,s))-s,NN=t=>{const{min:s,max:a,range:l,value:d,step:g,snap:p,snapStart:y,rounded:x,hasMinEdge:_,hasMaxEdge:D,minBound:B,maxBound:I,screenRange:H}=t,q=_?s-1:s,se=D?a+1:a;if(d<B)return q;if(d>I)return se;{const Ce=m8(d,B,I),he=J1(Ce/H*l+s,q,se);return p&&he>=s&&he<=a?d8(he,s,a,g,y):x?Math.round(he):he}},u2=t=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:y,maxOffset:x,centerMinEdge:_,centerMaxEdge:D}=t;return d<s?g?0:_:d>a?p?y:D:(d-s)/l*x},Mi="top",wT="right",CA="bottom",wA="left",f8="width",g8="height",_f=t=>t.element.dom.getBoundingClientRect(),Yu=(t,s)=>t[s],d2=t=>{const s=_f(t);return Yu(s,wA)},BN=t=>{const s=_f(t);return Yu(s,wT)},ST=t=>{const s=_f(t);return Yu(s,Mi)},SA=t=>{const s=_f(t);return Yu(s,CA)},PN=t=>{const s=_f(t);return Yu(s,f8)},xA=t=>{const s=_f(t);return Yu(s,g8)},TA=(t,s,a)=>(t+s)/2-a,EA=(t,s)=>{const a=_f(t),l=_f(s),d=Yu(a,wA),g=Yu(a,wT),p=Yu(l,wA);return TA(d,g,p)},$N=(t,s)=>{const a=_f(t),l=_f(s),d=Yu(a,Mi),g=Yu(a,CA),p=Yu(l,Mi);return TA(d,g,p)},xT=(t,s)=>{Wt(t,a2(),{value:s})},kA=(t,s,a)=>{const l={min:Y1(s),max:Ud(s),range:r0(s),value:a,step:l0(s),snap:TN(s),snapStart:EN(s),rounded:kN(s),hasMinEdge:_N(s),hasMaxEdge:i2(s),minBound:d2(t),maxBound:BN(t),screenRange:PN(t)};return NN(l)},h8=(t,s,a)=>{const l=kA(t,s,a);return xT(t,l),l},p8=(t,s)=>{const a=Y1(s);xT(t,a)},b8=(t,s)=>{const a=Ud(s);xT(t,a)},_A=(t,s,a)=>{const d=(t>0?CT:yA)(Bg(a),Y1(a),Ud(a),l0(a));return xT(s,d),O.some(d)},IN=t=>(s,a)=>_A(t,s,a).map(Fe),LN=t=>pA(t).map(a=>a.left),v8=(t,s,a,l,d)=>{const p=PN(t),y=l.bind(D=>O.some(EA(D,t))).getOr(0),x=d.bind(D=>O.some(EA(D,t))).getOr(p),_={min:Y1(s),max:Ud(s),range:r0(s),value:a,hasMinEdge:_N(s),hasMaxEdge:i2(s),minBound:d2(t),minOffset:0,maxBound:BN(t),maxOffset:p,centerMinEdge:y,centerMaxEdge:x};return u2(_)},OA=(t,s,a,l,d,g)=>{const p=v8(s,g,a,l,d);return d2(s)-d2(t)+p},y8=(t,s,a,l)=>{const d=Bg(a),g=OA(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),a),p=ya(s.element)/2;_t(s.element,"left",g-p+"px")},C8=IN(-1),w8=IN(1),S8=O.none,x8=O.none,FN={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(r8),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(i8)};var HN=Object.freeze({__proto__:null,setValueFrom:h8,setToMin:p8,setToMax:b8,findValueOfOffset:kA,getValueFromEvent:LN,findPositionOfValue:OA,setPositionFromValue:y8,onLeft:C8,onRight:w8,onUp:S8,onDown:x8,edgeActions:FN});const TT=(t,s)=>{Wt(t,a2(),{value:s})},AA=(t,s,a)=>{const l={min:X1(s),max:Ku(s),range:vA(s),value:a,step:l0(s),snap:TN(s),snapStart:EN(s),rounded:kN(s),hasMinEdge:ON(s),hasMaxEdge:AN(s),minBound:ST(t),maxBound:SA(t),screenRange:xA(t)};return NN(l)},T8=(t,s,a)=>{const l=AA(t,s,a);return TT(t,l),l},E8=(t,s)=>{const a=X1(s);TT(t,a)},k8=(t,s)=>{const a=Ku(s);TT(t,a)},VN=(t,s,a)=>{const d=(t>0?CT:yA)(Bg(a),X1(a),Ku(a),l0(a));return TT(s,d),O.some(d)},DA=t=>(s,a)=>VN(t,s,a).map(Fe),zN=t=>pA(t).map(a=>a.top),RA=(t,s,a,l,d)=>{const p=xA(t),y=l.bind(D=>O.some($N(D,t))).getOr(0),x=d.bind(D=>O.some($N(D,t))).getOr(p),_={min:X1(s),max:Ku(s),range:vA(s),value:a,hasMinEdge:ON(s),hasMaxEdge:AN(s),minBound:ST(t),minOffset:0,maxBound:SA(t),maxOffset:p,centerMinEdge:y,centerMaxEdge:x};return u2(_)},MA=(t,s,a,l,d,g)=>{const p=RA(s,g,a,l,d);return ST(s)-ST(t)+p},UN=(t,s,a,l)=>{const d=Bg(a),g=MA(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),a),p=hr(s.element)/2;_t(s.element,"top",g-p+"px")},_8=O.none,O8=O.none,A8=DA(-1),D8=DA(1),NA={"top-left":O.none(),top:O.some(o8),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(l8),"bottom-left":O.none(),left:O.none()};var $g=Object.freeze({__proto__:null,setValueFrom:T8,setToMin:E8,setToMax:k8,findValueOfOffset:AA,getValueFromEvent:zN,findPositionOfValue:MA,setPositionFromValue:UN,onLeft:_8,onRight:O8,onUp:A8,onDown:D8,edgeActions:NA});const ET=(t,s)=>{Wt(t,a2(),{value:s})},rp=(t,s)=>({x:t,y:s}),R8=(t,s,a)=>{const l=kA(t,s,a.left),d=AA(t,s,a.top),g=rp(l,d);return ET(t,g),g},BA=(t,s,a,l)=>{const d=t>0?CT:yA,g=s?Bg(l).x:d(Bg(l).x,Y1(l),Ud(l),l0(l)),p=s?d(Bg(l).y,X1(l),Ku(l),l0(l)):Bg(l).y;return ET(a,rp(g,p)),O.some(g)},kT=(t,s)=>(a,l)=>BA(t,s,a,l).map(Fe),M8=(t,s)=>{const a=Y1(s),l=X1(s);ET(t,rp(a,l))},N8=(t,s)=>{const a=Ud(s),l=Ku(s);ET(t,rp(a,l))},WN=t=>pA(t),B8=(t,s,a,l)=>{const d=Bg(a),g=OA(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),a),p=MA(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),a),y=ya(s.element)/2,x=hr(s.element)/2;_t(s.element,"left",g-y+"px"),_t(s.element,"top",p-x+"px")},PA=kT(-1,!1),$A=kT(1,!1),IA=kT(-1,!0),P8=kT(1,!0),fu={"top-left":O.some(n8),top:O.some(DN),"top-right":O.some(s8),right:O.some(a8),"bottom-right":O.some(c8),bottom:O.some(RN),"bottom-left":O.some(MN),left:O.some(u8)};var $8=Object.freeze({__proto__:null,setValueFrom:R8,setToMin:M8,setToMax:N8,getValueFromEvent:WN,setPositionFromValue:B8,onLeft:PA,onRight:$A,onUp:IA,onDown:P8,edgeActions:fu});const I8=[ye("stepSize",1),ye("onChange",re),ye("onChoose",re),ye("onInit",re),ye("onDragStart",re),ye("onDragEnd",re),ye("snapToGrid",!1),ye("rounded",!0),po("snapStart"),Pc("model",Bc("mode",{x:[ye("minX",0),ye("maxX",100),Qa("value",t=>S(t.mode.minX)),Ue("getInitialValue"),Co("manager",HN)],y:[ye("minY",0),ye("maxY",100),Qa("value",t=>S(t.mode.minY)),Ue("getInitialValue"),Co("manager",$g)],xy:[ye("minX",0),ye("maxX",100),ye("minY",0),ye("maxY",100),Qa("value",t=>S({x:t.mode.minX,y:t.mode.minY})),Ue("getInitialValue"),Co("manager",$8)]})),Oa("sliderBehaviours",[zt,St]),Qa("mouseIsDown",()=>S(!1))],Xu=Or({name:"Slider",configFields:I8,partFields:xN,factory:(t,s,a,l)=>{const d=Be=>zu(Be,t,"thumb"),g=Be=>zu(Be,t,"spectrum"),p=Be=>as(Be,t,"left-edge"),y=Be=>as(Be,t,"right-edge"),x=Be=>as(Be,t,"top-edge"),_=Be=>as(Be,t,"bottom-edge"),D=t.model,B=D.manager,I=(Be,ct)=>{B.setPositionFromValue(Be,ct,t,{getLeftEdge:p,getRightEdge:y,getTopEdge:x,getBottomEdge:_,getSpectrum:g})},H=(Be,ct)=>{D.value.set(ct);const qe=d(Be);I(Be,qe)},q=(Be,ct)=>{H(Be,ct);const qe=d(Be);return t.onChange(Be,qe,ct),O.some(!0)},se=Be=>{B.setToMin(Be,t)},Ce=Be=>{B.setToMax(Be,t)},he=Be=>{const ct=()=>{as(Be,t,"thumb").each(pt=>{const It=D.value.get();t.onChoose(Be,pt,It)})},qe=t.mouseIsDown.get();t.mouseIsDown.set(!1),qe&&ct()},me=(Be,ct)=>{ct.stop(),t.mouseIsDown.set(!0),t.onDragStart(Be,d(Be))},$e=(Be,ct)=>{ct.stop(),t.onDragEnd(Be,d(Be)),he(Be)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Yr(t.sliderBehaviours,[zt.config({mode:"special",focusIn:Be=>as(Be,t,"spectrum").map(zt.focusIn).map(Fe)}),St.config({store:{mode:"manual",getValue:Be=>D.value.get(),setValue:H}}),kr.config({channels:{[Yy()]:{onReceive:he}}})]),events:ds([je(a2(),(Be,ct)=>{q(Be,ct.event.value)}),qs((Be,ct)=>{const qe=D.getInitialValue();D.value.set(qe);const pt=d(Be);I(Be,pt);const It=g(Be);t.onInit(Be,pt,It,D.value.get())}),je(Yi(),me),je(ss(),$e),je(Wo(),me),je(fm(),$e)]),apis:{resetToMin:se,resetToMax:Ce,setValue:H,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),LA=Ot("rgb-hex-update"),ZN=Ot("slider-update"),jN=Ot("palette-update"),F8=(t,s)=>{const a=Xu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Xu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Xu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:Q(0)},components:[a,l],sliderBehaviours:nt([on.config({})]),onChange:(d,g,p)=>{Wt(d,ZN,{value:p})}})},GN="form",H8=[Oa("formBehaviours",[St])],qN=t=>"<alloy.field."+t+">",KN=t=>{const s=(()=>{const g=[];return{field:(y,x)=>(g.push(y),uC(GN,qN(y),x)),record:Q(g)}})(),a=t(s),l=s.record(),d=Ne(l,g=>Aa({name:g,pname:qN(g)}));return hC(GN,H8,d,z8,a)},V8=(t,s)=>t.fold(()=>at.error(s),at.value),z8=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Yr(t.formBehaviours,[St.config({store:{mode:"manual",getValue:a=>{const l=gC(a,t);return Qo(l,(d,g)=>d().bind(p=>{const y=Un.getCurrent(p);return V8(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Bu(p.element)))}).map(St.getValue))},setValue:(a,l)=>{Ko(l,(d,g)=>{as(a,t,g).each(p=>{Un.getCurrent(p).each(y=>{St.setValue(y,d)})})})}}})]),apis:{getField:(a,l)=>as(a,t,l).bind(Un.getCurrent)}}),i0={getField:af((t,s,a)=>t.getField(s,a)),sketch:KN},FA=Ot("valid-input"),_T=Ot("invalid-input"),YN=Ot("validating-input"),m2="colorcustom.rgb.",u0=(t,s,a,l)=>{const d=(I,H)=>Nm.config({invalidClass:s("invalid"),notify:{onValidate:q=>{Wt(q,YN,{type:I})},onValid:q=>{Wt(q,FA,{type:I,value:St.getValue(q)})},onInvalid:q=>{Wt(q,_T,{type:I,value:St.getValue(q)})}},validator:{validate:q=>{const se=St.getValue(q),Ce=H(se)?at.value(!0):at.error(t("aria.input.invalid"));return Vc.pure(Ce)},validateOnLoad:!1}}),g=(I,H,q,se,Ce)=>{const he=t(m2+"range"),me=wo.parts.label({dom:{tag:"label",attributes:{"aria-label":se}},components:[Fs(q)]}),$e=wo.parts.field({data:Ce,factory:$1,inputAttributes:J({type:"text"},H==="hex"?{"aria-live":"polite"}:{}),inputClasses:[s("textfield")],inputBehaviours:nt([d(H,I),cr.config({})]),onSetValue:pt=>{Nm.isInvalid(pt)&&Nm.run(pt).get(re)}}),Be=[me,$e],ct=H!=="hex"?[wo.parts["aria-descriptor"]({text:he})]:[],qe=Be.concat(ct);return{dom:{tag:"div",attributes:{role:"presentation"}},components:qe}},p=(I,H)=>{const q=zd(H);return i0.getField(I,"hex").each(se=>{on.isFocused(se)||St.setValue(I,{hex:q.value})}),q},y=(I,H)=>{const q=H.red,se=H.green,Ce=H.blue;St.setValue(I,{red:q,green:se,blue:Ce})},x=Do({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(I,H)=>{x.getOpt(I).each(q=>{_t(q.element,"background-color","#"+H.value)})};return ar({factory:()=>{const I={red:S(O.some(255)),green:S(O.some(255)),blue:S(O.some(255)),hex:S(O.some("ffffff"))},H=(Cn,Zn)=>{const dn=op(Zn);y(Cn,dn),he(dn)},q=Cn=>I[Cn].get(),se=(Cn,Zn)=>{I[Cn].set(Zn)},Ce=()=>q("red").bind(Cn=>q("green").bind(Zn=>q("blue").map(dn=>tp(Cn,Zn,dn,1)))),he=Cn=>{const Zn=Cn.red,dn=Cn.green,Po=Cn.blue;se("red",O.some(Zn)),se("green",O.some(dn)),se("blue",O.some(Po))},me=(Cn,Zn)=>{const dn=Zn.event;dn.type!=="hex"?se(dn.type,O.none()):l(Cn)},$e=(Cn,Zn)=>{a(Cn);const dn=SM(Zn);se("hex",O.some(dn.value));const Po=op(dn);y(Cn,Po),he(Po),Wt(Cn,LA,{hex:dn}),_(Cn,dn)},Be=(Cn,Zn,dn)=>{const Po=parseInt(dn,10);se(Zn,O.some(Po)),Ce().each(bt=>{const Pt=p(Cn,bt);Wt(Cn,LA,{hex:Pt}),_(Cn,Pt)})},ct=Cn=>Cn.type==="hex",qe=(Cn,Zn)=>{const dn=Zn.event;ct(dn)?$e(Cn,dn.value):Be(Cn,dn.type,dn.value)},pt=Cn=>({label:t(m2+Cn+".label"),description:t(m2+Cn+".description")}),It=pt("red"),Yn=pt("green"),Lt=pt("blue"),Wn=pt("hex");return Yo(i0.sketch(Cn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Cn.field("red",wo.sketch(g(jo,"red",It.label,It.description,255))),Cn.field("green",wo.sketch(g(jo,"green",Yn.label,Yn.description,255))),Cn.field("blue",wo.sketch(g(jo,"blue",Lt.label,Lt.description,255))),Cn.field("hex",wo.sketch(g(Qx,"hex",Wn.label,Wn.description,"ffffff"))),x.asSpec()],formBehaviours:nt([Nm.config({invalidClass:s("form-invalid")}),kn("rgb-form-events",[je(FA,qe),je(_T,me),je(YN,me)])])})),{apis:{updateHex:(Cn,Zn)=>{St.setValue(Cn,{hex:Zn.value}),H(Cn,Zn),_(Cn,Zn)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(I,H,q)=>{I.updateHex(H,q)}},extraApis:{}})},XN=(t,s)=>{const a=Xu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Xu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,D)=>{const{width:B,height:I}=_,H=_.getContext("2d");if(H===null)return;H.fillStyle=D,H.fillRect(0,0,B,I);const q=H.createLinearGradient(0,0,B,0);q.addColorStop(0,"rgba(255,255,255,1)"),q.addColorStop(1,"rgba(255,255,255,0)"),H.fillStyle=q,H.fillRect(0,0,B,I);const se=H.createLinearGradient(0,0,0,I);se.addColorStop(0,"rgba(0,0,0,0)"),se.addColorStop(1,"rgba(0,0,0,1)"),H.fillStyle=se,H.fillRect(0,0,B,I)},g=(_,D)=>{const B=_.components()[0].element.dom,I=QC(D,100,100),H=np(I);d(B,tT(H))},p=(_,D)=>{const B=VO(op(D));Xu.setValue(_,{x:B.saturation,y:100-B.value})};return ar({factory:_=>{const D=Q({x:0,y:0}),B=(q,se,Ce)=>{Wt(q,jN,{value:Ce})},I=(q,se,Ce,he)=>{d(Ce.element.dom,tT(kM))},H=nt([Un.config({find:O.some}),on.config({})]);return Xu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,l],onChange:B,onInit:I,sliderBehaviours:H})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,D,B)=>{g(D,B)},setThumb:(_,D,B)=>{p(D,B)}},extraApis:{}})},JN=(t,s)=>{const a=d=>{const g=u0(t,s,d.onValidHex,d.onInvalidHex),p=XN(t,s),y=qe=>(100-qe)/100*360,x=qe=>100-qe/360*100,_={paletteRgba:S(kM),paletteHue:S(0)},D=Do(F8(t,s)),B=Do(p.sketch({})),I=Do(g.sketch({})),H=(qe,pt,It)=>{B.getOpt(qe).each(Yn=>{p.setHue(Yn,It)})},q=(qe,pt)=>{I.getOpt(qe).each(It=>{g.updateHex(It,pt)})},se=(qe,pt,It)=>{D.getOpt(qe).each(Yn=>{Xu.setValue(Yn,x(It))})},Ce=(qe,pt)=>{B.getOpt(qe).each(It=>{p.setThumb(It,pt)})},he=(qe,pt)=>{const It=op(qe);_.paletteRgba.set(It),_.paletteHue.set(pt)},me=(qe,pt,It,Yn)=>{he(pt,It),mt(Yn,Lt=>{Lt(qe,pt,It)})},$e=()=>{const qe=[q];return(pt,It)=>{const Yn=It.event.value,Lt=_.paletteHue.get(),Wn=QC(Lt,Yn.x,100-Yn.y),Cn=MM(Wn);me(pt,Cn,Lt,qe)}},Be=()=>{const qe=[H,q];return(pt,It)=>{const Yn=y(It.event.value),Lt=_.paletteRgba.get(),Wn=VO(Lt),Cn=QC(Yn,Wn.saturation,Wn.value),Zn=MM(Cn);me(pt,Zn,Yn,qe)}},ct=()=>{const qe=[H,se,Ce];return(pt,It)=>{const Yn=It.event.hex,Lt=RM(Yn);me(pt,Yn,Lt.hue,qe)}};return{uid:d.uid,dom:d.dom,components:[B.asSpec(),D.asSpec(),I.asSpec()],behaviours:nt([kn("colour-picker-events",[je(LA,ct()),je(jN,$e()),je(ZN,Be())]),Un.config({find:qe=>I.getOpt(qe)}),zt.config({mode:"acyclic"})])}};return ar({name:"ColourPicker",configFields:[Ue("dom"),ye("onValidHex",re),ye("onInvalidHex",re)],factory:a})},Ni={self:()=>Un.config({find:O.some}),memento:t=>Un.config({find:t.getOpt}),childAt:t=>Un.config({find:s=>Gc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},W8=Me([ye("preprocess",cn),ye("postprocess",cn)]),Z8=(t,s)=>{const a=Nc("RepresentingConfigs.memento processors",W8,s);return St.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=St.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),p=t.get(l);St.setValue(p,g)}}})},HA=(t,s,a)=>St.config({store:We(J({mode:"manual"},t.map(l=>({initialValue:l})).getOr({})),{getValue:s,setValue:a})}),OT=(t,s,a)=>HA(t,l=>s(l.element),(l,d)=>a(l.element,d)),gu={memento:Z8,withElement:OT,withComp:HA,domValue:t=>OT(t,ti,Ei),domHtml:t=>OT(t,Mb,pm),memory:t=>St.config({store:{mode:"memory",initialValue:t}})},G8={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},q8=t=>s=>t.translate(G8[s]),eB=(t,s,a)=>{const l=x=>"tox-"+x,d=JN(q8(s),l),g=x=>{Wt(x,kf,{name:"hex-valid",value:!0})},p=x=>{Wt(x,kf,{name:"hex-valid",value:!1})},y=Do(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[y.asSpec()],behaviours:nt([gu.withComp(a,x=>{const _=y.get(x);return Un.getCurrent(_).bind(I=>St.getValue(I).hex).map(I=>"#"+Sc(I,"#")).getOr("")},(x,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,B=O.from(D.exec(_)).bind(q=>us(q,1)),I=y.get(x);Un.getCurrent(I).fold(()=>{},q=>{St.setValue(q,{hex:B.getOr("")}),i0.getField(q,"hex").each(se=>{co(se,xd())})})}),Ni.self()])}};var K8=tinymce.util.Tools.resolve("tinymce.Resource");const Y8=t=>Bn(t,"init"),X8=t=>{const s=Bo(),a=Do({dom:{tag:t.tag}}),l=Bo();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:nt([kn("custom-editor-events",[qs(d=>{a.getOpt(d).each(g=>{(Y8(t)?t.init(g.element.dom):K8.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{l.on(y=>{p.setValue(y)}),l.clear(),s.set(p)})})})]),gu.withComp(O.none(),()=>s.get().fold(()=>l.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>l.set(g),p=>p.setValue(g))}),Ni.self()]),components:[a.asSpec()]}};var ap=tinymce.util.Tools.resolve("tinymce.util.Tools");const Of=(t,s)=>{const a=ap.explode(s.getOption("images_file_types")),l=d=>qo(a,g=>mr(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Sn(ea(t),l)},VA=(t,s,a)=>{const l=(I,H)=>{H.stop()},d=I=>(H,q)=>{mt(I,se=>{se(H,q)})},g=(I,H)=>{var q;if(!Xt.isDisabled(I)){const se=H.event.raw;y(I,(q=se.dataTransfer)===null||q===void 0?void 0:q.files)}},p=(I,H)=>{const q=H.event.raw.target;y(I,q.files)},y=(I,H)=>{H&&(St.setValue(I,Of(H,s)),Wt(I,Ri,{name:t.name}))},x=Do({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:nt([kn("input-file-events",[Jf(xi()),Jf(Yf())])])}),_=I=>({uid:I.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:nt([gu.memory(a.getOr([])),Ni.self(),Xt.config({}),$n.config({toggleClass:"dragenter",toggleOnExecute:!1}),kn("dropzone-events",[je("dragenter",d([l,$n.toggle])),je("dragleave",d([l,$n.toggle])),je("dragover",l),je("drop",d([l,g])),je(Xi(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Fs(s.translate("Drop an image here"))]},Us.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Fs(s.translate("Browse for an image")),x.asSpec()],action:H=>{x.get(H).element.dom.click()},buttonBehaviours:nt([cr.config({}),du.button(s.isDisabled),Ra()])})]}]}),D=t.label.map(I=>sp(I,s)),B=wo.parts.field({factory:{sketch:_}});return n0(D,B,["tox-form__group--stretched"],[])},tB=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ne(t.items,s.interpreter)}),d0=Ot("alloy-fake-before-tabstop"),f2=Ot("alloy-fake-after-tabstop"),nB=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:nt([on.config({ignore:!0}),cr.config({})])}),oB=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[nB([d0]),t,nB([f2])],behaviours:nt([Ni.childAt(1)])}),sB=(t,s)=>{Wt(t,Bl(),{raw:{which:9,shiftKey:s}})},J8=(t,s)=>{const a=s.element;gc(a,d0)?sB(t,!0):gc(a,f2)&&sB(t,!1)},g2=t=>n2(t,["."+d0,"."+f2].join(","),et),Q8=t=>{const s=S(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,l)=>{s.get()!==l&&bn(a.element,"srcdoc",l),s.set(l)}}},e7=(t,s,a)=>{const l=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p=J(J(J({},t.label.map(B=>({title:B})).getOr({})),a.map(B=>({srcdoc:B})).getOr({})),l?{sandbox:"allow-scripts allow-same-origin"}:{}),y=Q8(a),x=t.label.map(B=>sp(B,s)),_=B=>oB({uid:B.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:nt([cr.config({}),on.config({}),gu.withComp(a,y.getValue,y.setValue)])}),D=wo.parts.field({factory:{sketch:_}});return n0(x,D,["tox-form__group--stretched"],[])},rB=t=>new Promise((s,a)=>{const l=()=>{g(),s(t)},d=[Hc(t,"load",l),Hc(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>mt(d,p=>p.unbind());t.dom.complete&&l()}),t7=(t,s,a,l,d)=>{const g=a*d,p=l*d,y=Math.max(0,t/2-g/2),x=Math.max(0,s/2-p/2);return{left:y.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},Af=(t,s,a)=>{const l=ya(t),d=hr(t);return Math.min(l/s,d/a,1)},AT=(t,s)=>{const a=S(s.getOr({url:""})),l=Do({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=Do({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(x,_)=>{const D={url:_.url};_.zoom.each(I=>D.zoom=I),_.cachedWidth.each(I=>D.cachedWidth=I),_.cachedHeight.each(I=>D.cachedHeight=I),a.set(D);const B=()=>{const{cachedWidth:I,cachedHeight:H,zoom:q}=D;if(!Nn(I)&&!Nn(H)){if(Nn(q)){const Ce=Af(x.element,I,H);D.zoom=Ce}const se=t7(ya(x.element),hr(x.element),I,H,D.zoom);d.getOpt(x).each(Ce=>{rr(Ce.element,se)})}};l.getOpt(x).each(I=>{const H=I.element;_.url!==Br(H,"src")&&(bn(H,"src",_.url),ms(x.element,"tox-imagepreview__loaded")),B(),rB(H).then(q=>{x.getSystem().isConnected()&&(Gr(x.element,"tox-imagepreview__loaded"),D.cachedWidth=q.dom.naturalWidth,D.cachedHeight=q.dom.naturalHeight,B())})})},p={};t.height.each(x=>p.height=x);const y=s.map(x=>({url:x.url,zoom:O.from(x.zoom),cachedWidth:O.from(x.cachedWidth),cachedHeight:O.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:nt([Ni.self(),gu.withComp(y,()=>a.get(),g)])}},n7=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.providers.translate(t.label))]},l=Ne(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...l],behaviours:nt([Ni.self(),un.config({}),gu.domHtml(O.none()),zt.config({mode:"acyclic"})])}},aB=Ot("toolbar.button.execute"),cB=t=>Od((s,a)=>{KC(t,s)(l=>{Wt(s,aB,{buttonApi:l}),t.onAction(l)})}),cp=Ot("common-button-display-events"),DT={[Lc()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Ed()]:["toolbar-button-events",cp],[Wo()]:["focusing","alloy.base.behaviour",cp]},m0=t=>_t(t.element,"width",Ze(t.element,"width")),f0=(t,s,a)=>Zu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),Q1=(t,s)=>f0(t,s,[]),Ig=(t,s)=>f0(t,s,[un.config({})]),zA=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Fs(a.translate(t))],behaviours:nt([un.config({})])}),Ju=Ot("update-menu-text"),eb=Ot("update-menu-icon"),UA=(t,s,a)=>{const l=S(re),d=t.text.map(I=>Do(zA(I,s,a.providers))),g=t.icon.map(I=>Do(Ig(I,a.providers.icons))),p=(I,H)=>{const q=St.getValue(I);return on.focus(q),Wt(q,"keydown",{raw:H.event.raw}),mu.close(q),O.some(!0)},y=t.role.fold(()=>({}),I=>({role:I})),x=t.tooltip.fold(()=>({}),I=>{const H=a.providers.translate(I);return{title:H,"aria-label":H}}),_=Zu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),D=Ot("common-button-display-events");return Do(mu.sketch(We(J(J({},t.uid?{uid:t.uid}:{}),y),{dom:{tag:"button",classes:[s,`${s}--select`].concat(Ne(t.classes,I=>`${s}--${I}`)),attributes:J({},x)},components:Qv([g.map(I=>I.asSpec()),d.map(I=>I.asSpec()),O.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(I,H,q)=>{t.searchable&&r6(q)},dropdownBehaviours:nt([...t.dropdownBehaviours,du.button(()=>t.disabled||a.providers.isDisabled()),Ra(),o0.config({}),un.config({}),kn("dropdown-events",[z1(t,l),U1(t,l)]),kn(D,[qs((I,H)=>m0(I))]),kn("menubutton-update-display-text",[je(Ju,(I,H)=>{d.bind(q=>q.getOpt(I)).each(q=>{un.set(q,[Fs(a.providers.translate(H.event.text))])})}),je(eb,(I,H)=>{g.bind(q=>q.getOpt(I)).each(q=>{un.set(q,[Ig(H.event.icon,a.providers.icons)])})})])]),eventOrder:Yo(DT,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ed()]:["toolbar-button-events","dropdown-events",D]}),sandboxBehaviours:nt([zt.config({mode:"special",onLeft:p,onRight:p}),kn("dropdown-sandbox-events",[je($R,(I,H)=>{e6(I),H.stop()}),je(IR,(I,H)=>{t6(I,H),H.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:We(J({},Fx(!1,t.columns,t.presets)),{fakeFocus:t.searchable,onHighlightItem:oN,onCollapseMenu:(I,H,q)=>{lo.getHighlighted(q).each(se=>{oN(I,q,se)})},onDehighlightItem:s6})},fetch:I=>Vc.nu(Jt(t.fetch,I))}))).asSpec()},o7=t=>kt(t),lB=t=>t.type==="separator",s7=t=>Bn(t,"getSubmenuItems"),r7={type:"separator"},iB=(t,s)=>{const a=vn(t,(l,d)=>o7(d)?d===""?l:d==="|"?l.length>0&&!lB(l[l.length-1])?l.concat([r7]):l:Bn(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&lB(a[a.length-1])&&a.pop(),a},uB=(t,s)=>{const a=t.getSubmenuItems(),l=WA(a,s),d=Yo(l.menus,{[t.value]:l.items}),g=Yo(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},a7=t=>{const s=ut(t,"value").getOrThunk(()=>Ot("generated-menu-item"));return Yo({value:s},t)},WA=(t,s)=>{const a=iB(kt(t)?t.split(" "):t,s);return Ws(a,(l,d)=>{if(s7(d)){const g=a7(d),p=uB(g,s);return{menus:Yo(l.menus,p.menus),items:[p.item,...l.items],expansions:Yo(l.expansions,p.expansions)}}else return We(J({},l),{items:[d,...l.items]})},{menus:{},expansions:{},items:[]})},c7=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),dB=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Df=(t,s,a,l)=>{const d=Ot("primary-menu"),g=WA(t,a.shared.providers.menuItems());if(g.items.length===0)return O.none();const p=c7(l),y=sN(d,g.items,s,a,l.isHorizontalMenu,p),x=dB(l),_=Qo(g.menus,(B,I)=>sN(I,B,s,a,!1,x)),D=Yo(_,pn(d,y));return O.from(Wu.tieredData(d,D,g.expansions))},ZA=t=>!Bn(t,"items"),jA="data-value",mB=(t,s,a,l)=>Ne(a,d=>ZA(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===l,onAction:()=>{St.setValue(t,d.value),Wt(t,Ri,{name:s}),on.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>mB(t,s,d.items,l)}),GA=(t,s)=>Es(t,a=>ZA(a)?tn(a.value===s,a):GA(a.items,s)),l7=(t,s,a)=>{const l=s.shared.providers,d=a.bind(x=>GA(t.items,x)).orThunk(()=>Dr(t.items).filter(ZA)),g=t.label.map(x=>sp(x,l)),p=wo.parts.field({dom:{},factory:{sketch:x=>UA({uid:x.uid,text:d.map(_=>_.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(_,D)=>{const B=mB(_,t.name,t.items,St.getValue(_));D(Df(B,ju.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:O.none()}))},onSetup:Q(re),getApi:Q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[cr.config({}),gu.withComp(d.map(_=>_.value),_=>Br(_.element,jA),(_,D)=>{GA(t.items,D).each(B=>{bn(_.element,jA,B.value),Wt(_,Ju,{text:B.text})})})]},"tox-listbox",s.shared)}}),y={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return wo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Vt([g.toArray(),[y]]),fieldBehaviours:nt([Xt.config({disabled:Q(!t.enabled),onDisabled:x=>{wo.getField(x).each(Xt.disable)},onEnabled:x=>{wo.getField(x).each(Xt.enable)}})])})},i7=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ne(t.items,s.shared.interpreter)}),fB=(t,s)=>{const a=Ne(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>pn("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Yr(t.selectBehaviours,[on.config({}),St.config({store:J({mode:"manual",getValue:d=>ti(d.element),setValue:(d,g)=>{const p=Dr(t.options);an(t.options,x=>x.value===g).isSome()?Ei(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(x=>Ei(d.element,x.value))}},l)})])}},u7=ar({name:"HtmlSelect",configFields:[Ue("options"),Oa("selectBehaviours",[on,St]),ye("selectClasses",[]),ye("selectAttributes",{}),po("data")],factory:fB}),gB=(t,s,a)=>{const l=Ne(t.items,x=>({text:s.translate(x.text),value:x.value})),d=t.label.map(x=>sp(x,s)),g=wo.parts.field(We(J({dom:{}},a.map(x=>({data:x})).getOr({})),{selectAttributes:{size:t.size},options:l,factory:u7,selectBehaviours:nt([Xt.config({disabled:()=>!t.enabled||s.isDisabled()}),cr.config({}),kn("selectbox-change",[je(Xi(),(x,_)=>{Wt(x,Ri,{name:t.name})})])])})),p=t.size>1?O.none():O.some(Zu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:Vt([[g],p.toArray()])};return wo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Vt([d.toArray(),[y]]),fieldBehaviours:nt([Xt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{wo.getField(x).each(Xt.disable)},onEnabled:x=>{wo.getField(x).each(Xt.enable)}}),Ra()])})},qA=Q([ye("field1Name","field1"),ye("field2Name","field2"),rg("onLockedChange"),sg(["lockClass"]),ye("locked",!1),ru.field("coupledFieldBehaviours",[Un,St])]),Lg=(t,s,a)=>as(t,s,a).bind(Un.getCurrent),RT=(t,s)=>Aa({factory:wo,name:t,overrides:a=>({fieldBehaviours:nt([kn("coupled-input-behaviour",[je(xd(),l=>{Lg(l,a,s).each(d=>{as(l,a,"lock").each(g=>{$n.isOn(g)&&a.onLockedChange(l,d,g)})})})])])})}),hB=Q([RT("field1","field2"),RT("field2","field1"),Aa({factory:Us,schema:[Ue("dom")],name:"lock",overrides:t=>({buttonBehaviours:nt([$n.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),pB=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ru.augment(t.coupledFieldBehaviours,[Un.config({find:O.some}),St.config({store:{mode:"manual",getValue:d=>{const g=Bv(d,t,["field1","field2"]);return{[t.field1Name]:St.getValue(g.field1()),[t.field2Name]:St.getValue(g.field2())}},setValue:(d,g)=>{const p=Bv(d,t,["field1","field2"]);Pa(g,t.field1Name)&&St.setValue(p.field1(),g[t.field1Name]),Pa(g,t.field2Name)&&St.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>as(d,t,"field1"),getField2:d=>as(d,t,"field2"),getLock:d=>as(d,t,"lock")}}),ii=Or({name:"FormCoupledInputs",configFields:qA(),partFields:hB(),factory:pB,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),bB=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},g0=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),d=a[2];return at.value({value:l,unit:d})}else return at.error(t)},KA=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>Bn(a,d);return t.unit===s?O.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?O.some(t.value):O.some(t.value/a[t.unit]*a[s]):O.none()},MT=t=>O.none(),d7=(t,s)=>a=>KA(a,s).map(l=>({value:l*t,unit:s})),m7=(t,s)=>{const a=g0(t).toOptional(),l=g0(s).toOptional();return yc(a,l,(d,g)=>KA(d,g.unit).map(p=>g.value/p).map(p=>d7(p,g.unit)).getOr(MT)).getOr(MT)},f7=(t,s)=>{let a=MT;const l=Ot("ratio-event"),d=B=>Zu(B,{tag:"span",classes:["tox-icon","tox-lock-icon__"+B]},s.icons),g=ii.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:nt([Xt.config({disabled:()=>!t.enabled||s.isDisabled()}),Ra(),cr.config({})])}),p=B=>({dom:{tag:"div",classes:["tox-form__group"]},components:B}),y=B=>wo.parts.field({factory:$1,inputClasses:["tox-textfield"],inputBehaviours:nt([Xt.config({disabled:()=>!t.enabled||s.isDisabled()}),Ra(),cr.config({}),kn("size-input-events",[je(nf(),(I,H)=>{Wt(I,l,{isField1:B})}),je(Xi(),(I,H)=>{Wt(I,Ri,{name:t.name})})])]),selectOnFocus:!1}),x=B=>({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(B))]}),_=ii.parts.field1(p([wo.parts.label(x("Width")),y(!0)])),D=ii.parts.field2(p([wo.parts.label(x("Height")),y(!1)]));return ii.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[_,D,p([x(My),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(B,I,H)=>{g0(St.getValue(B)).each(q=>{a(q).each(se=>{St.setValue(I,bB(se))})})},coupledFieldBehaviours:nt([Xt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:B=>{ii.getField1(B).bind(wo.getField).each(Xt.disable),ii.getField2(B).bind(wo.getField).each(Xt.disable),ii.getLock(B).each(Xt.disable)},onEnabled:B=>{ii.getField1(B).bind(wo.getField).each(Xt.enable),ii.getField2(B).bind(wo.getField).each(Xt.enable),ii.getLock(B).each(Xt.enable)}}),Ra(),kn("size-input-events2",[je(l,(B,I)=>{const H=I.event.isField1,q=H?ii.getField1(B):ii.getField2(B),se=H?ii.getField2(B):ii.getField1(B),Ce=q.map(St.getValue).getOr(""),he=se.map(St.getValue).getOr("");a=m7(Ce,he)})])])})},g7=(t,s,a)=>{const l=Xu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(t.label))]}),d=Xu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Xu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Xu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:Q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:nt([Ni.self(),on.config({})]),onChoose:(p,y,x)=>{Wt(p,Ri,{name:t.name,value:x})}})},h7=(t,s)=>{const a=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),l=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ne(y,a)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:Ne(y,d)}),p=y=>({dom:{tag:"tbody"},components:Ne(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),p(t.cells)],behaviours:nt([cr.config({}),on.config({})])}},YA=(t,s)=>{const a=t.label.map(H=>sp(H,s)),l=[Xt.config({disabled:()=>t.disabled||s.isDisabled()}),Ra(),zt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:H=>(co(H,r2),O.some(!0))}),kn("textfield-change",[je(xd(),(H,q)=>{Wt(H,Ri,{name:t.name})}),je(X0(),(H,q)=>{Wt(H,Ri,{name:t.name})})]),cr.config({})],d=t.validation.map(H=>Nm.config({getRoot:q=>ic(q.element),invalidClass:"tox-invalid",validator:{validate:q=>{const se=St.getValue(q),Ce=H.validator(se);return Vc.pure(Ce===!0?at.value(se):at.error(Ce))},validateOnLoad:H.validateOnLoad}})).toArray(),g=t.placeholder.fold(Q({}),H=>({placeholder:s.translate(H)})),p=t.inputMode.fold(Q({}),H=>({inputmode:H})),y=J(J({},g),p),x=wo.parts.field(We(J({tag:t.multiline===!0?"textarea":"input"},t.data.map(H=>({data:H})).getOr({})),{inputAttributes:y,inputClasses:[t.classname],inputBehaviours:nt(Vt([l,d])),selectOnFocus:!1,factory:$1})),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,B=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),I=[Xt.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:H=>{wo.getField(H).each(Xt.disable)},onEnabled:H=>{wo.getField(H).each(Xt.enable)}}),Ra()];return n0(a,_,B,I)},vB=(t,s,a)=>YA({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:a},s),p7=(t,s,a)=>YA({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:a},s),h2=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Fg=t=>t.dimension.property,Rf=(t,s)=>t.dimension.getDimension(s),NT=(t,s)=>{const a=h2(t,s);hc(a,[s.shrinkingClass,s.growingClass])},XA=(t,s)=>{ms(t.element,s.openClass),Gr(t.element,s.closedClass),_t(t.element,Fg(s),"0px"),Gl(t.element)},BT=(t,s)=>{ms(t.element,s.closedClass),Gr(t.element,s.openClass),Vn(t.element,Fg(s))},JA=(t,s,a,l)=>{a.setCollapsed(),_t(t.element,Fg(s),Rf(s,t.element)),NT(t,s),XA(t,s),s.onStartShrink(t),s.onShrunk(t)},b7=(t,s,a,l)=>{const d=l.getOrThunk(()=>Rf(s,t.element));a.setCollapsed(),_t(t.element,Fg(s),d),Gl(t.element);const g=h2(t,s);ms(g,s.growingClass),Gr(g,s.shrinkingClass),XA(t,s),s.onStartShrink(t)},yB=(t,s,a)=>{const l=Rf(s,t.element);(l==="0px"?JA:b7)(t,s,a,O.some(l))},PT=(t,s,a)=>{const l=h2(t,s),d=gc(l,s.shrinkingClass),g=Rf(s,t.element);BT(t,s);const p=Rf(s,t.element);(d?()=>{_t(t.element,Fg(s),g),Gl(t.element)}:()=>{XA(t,s)})(),ms(l,s.shrinkingClass),Gr(l,s.growingClass),BT(t,s),_t(t.element,Fg(s),p),a.setExpanded(),s.onStartGrow(t)},v7=(t,s,a)=>{if(a.isExpanded()){Vn(t.element,Fg(s));const l=Rf(s,t.element);_t(t.element,Fg(s),l)}},CB=(t,s,a)=>{a.isExpanded()||PT(t,s,a)},y7=(t,s,a)=>{a.isExpanded()&&yB(t,s,a)},C7=(t,s,a)=>{a.isExpanded()&&JA(t,s,a)},wB=(t,s,a)=>a.isExpanded(),SB=(t,s,a)=>a.isCollapsed(),xB=(t,s,a)=>{const l=h2(t,s);return gc(l,s.growingClass)===!0},TB=(t,s,a)=>{const l=h2(t,s);return gc(l,s.shrinkingClass)===!0};var S7=Object.freeze({__proto__:null,refresh:v7,grow:CB,shrink:y7,immediateShrink:C7,hasGrown:wB,hasShrunk:SB,isGrowing:xB,isShrinking:TB,isTransitioning:(t,s,a)=>xB(t,s)||TB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?yB:PT)(t,s,a)},disableTransitions:NT,immediateGrow:(t,s,a)=>{a.isExpanded()||(BT(t,s),_t(t.element,Fg(s),Rf(s,t.element)),NT(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),T7=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return $l(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:pn(s.dimension.property,"0px")})},events:(t,s)=>ds([dh(ah(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(NT(a,t),s.isExpanded()&&Vn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),E7=[Ue("closedClass"),Ue("openClass"),Ue("shrinkingClass"),Ue("growingClass"),po("getAnimationRoot"),qn("onShrunk"),qn("onStartShrink"),qn("onGrown"),qn("onStartGrow"),ye("expanded",!1),Pc("dimension",Bc("property",{width:[Co("property","width"),Co("getDimension",t=>ya(t)+"px")],height:[Co("property","height"),Co("getDimension",t=>hr(t)+"px")]}))],k7=Object.freeze({__proto__:null,init:t=>{const s=S(t.expanded),a=()=>"expanded: "+s.get();return Ta({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Jt(s.set,!1),setExpanded:Jt(s.set,!0),readState:a})}});const Bi=Wa({fields:E7,name:"sliding",active:T7,apis:S7,state:k7}),EB=t=>({isEnabled:()=>!Xt.isDisabled(t),setEnabled:s=>Xt.set(t,!s),setActive:s=>{const a=t.element;s?(Gr(a,"tox-tbtn--enabled"),bn(a,"aria-pressed",!0)):(ms(a,"tox-tbtn--enabled"),te(a,"aria-pressed"))},isActive:()=>gc(t.element,"tox-tbtn--enabled"),setText:s=>{Wt(t,Ju,{text:s})},setIcon:s=>Wt(t,eb,{icon:s})}),p2=(t,s,a,l,d=!0)=>UA({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(g,p)=>{const y={pattern:t.search.isSome()?a6(g):""};t.fetch(x=>{p(Df(x,ju.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},y,EB(g))},onSetup:t.onSetup,getApi:EB,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[cr.config({})]:[]]},s,a.shared),_7=(t,s,a)=>{const l=g=>p=>{const y=!p.isActive();p.setActive(y),g.storage.set(y),a.shared.getSink().each(x=>{s().getOpt(x).each(_=>{eu(_.element),Wt(_,kf,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(Ne(t,p=>{const y=p.text.fold(()=>({}),x=>({text:x}));return We(J({type:p.type,active:!1},y),{onAction:l(p),onSetup:d(p)})}))}},$T=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Fs(t)]}),kB=Ot("leaf-label-event-id"),QA=({leaf:t,onLeafAction:s,visible:a,treeId:l,backstage:d})=>{const g=t.menu.map(y=>p2(y,"tox-mbtn",d,O.none(),a)),p=[$T(t.title)];return g.each(y=>p.push(y)),Us.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:y=>{s(t.id),y.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Bl()]:[kB,"keying"]},buttonBehaviours:nt([...a?[cr.config({})]:[],$n.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),kr.config({channels:{[`update-active-item-${l}`]:{onReceive:(y,x)=>{(x.value===t.id?$n.on:$n.off)(y)}}}}),kn(kB,[je(Bl(),(y,x)=>{const _=x.event.raw.code==="ArrowLeft",D=x.event.raw.code==="ArrowRight";_?(Cl(y.element,".tox-tree--directory").each(B=>{y.getSystem().getByDom(B).each(I=>{Dw(B,".tox-tree--directory__label").each(H=>{I.getSystem().getByDom(H).each(on.focus)})})}),x.stop()):D&&x.stop()})])])})},O7=(t,s,a)=>Zu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),b2=(t,s)=>O7(t,s,[]),IT=Ot("directory-label-event-id"),A7=({directory:t,visible:s,noChildren:a,backstage:l})=>{const d=t.menu.map(y=>p2(y,"tox-mbtn",l,O.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[b2("chevron-right",l.shared.providers.icons)]},$T(t.title)];d.each(y=>{g.push(y)});const p=y=>{Cl(y.element,".tox-tree--directory").each(x=>{y.getSystem().getByDom(x).each(_=>$n.toggle(_))})};return Us.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Bl()]:[IT,"keying"]},buttonBehaviours:nt([...s?[cr.config({})]:[],kn(IT,[je(Bl(),(y,x)=>{const _=x.event.raw.code==="ArrowRight",D=x.event.raw.code==="ArrowLeft";_&&a&&x.stop(),(_||D)&&Cl(y.element,".tox-tree--directory").each(B=>{y.getSystem().getByDom(B).each(I=>{!$n.isOn(I)&&_||$n.isOn(I)&&D?(p(y),x.stop()):D&&!$n.isOn(I)&&(Cl(I.element,".tox-tree--directory").each(H=>{Dw(H,".tox-tree--directory__label").each(q=>{I.getSystem().getByDom(q).each(on.focus)})}),x.stop())})})})])])})},D7=({children:t,onLeafAction:s,visible:a,treeId:l,backstage:d})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(g=>g.type==="leaf"?QA({leaf:g,onLeafAction:s,visible:a,treeId:l,backstage:d}):v2({directory:g,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d})),behaviours:nt([Bi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking"}),un.config({})])}),v2=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d})=>{const{children:g}=t,p=y=>g.map(x=>x.type==="leaf"?QA({leaf:x,onLeafAction:s,visible:y,treeId:l,backstage:d}):v2({directory:x,onLeafAction:s,labelTabstopping:y,treeId:l,backstage:d}));return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[A7({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),D7({children:g,onLeafAction:s,visible:!1,treeId:l,backstage:d})],behaviours:nt([$n.config(We(J({},t.children.length>0?{aria:{mode:"expanded"}}:{}),{toggleClass:"tox-tree--directory--expanded",onToggled:(y,x)=>{const _=y.components()[1],D=p(x);x?Bi.grow(_):Bi.shrink(_),un.set(_,D)}}))])}},R7=(t,s)=>{const a=t.onLeafAction.getOr(re),l=Ot("tree-id"),d=t.items.map(g=>g.type==="leaf"?QA({leaf:g,onLeafAction:a,visible:!0,treeId:l,backstage:s}):v2({directory:g,onLeafAction:a,labelTabstopping:!0,treeId:l,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:d,behaviours:nt([zt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1})])}};var OB=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return ds([je(t.event,l),el(()=>s.cancel())].concat(t.cancelEvent.map(d=>[je(d,()=>s.cancel())]).getOr([])))}});const M7=(t,s)=>{let a=null;return{cancel:()=>{Ts(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Ts(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},e4=(t,s)=>{let a=null;const l=()=>{Ts(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},t4=t=>{const s=S(null);return Ta({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var B7=Object.freeze({__proto__:null,throttle:t4,init:t=>t.stream.streams.state(t)});const AB=(t,s)=>{const a=t.stream,l=e4(t.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var DB=[Pc("stream",Bc("mode",{throttle:[Ue("delay"),ye("stopEvent",!0),Co("streams",{setup:AB,state:t4})]})),ye("event","input"),po("cancelEvent"),rg("onStream")];const n4=Wa({fields:DB,name:"streaming",active:OB,state:B7}),y2=(t,s,a)=>{const l=St.getValue(a);St.setValue(s,l),s4(s)},o4=(t,s)=>{const a=t.element,l=ti(a),d=a.dom;Br(a,"type")!=="number"&&s(d,l)},s4=t=>{o4(t,(s,a)=>s.setSelectionRange(a.length,a.length))},P7=(t,s)=>{o4(t,(a,l)=>a.setSelectionRange(s,l.length))},$7=(t,s,a)=>{if(t.selectsOver){const l=St.getValue(s),d=t.getDisplayText(l),g=St.getValue(a);return t.getDisplayText(g).indexOf(d)===0?O.some(()=>{y2(t,s,a),P7(s,d.length)}):O.none()}else return O.none()},r4=Q("alloy.typeahead.itemexecute"),RB=(t,s,a,l)=>{const d=(B,I,H)=>{t.previewing.set(!1);const q=Cr.getCoupled(B,"sandbox");if(Qn.isOpen(q))Un.getCurrent(q).each(se=>{lo.getHighlighted(se).fold(()=>{H(se)},()=>{Db(q,se.element,"keydown",I)})});else{const se=Ce=>{Un.getCurrent(Ce).each(H)};aT(t,p(B),B,q,l,se,zl.HighlightMenuAndItem).get(re)}},g=BR(t),p=B=>I=>I.map(H=>{const q=zr(H.menus),se=Ie(q,he=>Sn(he.items,me=>me.type==="item"));return St.getState(B).update(Ne(se,he=>he.data)),H}),y=B=>Un.getCurrent(B),x="typeaheadevents",_=[on.config({}),St.config({onSetValue:t.onSetValue,store:J({mode:"dataset",getDataKey:B=>ti(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,I)=>{Ei(B.element,t.model.getDisplayText(I))}},t.initialData.map(B=>pn("initialValue",B)).getOr({}))}),n4.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,I)=>{const H=Cr.getCoupled(B,"sandbox");if(on.isFocused(B)&&ti(B.element).length>=t.minChars){const se=y(H).bind(he=>lo.getHighlighted(he).map(St.getValue));t.previewing.set(!0);const Ce=he=>{y(H).each(me=>{se.fold(()=>{t.model.selectsOver&&lo.highlightFirst(me)},$e=>{lo.highlightBy(me,Be=>St.getValue(Be).value===$e.value),lo.getHighlighted(me).orThunk(()=>(lo.highlightFirst(me),O.none()))})})};aT(t,p(B),B,H,l,Ce,zl.HighlightJustMenu).get(re)}},cancelEvent:Rp()}),zt.config({mode:"special",onDown:(B,I)=>(d(B,I,lo.highlightFirst),O.some(!0)),onEscape:B=>{const I=Cr.getCoupled(B,"sandbox");return Qn.isOpen(I)?(Qn.close(I),O.some(!0)):O.none()},onUp:(B,I)=>(d(B,I,lo.highlightLast),O.some(!0)),onEnter:B=>{const I=Cr.getCoupled(B,"sandbox"),H=Qn.isOpen(I);if(H&&!t.previewing.get())return y(I).bind(q=>lo.getHighlighted(q)).map(q=>(Wt(B,r4(),{item:q}),!0));{const q=St.getValue(B);return co(B,Rp()),t.onExecute(I,B,q),H&&Qn.close(I),O.some(!0)}}}),$n.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Cr.config({others:{sandbox:B=>uT(t,B,{onOpen:()=>$n.on(B),onClose:()=>$n.off(B)})}}),kn(x,[qs(B=>{t.lazyTypeaheadComp.set(O.some(B))}),el(B=>{t.lazyTypeaheadComp.set(O.none())}),Od(B=>{const I=re;sA(t,p(B),B,l,I,zl.HighlightMenuAndItem).get(re)}),je(r4(),(B,I)=>{const H=Cr.getCoupled(B,"sandbox");y2(t.model,B,I.event.item),co(B,Rp()),t.onItemExecute(B,H,I.event.item,St.getValue(B)),Qn.close(H),s4(B)})].concat(t.dismissOnBlur?[je(Y0(),B=>{const I=Cr.getCoupled(B,"sandbox");tu(I.element).isNone()&&Qn.close(I)})]:[]))],D=J({[Nu()]:[St.name(),n4.name(),x]},t.eventOrder);return{uid:t.uid,dom:PR(Yo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:J(J({},g),Yr(t.typeaheadBehaviours,_)),eventOrder:D}},I7=Q([po("lazySink"),Ue("fetch"),ye("minChars",5),ye("responseTime",1e3),qn("onOpen"),ye("getHotspot",O.some),ye("getAnchorOverrides",Q({})),ye("layouts",O.none()),ye("eventOrder",{}),w("model",{},[ye("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ye("selectsOver",!0),ye("populateFromBrowse",!0)]),qn("onSetValue"),tr("onExecute"),qn("onItemExecute"),ye("inputClasses",[]),ye("inputAttributes",{}),ye("inputStyles",{}),ye("matchWidth",!0),ye("useMinWidth",!1),ye("dismissOnBlur",!0),sg(["openClass"]),po("initialData"),Oa("typeaheadBehaviours",[on,St,n4,zt,$n,Cr]),Qa("lazyTypeaheadComp",()=>S(O.none)),Qa("previewing",()=>S(!0))].concat(NR()).concat(rA())),MB=Q([au({schema:[Md()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{$7(t.model,d,l).fold(()=>{t.model.selectsOver?(lo.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&y2(t.model,d,l)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(Wt(l,r4(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&y2(t.model,l,a)})}})})]),L7=Or({name:"Typeahead",configFields:I7(),partFields:MB(),factory:RB}),Zd=t=>{const s=()=>Zd(t.toCached()),a=x=>Zd(t.bind(_=>_.fold(D=>Vc.pure(at.error(D)),D=>x(D)))),l=x=>Zd(t.map(_=>_.bind(x))),d=x=>Zd(t.map(_=>_.map(x))),g=x=>Zd(t.map(_=>_.mapError(x))),p=(x,_)=>t.map(D=>D.fold(x,_)),y=(x,_)=>Zd(Vc.nu(D=>{let B=!1;const I=setTimeout(()=>{B=!0,D(at.error(_()))},x);t.get(H=>{B||(clearTimeout(I),D(H))})}));return We(J({},t),{toCached:s,bindFuture:a,bindResult:l,mapResult:d,mapError:g,foldResult:p,withTimeout:y})},LT=t=>Zd(Vc.nu(t)),NB=t=>Zd(Vc.pure(at.value(t))),BB={nu:LT,wrap:Zd,pure:NB,value:NB,error:t=>Zd(Vc.pure(at.error(t))),fromResult:t=>Zd(Vc.pure(t)),fromFuture:t=>Zd(t.map(at.value)),fromPromise:t=>LT(s=>{t.then(a=>{s(at.value(a))},a=>{s(at.error(a))})})},FT=(t,s,a=[],l,d,g)=>{const p=s.fold(()=>({}),_=>({action:_})),y=J({buttonBehaviours:nt([du.button(()=>!t.enabled||g.isDisabled()),Ra(),cr.config({}),kn("button press",[nw("click"),nw("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},p),x=Yo(y,{dom:l});return Yo(x,{components:d})},PB=(t,s,a,l=[])=>{const d=t.tooltip.map(x=>({"aria-label":a.translate(x),title:a.translate(x)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(x=>Q1(x,a.icons)),y=Qv([p]);return FT(t,s,l,g,y,a)},a4=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},$B=(t,s,a,l=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(I=>Q1(I,a.icons)),y=[p.getOrThunk(()=>Fs(g))],x=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...a4(x),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return FT(t,s,l,B,y,a)},IB=(t,s,a,l=[],d=[])=>{const g=$B(t,O.some(s),a,l,d);return Us.sketch(g)},LB=(t,s)=>a=>{s==="custom"?Wt(a,kf,{name:t,value:{}}):s==="submit"?co(a,r2):s==="cancel"?co(a,K1):console.error("Unknown button type: ",s)},FB=(t,s)=>s==="menu",H7=(t,s)=>s==="custom"||s==="cancel"||s==="submit",V7=(t,s)=>s==="togglebutton",HB=(t,s)=>{var a,l,d;const g=O.from(t.icon).map(me=>Ig(me,s.icons)).map(Do),p=me=>{Wt(me,kf,{name:t.name,value:{setIcon:$e=>{g.map(Be=>Be.getOpt(me).each(ct=>{un.set(ct,[Ig($e,s.icons)])}))}}})},y=We(J({},t),{name:(a=t.name)!==null&&a!==void 0?a:"",primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:O.from(t.tooltip),icon:O.from(t.name),enabled:(l=t.enabled)!==null&&l!==void 0?l:!1,borderless:!1}),x=y.tooltip.map(me=>({"aria-label":s.translate(me),title:s.translate(me)})).getOr({}),_=a4((d=t.buttonType)!==null&&d!==void 0?d:"secondary"),D=!!t.icon&&!!t.text,B={tag:"button",classes:[..._.concat(["tox-button--icon"]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:x},I=[],H=s.translate(t.text),q=Fs(H),Ce=[...Qv([g.map(me=>me.asSpec())]),...D?[q]:[]],he=FT(y,O.some(p),I,B,Ce,s);return Us.sketch(he)},HT=(t,s,a)=>{if(FB(t,s)){const l=()=>p,d=t,g=We(J({},t),{type:"menubutton",search:O.none(),onSetup:y=>(y.setEnabled(t.enabled),re),fetch:_7(d.items,l,a)}),p=Do(p2(g,"tox-tbtn",a,O.none()));return p.asSpec()}else if(H7(t,s)){const l=LB(t.name,s),d=We(J({},t),{borderless:!1});return IB(d,l,a.shared.providers,[])}else if(V7(t,s)){const l=We(J({},t),{tooltip:t.tooltip,text:t.text.getOrUndefined(),buttonType:t.buttonType.getOrUndefined()});return HB(l,a.shared.providers)}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},z7=(t,s)=>{const a=LB(t.name,"custom");return P6(O.none(),wo.parts.field(J({factory:Us},$B(t,O.some(a),s,[gu.memory(""),Ni.self()]))))},U7={type:"separator"},VB=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:re}),c4=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:re}),W7=t=>Ne(t,VB),zB=(t,s)=>Sn(s,a=>a.type===t),l4=(t,s)=>W7(zB(t,s)),UB=t=>l4("header",t.targets),VT=t=>l4("anchor",t.targets),Z7=t=>O.from(t.anchorTop).map(s=>c4("<top>",s)).toArray(),j7=t=>O.from(t.anchorBottom).map(s=>c4("<bottom>",s)).toArray(),G7=t=>Ne(t,s=>c4(s,s)),q7=t=>vn(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(U7,a),[]),zT=(t,s)=>{const a=t.toLowerCase();return Sn(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,p=(d=l.value)!==null&&d!==void 0?d:"";return or(g.toLowerCase(),a)||or(p.toLowerCase(),a)})},WB=(t,s,a)=>{var l,d;const g=St.getValue(s),p=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],x=>{const _=zT(p,G7(a.getHistory(t)));return t==="file"?q7([_,zT(p,UB(x)),zT(p,Vt([Z7(x),VT(x),j7(x)]))]):_})},ZB=Ot("aria-invalid"),K7=(t,s,a,l)=>{const d=s.shared.providers,g=me=>{const $e=St.getValue(me);a.addToHistory($e.value,t.filetype)},p=We(J({},l.map(me=>({initialData:me})).getOr({})),{dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":ZB,type:"url"},minChars:0,responseTime:0,fetch:me=>{const $e=WB(t.filetype,me,a),Be=Df($e,ju.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:O.none()});return Vc.pure(Be)},getHotspot:me=>q.getOpt(me),onSetValue:(me,$e)=>{me.hasConfigured(Nm)&&Nm.run(me).get(re)},typeaheadBehaviours:nt([...a.getValidationHandler().map(me=>Nm.config({getRoot:$e=>ic($e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:($e,Be)=>{D.getOpt($e).each(ct=>{bn(ct.element,"title",d.translate(Be))})}},validator:{validate:$e=>{const Be=St.getValue($e);return BB.nu(ct=>{me({type:t.filetype,url:Be.value},qe=>{if(qe.status==="invalid"){const pt=at.error(qe.message);ct(pt)}else{const pt=at.value(qe.message);ct(pt)}})})},validateOnLoad:!1}})).toArray(),Xt.config({disabled:()=>!t.enabled||d.isDisabled()}),cr.config({}),kn("urlinput-events",[je(xd(),me=>{const $e=ti(me.element),Be=$e.trim();Be!==$e&&Ei(me.element,Be),t.filetype==="file"&&Wt(me,Ri,{name:t.name})}),je(Xi(),me=>{Wt(me,Ri,{name:t.name}),g(me)}),je(X0(),me=>{Wt(me,Ri,{name:t.name}),g(me)})])]),eventOrder:{[xd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:me=>me.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Fx(!1,1,"normal")},onExecute:(me,$e,Be)=>{Wt($e,r2,{})},onItemExecute:(me,$e,Be,ct)=>{g(me),Wt(me,Ri,{name:t.name})}}),y=wo.parts.field(We(J({},p),{factory:L7})),x=t.label.map(me=>sp(me,d)),D=Do(((me,$e,Be=me,ct=me)=>Zu(Be,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+me],attributes:J({title:d.translate(ct),"aria-live":"polite"},$e.fold(()=>({}),qe=>({id:qe})))},d.icons))("invalid",O.some(ZB),"warning")),B=Do({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),I=a.getUrlPicker(t.filetype),H=Ot("browser.url.event"),q=Do({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,B.asSpec()],behaviours:nt([Xt.config({disabled:()=>!t.enabled||d.isDisabled()})])}),se=Do(IB({name:t.name,icon:O.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},me=>co(me,H),d,[],["tox-browse-url"])),Ce=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Vt([[q.asSpec()],I.map(()=>se.asSpec()).toArray()])}),he=me=>{Un.getCurrent(me).each($e=>{const Be=St.getValue($e),ct=J({fieldname:t.name},Be);I.each(qe=>{qe(ct).get(pt=>{St.setValue($e,pt),Wt(me,Ri,{name:t.name})})})})};return wo.sketch({dom:$6(),components:x.toArray().concat([Ce()]),fieldBehaviours:nt([Xt.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:me=>{wo.getField(me).each(Xt.disable),se.getOpt(me).each(Xt.disable)},onEnabled:me=>{wo.getField(me).each(Xt.enable),se.getOpt(me).each(Xt.enable)}}),Ra(),kn("url-input-events",[je(H,he)])])})},jB=(t,s)=>Mm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Us.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:aR(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{Wt(a,kf,{name:"alert-banner",value:t.url})},buttonBehaviours:nt([q_()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),Y7=(t,s)=>{t.dom.checked=s},X7=t=>t.dom.checked,Rn=(t,s,a)=>{const l=x=>(x.element.dom.click(),O.some(!0)),d=wo.parts.field({factory:{sketch:cn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:nt([Ni.self(),Xt.config({disabled:()=>!t.enabled||s.isDisabled()}),cr.config({}),on.config({}),gu.withElement(a,X7,Y7),zt.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),kn("checkbox-events",[je(Xi(),(x,_)=>{Wt(x,Ri,{name:t.name})})])])}),g=wo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Fs(s.translate(t.label))],behaviours:nt([o0.config({})])}),p=x=>Zu(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),y=Do({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return wo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:nt([Xt.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:x=>{wo.getField(x).each(Xt.disable)},onEnabled:x=>{wo.getField(x).each(Xt.enable)}}),Ra()])})},C2=t=>t.presets==="presentation"?Mm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Mm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:nt([cr.config({}),on.config({})])}),ma=t=>(s,a,l,d)=>ut(a,"name").fold(()=>t(a,d,O.none()),g=>s.field(g,t(a,d,ut(l,g)))),GB=t=>(s,a,l,d)=>{const g=Yo(a,{source:"dynamic"});return ma(t)(s,g,l,d)},qB={bar:ma((t,s)=>O6(t,s.shared)),collection:ma((t,s,a)=>I6(t,s.shared.providers,a)),alertbanner:ma((t,s)=>jB(t,s.shared.providers)),input:ma((t,s,a)=>vB(t,s.shared.providers,a)),textarea:ma((t,s,a)=>p7(t,s.shared.providers,a)),label:ma((t,s)=>n7(t,s.shared)),iframe:GB((t,s,a)=>e7(t,s.shared.providers,a)),button:ma((t,s)=>z7(t,s.shared.providers)),checkbox:ma((t,s,a)=>Rn(t,s.shared.providers,a)),colorinput:ma((t,s,a)=>W6(t,s.shared,s.colorinput,a)),colorpicker:ma((t,s,a)=>eB(t,s.shared.providers,a)),dropzone:ma((t,s,a)=>VA(t,s.shared.providers,a)),grid:ma((t,s)=>tB(t,s.shared)),listbox:ma((t,s,a)=>l7(t,s,a)),selectbox:ma((t,s,a)=>gB(t,s.shared.providers,a)),sizeinput:ma((t,s)=>f7(t,s.shared.providers)),slider:ma((t,s,a)=>g7(t,s.shared.providers,a)),urlinput:ma((t,s,a)=>K7(t,s,s.urlinput,a)),customeditor:ma(X8),htmlpanel:ma(C2),imagepreview:ma((t,s,a)=>AT(t,a)),table:ma((t,s)=>h7(t,s.shared.providers)),tree:ma((t,s)=>R7(t,s)),panel:ma((t,s)=>i7(t,s))},KB={field:(t,s)=>s,record:Q([])},i4=(t,s,a,l)=>{const d=Yo(l,{shared:{interpreter:g=>u4(t,g,a,d)}});return u4(t,s,a,d)},u4=(t,s,a,l)=>ut(qB,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,l)),h0=(t,s,a)=>u4(KB,t,s,a),lp="layout-inset",UT=t=>t.x,YB=(t,s)=>t.x+t.width/2-s.width/2,d4=(t,s)=>t.x+t.width-s.width,m4=t=>t.y,WT=(t,s)=>t.y+t.height-s.height,ZT=(t,s)=>t.y+t.height/2-s.height/2,w2=(t,s,a)=>ia(d4(t,s),WT(t,s),a.insetSouthwest(),hy(),"southwest",za(t,{right:0,bottom:3}),lp),jT=(t,s,a)=>ia(UT(t),WT(t,s),a.insetSoutheast(),Zb(),"southeast",za(t,{left:1,bottom:3}),lp),S2=(t,s,a)=>ia(d4(t,s),m4(t),a.insetNorthwest(),vh(),"northwest",za(t,{right:0,top:2}),lp),x2=(t,s,a)=>ia(UT(t),m4(t),a.insetNortheast(),bh(),"northeast",za(t,{left:1,top:2}),lp),Mf=(t,s,a)=>ia(YB(t,s),m4(t),a.insetNorth(),ol(),"north",za(t,{top:2}),lp),T2=(t,s,a)=>ia(YB(t,s),WT(t,s),a.insetSouth(),yh(),"south",za(t,{bottom:3}),lp),f4=(t,s,a)=>ia(d4(t,s),ZT(t,s),a.insetEast(),Iw(),"east",za(t,{right:0}),lp),XB=(t,s,a)=>ia(UT(t),ZT(t,s),a.insetWest(),qp(),"west",za(t,{left:1}),lp),J7=t=>{switch(t){case"north":return Mf;case"northeast":return x2;case"northwest":return S2;case"south":return T2;case"southeast":return jT;case"southwest":return w2;case"east":return f4;case"west":return XB}},JB=(t,s,a,l,d)=>Jw(l).map(J7).getOr(Mf)(t,s,a,l,d),Q7=t=>{switch(t){case"north":return T2;case"northeast":return jT;case"northwest":return w2;case"south":return Mf;case"southeast":return x2;case"southwest":return S2;case"east":return XB;case"west":return f4}},eH=(t,s,a,l,d)=>Jw(l).map(Q7).getOr(Mf)(t,s,a,l,d),QB={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},tH=(t,s,a)=>{const d={maxHeightFunction:ug()},g=()=>({type:"node",root:Ke(_e(t())),node:O.from(t()),bubble:Th(12,12,QB),layouts:{onRtl:()=>[x2],onLtr:()=>[S2]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:Th(-12,12,QB),layouts:{onRtl:()=>[Ua,qr,zs],onLtr:()=>[qr,Ua,zs]},overrides:d});return()=>a()?g():p()},nH=(t,s,a)=>{const l=()=>({type:"node",root:Ke(_e(t())),node:O.from(t()),layouts:{onRtl:()=>[Mf],onLtr:()=>[Mf]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[zs],onLtr:()=>[zs]}});return()=>a()?l():d()},oH=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return O.some(r1.range(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset))}}),sH=t=>s=>({type:"node",root:t(),node:s}),rH=(t,s,a)=>{const l=qh(t),d=()=>pe.fromDom(t.getBody()),g=()=>pe.fromDom(t.getContentAreaContainer()),p=()=>l||!a();return{inlineDialog:tH(g,s,p),banner:nH(g,s,p),cursor:oH(t,d),node:sH(d)}},eP=t=>(s,a)=>{sT(t)(s,a)},aH=t=>()=>GO(t),cH=t=>s=>e0(t,s),lH=t=>s=>jO(t,s),iH=t=>({colorPicker:eP(t),hasCustomColors:aH(t),getColors:cH(t),getColorCols:lH(t)}),uH=t=>()=>yR(t),dH=t=>({isDraggableModal:uH(t)}),tP=t=>{const s=S(Nx(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},nP=t=>Pa(t,"items"),g4=t=>Pa(t,"format"),oP=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],sP=t=>Bn(t,"items"),rP=t=>Bn(t,"block"),aP=t=>Bn(t,"inline"),mH=t=>Bn(t,"selector"),h4=t=>vn(t,(s,a)=>{if(sP(a)){const l=h4(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(aP(a)||rP(a)||mH(a)){const d=`custom-${kt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return We(J({},s),{formats:s.formats.concat(a)})},{customFormats:[],formats:[]}),cP=(t,s)=>{const a=h4(s),l=d=>{mt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},lP=t=>lR(t).map(s=>{const a=cP(t,s);return iR(t)?oP.concat(a):a}).getOr(oP),iP=t=>{const s=Vo(t);return s.length===1&&So(s,"title")},uP=(t,s,a)=>We(J({},t),{type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),dP=(t,s,a,l)=>{const d=x=>uP(x,a,l),g=x=>{const _=y(x.items);return We(J({},x),{type:"submenu",getStyleItems:Q(_)})},p=x=>{const _=kt(x.name)?x.name:Ot(x.title),D=`custom-${_}`,B=We(J({},x),{type:"formatter",format:D,isSelected:a(D),getStylePreview:l(D)});return t.formatter.register(_,B),B},y=x=>Ne(x,_=>nP(_)?g(_):g4(_)?d(_):iP(_)?We(J({},_),{type:"separator"}):p(_));return y(s)},Pm=t=>{const s=y=>()=>t.formatter.match(y),a=y=>()=>{const x=t.formatter.get(y);return x!==void 0?O.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):O.none()},l=S([]),d=S([]),g=S(!1);return t.on("PreInit",y=>{const x=lP(t),_=dP(t,x,s,a);l.set(_)}),t.on("addStyleModifications",y=>{const x=dP(t,y.items,s,a);d.set(x),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:l.get(),x=d.get();return y.concat(x)}}},GT=t=>Jn(t)&&t.nodeType===1,qT=ap.trim,mP=t=>s=>!!(GT(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),p4=mP("true"),fH=mP("false"),KT=(t,s,a,l,d)=>({type:t,title:s,url:a,level:l,attach:d}),fP=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return p4(s)}return!1},b4=(t,s)=>Ne(_r(pe.fromDom(s),t),a=>a.dom),gP=t=>t.innerText||t.textContent,hP=t=>t.id?t.id:Ot("h"),pP=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,v4=t=>pP(t)&&vP(t),bP=t=>t&&/^(H[1-6])$/.test(t.nodeName),vP=t=>fP(t)&&!fH(t),yP=t=>bP(t)&&vP(t),gH=t=>bP(t)?parseInt(t.nodeName.substr(1),10):0,hH=t=>{var s;const a=hP(t),l=()=>{t.id=a};return KT("header",(s=gP(t))!==null&&s!==void 0?s:"","#"+a,gH(t),l)},CP=t=>{const s=t.id||t.name,a=gP(t);return KT("anchor",a||"#"+s,"#"+s,0,re)},wP=t=>Ne(Sn(t,yP),hH),pH=t=>Ne(Sn(t,v4),CP),bH=t=>b4("h1,h2,h3,h4,h5,h6,a:not([href])",t),vH=t=>qT(t.title).length>0,SP={find:t=>{const s=bH(t);return Sn(wP(s).concat(pH(s)),vH)}},hu="tinymce-url-history",YT=5,xP=t=>kt(t)&&/^https?/.test(t),yH=t=>Ln(t)&&t.length<=YT&&ac(t,xP),TP=t=>Bt(t)&&Is(t,s=>!yH(s)).isNone(),EP=()=>{const t=G1.getItem(hu);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return""+hu,{};throw a}return TP(s)?s:(""+hu,{})},CH=t=>{if(!TP(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));G1.setItem(hu,JSON.stringify(t))},kP=t=>{const s=EP();return ut(s,t).getOr([])},_P=(t,s)=>{if(!xP(t))return;const a=EP(),l=ut(a,s).getOr([]),d=Sn(l,g=>g!==t);a[s]=[t].concat(d).slice(0,YT),CH(a)},wH=t=>!!t,WW=t=>Qo(ap.makeMap(t,/[, ]/),wH),oc=t=>O.from(hR(t)),y4=t=>{const s=O.from(pR(t)).filter(wH).map(WW);return oc(t).fold(et,a=>s.fold(Fe,l=>Vo(l).length>0?l:!1))},SH=(t,s)=>{const a=y4(t);return Ho(a)?a?oc(t):O.none():a[s]?oc(t):O.none()},XT=(t,s)=>SH(t,s).map(a=>l=>Vc.nu(d=>{const g=(y,x)=>{if(!kt(y))throw new Error("Expected value to be string");if(x!==void 0&&!Bt(x))throw new Error("Expected meta to be a object");d({value:y,meta:x})},p=J({filetype:s,fieldname:l.fieldname},O.from(l.meta).getOr({}));a.call(t,g,l.value,p)})),OP=t=>O.from(t).filter(kt).getOrUndefined(),xH=t=>HC(t)?O.some({targets:SP.find(t.getBody()),anchorTop:OP(bR(t)),anchorBottom:OP(vR(t))}):O.none(),TH=t=>O.from(nO(t)),EH=t=>({getHistory:kP,addToHistory:_P,getLinkInformation:()=>xH(t),getValidationHandler:()=>TH(t),getUrlPicker:s=>XT(t,s)}),kH=(t,s,a)=>{const l=S(!1),d=tP(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:iu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=EH(s),y=Pm(s),x=iH(s),_=dH(s),D=()=>l.get(),B=se=>l.set(se),I={shared:{providers:g,anchors:rH(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:y,colorinput:x,dialog:_,isContextMenuOpen:D,setContextMenuState:B},H=We(J({},I),{shared:We(J({},I.shared),{interpreter:se=>h0(se,{},H),getSink:t.popup})}),q=We(J({},I),{shared:We(J({},I.shared),{interpreter:se=>h0(se,{},q),getSink:t.dialog})});return{popup:H,dialog:q}},_H=(t,s,a)=>{const l=(qe,pt)=>{mt([s,...a],It=>{It.broadcastEvent(qe,pt)})},d=(qe,pt)=>{mt([s,...a],It=>{It.broadcastOn([qe],pt)})},g=qe=>d(Tm(),{target:qe.target}),p=Ol(),y=Hc(p,"touchstart",g),x=Hc(p,"touchmove",qe=>l(jE(),qe)),_=Hc(p,"touchend",qe=>l(J0(),qe)),D=Hc(p,"mousedown",g),B=Hc(p,"mouseup",qe=>{qe.raw.button===0&&d(Yy(),{target:qe.target})}),I=qe=>d(Tm(),{target:pe.fromDom(qe.target)}),H=qe=>{qe.button===0&&d(Yy(),{target:pe.fromDom(qe.target)})},q=()=>{mt(t.editorManager.get(),qe=>{t!==qe&&qe.dispatch("DismissPopups",{relatedTarget:t})})},se=qe=>l(Mp(),nS(qe)),Ce=qe=>{d(Nh(),{}),l(Xf(),nS(qe))},he=_e(pe.fromDom(t.getElement())),me=Ay(he,"scroll",qe=>{requestAnimationFrame(()=>{const pt=t.getContainer();if(pt!=null){const Yn=t2(t,s.element).map(Lt=>[Lt.element,...Lt.others]).getOr([]);qo(Yn,Lt=>Eo(Lt,qe.target))&&(t.dispatch("ElementScroll",{target:qe.target.dom}),l(Q2(),qe))}})}),$e=()=>d(Nh(),{}),Be=qe=>{qe.state&&d(Tm(),{target:pe.fromDom(t.getContainer())})},ct=qe=>{d(Tm(),{target:pe.fromDom(qe.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",I),t.on("tap",I),t.on("mouseup",H),t.on("mousedown",q),t.on("ScrollWindow",se),t.on("ResizeWindow",Ce),t.on("ResizeEditor",$e),t.on("AfterProgressState",Be),t.on("DismissPopups",ct)}),t.on("remove",()=>{t.off("click",I),t.off("tap",I),t.off("mouseup",H),t.off("mousedown",q),t.off("ScrollWindow",se),t.off("ResizeWindow",Ce),t.off("ResizeEditor",$e),t.off("AfterProgressState",Be),t.off("DismissPopups",ct),D.unbind(),y.unbind(),x.unbind(),_.unbind(),B.unbind(),me.unbind()}),t.on("detach",()=>{mt([s,...a],PS),mt([s,...a],qe=>qe.destroy())})},ja=QS,Nf=t_,AP=Q([ye("shell",!1),Ue("makeItem"),ye("setupItem",re),ru.field("listBehaviours",[un])]),OH=ri({name:"items",overrides:()=>({behaviours:nt([un.config({})])})}),DP=Q([OH]),AH=Q("CustomList"),RP=(t,s,a,l)=>{const d=(y,x)=>{p(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const D=un.contents(_),B=x.length,I=B-D.length,H=I>0?xo(I,()=>t.makeItem()):[],q=D.slice(B);mt(q,Ce=>un.remove(_,Ce)),mt(H,Ce=>un.append(_,Ce));const se=un.contents(_);mt(se,(Ce,he)=>{t.setupItem(y,Ce,x[he],he)})})},g=t.shell?{behaviours:[un.config({})],components:[]}:{behaviours:[],components:s},p=y=>t.shell?O.some(y):as(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Yr(t.listBehaviours,g.behaviours),apis:{setItems:d}}},MP=Or({name:AH(),configFields:AP(),partFields:DP(),factory:RP,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),p0=Q([Ue("dom"),ye("shell",!0),Oa("toolbarBehaviours",[un])]),ZW=Q([ri({name:"groups",overrides:()=>({behaviours:nt([un.config({})])})})]),jW=(t,s,a,l)=>{const d=(y,x)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{un.set(_,x)})},g=y=>t.shell?O.some(y):as(y,t,"groups"),p=t.shell?{behaviours:[un.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Yr(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},$m=Or({name:"Toolbar",configFields:p0(),partFields:ZW(),factory:jW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),RH=re,MH=et,w4=Q([]);var S4=Object.freeze({__proto__:null,setup:RH,isDocked:MH,getBehaviours:w4});const x4=t=>(Ks(As(t,"position"),"fixed")?O.none():gi(t)).orThunk(()=>{const l=pe.fromTag("span");return oa(t).bind(d=>{Rc(d,l);const g=gi(l);return pl(l),g})}),NP=t=>x4(t).map(va).getOrThunk(()=>ys(0,0)),BP=(t,s)=>{const a=t.element;Gr(a,s.transitionClass),ms(a,s.fadeOutClass),Gr(a,s.fadeInClass),s.onShow(t)},NH=(t,s)=>{const a=t.element;Gr(a,s.transitionClass),ms(a,s.fadeInClass),Gr(a,s.fadeOutClass),s.onHide(t)},BH=(t,s)=>t.y<s.bottom&&t.bottom>s.y,PP=(t,s)=>t.y>=s.y,$P=(t,s)=>t.bottom<=s.bottom,E2=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),JT=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),T4=t=>t.box.x-t.win.x,PH=(t,s,a)=>{const l=s.win,d=s.box,g=T4(s);return Es(t,p=>{switch(p){case"bottom":return $P(d,a.bounds)?O.none():O.some(JT(l,g,a));case"top":return PP(d,a.bounds)?O.none():O.some(E2(l,g,a));default:return O.none()}}).getOr({location:"no-dock"})},$H=(t,s,a)=>ac(t,l=>{switch(l){case"bottom":return $P(s,a.bounds);case"top":return PP(s,a.bounds)}}),IH=(t,s)=>{const a=s.optScrollEnv.fold(Q(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return ys(t.bounds.x,a)},IP=(t,s)=>{const a=s.optScrollEnv.fold(Q(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return ys(t.x,a)},E4=(t,s,a)=>a.getInitialPos().map(l=>{const d=IH(l,s);return{box:is(d.left,d.top,ya(t),hr(t)),location:l.location}}),k2=(t,s,a,l,d)=>{const g=IP(s,a),p=is(g.left,g.top,s.width,s.height);l.setInitialPos({style:Pr(t),position:Ze(t,"position")||"static",bounds:p,location:d.location})},LH=(t,s,a,l,d)=>{l.getInitialPos().fold(()=>k2(t,s,a,l,d),()=>re)},_2=(t,s,a)=>a.getInitialPos().bind(l=>{var d;switch(a.clearInitialPos(),l.position){case"static":return O.some({morph:"static"});case"absolute":const g=x4(t).getOr(vs()),p=k(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return O.some({morph:"absolute",positionCss:nu("absolute",ut(l.style,"left").map(x=>s.x-p.x),ut(l.style,"top").map(x=>s.y-p.y+y),ut(l.style,"right").map(x=>p.right-s.right),ut(l.style,"bottom").map(x=>p.bottom-s.bottom))});default:return O.none()}}),FH=(t,s,a)=>E4(t,s,a).filter(({box:l})=>$H(a.getModes(),l,s)).bind(({box:l})=>_2(t,l,a)),O2=t=>{switch(t.location){case"top":return O.some({morph:"fixed",positionCss:nu("fixed",O.some(t.leftX),O.some(t.topY),O.none(),O.none())});case"bottom":return O.some({morph:"fixed",positionCss:nu("fixed",O.some(t.leftX),O.none(),O.none(),O.some(t.bottomY))});default:return O.none()}},A2=(t,s,a)=>{const l=k(t),d=le(),g=PH(a.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(k2(t,l,s,a,g),O2(g)):O.none()},LP=(t,s,a)=>FH(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>E4(t,s,a)).bind(({box:l,location:d})=>{const g=le(),p=T4({win:g,box:l}),y=d==="top"?E2(g,p,s):JT(g,p,s);return O2(y)})),HH=(t,s,a)=>{const l=t.element;return Ks(As(l,"position"),"fixed")?LP(l,s,a):A2(l,s,a)},FP=(t,s,a)=>{const l=t.element;return E4(l,s,a).bind(({box:d})=>_2(l,d,a))},HP=(t,s,a,l)=>{const d=k(t),g=le(),p=T4({win:g,box:d}),y=l(g,p,s);return y.location==="bottom"||y.location==="top"?(LH(t,d,s,a,y),O2(y)):O.none()},k4=(t,s,a)=>{a.setDocked(!1),mt(["left","right","top","bottom","position"],l=>Vn(t.element,l)),s.onUndocked(t)},_4=(t,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),_y(t.element,l),(d?s.onDocked:s.onUndocked)(t)},QT=(t,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const y=BH(p,l.bounds);y!==a.isVisible()&&(a.setVisible(y),d&&!y?(Ji(t.element,[g.fadeOutClass]),g.onHide(t)):(y?BP:NH)(t,g))})})},D2=(t,s,a,l,d)=>{QT(t,s,a,l,!0),_4(t,s,a,d.positionCss)},VH=(t,s,a,l,d)=>{switch(d.morph){case"static":return k4(t,s,a);case"absolute":return _4(t,s,a,d.positionCss);case"fixed":return D2(t,s,a,l,d)}},zH=(t,s,a)=>{const l=s.lazyViewport(t);QT(t,s,a,l),HH(t,l,a).each(d=>{VH(t,s,a,l,d)})},b0=(t,s,a)=>{const l=t.element;a.setDocked(!1);const d=s.lazyViewport(t);FP(t,d,a).each(g=>{switch(g.morph){case"static":{k4(t,s,a);break}case"absolute":{_4(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{hc(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),R2(t,s,a)},R2=(t,s,a)=>{t.getSystem().isConnected()&&zH(t,s,a)},VP=(t,s,a)=>{a.isDocked()&&b0(t,s,a)},O4=t=>(s,a,l)=>{const d=a.lazyViewport(s);HP(s.element,d,l,t).each(p=>{D2(s,a,l,d,p)})},A4=O4(E2),D4=O4(JT);var R4=Object.freeze({__proto__:null,refresh:R2,reset:VP,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:A4,forceDockToBottom:D4}),UH=Object.freeze({__proto__:null,events:(t,s)=>ds([dh(ah(),(a,l)=>{t.contextual.each(d=>{gc(a.element,d.transitionClass)&&(hc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),je(Mp(),(a,l)=>{R2(a,t,s)}),je(Q2(),(a,l)=>{R2(a,t,s)}),je(Xf(),(a,l)=>{VP(a,t,s)})])}),WH=[la("contextual",[br("fadeInClass"),br("fadeOutClass"),br("transitionClass"),Ql("lazyContext"),qn("onShow"),qn("onShown"),qn("onHide"),qn("onHidden")]),Ir("lazyViewport",()=>({bounds:le(),optScrollEnv:O.none()})),nh("modes",["top","bottom"],ca),qn("onDocked"),qn("onUndocked")],ZH=Object.freeze({__proto__:null,init:t=>{const s=S(!1),a=S(!0),l=Bo(),d=S(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Ta({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const fa=Wa({fields:WH,name:"docking",active:UH,apis:R4,state:ZH}),M4=Q(Ot("toolbar-height-change")),Im={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},zP="tox-tinymce--toolbar-sticky-on",v0="tox-tinymce--toolbar-sticky-off",jH=(t,s)=>{const a=na(s),d=qa(s).dom.innerHeight,g=Xa(a),p=pe.fromDom(t.elm),y=M(p),x=hr(p),_=y.y,D=_+x,B=va(s),I=hr(s),H=B.top,q=H+I,se=Math.abs(H-g.top)<2,Ce=Math.abs(q-(g.top+d))<2;if(se&&_<q)qm(g.left,_-I,a);else if(Ce&&D>H){const he=_-d+x+I;qm(g.left,he,a)}},N4=(t,s)=>So(fa.getModes(t),s),M2=t=>{const s=l=>ql(l)+(parseInt(Ze(l,"margin-top"),10)||0)+(parseInt(Ze(l,"margin-bottom"),10)||0),a=t.element;ic(a).each(l=>{const d="padding-"+fa.getModes(t)[0];if(fa.isDocked(t)){const g=ya(l);_t(a,"width",g+"px"),_t(l,d,s(a)+"px")}else Vn(a,"width"),Vn(l,d)})},B4=(t,s)=>{s?(ms(t,Im.fadeOutClass),Ji(t,[Im.transitionClass,Im.fadeInClass])):(ms(t,Im.fadeInClass),Ji(t,[Im.fadeOutClass,Im.transitionClass]))},UP=(t,s)=>{const a=pe.fromDom(t.getContainer());s?(Gr(a,zP),ms(a,v0)):(Gr(a,v0),ms(a,zP))},GH=(t,s)=>{const a=na(s);Bd(a).filter(l=>!Eo(s,l)).filter(l=>Eo(l,pe.fromDom(a.dom.body))||Nr(t,l)).each(()=>eu(s))},qH=(t,s)=>tu(t).orThunk(()=>s().toOptional().bind(a=>tu(a.element))),KH=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(fa.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(M2)}),t.on("SkinLoaded",()=>{a().each(l=>{fa.isDocked(l)?fa.reset(l):fa.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(fa.reset)})),t.on("AfterScrollIntoView",l=>{a().each(d=>{fa.refresh(d);const g=d.element;yr(g)&&jH(l,g)})}),t.on("PostRender",()=>{UP(t,!1)})},YH=t=>t().map(fa.isDocked).getOr(!1),XH=()=>[kr.config({channels:{[M4()]:{onReceive:M2}}})],WP=(t,s)=>{const a=Bo(),l=s.getSink,d=y=>{l().each(x=>y(x.element))},g=y=>{t.inline||M2(y),UP(t,fa.isDocked(y)),y.getSystem().broadcastOn([Nh()],{}),l().each(x=>x.getSystem().broadcastOn([Nh()],{}))},p=t.inline?[]:XH();return[on.config({}),fa.config({contextual:J({lazyContext:y=>{const x=ql(y.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return O.from(_).map(D=>{const B=k(pe.fromDom(D));return t2(t,y.element).fold(()=>{const H=B.height-x,q=B.y+(N4(y,"top")?0:x);return is(B.x,q,B.width,H)},H=>{const q=z(B,gT(H));return is(q.x,q.y,q.width,q.height-x)})})},onShow:()=>{d(y=>B4(y,!0))},onShown:y=>{d(x=>hc(x,[Im.transitionClass,Im.fadeInClass])),a.get().each(x=>{GH(y.element,x),a.clear()})},onHide:y=>{qH(y.element,l).fold(a.clear,a.set),d(x=>B4(x,!1))},onHidden:()=>{d(y=>hc(y,[Im.transitionClass]))}},Im),lazyViewport:y=>t2(t,y.element).fold(()=>{const _=le(),D=fR(t),B=_.y+(N4(y,"top")?D:0),I=_.height-(N4(y,"bottom")?D:0);return{bounds:is(_.x,B,_.width,I),optScrollEnv:O.none()}},_=>({bounds:gT(_),optScrollEnv:O.some({currentScrollTop:_.element.dom.scrollTop,scrollElmTop:va(_.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var JH=Object.freeze({__proto__:null,setup:KH,isDocked:YH,getBehaviours:WP});const QH=t=>{const s=t.editor,a=t.sticky?WP:w4;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:nt(a(s,t.sharedBackstage))}},ZP=Me([Fr,Pc("items",Al([_p([Kh,Qc("items",ca)]),ca]))].concat(jC)),P4=t=>En("GroupToolbarButton",ZP,t),$4=[vr("text"),vr("tooltip"),vr("icon"),ec("search",!1,Al([lm,Me([vr("placeholder")])],t=>Ho(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),Ql("fetch"),Ir("onSetup",()=>re)],jP=Me([Fr,...$4]),GP=t=>En("menubutton",jP,t),eV=Me([Fr,Gx,Vd,Jh,WR,UL,Xh,Rl("presets","normal",["normal","color","listpreview"]),Yv(1),Yh,WL]),tV=t=>En("SplitButton",eV,t);var y0=ar({factory:(t,s)=>{const a=(d,g)=>{const p=Ne(g,y=>{const x={type:"menubutton",text:y.text,fetch:D=>{D(y.getItems())}},_=GP(x).mapError(D=>Jc(D)).getOrDie();return p2(_,"tox-mbtn",s.backstage,O.some("menuitem"))});un.set(d,p)},l={focus:zt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:nt([un.config({}),kn("menubar-events",[qs(d=>{t.onSetup(d)}),je(ei(),(d,g)=>{Hs(d.element,".tox-mbtn--active").each(p=>{Qi(g.event.target,".tox-mbtn").each(y=>{Eo(p,y)||d.getSystem().getByDom(p).each(x=>{d.getSystem().getByDom(y).each(_=>{mu.expand(_),mu.close(x),on.focus(_)})})})})}),je(sf(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{mu.isOpen(p)&&(mu.expand(y),mu.close(p))})})})]),zt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),O.some(!0))}),cr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ue("dom"),Ue("uid"),Ue("onEscape"),Ue("backstage"),ye("onSetup",re)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const I4="⚡️Upgrade",nV="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",oV=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:nV,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:I4}}]}),qP="container",sV=[Oa("slotBehaviours",[])],L4=t=>"<alloy.field."+t+">",KP=t=>{const s=(()=>{const g=[];return{slot:(y,x)=>(g.push(y),uC(qP,L4(y),x)),record:Q(g)}})(),a=t(s),l=s.record(),d=Ne(l,g=>Aa({name:g,pname:L4(g)}));return hC(qP,sV,d,rV,a)},rV=(t,s)=>{const a=se=>XS(t),l=(se,Ce)=>as(se,t,Ce),d=(se,Ce)=>(he,me)=>as(he,t,me).map($e=>se($e,me)).getOr(Ce),g=se=>(Ce,he)=>{mt(he,me=>se(Ce,me))},p=(se,Ce)=>Br(se.element,"aria-hidden")!=="true",y=(se,Ce)=>{if(!p(se)){const he=se.element;Vn(he,"display"),te(he,"aria-hidden"),Wt(se,Q0(),{name:Ce,visible:!0})}},x=(se,Ce)=>{if(p(se)){const he=se.element;_t(he,"display","none"),bn(he,"aria-hidden","true"),Wt(se,Q0(),{name:Ce,visible:!1})}},_=d(p,!1),D=d(x),B=g(D),I=se=>B(se,a()),H=d(y),q={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:D,hideAllSlots:I,showSlot:H};return{uid:t.uid,dom:t.dom,components:s,behaviours:_i(t.slotBehaviours),apis:q}},aV=Qo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>af(t)),sc=We(J({},aV),{sketch:KP}),tE=Me([Vd,Gx,Ir("onShow",re),Ir("onHide",re),Xh]),cV=t=>En("sidebar",tE,t),lV=t=>{const{sidebars:s}=t.ui.registry.getAll();mt(Vo(s),a=>{const l=s[a],d=()=>Ks(O.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},iV=t=>({element:()=>t.element.dom}),uV=(t,s)=>{const a=Ne(Vo(s),l=>{const d=s[l],g=vl(cV(d));return{name:l,getApi:iV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ne(a,l=>{const d=S(re);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Qh.unnamedEvents([z1(l,d),U1(l,d),je(Q0(),(g,p)=>{const y=p.event;an(a,_=>_.name===y.name).each(_=>{(y.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},F4=t=>sc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:uV(s,t),slotBehaviours:Qh.unnamedEvents([qs(a=>sc.hideAllSlots(a))])})),H4=(t,s,a)=>{Un.getCurrent(t).each(d=>{un.set(d,[F4(s)]);const g=a==null?void 0:a.toLowerCase();kt(g)&&Bn(s,g)&&Un.getCurrent(d).each(p=>{sc.showSlot(p,g),Bi.immediateGrow(d),Vn(d.element,"width"),C0(t.element,"region")})})},C0=(t,s)=>{bn(t,"role",s)},dV=(t,s)=>{Un.getCurrent(t).each(l=>{Un.getCurrent(l).each(g=>{Bi.hasGrown(l)?sc.isShowing(g,s)?(Bi.shrink(l),C0(t.element,"presentation")):(sc.hideAllSlots(g),sc.showSlot(g,s),C0(t.element,"region")):(sc.hideAllSlots(g),sc.showSlot(g,s),Bi.grow(l),C0(t.element,"region"))})})},V4=t=>Un.getCurrent(t).bind(a=>Bi.isGrowing(a)||Bi.hasGrown(a)?Un.getCurrent(a).bind(g=>an(sc.getSlotNames(g),p=>sc.isShowing(g,p))):O.none()),z4=Ot("FixSizeEvent"),U4=Ot("AutoSizeEvent"),mV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:nt([cr.config({}),on.config({}),Bi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Un.getCurrent(s).each(sc.hideAllSlots),co(s,U4)},onGrown:s=>{co(s,U4)},onStartGrow:s=>{Wt(s,z4,{width:As(s.element,"width").getOr("")})},onStartShrink:s=>{Wt(s,z4,{width:ya(s.element)+"px"})}}),un.config({}),Un.config({find:s=>{const a=un.contents(s);return Dr(a)}})])}],behaviours:nt([Ni.childAt(0),kn("sidebar-sliding-events",[je(z4,(s,a)=>{_t(s.element,"width",a.event.width)}),je(U4,(s,a)=>{Vn(s.element,"width")})])])});var fV=Object.freeze({__proto__:null,block:(t,s,a,l)=>{bn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=nt([zt.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),on.config({})]),p=l(d,g),y=d.getSystem().build(p);un.append(d,yl(y)),y.hasConfigured(zt)&&s.focus&&zt.focusIn(y),a.isBlocked()||s.onBlock(t),a.blockWith(()=>un.remove(d,y))},unblock:(t,s,a)=>{te(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),gV=[Ir("getRoot",O.none),tc("focus",!0),qn("onBlock"),qn("onUnblock")],QW=Object.freeze({__proto__:null,init:()=>{const t=Sh(),s=a=>{t.set({destroy:a})};return Ta({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Bf=Wa({fields:gV,name:"blocking",apis:fV,state:QW}),hV=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return vn(s,(a,l)=>l.name==="class"?a:We(J({},a),{[l.name]:l.value}),{})},YP=t=>Array.prototype.slice.call(t.dom.classList,0),ip=t=>{const s=pe.fromHtml(t),a=sa(s),l=hV(s),d=YP(s),g=a.length===0?{}:{innerHtml:Mb(s)};return J({tag:Ga(s),classes:d,attributes:l},g)},pV=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ip('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),XP=t=>Un.getCurrent(t).each(s=>eu(s.element)),bV=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;O.from(t.iframeElement).map(pe.fromDom).each(d=>{s?(P(d,a).each(g=>bn(d,l,g)),bn(d,a,-1)):(te(d,a),P(d,l).each(g=>{bn(d,a,g),te(d,l)}))})},vV=(t,s,a,l)=>{const d=s.element;if(bV(t,a),a)Bf.block(s,pV(l)),Vn(d,"display"),te(d,"aria-hidden"),t.hasFocus()&&XP(s);else{const g=Un.getCurrent(s).exists(p=>Xp(p.element));Bf.unblock(s),_t(d,"display","none"),bn(d,"aria-hidden","true"),g&&t.focus()}},JP=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:nt([un.config({}),Bf.config({focus:!1}),Un.config({find:s=>Dr(s.components())})]),components:[]}),yV=t=>t.type==="focusin",CV=t=>yV(t)?(t.composed?Dr(t.composedPath()):O.from(t.target)).map(pe.fromDom).filter(mo).exists(a=>gc(a,"mce-pastebin")):!1,wV=(t,s,a)=>{const l=S(!1),d=Bo(),g=y=>{l.get()&&!CV(y)&&(y.preventDefault(),XP(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const p=y=>{y!==l.get()&&(l.set(y),vV(t,s(),y,a.providers),oT(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),ur(y.time)){const x=yx.setEditorTimeout(t,()=>p(y.state),y.time);d.set(x)}else p(y.state),d.clear()})},eZ=(t,s)=>vn(t,(d,g)=>s(g,d.len).fold(Q(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,QP=(t,s,a)=>({within:t,extra:s,withinWidth:a}),W4=(t,s,a)=>{const l=eZ(t,(y,x)=>{const _=a(y);return O.some({element:y,start:x,finish:x+_,width:_})}),d=Sn(l,y=>y.finish<=s),g=Ws(d,(y,x)=>y+x.width,0),p=l.slice(d.length);return{within:d,extra:p,withinWidth:g}},N2=t=>Ne(t,s=>s.element),SV=(t,s,a)=>{const l=N2(t.concat(s));return QP(l,[],a)},xV=(t,s,a,l)=>{const d=N2(t).concat([a]);return QP(d,N2(s),l)},Qu=(t,s,a)=>QP(N2(t),[],a),TV=(t,s,a)=>{const l=W4(s,t,a);return l.extra.length===0?O.some(l):O.none()},e$=(t,s,a,l)=>{const d=TV(t,s,a).getOrThunk(()=>W4(s,t-a(l),a)),g=d.within,p=d.extra,y=d.withinWidth;return p.length===1&&p[0].width<=a(l)?SV(g,p,y):p.length>=1?xV(g,p,l,y):Qu(g,p,y)},Z4=(t,s)=>{const a=Ne(s,l=>yl(l));$m.setGroups(t,a)},EV=t=>Es(t,s=>tu(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),w0=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=zu(t,s,"primary"),g=Cr.getCoupled(t,"overflowGroup");_t(d.element,"visibility","hidden");const p=l.concat([g]),y=EV(p);a([]),Z4(d,p);const x=ya(d.element),_=e$(x,s.builtGroups.get(),D=>ya(D.element),g);_.extra.length===0?(un.remove(d,g),a([])):(Z4(d,_.within),a(_.extra)),Vn(d.element,"visibility"),Gl(d.element),y.each(on.focus)},t$=Q([Oa("splitToolbarBehaviours",[Cr]),Qa("builtGroups",()=>S([]))]),oE=Q([sg(["overflowToggledClass"]),im("getOverflowBounds"),Ue("lazySink"),Qa("overflowGroups",()=>S([])),qn("onOpened"),qn("onClosed")].concat(t$())),kV=Q([Aa({factory:$m,schema:p0(),name:"primary"}),au({schema:p0(),name:"overflow"}),au({name:"overflow-button"}),au({name:"overflow-group"})]),S0=Q((t,s)=>{em(t,Math.floor(s))}),_V=Q([sg(["toggledClass"]),Ue("lazySink"),Ql("fetch"),im("getBounds"),la("fireDismissalEventInstead",[ye("event",gm())]),Lu(),qn("onToggled")]),jd=Q([au({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:nt([$n.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),au({factory:$m,schema:p0(),name:"toolbar",overrides:t=>({toolbarBehaviours:nt([zt.config({mode:"cyclic",onEscape:s=>(as(s,t,"button").each(on.focus),O.none())})])})})]),sE=Bo(),rE=(t,s)=>{sE.set(!0),aE(t,s),sE.clear()},aE=(t,s)=>{const a=Cr.getCoupled(t,"toolbarSandbox");Qn.isOpen(a)?Qn.close(a):Qn.open(a,s.toolbar())},j4=(t,s,a,l)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();Kr.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:S0()}}},d)},n$=(t,s,a,l,d)=>{$m.setGroups(s,d),j4(t,s,a,l),$n.on(t)},OV=(t,s,a)=>{const l=iy(),d=(p,y)=>{const x=sE.get().getOr(!1);a.fetch().get(_=>{n$(t,y,a,s.layouts,_),l.link(t.element),x||zt.focusIn(y)})},g=()=>{$n.off(t),sE.get().getOr(!1)||on.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:nt([zt.config({mode:"special",onEscape:p=>(Qn.close(p),O.some(!0))}),Qn.config({onOpen:d,onClose:g,isPartOf:(p,y,x)=>mf(y,x)||mf(t,x),getAttachPoint:()=>a.lazySink(t).getOrDie()}),kr.config({channels:J(J({},Em(J({isExtraPart:et},a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})))),Xy({doReposition:()=>{Qn.getState(Cr.getCoupled(t,"toolbarSandbox")).each(p=>{j4(t,p,a,s.layouts)})}}))})])}},up=Or({name:"FloatingToolbarButton",factory:(t,s,a,l)=>We(J({},Us.sketch(We(J({},l.button()),{action:d=>{aE(d,l)},buttonBehaviours:ru.augment({dump:l.button().buttonBehaviours},[Cr.config({others:{toolbarSandbox:d=>OV(d,a,t)}})])}))),{apis:{setGroups:(d,g)=>{Qn.getState(Cr.getCoupled(d,"toolbarSandbox")).each(p=>{n$(d,p,t,a.layouts,g)})},reposition:d=>{Qn.getState(Cr.getCoupled(d,"toolbarSandbox")).each(g=>{j4(d,g,t,a.layouts)})},toggle:d=>{aE(d,l)},toggleWithoutFocusing:d=>{rE(d,l)},getToolbar:d=>Qn.getState(Cr.getCoupled(d,"toolbarSandbox")),isOpen:d=>Qn.isOpen(Cr.getCoupled(d,"toolbarSandbox"))}}),configFields:_V(),partFields:jd(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),AV=Q([Ue("items"),sg(["itemSelector"]),Oa("tgroupBehaviours",[zt])]),DV=Q([wf({name:"items",unit:"item"})]),o$=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Yr(t.tgroupBehaviours,[zt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),B2=Or({name:"ToolbarGroup",configFields:AV(),partFields:DV(),factory:o$}),G4=t=>Ne(t,s=>yl(s)),s$=(t,s,a)=>{w0(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(d=>{up.setGroups(d,G4(l))})})},r$=(t,s,a,l)=>{const d=Do(up.sketch({fetch:()=>Vc.nu(g=>{g(G4(t.overflowGroups.get()))}),layouts:{onLtr:()=>[qr,Ua],onRtl:()=>[Ua,qr],onBottomLtr:()=>[Vs,Il],onBottomRtl:()=>[Il,Vs]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Yr(t.splitToolbarBehaviours,[Cr.config({others:{overflowGroup:()=>B2.sketch(We(J({},l["overflow-group"]()),{items:[d.asSpec()]}))}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(Ne(p,g.getSystem().build)),s$(g,d,t)},refresh:g=>s$(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{up.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(up.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(up.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{up.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(up.getToolbar)},domModification:{attributes:{role:"group"}}}},a$=Or({name:"SplitFloatingToolbar",configFields:oE(),partFields:kV(),factory:r$,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),RV=Q([sg(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),qn("onOpened"),qn("onClosed")].concat(t$())),MV=Q([Aa({factory:$m,schema:p0(),name:"primary"}),Aa({factory:$m,schema:p0(),name:"overflow",overrides:t=>({toolbarBehaviours:nt([Bi.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{as(s,t,"overflow-button").each(a=>{$n.off(a),on.focus(a)}),t.onClosed(s)},onGrown:s=>{zt.focusIn(s),t.onOpened(s)},onStartGrow:s=>{as(s,t,"overflow-button").each($n.on)}}),zt.config({mode:"acyclic",onEscape:s=>(as(s,t,"overflow-button").each(on.focus),O.some(!0))})])})}),au({name:"overflow-button",overrides:t=>({buttonBehaviours:nt([$n.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),au({name:"overflow-group"})]),NV=(t,s)=>as(t,s,"overflow").map(Bi.hasGrown).getOr(!1),c$=(t,s)=>{as(t,s,"overflow-button").bind(()=>as(t,s,"overflow")).each(a=>{q4(t,s),Bi.toggleGrow(a)})},q4=(t,s)=>{as(t,s,"overflow").each(a=>{w0(t,s,l=>{const d=Ne(l,g=>yl(g));$m.setGroups(a,d)}),as(t,s,"overflow-button").each(l=>{Bi.hasGrown(a)&&$n.on(l)}),Bi.refresh(a)})},BV=(t,s,a,l)=>{const d="alloy.toolbar.toggle",g=(p,y)=>{const x=Ne(y,p.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Yr(t.splitToolbarBehaviours,[Cr.config({others:{overflowGroup:p=>B2.sketch(We(J({},l["overflow-group"]()),{items:[Us.sketch(We(J({},l["overflow-button"]()),{action:y=>{co(p,d)}}))]}))}}),kn("toolbar-toggle-events",[je(d,p=>{c$(p,t)})])]),apis:{setGroups:(p,y)=>{g(p,y),q4(p,t)},refresh:p=>q4(p,t),toggle:p=>c$(p,t),isOpen:p=>NV(p,t)},domModification:{attributes:{role:"group"}}}},K4=Or({name:"SplitSlidingToolbar",configFields:RV(),partFields:MV(),factory:BV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),l$=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:J({tag:"div",classes:["tox-toolbar__group"]},s),components:[B2.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:nt([cr.config({}),on.config({})])}},cE=t=>B2.sketch(l$(t)),i$=(t,s)=>{const a=qs(l=>{const d=Ne(t.initGroups,cE);$m.setGroups(l,d)});return nt([du.toolbarButton(t.providers.isDisabled),Ra(),zt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),kn("toolbar-events",[a])])},u$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":l$({title:O.none(),items:[]}),"overflow-button":PB({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("More..."),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:i$(t,s)}},PV=t=>{const s=u$(t),a=4,l=a$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return a$.sketch(We(J({},s),{lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=M(d),p=fi(d),y=M(p),x=Math.max(p.dom.scrollHeight,y.height);return is(g.x+a,y.y,g.width-a*2,x)},parts:We(J({},s.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)}))},d$=t=>{const s=K4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=K4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=u$(t);return K4.sketch(We(J({},l),{components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([M4()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([M4()],{type:"closed"}),t.onToggled(d,!1)}}))},tb=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return $m.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===uu.scrolling?["tox-toolbar--scrolling"]:[])},components:[$m.parts.groups({})],toolbarBehaviours:i$(t,s)})},lE=[Jh,Vd,vr("tooltip"),Rl("buttonType","secondary",["primary","secondary"]),tc("borderless",!1),Ql("onAction")],$V=[...lE,Mg,qi("type",["button"])],IV=[...lE,tc("active",!1),qi("type",["togglebutton"])],Y4={button:$V,togglebutton:IV},LV=[qi("type",["group"]),nh("buttons",[],Bc("type",Y4))],FV=Bc("type",We(J({},Y4),{group:LV})),HV=Me([nh("buttons",[],FV),Ql("onShow"),Ql("onHide")]),m$=t=>En("view",HV,t),VV=(t,s)=>{var a,l;const d=t.type==="togglebutton",g=t.icon.map($e=>Ig($e,s.icons)).map(Do),y=(()=>$e=>{const Be=pt=>{g.map(It=>It.getOpt($e).each(Yn=>{un.set(Yn,[Ig(pt,s.icons)])}))},ct=pt=>{const It=$e.element;pt?(Gr(It,"tox-button--enabled"),bn(It,"aria-pressed",!0)):(ms(It,"tox-button--enabled"),te(It,"aria-pressed"))},qe=()=>gc($e.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Be,setActive:ct,isActive:qe});if(t.type==="button")return t.onAction({setIcon:Be})})(),x=We(J({},t),{name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless}),_=a4((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),D=d?t.text.map(s.translate):O.some(s.translate(t.text)),B=D.map(Fs),I=x.tooltip.or(D).map($e=>({"aria-label":s.translate($e),title:s.translate($e)})).getOr({}),H=g.map($e=>$e.asSpec()),q=Qv([H,B]),se=t.icon.isSome()&&B.isSome(),Ce={tag:"button",classes:_.concat(...t.icon.isSome()&&!se?["tox-button--icon"]:[]).concat(...se?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},he=[],me=FT(x,O.some(y),he,Ce,q,s);return Us.sketch(me)},f$=(t,s)=>VV(t,s),X4=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ne(t.buttons,a=>f$(a,s))}),g$=Fa().deviceType,zV=g$.isPhone(),h$=g$.isTablet(),UV=t=>{let s=!1;const a=Ne(t.buttons,l=>l.type==="group"?(s=!0,X4(l,t.providers)):f$(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...zV||h$?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:nt([on.config({}),zt.config({mode:"flow",selector:"button, .tox-button",focusInside:zh.OnEnterOrSpaceMode})]),components:s?a:[Mm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Mm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},p$=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),WV=(t,s,a,l)=>{const d={getPane:g=>ja.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var nb=Or({name:"silver.View",configFields:[Ue("viewConfig")],partFields:[ri({factory:{sketch:UV},schema:[Ue("buttons"),Ue("providers")],name:"header"}),ri({factory:{sketch:p$},schema:[],name:"pane"})],factory:WV,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const ZV=(t,s,a)=>Rr(s,(l,d)=>{const g=vl(m$(l));return t.slot(d,nb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[nb.parts.header({buttons:g.buttons,providers:a})]:[],nb.parts.pane({})]}))}),jV=(t,s)=>sc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:ZV(a,t,s),slotBehaviours:Qh.unnamedEvents([qs(l=>sc.hideAllSlots(l))])})),b$=t=>an(sc.getSlotNames(t),s=>sc.isShowing(t,s)),v$=t=>{const s=t.element;_t(s,"display","none"),bn(s,"aria-hidden","true")},GV=t=>{const s=t.element;Vn(s,"display"),te(s,"aria-hidden")},qV=t=>({getContainer:Q(t)}),y$=(t,s,a)=>{sc.getSlot(t,s).each(l=>{nb.getPane(l).each(d=>{a(l)(qV(d.element.dom))})})},J4=(t,s)=>y$(t,s,nb.getOnShow),Q4=(t,s)=>y$(t,s,nb.getOnHide);var iE=ar({factory:(t,s)=>{const g={setViews:(p,y)=>{un.set(p,[jV(y,s.backstage.shared.providers)])},whichView:p=>Un.getCurrent(p).bind(b$),toggleView:(p,y,x,_)=>Un.getCurrent(p).exists(D=>{const B=b$(D),I=B.exists(q=>_===q),H=sc.getSlot(D,_).isSome();return H&&(sc.hideAllSlots(D),I?(v$(p),y()):(x(),GV(p),sc.showSlot(D,_),J4(D,_)),B.each(q=>Q4(D,q))),H})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:nt([un.config({}),Un.config({find:p=>{const y=un.contents(p);return Dr(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ue("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,d)=>t.toggleView(s,a,l,d),whichView:(t,s)=>t.whichView(s)}});const KV=(t,s,a)=>{let l=!1;const d={getSocket:g=>ja.getPart(g,t,"socket"),setSidebar:(g,p,y)=>{ja.getPart(g,t,"sidebar").each(x=>H4(x,p,y))},toggleSidebar:(g,p)=>{ja.getPart(g,t,"sidebar").each(y=>dV(y,p))},whichSidebar:g=>ja.getPart(g,t,"sidebar").bind(V4).getOrNull(),getHeader:g=>ja.getPart(g,t,"header"),getToolbar:g=>ja.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{ja.getPart(g,t,"toolbar").each(y=>{const x=Ne(p,cE);y.getApis().setGroups(y,x)})},setToolbars:(g,p)=>{ja.getPart(g,t,"multiple-toolbar").each(y=>{const x=Ne(p,_=>Ne(_,cE));MP.setItems(y,x)})},refreshToolbar:g=>{ja.getPart(g,t,"toolbar").each(y=>y.getApis().refresh(y))},toggleToolbarDrawer:g=>{ja.getPart(g,t,"toolbar").each(p=>{vo(p.getApis().toggle,y=>y(p))})},toggleToolbarDrawerWithoutFocusing:g=>{ja.getPart(g,t,"toolbar").each(p=>{vo(p.getApis().toggleWithoutFocusing,y=>y(p))})},isToolbarDrawerToggled:g=>ja.getPart(g,t,"toolbar").bind(p=>O.from(p.getApis().isOpen).map(y=>y(p))).getOr(!1),getThrobber:g=>ja.getPart(g,t,"throbber"),focusToolbar:g=>{ja.getPart(g,t,"toolbar").orThunk(()=>ja.getPart(g,t,"multiple-toolbar")).each(y=>{zt.focusIn(y)})},setMenubar:(g,p)=>{ja.getPart(g,t,"menubar").each(y=>{y0.setMenus(y,p)})},focusMenubar:g=>{ja.getPart(g,t,"menubar").each(p=>{y0.focus(p)})},setViews:(g,p)=>{ja.getPart(g,t,"viewWrapper").each(y=>{iE.setViews(y,p)})},toggleView:(g,p)=>ja.getPart(g,t,"viewWrapper").exists(y=>iE.toggleView(y,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>ja.getPart(g,t,"viewWrapper").bind(iE.whichView).getOrNull(),hideMainView:g=>{l=d.isToolbarDrawerToggled(g),l&&d.toggleToolbarDrawer(g),ja.getPart(g,t,"editorContainer").each(p=>{const y=p.element;_t(y,"display","none"),bn(y,"aria-hidden","true")})},showMainView:g=>{l&&d.toggleToolbarDrawer(g),ja.getPart(g,t,"editorContainer").each(p=>{const y=p.element;Vn(y,"display"),te(y,"aria-hidden")}),d.refreshToolbar(g)}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},YV=Nf.optional({factory:y0,name:"menubar",schema:[Ue("backstage")]}),XV=t=>t.type===uu.sliding?d$:t.type===uu.floating?PV:tb,JV=Nf.optional({factory:{sketch:t=>MP.sketch({uid:t.uid,dom:t.dom,listBehaviours:nt([zt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>tb({type:t.type,uid:Ot("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(s,a,l,d)=>{$m.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Ue("dom"),Ue("onEscape")]}),QV=Nf.optional({factory:{sketch:t=>{const s=XV(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Ue("dom"),Ue("onEscape"),Ue("getSink")]}),ez=Nf.optional({factory:{sketch:QH},name:"header",schema:[Ue("dom")]}),C$=Nf.optional({factory:{sketch:oV},name:"promotion",schema:[Ue("dom")]}),uE=Nf.optional({name:"socket",schema:[Ue("dom")]}),e3=Nf.optional({factory:{sketch:mV},name:"sidebar",schema:[Ue("dom")]}),w$=Nf.optional({factory:{sketch:JP},name:"throbber",schema:[Ue("dom")]}),dp=Nf.optional({factory:iE,name:"viewWrapper",schema:[Ue("backstage")]}),S$=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),tz=Nf.optional({factory:{sketch:S$},name:"editorContainer",schema:[]});var hs=Or({name:"OuterContainer",factory:KV,configFields:[Ue("dom"),Ue("behaviours")],partFields:[ez,YV,QV,JV,uE,e3,C$,w$,dp,tz],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const nz="file edit view insert format tools table help",x$={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},oz=(t,s,a)=>{const l=dR(a).split(/[ ,]/);return{text:t.title,getItems:()=>Ie(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:qo(l,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},t3=t=>t.split(" "),T$=(t,s)=>{const a=J(J({},x$),s.menus),l=Vo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?t3(nz):t3(s.menubar===!1?"":s.menubar),g=Sn(d,y=>{const x=Bn(x$,y);return l?x||ut(s.menus,y).exists(_=>Bn(_,"items")):x}),p=Ne(g,y=>{const x=a[y];return oz({title:x.title,items:t3(x.items)},s,t)});return Sn(p,y=>{const x=_=>kt(_)||_.type!=="separator";return y.getItems().length>0&&qo(y.getItems(),x)})},n3=t=>{const s=()=>{t._skinLoaded=!0,LO(t)};return()=>{t.initialized?s():t.on("init",s)}},sz=(t,s)=>()=>yF(t,{message:s}),E$=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),o3=(t,s)=>{const a=s+"/skin.min.css";return E$(t,a,t.ui.styleSheetLoader)},rz=(t,s)=>{if(Gt(pe.fromDom(t.getElement()))){const l=s+"/skin.shadowdom.min.css";return E$(t,l,Og.DOM.styleSheetLoader)}else return Promise.resolve()},k$=(t,s)=>{const a=ER(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!Ag(s)&&kt(a)?Promise.all([o3(s,a),rz(s,a)]).then(n3(s),sz(s,"Skin could not be loaded")):Promise.resolve(n3(s)())},az=Jt(k$,!1),cz=Jt(k$,!0),dE=(t,s)=>a=>{const l=Iu(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},P2=(t,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},s3=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},pu=(t,s)=>()=>t.execCommand(s),_$=(t,s,a)=>{const l=(y,x,_,D)=>{const B=s.shared.providers.translate(y.title);if(y.type==="separator")return O.some({type:"separator",text:B});if(y.type==="submenu"){const I=Ie(y.getStyleItems(),H=>d(H,x,D));return x===0&&I.length<=0?O.none():O.some({type:"nestedmenuitem",text:B,enabled:I.length>0,getSubmenuItems:()=>Ie(y.getStyleItems(),H=>d(H,x,D))})}else return O.some(J({type:"togglemenuitem",text:B,icon:y.icon,active:y.isSelected(D),enabled:!_,onAction:a.onAction(y)},y.getStylePreview().fold(()=>({}),I=>({meta:{style:I}}))))},d=(y,x,_)=>{const D=y.type==="formatter"&&a.isInvalid(y);return x===0?D?[]:l(y,x,!1,_).toArray():l(y,x,D,_).toArray()},g=y=>{const x=a.getCurrentValue(),_=a.shouldHide?0:1;return Ie(y,D=>d(D,_,x))};return{validateItems:g,getFetch:(y,x)=>(_,D)=>{const B=x(),I=g(B),H=Df(I,ju.CLOSE_ON_EXECUTE,y,{isHorizontalMenu:!1,search:O.none()});D(H)}}},x0=(t,s,a)=>{const l=a.dataset,d=l.type==="basic"?()=>Ne(l.data,g=>uP(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:_$(t,s,a),getStyleItems:d}},T0=(t,s,a)=>{const{items:l,getStyleItems:d}=x0(t,s,a),g=y=>({getComponent:Q(y)}),p=P2(t,"NodeChange",y=>{const x=y.getComponent();a.updateText(x)});return UA({text:a.icon.isSome()?O.none():a.text,icon:a.icon,tooltip:O.from(a.tooltip),role:O.none(),fetch:l.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},lz=t=>Ne(t,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),iz=t=>({type:"basic",data:t});var E0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(E0||(E0={}));const O$=(t,s)=>s===E0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),r3=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:lz(O$(l,a))}},mE=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],A$=t=>{const s=()=>an(mE,y=>t.formatter.match(y.format)),a=y=>()=>t.formatter.match(y),l=y=>O.none,d=y=>{const _=s().fold(Q("left"),D=>D.title.toLowerCase());Wt(y,eb,{icon:`align-${_}`})},g=iz(mE),p=y=>()=>an(mE,x=>x.format===y.format).each(x=>t.execCommand(x.command));return{tooltip:"Align",text:O.none(),icon:O.some("align-left"),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},uz=(t,s)=>T0(t,s,A$(t)),dz=(t,s)=>{const a=x0(t,s,A$(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},D$=(t,s)=>{const a=s(),l=Ne(a,d=>d.format);return O.from(t.formatter.closest(l)).bind(d=>an(a,g=>g.format===d)).orThunk(()=>tn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},R$=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),l=p=>()=>{const y=t.formatter.get(p);return y?O.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},d=p=>{const x=D$(t,()=>g.data).fold(Q(s),_=>_.title);Wt(p,Ju,{text:x})},g=r3(t,"block_formats",E0.SemiColon);return{tooltip:"Blocks",text:O.some(s),icon:O.none(),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:s3(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},mz=(t,s)=>T0(t,s,R$(t)),M$=(t,s)=>{const a=x0(t,s,R$(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},fz=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],N$=t=>{const s=t.split(/\s*,\s*/);return Ne(s,a=>a.replace(/^['"]+|['"]+$/g,""))},gz=t=>{const s=()=>{const a=N$(t.toLowerCase());return ac(fz,l=>a.indexOf(l.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},B$=t=>{const s="System Font",a=()=>{const _=q=>q?N$(q)[0]:"",D=t.queryCommandValue("FontName"),B=x.data,I=D?D.toLowerCase():"";return{matchOpt:an(B,q=>{const se=q.format;return se.toLowerCase()===I||_(se).toLowerCase()===_(I).toLowerCase()}).orThunk(()=>tn(gz(I),{title:s,format:I})),font:D}},l=_=>D=>D.exists(B=>B.format===_),d=()=>{const{matchOpt:_}=a();return _},g=_=>()=>O.some({tag:"div",styles:_.indexOf("dings")===-1?{"font-family":_}:{}}),p=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,_.format)})},y=_=>{const{matchOpt:D,font:B}=a(),I=D.fold(Q(B),H=>H.title);Wt(_,Ju,{text:I})},x=r3(t,"font_family_formats",E0.SemiColon);return{tooltip:"Fonts",text:O.some(s),icon:O.none(),isSelectedFor:l,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:y,dataset:x,shouldHide:!1,isInvalid:et}},hz=(t,s)=>T0(t,s,B$(t)),pz=(t,s)=>{const a=x0(t,s,B$(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},bz={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},P$=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",d=y=>`(?:${y})?`,p=`[+-]?(?:${["Infinity",t+l+d(t)+d(a),l+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),vz=(t,s)=>qo(s,a=>qo(bz[a],l=>t===l)),fE=(t,s)=>O.from(P$.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return vz(g,s)?O.some({value:d,unit:g}):O.none()}),$$=(t,s)=>fE(t,s).map(({value:a,unit:l})=>a+l),I$={tab:Q(9),escape:Q(27),enter:Q(13),backspace:Q(8),delete:Q(46),left:Q(37),up:Q(38),right:Q(39),down:Q(40),space:Q(32),home:Q(36),end:Q(35),pageUp:Q(33),pageDown:Q(34)},L$=(t,s,a)=>{let l=O.none();const d=me=>me.map($e=>St.getValue($e)).getOr(""),g=P2(t,"NodeChange",me=>{const $e=me.getComponent();l=O.some($e),a.updateInputValue($e)}),p=me=>({getComponent:Q(me)}),y=S(re),x=Ot("custom-number-input-events"),_=(me,$e,Be)=>{const ct=d(l),qe=a.getNewValue(ct,me),pt=ct.length-`${qe}`.length,It=l.map(Lt=>Lt.element.dom.selectionStart-pt),Yn=l.map(Lt=>Lt.element.dom.selectionEnd-pt);a.onAction(qe,Be),l.each(Lt=>{St.setValue(Lt,qe),$e&&(It.each(Wn=>Lt.element.dom.selectionStart=Wn),Yn.each(Wn=>Lt.element.dom.selectionEnd=Wn))})},D=(me,$e)=>_((Be,ct)=>Be-ct,me,$e),B=(me,$e)=>_((Be,ct)=>Be+ct,me,$e),I=me=>ic(me.element).fold(O.none,$e=>(eu($e),O.some(!0))),H=me=>Xp(me.element)?(hi(me.element).each($e=>eu($e)),O.some(!0)):O.none(),q=(me,$e,Be,ct)=>{const qe=s.shared.providers.translate(Be),pt=Ot("altExecuting"),It=()=>me(!0);return Us.sketch({dom:{tag:"button",attributes:{title:qe,"aria-label":qe},classes:ct.concat($e)},components:[Q1($e,s.shared.providers.icons)],buttonBehaviours:nt([kn(pt,[je(Bl(),(Yn,Lt)=>{(Lt.event.raw.keyCode===I$.space()||Lt.event.raw.keyCode===I$.enter())&&me(!1)}),je(xi(),It),je(ss(),It)])]),eventOrder:{[Bl()]:[pt,"keying"],[xi()]:[pt,"alloy.base.behaviour"],[ss()]:[pt,"alloy.base.behaviour"]}})},se=Do(q(me=>D(!1,me),"minus","Decrease font size",["highlight-on-focus"])),Ce=Do(q(me=>B(!1,me),"plus","Increase font size",["highlight-on-focus"])),he=Do({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[$1.sketch({inputBehaviours:nt([kn(x,[z1({onSetup:g,getApi:p},y),U1({getApi:p},y)]),kn("input-update-display-text",[je(Ju,(me,$e)=>{St.setValue(me,$e.event.text)}),je(kb(),me=>{a.onAction(St.getValue(me))}),je(Xi(),me=>{a.onAction(St.getValue(me))})]),zt.config({mode:"special",onEnter:me=>(_(cn,!0,!0),O.some(!0)),onEscape:I,onUp:me=>(B(!0,!1),O.some(!0)),onDown:me=>(D(!0,!1),O.some(!0)),onLeft:(me,$e)=>($e.cut(),O.none()),onRight:(me,$e)=>($e.cut(),O.none())})])})],behaviours:nt([on.config({}),zt.config({mode:"special",onEnter:H,onSpace:H,onEscape:I}),kn("input-wrapper-events",[je(ei(),me=>{mt([se,Ce],$e=>{const Be=pe.fromDom($e.get(me).element.dom);Xp(Be)&&ky(Be)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[se.asSpec(),he.asSpec(),Ce.asSpec()],behaviours:nt([on.config({}),zt.config({mode:"flow",focusInside:zh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:me=>Xp(me.element)?O.none():(eu(me.element),O.some(!0))})])}},F$={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},yz={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Cz=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},wz=(t,s)=>/[0-9.]+px$/.test(t)?Cz(parseInt(t,10)*72/96,s||0)+"pt":ut(yz,t).getOr(t),k0=t=>ut(F$,t).getOr(""),H$=t=>{const s=()=>{let x=O.none();const _=y.data,D=t.queryCommandValue("FontSize");if(D)for(let B=3;x.isNone()&&B>=0;B--){const I=wz(D,B),H=k0(I);x=an(_,q=>q.format===D||q.format===I||q.format===H)}return{matchOpt:x,size:D}},a=x=>_=>_.exists(D=>D.format===x),l=()=>{const{matchOpt:x}=s();return x},d=Q(O.none),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,x.format)})},p=x=>{const{matchOpt:_,size:D}=s(),B=_.fold(Q(D),I=>I.title);Wt(x,Ju,{text:B})},y=r3(t,"font_size_formats",E0.Space);return{tooltip:"Font sizes",text:O.some("12pt"),icon:O.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:p,dataset:y,shouldHide:!1,isInvalid:et}},Sz=(t,s)=>T0(t,s,H$(t)),xz=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},Tz=16,Ez=t=>t>=0,kz=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>Wt(l,Ju,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{fE(l,["unsupportedLength","empty"]);const g=fE(l,["unsupportedLength","empty"]).or(fE(s(),["unsupportedLength","empty"])),p=g.map(D=>D.value).getOr(Tz),y=_x(t),x=g.map(D=>D.unit).filter(D=>D!=="").getOr(y),_=d(p,xz(x).step);return`${Ez(_)?_:p}${x}`}}},_z=(t,s)=>L$(t,s,kz(t)),Oz=(t,s)=>{const a=x0(t,s,H$(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},gE=(t,s)=>{const a="Paragraph",l=p=>()=>t.formatter.match(p),d=p=>()=>{const y=t.formatter.get(p);return y!==void 0?O.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},g=p=>{const y=B=>nP(B)?Ie(B.items,y):g4(B)?[{title:B.title,format:B.format}]:[],x=Ie(lP(t),y),D=D$(t,Q(x)).fold(Q(a),B=>B.title);Wt(p,Ju,{text:D})};return{tooltip:"Formats",text:O.some(a),icon:O.none(),isSelectedFor:l,getCurrentValue:O.none,getPreviewFor:d,onAction:s3(t),updateText:g,shouldHide:Q_(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},Az=(t,s)=>{const a=J({type:"advanced"},s.styles);return T0(t,s,gE(t,a))},Dz=(t,s)=>{const a=J({type:"advanced"},s.styles),l=x0(t,s,gE(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},V$=Q([Ue("toggleClass"),Ue("fetch"),rg("onExecute"),ye("getHotspot",O.some),ye("getAnchorOverrides",Q({})),Lu(),rg("onItemExecute"),po("lazySink"),Ue("dom"),qn("onOpen"),Oa("splitDropdownBehaviours",[Cr,zt,on]),ye("matchWidth",!1),ye("useMinWidth",!1),ye("eventOrder",{}),po("role")].concat(rA())),z$=Aa({factory:Us,schema:[Ue("dom")],name:"arrow",defaults:()=>({buttonBehaviours:nt([on.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(kd)},buttonBehaviours:nt([$n.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),Rz=Aa({factory:Us,schema:[Ue("dom")],name:"button",defaults:()=>({buttonBehaviours:nt([on.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),Mz=Q([z$,Rz,ri({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ue("text")],name:"aria-descriptor"}),au({schema:[Md()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),eN()]),Nz=(t,s,a,l)=>{const d=D=>{Un.getCurrent(D).each(B=>{lo.highlightFirst(B),zt.focusIn(B)})},g=D=>{sA(t,cn,D,l,d,zl.HighlightMenuAndItem).get(re)},p=D=>(g(D),O.some(!0)),y=D=>{const B=zu(D,t,"button");return kd(B),O.some(!0)},x=J(J({},ds([qs((D,B)=>{as(D,t,"aria-descriptor").each(H=>{const q=Ot("aria");bn(H.element,"id",q),bn(D.element,"aria-describedby",q)})})])),px(O.some(g))),_={repositionMenus:D=>{$n.isOn(D)&&nN(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:We(J({},t.eventOrder),{[Lc()]:["disabling","toggling","alloy.base.behaviour"]}),events:x,behaviours:Yr(t.splitDropdownBehaviours,[Cr.config({others:{sandbox:D=>{const B=zu(D,t,"arrow");return uT(t,D,{onOpen:()=>{$n.on(B),$n.on(D)},onClose:()=>{$n.off(B),$n.off(D)}})}}}),zt.config({mode:"special",onSpace:y,onEnter:y,onDown:p}),on.config({}),$n.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},hE=Or({name:"SplitDropdown",configFields:V$(),partFields:Mz(),factory:Nz,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),U$=t=>({isEnabled:()=>!Xt.isDisabled(t),setEnabled:s=>Xt.set(t,!s),setText:s=>Wt(t,Ju,{text:s}),setIcon:s=>Wt(t,eb,{icon:s})}),Bz=t=>({setActive:s=>{$n.set(t,s)},isActive:()=>$n.isOn(t),isEnabled:()=>!Xt.isDisabled(t),setEnabled:s=>Xt.set(t,!s),setText:s=>Wt(t,Ju,{text:s}),setIcon:s=>Wt(t,eb,{icon:s})}),W$=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),Z$=Ot("focus-button"),pE=(t,s,a,l,d)=>{const g=s.map(y=>Do(zA(y,"tox-tbtn",d))),p=t.map(y=>Do(Ig(y,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:W$(a,d)},components:Qv([p.map(y=>y.asSpec()),g.map(y=>y.asSpec())]),eventOrder:{[Wo()]:["focusing","alloy.base.behaviour",cp],[Ed()]:[cp,"toolbar-group-button-events"]},buttonBehaviours:nt([du.toolbarButton(d.isDisabled),Ra(),kn(cp,[qs((y,x)=>m0(y)),je(Ju,(y,x)=>{g.bind(_=>_.getOpt(y)).each(_=>{un.set(_,[Fs(d.translate(x.event.text))])})}),je(eb,(y,x)=>{p.bind(_=>_.getOpt(y)).each(_=>{un.set(_,[Ig(x.event.icon,d.icons)])})}),je(Wo(),(y,x)=>{x.event.prevent(),co(y,Z$)})])].concat(l.getOr([])))}},Pz=(t,s,a,l)=>{const d=s.shared,g=S(re),p={toolbarButtonBehaviours:[],getApi:U$,onSetup:t.onSetup},y=[kn("toolbar-group-button-events",[z1(p,g),U1(p,g)])];return up.sketch({lazySink:d.getSink,fetch:()=>Vc.nu(x=>{x(Ne(a(t.items),cE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:pE(t.icon,t.text,t.tooltip,O.some(y),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},bE=(t,s,a)=>{var l;const d=S(re),g=pE(t.icon,t.text,t.tooltip,O.none(),a);return Us.sketch({dom:g.dom,components:g.components,eventOrder:DT,buttonBehaviours:We(J({},nt([kn("toolbar-button-events",[cB({onAction:t.onAction,getApi:s.getApi}),z1(s,d),U1(s,d)]),du.toolbarButton(()=>!t.enabled||a.isDisabled()),Ra()].concat(s.toolbarButtonBehaviours))),{[cp]:(l=g.buttonBehaviours)===null||l===void 0?void 0:l[cp]})})},$z=(t,s)=>j$(t,s,[]),j$=(t,s,a)=>bE(t,{toolbarButtonBehaviours:a.length>0?[kn("toolbarButtonWith",a)]:[],getApi:U$,onSetup:t.onSetup},s),Iz=(t,s)=>a3(t,s,[]),a3=(t,s,a)=>bE(t,{toolbarButtonBehaviours:[un.config({}),$n.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[kn("toolbarToggleButtonWith",a)]:[]),getApi:Bz,onSetup:t.onSetup},s),vE=(t,s,a)=>l=>Vc.nu(d=>s.fetch(d)).map(d=>O.from(fT(Yo(e2(Ot("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,ju.CLOSE_ON_EXECUTE,s.select.getOr(et),a),{movement:rT(s.columns,s.presets),menuBehaviours:Qh.unnamedEvents(s.columns!=="auto"?[]:[qs((g,p)=>{OO(g,4,MR(s.presets)).each(({numRows:y,numColumns:x})=>{zt.setGridSize(g,y,x)})})])})))),Lz=(t,s)=>{const a=g=>({isEnabled:()=>!Xt.isDisabled(g),setEnabled:p=>Xt.set(g,!p),setIconFill:(p,y)=>{Hs(g.element,`svg path[id="${p}"], rect[id="${p}"]`).each(x=>{bn(x,"fill",y)})},setActive:p=>{bn(g.element,"aria-pressed",p),Hs(g.element,"span").each(y=>{g.getSystem().getByDom(y).each(x=>$n.set(x,p))})},isActive:()=>Hs(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists($n.isOn)),setText:p=>Hs(g.element,"span").each(y=>g.getSystem().getByDom(y).each(x=>Wt(x,Ju,{text:p}))),setIcon:p=>Hs(g.element,"span").each(y=>g.getSystem().getByDom(y).each(x=>Wt(x,eb,{icon:p})))}),l=S(re),d={getApi:a,onSetup:t.onSetup};return hE.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:J({"aria-pressed":!1},W$(t.tooltip,s.providers))},onExecute:g=>{const p=a(g);p.isEnabled()&&t.onAction(p)},onItemExecute:(g,p,y)=>{},splitDropdownBehaviours:nt([du.splitButton(s.providers.isDisabled),Ra(),kn("split-dropdown-events",[qs((g,p)=>m0(g)),je(Z$,on.focus),z1(d,l),U1(d,l)]),o0.config({})]),eventOrder:{[Ed()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:vE(a,t,s.providers),parts:{menu:Fx(!1,t.columns,t.presets)},components:[hE.parts.button(pE(t.icon,t.text,O.none(),O.some([$n.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),hE.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:aR("chevron-down",s.providers.icons)},buttonBehaviours:nt([du.splitButton(s.providers.isDisabled),Ra(),q_()])}),hE.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},yE=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],mp=(t,s)=>(a,l,d)=>{const g=t(a).mapError(p=>Jc(p)).getOrDie();return s(g,l,d)},G$={button:mp(yO,(t,s)=>$z(t,s.shared.providers)),togglebutton:mp(wO,(t,s)=>Iz(t,s.shared.providers)),menubutton:mp(GP,(t,s)=>p2(t,"tox-tbtn",s,O.none(),!1)),splitbutton:mp(tV,(t,s)=>Lz(t,s.shared)),grouptoolbarbutton:mp(P4,(t,s,a)=>{const l=a.ui.registry.getAll().buttons,d=p=>$2(a,{buttons:l,toolbar:p,allowToolbarGroups:!1},s,O.none()),g={[cv]:s.shared.header.isPositionedAtTop()?Pd.TopToBottom:Pd.BottomToTop};switch(Gh(a)){case uu.floating:return Pz(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Fz=(t,s,a)=>ut(G$,t.type).fold(()=>(console.error("skipping button defined by",t),O.none()),l=>O.some(l(t,s,a))),q$={styles:Az,fontsize:Sz,fontsizeinput:_z,fontfamily:hz,blocks:mz,align:uz},Hz=t=>{const s=Ne(yE,a=>{const l=Sn(a.items,d=>Bn(t,d)||Bn(q$,d));return{name:a.name,items:l}});return Sn(s,a=>a.items.length>0)},Vz=t=>{const s=t.split("|");return Ne(s,a=>({items:a.trim().split(" ")}))},zz=t=>Qe(t,s=>Bn(s,"name")&&Bn(s,"items")),Uz=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?Hz(a):kt(s)?Vz(s):zz(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},CE=(t,s,a,l,d,g)=>ut(s,a.toLowerCase()).orThunk(()=>g.bind(p=>Es(p,y=>ut(s,y+a.toLowerCase())))).fold(()=>ut(q$,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),O.none()):Fz(p,d,t)),$2=(t,s,a,l)=>{const d=Uz(s),g=Ne(d,p=>{const y=Ie(p.items,x=>x.trim().length===0?[]:CE(t,s.buttons,x,s.allowToolbarGroups,a,l).toArray());return{title:O.from(t.translate(p.name)),items:y}});return Sn(g,p=>p.items.length>0)},c3=(t,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Qe(g,kt)){const y=g.map(x=>{const _={toolbar:x,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return $2(t,_,l,O.none())});hs.setToolbars(d,y)}else hs.setToolbar(d,$2(t,a,l,O.none()))},l3=Fa(),K$=l3.os.isiOS()&&l3.os.version.major<=12,Wz=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=S(ys(d.innerWidth,d.innerHeight)),y=S(ys(g.offsetWidth,g.offsetHeight)),x=()=>{const I=p.get();(I.left!==d.innerWidth||I.top!==d.innerHeight)&&(p.set(ys(d.innerWidth,d.innerHeight)),nT(t))},_=()=>{const I=t.getDoc().documentElement,H=y.get();(H.left!==I.offsetWidth||H.top!==I.offsetHeight)&&(y.set(ys(I.offsetWidth,I.offsetHeight)),nT(t))},D=I=>{FO(t,I)};l.bind(d,"resize",x),l.bind(d,"scroll",D);const B=Ay(pe.fromDom(t.getBody()),"load",_);t.on("hide",()=>{mt(a,I=>{_t(I.element,"display","none")})}),t.on("show",()=>{mt(a,I=>{Vn(I.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{B.unbind(),l.unbind(d,"resize",x),l.unbind(d,"scroll",D),d=null})},Y$=(t,s,a)=>{Hd(t)&&vg(a.mainUi.mothership.element,a.popupUi.mothership),Sv(s,a.dialogUi.mothership)};var Zz=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>Q3(this,null,function*(){const{mainUi:g,uiMotherships:p}=s,y=S(0),x=g.outerContainer;yield az(t);const _=pe.fromDom(d.targetNode),D=Ke(_e(_));vg(_,g.mothership),Y$(t,D,s),t.on("PostRender",()=>{hs.setSidebar(x,a.sidebar,TR(t)),c3(t,s,a,l),y.set(t.getWin().innerWidth),hs.setMenubar(x,T$(t,a)),hs.setViews(x,a.views),Wz(t,s)});const B=hs.getSocket(x).getOrDie("Could not find expected socket element");if(K$){rr(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const se=M7(()=>{t.dispatch("ScrollContent")},20),Ce=Hc(B.element,"scroll",se.throttle);t.on("remove",Ce.unbind)}gM(t,s),t.addCommand("ToggleSidebar",(se,Ce)=>{hs.toggleSidebar(x,Ce),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var se;return(se=hs.whichSidebar(x))!==null&&se!==void 0?se:""}),t.addCommand("ToggleView",(se,Ce)=>{if(hs.toggleView(x,Ce)){const he=x.element;g.mothership.broadcastOn([Tm()],{target:he}),mt(p,me=>{me.broadcastOn([Tm()],{target:he})}),Ts(hs.whichView(x))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var se;return(se=hs.whichView(x))!==null&&se!==void 0?se:""});const I=Gh(t),H=()=>{hs.refreshToolbar(s.mainUi.outerContainer)};(I===uu.sliding||I===uu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const se=t.getWin().innerWidth;se!==y.get()&&(H(),y.set(se))});const q={setEnabled:se=>{Xx(s,!se)},isEnabled:()=>!Xt.isDisabled(x)};return{iframeContainer:B.element.dom,editorContainer:x.element.dom,api:q}})});const i3=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),u3=t=>ur(t)?t+"px":t,wE=(t,s,a)=>{const l=s.filter(g=>t<g),d=a.filter(g=>t>g);return l.or(d).getOr(t)},jz=t=>{const s=xx(t),a=X_(t),l=J_(t);return i3(s).map(d=>wE(d,a,l))},Gz=t=>jz(t).getOr(xx(t)),X$=t=>{const s=Tx(t),a=LC(t),l=FC(t);return i3(s).map(d=>wE(d,a,l))},J$=t=>X$(t).getOr(Tx(t)),{ToolbarLocation:d3,ToolbarMode:m3}=wL,qz=40,Kz=(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=a,y=Og.DOM,x=qh(t),_=zC(t),D=FC(t).or(X$(t)),B=l.shared.header,I=B.isPositionedAtTop,H=Gh(t),q=H===m3.sliding||H===m3.floating,se=S(!1),Ce=()=>se.get()&&!t.removed,he=dn=>q?dn.fold(Q(0),Po=>Po.components().length>1?hr(Po.components()[1].element):0):0,me=dn=>{switch(Ex(t)){case d3.auto:const Po=hs.getToolbar(g.outerContainer),bt=he(Po),Pt=hr(dn.element)-bt,Tt=k(s);if(Tt.y>Pt)return"top";{const _n=fi(s),Xn=Math.max(_n.dom.scrollHeight,hr(_n));return Tt.bottom<Xn-Pt||le().bottom<Tt.bottom-Pt?"bottom":"top"}case d3.bottom:return"bottom";case d3.top:default:return"top"}},$e=dn=>{d.on(Po=>{fa.setModes(Po,[dn]),B.setDockingMode(dn);const bt=I()?Pd.TopToBottom:Pd.BottomToTop;bn(Po.element,cv,bt)})},Be=()=>{d.on(dn=>{const Po=D.getOrThunk(()=>{const bt=i3(Ze(vs(),"margin-left")).getOr(0);return ya(vs())-va(s).left+bt});_t(dn.element,"max-width",Po+"px")})},ct=dn=>{d.on(Po=>{const bt=hs.getToolbar(g.outerContainer),Pt=he(bt),Tt=k(s),{top:rn,left:_n}=qe(t,g.outerContainer.element).fold(()=>({top:I()?Math.max(Tt.y-hr(Po.element)+Pt,0):Tt.bottom,left:Tt.x}),bo=>{var Tl;const ir=k(bo),ad=(Tl=bo.dom.scrollTop)!==null&&Tl!==void 0?Tl:0,Yd=Eo(bo,vs()),Wg=Yd?Math.max(Tt.y-hr(Po.element)+Pt,0):Tt.y-ir.y+ad-hr(Po.element)+Pt;return{top:I()?Wg:Tt.bottom,left:Yd?Tt.x:Tt.x-ir.x}}),Xn={position:"absolute",left:Math.round(_n)+"px",top:Math.round(rn)+"px"},Vr=dn.map(bo=>{const Tl=Xa(),ir=150,ad=window.innerWidth-(_n-Tl.left);return{width:Math.max(Math.min(bo,ad),ir)+"px"}}).getOr({});rr(g.outerContainer.element,J(J({},Xn),Vr))})},qe=(dn,Po)=>Hd(dn)?x4(Po):O.none(),pt=()=>{mt(p,dn=>{dn.broadcastOn([Nh()],{})})},It=()=>{if(x)return O.none();if(va(g.outerContainer.element).left+Wr(g.outerContainer.element)>=window.innerWidth-qz||As(g.outerContainer.element,"width").isSome()){_t(g.outerContainer.element,"position","absolute"),_t(g.outerContainer.element,"left","0px"),Vn(g.outerContainer.element,"width");const Po=Wr(g.outerContainer.element);return O.some(Po)}else return O.none()},Yn=dn=>{if(!Ce())return;x||Be();const Po=x?O.none():It();q&&hs.refreshToolbar(g.outerContainer),x||ct(Po),_&&d.on(dn),pt()},Lt=()=>x||!_||!Ce()?!1:d.get().exists(dn=>{const Po=B.getDockingMode(),bt=me(dn);return bt!==Po?($e(bt),!0):!1});return{isVisible:Ce,isPositionedAtTop:I,show:()=>{se.set(!0),_t(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),mt(p,dn=>{Vn(dn.element,"display")}),Lt(),Hd(t)?Yn(dn=>fa.isDocked(dn)?fa.reset(dn):fa.refresh(dn)):Yn(fa.refresh)},hide:()=>{se.set(!1),_t(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),mt(p,dn=>{_t(dn.element,"display","none")})},update:Yn,updateMode:()=>{Lt()&&Yn(fa.reset)},repositionPopups:pt}},Q$=(t,s)=>{const a=k(t);return{pos:s?a.y:a.bottom,bounds:a}},Yz=(t,s,a,l)=>{const d=S(Q$(s,a.isPositionedAtTop())),g=_=>{const{pos:D,bounds:B}=Q$(s,a.isPositionedAtTop()),{pos:I,bounds:H}=d.get(),q=B.height!==H.height||B.width!==H.width;d.set({pos:D,bounds:B}),q&&nT(t,_),a.isVisible()&&(I!==D?a.update(fa.reset):q&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(fa.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let p=0;const y=e4(()=>a.update(fa.refresh),33);t.on("ScrollWindow",()=>{const _=Xa().left;_!==p&&(p=_,y.throttle()),a.updateMode()}),Hd(t)&&t.on("ElementScroll",_=>{a.update(fa.refresh)});const x=Iu();x.set(Ay(pe.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{x.clear()})};var I2=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>Q3(this,null,function*(){const{mainUi:g}=s,p=Bo(),y=pe.fromDom(d.targetNode),x=Kz(t,y,s,l,p),_=mR(t);yield cz(t);const D=()=>{if(p.isSet()){x.show();return}p.set(hs.getHeader(g.outerContainer).getOrDie());const I=rO(t);Hd(t)?(vg(y,g.mothership),vg(y,s.popupUi.mothership)):Sv(I,g.mothership),Sv(I,s.dialogUi.mothership),c3(t,s,a,l),hs.setMenubar(g.outerContainer,T$(t,a)),x.show(),Yz(t,y,x,_),t.nodeChanged()};t.on("show",D),t.on("hide",x.hide),_||(t.on("focus",D),t.on("blur",x.hide)),t.on("init",()=>{(t.hasFocus()||_)&&D()}),gM(t,s);const B={show:D,hide:x.hide,setEnabled:I=>{Xx(s,!I)},isEnabled:()=>!Xt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}})});const e5=()=>{const t=Bo(),s=Bo(),a=Bo();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),p=s.get().map(y=>y.mothership);return g.fold(()=>p.toArray(),y=>p.fold(()=>[y],x=>Eo(y.element,x.element)?[y]:[y,x]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(y=>p(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},Xz="contexttoolbar-show",t5="contexttoolbar-hide",n5=t=>({hide:()=>co(t,lh()),getValue:()=>St.getValue(t)}),SE=(t,s)=>je(aB,(a,l)=>{const d=t.get(a),g=n5(d);s.onAction(g,l.event.buttonApi)}),o5=(t,s,a)=>{const p=s.original,{primary:l}=p,d=G2(p,["primary"]),g=vl(yO(We(J({},d),{type:"button",onAction:re})));return j$(g,a,[SE(t,s)])},s5=(t,s,a)=>{const p=s.original,{primary:l}=p,d=G2(p,["primary"]),g=vl(wO(We(J({},d),{type:"togglebutton",onAction:re})));return a3(g,a,[SE(t,s)])},Jz=t=>t.type==="contextformtogglebutton",_0=(t,s,a)=>Jz(s)?s5(t,s,a):o5(t,s,a),xE=(t,s,a)=>{const l=Ne(s,p=>Do(_0(t,p,a)));return{asSpecs:()=>Ne(l,p=>p.asSpec()),findPrimary:p=>Es(s,(y,x)=>y.primary?O.from(l[x]).bind(_=>_.getOpt(p)).filter(ze(Xt.isDisabled)):O.none())}},TE=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=Do($1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:nt([zt.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(kd(p),!0)),onLeft:(g,p)=>(p.cut(),O.none()),onRight:(g,p)=>(p.cut(),O.none())})])})),d=xE(l,t.commands,s);return[{title:O.none(),items:[l.asSpec()]},{title:O.none(),items:d.asSpecs()}]},r5={renderContextForm:(t,s,a)=>tb({type:t,uid:Ot("context-toolbar"),initGroups:TE(s,a),onEscape:O.none,cyclicKeying:!0,providers:a}),buildInitGroups:TE},a5=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,c5=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Vi(pe.fromDom(t.startContainer),t.startOffset).element;return(ba(a)?oa(a):O.some(a)).filter(mo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},f3=t=>{const s=t.selection.getRng(),a=c5(s);if(t.inline){const l=Xa();return is(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=M(pe.fromDom(t.getBody()));return is(l.x+a.left,l.y+a.top,a.width,a.height)}},e9=(t,s)=>s.filter(a=>no(a)&&_l(a)).map(M).getOrThunk(()=>f3(t)),t9=(t,s,a)=>{const l=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:l,width:d-l}},n9=(t,s,a,l,d,g)=>{const p=pe.fromDom(t.getContainer()),y=Hs(p,".tox-editor-header").getOr(p),x=k(y),_=x.y>=s.bottom,D=l&&!_;if(t.inline&&D)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const B=d==="line"?k(p):s;return D?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(B.bottom-g,a.bottom)}:{y:Math.max(B.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},l5=(t,s,a,l=0)=>{const d=Xm(window),g=k(pe.fromDom(t.getContentAreaContainer())),p=Ax(t)||Rx(t)||VC(t),{x:y,width:x}=t9(g,d,l);if(t.inline&&!p)return is(y,d.y,x,d.height);{const _=s.header.isPositionedAtTop(),{y:D,bottom:B}=n9(t,g,d,_,a,l);return is(y,D,x,B-D)}},L2=12,F2={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},g3={maxHeightFunction:ug(),maxWidthFunction:S0()},i5=(t,s)=>{const a=t.selection.getRng(),l=Vi(pe.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Eo(l.element,s)},h3=(t,s,a)=>{const l=As(t,"position");_t(t,"position",s);const d=a(t);return l.each(g=>_t(t,"position",g)),d},u5=t=>t==="node",d5=(t,s,a,l,d)=>{const g=f3(t),p=l.lastElement().exists(y=>Eo(a,y));if(i5(t,a))return p?JB:Mf;if(p)return h3(s,l.getMode(),()=>a5(g,k(s),-20)&&!l.isReposition()?eH:JB);{const y=l.getMode()==="fixed"?d.y+Xa().top:d.y,x=hr(s)+L2;return y+x<=g.y?Mf:T2}},o9=(t,s,a,l)=>{const d=x=>(_,D,B,I,H)=>{const q=d5(t,I,x,a,H),se=We(J({},_),{y:H.y,height:H.height});return We(J({},q(se,D,B,I,H)),{alwaysFit:!0})},g=x=>u5(l)?[d(x)]:[];return s?{onLtr:x=>[zs,Ua,qr,Il,Vs,ki].concat(g(x)),onRtl:x=>[zs,qr,Ua,Vs,Il,ki].concat(g(x))}:{onLtr:x=>[ki,zs,Il,Ua,Vs,qr].concat(g(x)),onRtl:x=>[ki,zs,Vs,qr,Il,Ua].concat(g(x))}},s9=(t,s,a,l)=>s==="line"?{bubble:Th(L2,0,F2),layouts:{onLtr:()=>[wy],onRtl:()=>[Sy]},overrides:g3}:{bubble:Th(0,L2,F2,1/L2),layouts:o9(t,a,l,s),overrides:g3},O0=(t,s)=>{const a=Sn(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=vc(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},m5=t=>{if(t.length<=1)return t;{const s=g=>qo(t,p=>p.position===g),a=g=>Sn(t,p=>p.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),p=Ne(a("selection"),y=>We(J({},y),{position:"node"}));return g.concat(p)}else return a(l?"selection":"node");else return a("line")}},r9=t=>{if(t.length<=1)return t;{const s=l=>an(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>Sn(t,d=>d.position===l))}},a9=(t,s,a)=>{const l=O0(t,s);if(l.contextForms.length>0)return O.some({elem:t,toolbars:[l.contextForms[0]]});{const d=O0(t,a);if(d.contextForms.length>0)return O.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=m5(l.contextToolbars.concat(d.contextToolbars));return O.some({elem:t,toolbars:g})}else return O.none()}},c9=(t,s,a)=>t(s)?O.none():Mu(s,l=>{if(mo(l)){const{contextToolbars:d,contextForms:g}=O0(l,a.inNodeScope),p=g.length>0?g:r9(d);return p.length>0?O.some({elem:l,toolbars:p}):O.none()}else return O.none()},t),l9=(t,s)=>{const a=pe.fromDom(s.getBody()),l=p=>Eo(p,a),d=p=>!l(p)&&!Nr(a,p),g=pe.fromDom(s.selection.getNode());return d(g)?O.none():a9(g,t.inNodeScope,t.inEditorScope).orThunk(()=>c9(l,g,t))},i9=(t,s)=>{const a={},l=[],d=[],g={},p={},y=(D,B)=>{const I=vl(H1(B));a[D]=I,I.launch.map(H=>{g["form:"+D]=We(J({},B.launch),{type:H.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}})}),I.scope==="editor"?d.push(I):l.push(I),p[D]=I},x=(D,B)=>{TO(B).each(I=>{B.scope==="editor"?d.push(I):l.push(I),p[D]=I})},_=Vo(t);return mt(_,D=>{const B=t[D];B.type==="contextform"?y(D,B):B.type==="contexttoolbar"&&x(D,B)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:p,formNavigators:g}},p3=Ot("forward-slide"),b3=Ot("backward-slide"),v3=Ot("change-slide-event"),y3="tox-pop--resizing",f5=t=>{const s=S([]);return Ms.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Ms.getContent(a).each(l=>{Vn(l.element,"visibility")}),ms(a.element,y3),Vn(a.element,"width")},inlineBehaviours:nt([kn("context-toolbar-events",[dh(ah(),(a,l)=>{l.event.raw.propertyName==="width"&&(ms(a.element,y3),Vn(a.element,"width"))}),je(v3,(a,l)=>{const d=a.element;Vn(d,"width");const g=ya(d);Ms.setContent(a,l.event.contents),Gr(d,y3);const p=ya(d);_t(d,"width",g+"px"),Ms.getContent(a).each(y=>{l.event.focus.bind(x=>(eu(x),tu(d))).orThunk(()=>(zt.focusIn(y),Bd(_e(d))))}),setTimeout(()=>{_t(a.element,"width",p+"px")},0)}),je(p3,(a,l)=>{Ms.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Bd(_e(a.element))}]))}),Wt(a,v3,{contents:l.event.forwardContents,focus:O.none()})}),je(b3,(a,l)=>{Wc(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Wt(a,v3,{contents:yl(d.bar),focus:d.focus})})})]),zt.config({mode:"special",onEscape:a=>Wc(s.get()).fold(()=>t.onEscape(),l=>(co(a,b3),O.some(!0)))})]),lazySink:()=>at.value(t.sink)})},C3="tox-pop--transition",u9=(t,s,a,l)=>{const d=l.backstage,g=d.shared,p=Fa().deviceType.isTouch,y=Bo(),x=Bo(),_=Bo(),D=ka(f5({sink:a,onEscape:()=>(t.focus(),O.some(!0))})),B=()=>{const Lt=_.get().getOr("node"),Wn=u5(Lt)?1:0;return l5(t,g,Lt,Wn)},I=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),H=Lt=>Ks(yc(Lt,y.get(),Eo),!0),q=()=>{if(I()){const Lt=B(),Wn=Ks(_.get(),"node")?e9(t,y.get()):f3(t);return Lt.height<=0||!a5(Wn,Lt,.01)}else return!0},se=()=>{y.clear(),x.clear(),_.clear(),Ms.hide(D)},Ce=()=>{if(Ms.isOpen(D)){const Lt=D.element;Vn(Lt,"display"),q()?_t(Lt,"display","none"):(x.set(0),Ms.reposition(D))}},he=Lt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Lt],behaviours:nt([zt.config({mode:"acyclic"}),kn("pop-dialog-wrap-events",[qs(Wn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>zt.focusIn(Wn))}),el(Wn=>{t.shortcuts.remove("ctrl+F9")})])])}),me=Ui(()=>i9(s,Lt=>{const Wn=ct([Lt]);Wt(D,p3,{forwardContents:he(Wn)})})),$e=(Lt,Wn)=>$2(t,{buttons:Lt,toolbar:Wn.items,allowToolbarGroups:!1},l.backstage,O.some(["form:"])),Be=(Lt,Wn)=>r5.buildInitGroups(Lt,Wn),ct=Lt=>{const{buttons:Wn}=t.ui.registry.getAll(),Cn=me(),Zn=J(J({},Wn),Cn.formNavigators),dn=Gh(t)===uu.scrolling?uu.scrolling:uu.default,Po=Vt(Ne(Lt,bt=>bt.type==="contexttoolbar"?$e(Zn,bt):Be(bt,g.providers)));return tb({type:dn,uid:Ot("context-toolbar"),initGroups:Po,onEscape:O.none,cyclicKeying:!0,providers:g.providers})},qe=(Lt,Wn)=>{const Cn=Lt==="node"?g.anchors.node(Wn):g.anchors.cursor(),Zn=s9(t,Lt,p(),{lastElement:y.get,isReposition:()=>Ks(x.get(),0),getMode:()=>Kr.getMode(a)});return Yo(Cn,Zn)},pt=(Lt,Wn)=>{if(Yn.cancel(),!I())return;const Cn=ct(Lt),Zn=Lt[0].position,dn=qe(Zn,Wn);_.set(Zn),x.set(1);const Po=D.element;Vn(Po,"display"),H(Wn)||(ms(Po,C3),Kr.reset(a,D)),Ms.showWithinBounds(D,he(Cn),{anchor:dn,transition:{classes:[C3],mode:"placement"}},()=>O.some(B())),Wn.fold(y.clear,y.set),q()&&_t(Po,"display","none")};let It=!1;const Yn=e4(()=>{if(!(!t.hasFocus()||t.removed||It))if(gc(D.element,C3))Yn.throttle();else{const Lt=me();l9(Lt,t).fold(se,Wn=>{pt(Wn.toolbars,O.some(Wn.elem))})}},17);t.on("init",()=>{t.on("remove",se),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ce),t.on("click keyup focus SetContent",Yn.throttle),t.on(t5,se),t.on(Xz,Lt=>{const Wn=me();ut(Wn.lookupTable,Lt.toolbarKey).each(Cn=>{pt([Cn],tn(Lt.target!==t,Lt.target)),Ms.getContent(D).each(zt.focusIn)})}),t.on("focusout",Lt=>{yx.setEditorTimeout(t,()=>{tu(a.element).isNone()&&tu(D.element).isNone()&&se()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&se()}),t.on("AfterProgressState",Lt=>{Lt.state?se():t.hasFocus()&&Yn.throttle()}),t.on("dragstart",()=>{It=!0}),t.on("dragend drop",()=>{It=!1}),t.on("NodeChange",Lt=>{tu(D.element).fold(Yn.throttle,re)})})},d9=t=>{mt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:pu(t,a.cmd),onSetup:dE(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:pu(t,"JustifyNone")})},g5=(t,s)=>{const a=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Bo();return Ne(l,p=>({type:"togglemenuitem",text:s.display(p),onSetup:y=>{const x=D=>{D&&(g.on(B=>B.setActive(!1)),g.set(y)),y.setActive(D)};x(Ks(d,s.hash(p)));const _=s.watcher(t,p,x);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},m9={name:"lineheight",text:"Line height",icon:"line-height",getOptions:Dx,hash:t=>$$(t,["fixed","relative","empty"]).getOr(t),display:cn,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>O.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},w3=t=>O.from(uR(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:Q(a),hash:l=>Nn(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var p;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:l=>{const d=pe.fromDom(l.selection.getNode());return Ml(d,g=>O.some(g).filter(mo).bind(p=>P(p,"lang").map(x=>{const _=P(p,"data-mce-lang").getOrUndefined();return{code:x,customCode:_,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=Iu();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),d.clear}})),f9=t=>{g5(t,m9),w3(t).each(s=>g5(t,s))},g9=(t,s)=>{dz(t,s),pz(t,s),Dz(t,s),M$(t,s),Oz(t,s)},S3=t=>P2(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),h5=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:S3(t),onAction:pu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:pu(t,"indent")})},p5=t=>{h5(t)},b5=(t,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",l),()=>t.off("PastePlainTextToggle",l)},h9=t=>{const s=S(xR(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:b5(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:b5(t,s)})},x3=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},p9=t=>{ap.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:dE(t,s.name),onAction:x3(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:dE(t,a),onAction:x3(t,a)})}},b9=t=>{ap.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:pu(t,s.action)})})},v5=t=>{ap.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:pu(t,s.action),onSetup:dE(t,s.name)})})},v9=t=>{p9(t),b9(t),v5(t)},y5=t=>{ap.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:pu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:x3(t,"code")})},y9=t=>{v9(t),y5(t)},EE=(t,s)=>P2(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),T3=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:EE(t,"hasUndo"),onAction:pu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:EE(t,"hasRedo"),onAction:pu(t,"redo")})},C5=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:EE(t,"hasUndo"),onAction:pu(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:EE(t,"hasRedo"),onAction:pu(t,"redo")})},C9=t=>{T3(t),C5(t)},w9=t=>P2(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),E3=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:w9(t),onAction:pu(t,"mceToggleVisualAid")})},S9=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:pu(t,"mceToggleVisualAid")})},x9=t=>{S9(t),E3(t)},T9=(t,s)=>{d9(t),y9(t),g9(t,s),C9(t),QO(t),x9(t),p5(t),f9(t),h9(t)},E9=t=>kt(t)?t.split(/[ ,]/):t,w5=t=>s=>s.options.get(t),S5=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:kt(a)||Qe(a,kt)?{value:E9(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},x5=w5("contextmenu_never_use_native"),k9=w5("contextmenu_avoid_overlap"),_9=t=>T5(t).length===0,T5=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Sn(a,l=>Bn(s,l))},H2=(t,s)=>({type:"makeshift",x:t,y:s}),O9=(t,s,a)=>H2(t.x+s,t.y+a),E5=t=>t.type==="longpress"||t.type.indexOf("touch")===0,A9=t=>{if(E5(t)){const s=t.touches[0];return H2(s.pageX,s.pageY)}else return H2(t.pageX,t.pageY)},k5=t=>{if(E5(t)){const s=t.touches[0];return H2(s.clientX,s.clientY)}else return H2(t.clientX,t.clientY)},D9=(t,s)=>{const a=Og.DOM.getPos(t);return O9(s,a.x,a.y)},_5=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?A9(s):D9(t.getContentAreaContainer(),k5(s)):O5(t),O5=t=>({type:"selection",root:pe.fromDom(t.selection.getNode())}),R9=t=>({type:"node",node:O.some(pe.fromDom(t.selection.getNode())),root:pe.fromDom(t.getBody())}),A5=(t,s,a)=>{switch(a){case"node":return R9(t);case"point":return _5(t,s);case"selection":return O5(t)}},ob=(t,s,a,l,d,g)=>{const p=a(),y=A5(t,s,g);Df(p,ju.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:O.none()}).map(x=>{s.preventDefault(),Ms.showMenuAt(d,{anchor:y},{menu:{markers:Dg("normal")},data:x})})},D5={onLtr:()=>[zs,Ua,qr,Il,Vs,ki,Mf,T2,x2,jT,S2,w2],onRtl:()=>[zs,qr,Ua,Vs,Il,ki,Mf,T2,S2,w2,x2,jT]},M9=12,N9={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},B9=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return Fy(t.getWin(),r1.domRange(d)).exists(p=>p.left<=l.clientX&&p.right>=l.clientX&&p.top<=l.clientY&&p.bottom>=l.clientY)}},P9=t=>{const s=t.selection.getRng(),a=()=>{yx.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const l=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",l)}},R5=(t,s,a)=>{const l=A5(t,s,a);return J({bubble:Th(0,a==="point"?M9:0,N9),layouts:D5,overrides:{maxWidthFunction:S0(),maxHeightFunction:ug()}},l)},$9=(t,s,a,l,d,g,p)=>{const y=R5(t,s,g);Df(a,ju.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:O.none()}).map(x=>{s.preventDefault();const _=p?zl.HighlightMenuAndItem:zl.HighlightNone;Ms.showMenuWithinBounds(d,{anchor:y},{menu:{markers:Dg("normal"),highlightOnOpen:_},data:x,type:"horizontal"},()=>O.some(l5(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(t5)})},I9=(t,s,a,l,d,g)=>{const p=Fa(),y=p.os.isiOS(),x=p.os.isMacOS(),_=p.os.isAndroid(),D=p.deviceType.isTouch(),B=()=>!(_||y||x&&D),I=()=>{const H=a();$9(t,s,H,l,d,g,B())};if((x||y)&&g!=="node"){const H=()=>{P9(t),I()};B9(t,s)?H():(t.once("selectionchange",H),t.once("touchend",()=>t.off("selectionchange",H)))}else I()},M5=t=>kt(t)?t==="|":t.type==="separator",k3={type:"separator"},N5=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(kt(t))return t;switch(t.type){case"separator":return k3;case"submenu":return We(J({type:"nestedmenuitem"},s(t)),{getSubmenuItems:()=>{const l=t.getSubmenuItems();return kt(l)?l:Ne(l,N5)}});default:const a=t;return We(J({type:"menuitem"},s(a)),{onAction:Ut(a.onAction)})}},B5=(t,s)=>{if(s.length===0)return t;const l=Wc(t).filter(d=>!M5(d)).fold(()=>[],d=>[k3]);return t.concat(l).concat(s).concat([k3])},L9=(t,s,a)=>{const l=vn(s,(d,g)=>ut(t,g.toLowerCase()).map(p=>{const y=p.update(a);if(kt(y))return B5(d,y.split(" "));if(y.length>0){const x=Ne(y,N5);return B5(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&M5(l[l.length-1])&&l.pop(),l},F9=(t,s)=>s.ctrlKey&&!x5(t),P5=t=>t.type==="longpress"||Bn(t,"touches"),_3=(t,s)=>!P5(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),$5=(t,s)=>_3(t,s)?t.selection.getStart(!0):s.target,V2=(t,s)=>{const a=k9(t),l=_3(t,s)?"selection":"point";if(ha(a)){const d=$5(t,s);return n2(pe.fromDom(d),a)?"node":l}else return l},H9=(t,s,a)=>{const d=Fa().deviceType.isTouch,g=ka(Ms.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:nt([kn("dismissContextMenu",[je(gm(),(x,_)=>{Qn.close(x),t.focus()})])])})),p=()=>Ms.hide(g),y=x=>{if(x5(t)&&x.preventDefault(),F9(t,x)||_9(t))return;const _=V2(t,x),D=()=>{const I=$5(t,x),H=t.ui.registry.getAll(),q=T5(t);return L9(H.contextMenus,q,I)};(d()?I9:ob)(t,x,D,a,g,_)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(x,p),t.on("longpress contextmenu",y)})},O3=W.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),A0=t=>s=>s.translate(-t.left,-t.top),kE=t=>s=>s.translate(t.left,t.top),Hg=t=>(s,a)=>vn(t,(l,d)=>d(l),ys(s,a)),_E=(t,s,a)=>t.fold(Hg([kE(a),A0(s)]),Hg([A0(s)]),Hg([])),D0=(t,s,a)=>t.fold(Hg([kE(a)]),Hg([]),Hg([kE(s)])),I5=(t,s,a)=>t.fold(Hg([]),Hg([A0(a)]),Hg([kE(s),A0(a)])),V9=(t,s,a,l,d,g)=>{const p=D0(t,d,g),y=D0(s,d,g);return Math.abs(p.left-y.left)<=a&&Math.abs(p.top-y.top)<=l},z9=(t,s,a,l,d,g)=>{const p=D0(t,d,g),y=D0(s,d,g),x=Math.abs(p.left-y.left),_=Math.abs(p.top-y.top);return ys(x,_)},L5=(t,s,a)=>{const l=t.fold((d,g)=>({position:O.some("absolute"),left:O.some(d+"px"),top:O.some(g+"px")}),(d,g)=>({position:O.some("absolute"),left:O.some(d-a.left+"px"),top:O.some(g-a.top+"px")}),(d,g)=>({position:O.some("fixed"),left:O.some(d+"px"),top:O.some(g+"px")}));return J({right:O.none(),bottom:O.none()},l)},U9=(t,s,a)=>t.fold((l,d)=>OE(l+s,d+a),(l,d)=>fp(l+s,d+a),(l,d)=>sb(l+s,d+a)),A3=(t,s,a,l)=>{const d=(g,p)=>(y,x)=>{const _=g(s,a,l);return p(y.getOr(_.left),x.getOr(_.top))};return t.fold(d(I5,OE),d(D0,fp),d(_E,sb))},OE=O3.offset,fp=O3.absolute,sb=O3.fixed,F5=(t,s)=>{const a=Br(t,s);return Nn(a)?NaN:parseInt(a,10)},W9=(t,s)=>{const a=t.element,l=F5(a,s.leftAttr),d=F5(a,s.topAttr);return isNaN(l)||isNaN(d)?O.none():O.some(ys(l,d))},Z9=(t,s,a)=>{const l=t.element;bn(l,s.leftAttr,a.left+"px"),bn(l,s.topAttr,a.top+"px")},j9=(t,s)=>{const a=t.element;te(a,s.leftAttr),te(a,s.topAttr)},AE=(t,s,a,l)=>W9(t,s).fold(()=>a,d=>sb(d.left+l.left,d.top+l.top)),G9=(t,s,a,l,d,g)=>{const p=AE(t,s,a,l),y=s.mustSnap?K9(t,s,p,d,g):Y9(t,s,p,d,g),x=_E(p,d,g);return Z9(t,s,x),y.fold(()=>({coord:sb(x.left,x.top),extra:O.none()}),_=>({coord:_.output,extra:_.extra}))},q9=(t,s)=>{j9(t,s)},H5=(t,s,a,l)=>Es(t,d=>{const g=d.sensor;return V9(s,g,d.range.left,d.range.top,a,l)?O.some({output:A3(d.output,s,a,l),extra:d.extra}):O.none()}),K9=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return H5(g,a,l,d).orThunk(()=>vn(g,(x,_)=>{const D=_.sensor,B=z9(a,D,_.range.left,_.range.top,l,d);return x.deltas.fold(()=>({deltas:O.some(B),snap:O.some(_)}),I=>{const H=(B.left+B.top)/2,q=(I.left+I.top)/2;return H<=q?{deltas:O.some(B),snap:O.some(_)}:x})},{deltas:O.none(),snap:O.none()}).snap.map(x=>({output:A3(x.output,a,l,d),extra:x.extra})))},Y9=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return H5(g,a,l,d)},X9=(t,s,a)=>({coord:A3(t.output,t.output,s,a),extra:t.extra});var Q9=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=na(t.element),p=Xa(g),y=NP(d),x=X9(l,p,y),_=L5(x.coord,p,y);xr(d,_)}}});const D3="data-initial-z-index",eU=t=>{oa(t.element).filter(mo).each(s=>{P(s,D3).fold(()=>Vn(s,"z-index"),a=>_t(s,"z-index",a)),te(s,D3)})},tU=t=>{oa(t.element).filter(mo).each(s=>{As(s,"z-index").each(a=>{bn(s,D3,a)}),_t(s,"z-index",Ze(t.element,"z-index"))})},V5=(t,s)=>{t.getSystem().addToGui(s),tU(s)},R3=t=>{eU(t),t.getSystem().removeFromGui(t)},M3=(t,s,a)=>t.getSystem().build(Mm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var nU=la("snaps",[Ue("getSnapPoints"),qn("onSensor"),Ue("leftAttr"),Ue("topAttr"),ye("lazyViewport",le),ye("mustSnap",!1)]);const N3=[ye("useFixed",et),Ue("blockerClass"),ye("getTarget",cn),ye("onDrag",re),ye("repositionTarget",!0),ye("onDrop",re),Ir("getBounds",le),nU],oU=t=>lc(As(t,"left"),As(t,"top"),As(t,"position"),(s,a,l)=>(l==="fixed"?sb:OE)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=va(t);return fp(s.left,s.top)}),sU=(t,s,a,l,d)=>{const g=d.bounds,p=D0(s,a,l),y=ni(p.left,g.x,g.x+g.width-d.width),x=ni(p.top,g.y,g.y+g.height-d.height),_=fp(y,x);return s.fold(()=>{const D=I5(_,a,l);return OE(D.left,D.top)},Q(_),()=>{const D=_E(_,a,l);return sb(D.left,D.top)})},rU=(t,s,a,l,d,g,p)=>{const y=s.fold(()=>{const x=U9(a,g.left,g.top),_=_E(x,l,d);return sb(_.left,_.top)},x=>{const _=G9(t,x,a,g,l,d);return _.extra.each(D=>{x.onSensor(t,D)}),_.coord});return sU(t,y,l,d,p)},aU=(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=na(t.element),p=Xa(g),y=NP(d),x=oU(d),_=rU(t,s.snaps,x,p,y,l,a),D=L5(_,p,y);xr(d,D)}s.onDrag(t,d,l)},z5=(t,s)=>({bounds:t.getBounds(),height:ql(s.element),width:Wr(s.element)}),B3=(t,s,a,l,d)=>{const g=a.update(l,d),p=a.getStartData().getOrThunk(()=>z5(s,t));g.each(y=>{aU(t,s,p,y)})},U5=(t,s,a,l)=>{s.each(R3),a.snaps.each(g=>{q9(t,g)});const d=a.getTarget(t.element);l.reset(),a.onDrop(t,d)},P3=t=>(s,a)=>{const l=d=>{a.setStartData(z5(s,d))};return ds([je(Mp(),d=>{a.getStartData().each(()=>l(d))}),...t(s,a,l)])},cU=t=>ds([je(Wo(),t.forceDrop),je(fm(),t.drop),je(rh(),(s,a)=>{t.move(a.event)}),je(mm(),t.delayDrop)]);var lU=Object.freeze({__proto__:null,getData:t=>O.from(ys(t.x,t.y)),getDelta:(t,s)=>ys(s.left-t.left,s.top-t.top)});const W5=(t,s,a)=>[je(Wo(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>U5(l,O.some(_),t,s),y=rN(p,200),x={drop:p,delayDrop:y.schedule,forceDrop:p,move:B=>{y.cancel(),B3(l,t,s,lU,B)}},_=M3(l,t.blockerClass,cU(x));(()=>{a(l),V5(l,_)})()})],iU=[...N3,Co("dragger",{handlers:P3(W5)})],uU=t=>ds([je(Yi(),t.forceDrop),je(ss(),t.drop),je(fc(),t.drop),je(Gn(),(s,a)=>{t.move(a.event)})]),dU=t=>{const s=t[0];return O.some(ys(s.clientX,s.clientY))};var Z5=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?dU(a):O.none()},getDelta:(t,s)=>ys(s.left-t.left,s.top-t.top)});const $3=(t,s,a)=>{const l=Bo(),d=g=>{U5(g,l.get(),t,s),l.clear()};return[je(Yi(),(g,p)=>{p.stop();const y=()=>d(g),x={drop:y,delayDrop:re,forceDrop:y,move:B=>{B3(g,t,s,Z5,B)}},_=M3(g,t.blockerClass,uU(x));l.set(_),(()=>{a(g),V5(g,_)})()}),je(Gn(),(g,p)=>{p.stop(),B3(g,t,s,Z5,p.event)}),je(ss(),(g,p)=>{p.stop(),d(g)}),je(fc(),d)]},j5=[...N3,Co("dragger",{handlers:P3($3)})],rb=(t,s,a)=>[...W5(t,s,a),...$3(t,s,a)],mU=[...N3,Co("dragger",{handlers:P3(rb)})];var fU=Object.freeze({__proto__:null,mouse:iU,touch:j5,mouseOrTouch:mU}),gU=Object.freeze({__proto__:null,init:()=>{let t=O.none(),s=O.none();const a=()=>{t=O.none(),s=O.none()},l=(x,_)=>{const D=t.map(B=>x.getDelta(B,_));return t=O.some(_),D},d=(x,_)=>x.getData(_).bind(D=>l(x,D)),g=x=>{s=O.some(x)},p=()=>s,y=Q({});return Ta({readState:y,reset:a,update:d,getStartData:p,setStartData:g})}});const ab=Ey({branchKey:"mode",branches:fU,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:gU,apis:Q9}),Vg=40,z2=Vg/2,q5=(t,s,a,l,d,g)=>t.fold(()=>ab.snap({sensor:fp(a-z2,l-z2),range:ys(d,g),output:fp(O.some(a),O.some(l)),extra:{td:s}}),p=>{const y=a-z2,x=l-z2,_=Vg,D=Vg,B=p.element.dom.getBoundingClientRect();return ab.snap({sensor:fp(y,x),range:ys(_,D),output:fp(O.some(a-B.width/2),O.some(l-B.height/2)),extra:{td:s}})}),K5=(t,s,a)=>{const l=(d,g)=>d.exists(p=>Eo(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;l(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},Y5=t=>Do(Us.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:nt([ab.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),o0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),hU=(t,s)=>{const a=S([]),l=S([]),d=S(!1),g=Bo(),p=Bo(),y=pt=>{const It=M(pt);return q5(H.getOpt(s),pt,It.x,It.y,It.width,It.height)},x=()=>Ne(a.get(),pt=>y(pt)),_=pt=>{const It=M(pt);return q5(q.getOpt(s),pt,It.right,It.bottom,It.width,It.height)},D=()=>Ne(l.get(),pt=>_(pt)),B=K5(x,g,pt=>{p.get().each(It=>{t.dispatch("TableSelectorChange",{start:pt,finish:It})})}),I=K5(D,p,pt=>{g.get().each(It=>{t.dispatch("TableSelectorChange",{start:It,finish:pt})})}),H=Y5(B),q=Y5(I),se=ka(H.asSpec()),Ce=ka(q.asSpec()),he=(pt,It,Yn,Lt)=>{const Wn=It.dom.getBoundingClientRect();Vn(pt.element,"display");const Cn=qa(pe.fromDom(t.getBody())).dom.innerHeight,Zn=Yn(Wn),dn=Lt(Wn,Cn);(Zn||dn)&&_t(pt.element,"display","none")},me=(pt,It,Yn,Lt)=>{const Wn=Yn(It);ab.snapTo(pt,Wn),he(pt,It,dn=>dn[Lt]<0,(dn,Po)=>dn[Lt]>Po)},$e=pt=>me(se,pt,y,"top"),Be=()=>g.get().each($e),ct=pt=>me(Ce,pt,_,"bottom"),qe=()=>p.get().each(ct);Fa().deviceType.isTouch()&&(t.on("TableSelectionChange",pt=>{d.get()||(Id(s,se),Id(s,Ce),d.set(!0)),g.set(pt.start),p.set(pt.finish),pt.otherCells.each(It=>{a.set(It.upOrLeftCells),l.set(It.downOrRightCells),$e(pt.start),ct(pt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Be(),qe()}),t.on("TableSelectionClear",()=>{d.get()&&(Ld(se),Ld(Ce),d.set(!1)),g.clear(),p.clear()}))};var pU=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const bU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",vU=(t,s,a)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(_,D,B)=>Us.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B,"aria-level":B+1}},components:[Fs(_)],action:I=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:nt([du.button(a.isDisabled),Ra()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Fs(` ${d} `)]}),y=_=>vn(_,(D,B,I)=>{const H=g(B.name,B.element,I);return I===0?D.concat([H]):D.concat([p(),H])},[]),x=_=>{const D=[];let B=_.length;for(;B-- >0;){const I=_[B];if(I.nodeType===1&&!bU(I)){const H=CF(t,I);if(H.isDefaultPrevented()||D.push({name:H.name,element:I}),H.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:nt([zt.config({mode:"flow",selector:"div[role=button]"}),Xt.config({disabled:a.isDisabled}),Ra(),cr.config({}),un.config({}),kn("elementPathEvents",[qs((_,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>zt.focusIn(_)),t.on("NodeChange",B=>{const I=x(B.parents),H=I.length>0?y(I):[];un.set(_,H)})})])]),components:[]}};var cb;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(cb||(cb={}));const L3=(t,s,a,l,d)=>{const g={height:wE(l+s.top,X_(t),J_(t))};return a===cb.Both&&(g.width=wE(d+s.left,LC(t),FC(t))),g},R0=(t,s,a)=>{const l=pe.fromDom(t.getContainer()),d=L3(t,s,a,hr(l),ya(l));Ko(d,(g,p)=>{ur(g)&&_t(l,p,u3(g))}),_M(t)},F3=t=>{const s=oO(t);return s===!1?cb.None:s==="both"?cb.Both:cb.Vertical},lb=(t,s,a,l)=>{const g=ys(a*20,l*20);return R0(t,g,s),O.some(!0)},ib=(t,s)=>{const a=F3(t);return a===cb.None?O.none():O.some(Zu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[ab.config({mode:"mouse",repositionTarget:!1,onDrag:(l,d,g)=>R0(t,g,a),blockerClass:"tox-blocker"}),zt.config({mode:"special",onLeft:()=>lb(t,a,-1,0),onRight:()=>lb(t,a,1,0),onUp:()=>lb(t,a,0,-1),onDown:()=>lb(t,a,0,1)}),cr.config({}),on.config({})]},s.icons))},DE=(t,s)=>{const a=(l,d,g)=>un.set(l,[Fs(s.translate(["{0} "+g,d[g]]))]);return Us.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:nt([du.button(s.isDisabled),Ra(),cr.config({}),un.config({}),St.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),kn("wordcount-events",[Od(l=>{const d=St.getValue(l),g=d.mode==="words"?"characters":"words";St.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),qs(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=St.getValue(l);St.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[Lc()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},yU=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":iu.translate(["Powered by {0}","Tiny"])},innerHtml:pU.trim()},behaviours:nt([on.config({})])}]}),l=()=>{const g=[];return wR(t)&&g.push(vU(t,{},s)),t.hasPlugin("wordcount")&&g.push(DE(t,s)),SR(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=l(),p=ib(t,s);return g.concat(p.toArray())})()}},H3=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),X5=(t,s)=>{const a=t.inline,l=a?I2:Zz,d=zC(t)?JH:S4,g=e5(),p=Bo(),y=Bo(),x=Bo(),I=Fa().deviceType.isTouch()?["tox-platform-touch"]:[],H=Nx(t),q=Gh(t),se=Do({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ce=()=>g.mainUi.get().map(Tt=>Tt.outerContainer).bind(hs.getHeader),he=()=>at.fromOption(g.dialogUi.get().map(Tt=>Tt.sink),"UI has not been rendered"),me=()=>at.fromOption(g.popupUi.get().map(Tt=>Tt.sink),"(popup) UI has not been rendered"),$e=g.lazyGetInOuterOrDie("anchor bar",se.getOpt),Be=g.lazyGetInOuterOrDie("toolbar",hs.getToolbar),ct=g.lazyGetInOuterOrDie("throbber",hs.getThrobber),qe=kH({popup:me,dialog:he},t,$e),pt=()=>{const Tt={attributes:{[cv]:H?Pd.BottomToTop:Pd.TopToBottom}},rn=hs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:qe.popup,onEscape:()=>{t.focus()}}),_n=hs.parts.toolbar(J({dom:{tag:"div",classes:["tox-toolbar"]},getSink:qe.popup.shared.getSink,providers:qe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:LE=>{wF(t,LE)},type:q,lazyToolbar:Be,lazyHeader:()=>Ce().getOrDie("Could not find header element")},Tt)),Xn=hs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:qe.popup.shared.providers,onEscape:()=>{t.focus()},type:q}),Vr=VC(t),bo=Rx(t),Tl=Ax(t),ir=Ox(t),ad=It(),Yd=Vr||bo||Tl,Wg=()=>Vr?[Xn]:bo?[_n]:[],Z2=ir?[ad,rn]:[rn];return hs.parts.header({dom:J({tag:"div",classes:["tox-editor-header"].concat(Yd?[]:["tox-editor-header--empty"])},Tt),components:Vt([Tl?Z2:[],Wg(),qh(t)?[]:[se.asSpec()]]),sticky:zC(t),editor:t,sharedBackstage:qe.popup.shared})},It=()=>hs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Yn=()=>{const Tt=hs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),rn=hs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Tt,rn]}},Lt=()=>{const Tt=rO(t),rn=Eo(vs(),Tt)&&Ze(Tt,"display")==="grid",_n={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:J({},iu.isRtl()?{dir:"rtl"}:{})},behaviours:nt([Kr.config({useFixed:()=>d.isDocked(Ce)})])},Xn={dom:{styles:{width:document.body.clientWidth+"px"}},events:ds([je(Xf(),Tl=>{_t(Tl.element,"width",document.body.clientWidth+"px")})])},Vr=ka(Yo(_n,rn?Xn:{})),bo=iA(Vr);return y.set(bo),{sink:Vr,mothership:bo}},Wn=()=>{const Tt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:J({},iu.isRtl()?{dir:"rtl"}:{})},behaviours:nt([Kr.config({useFixed:()=>d.isDocked(Ce),getBounds:()=>s.getPopupSinkBounds()})])},rn=ka(Tt),_n=iA(rn);return x.set(_n),{sink:rn,mothership:_n}},Cn=()=>{const Tt=pt(),rn=Yn(),_n=hs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:qe.popup}),Xn=hs.parts.viewWrapper({backstage:qe.popup}),Vr=CR(t)&&!a?O.some(yU(t,qe.popup.shared.providers)):O.none(),bo=Vt([H?[]:[Tt],a?[]:[rn],H?[Tt]:[]]),Tl=hs.parts.editorContainer({components:Vt([bo,a?[]:Vr.toArray()])}),ir=Bx(t),ad=J(J({role:"application"},iu.isRtl()?{dir:"rtl"}:{}),ir?{"aria-hidden":"true"}:{}),Yd=ka(hs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(H?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:J({visibility:"hidden"},ir?{opacity:"0",border:"0"}:{}),attributes:ad},components:[Tl,...a?[]:[Xn],_n],behaviours:nt([Ra(),Xt.config({disableClass:"tox-tinymce--disabled"}),zt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Wg=iA(Yd);return p.set(Wg),{mothership:Wg,outerContainer:Yd}},Zn=Tt=>{const rn=u3(Gz(t)),_n=u3(J$(t));return t.inline||(Wm("div","width",_n)&&_t(Tt.element,"width",_n),Wm("div","height",rn)?_t(Tt.element,"height",rn):_t(Tt.element,"height","400px")),rn},dn=Tt=>{t.addShortcut("alt+F9","focus menubar",()=>{hs.focusMenubar(Tt)}),t.addShortcut("alt+F10","focus toolbar",()=>{hs.focusToolbar(Tt)}),t.addCommand("ToggleToolbarDrawer",(rn,_n)=>{_n!=null&&_n.skipFocus?hs.toggleToolbarDrawerWithoutFocusing(Tt):hs.toggleToolbarDrawer(Tt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>hs.isToolbarDrawerToggled(Tt))},Po=Tt=>{const{mainUi:rn,popupUi:_n,uiMotherships:Xn}=Tt;Qo(eO(t),(hb,Y3)=>{t.ui.registry.addGroupToolbarButton(Y3,hb)});const{buttons:Vr,menuItems:bo,contextToolbars:Tl,sidebars:ir,views:ad}=t.ui.registry.getAll(),Yd=Mx(t),Wg={menuItems:bo,menus:kR(t),menubar:gR(t),toolbar:Yd.getOrThunk(()=>kx(t)),allowToolbarGroups:q===uu.floating,buttons:Vr,sidebar:ir,views:ad};dn(rn.outerContainer),_H(t,rn.mothership,Xn),d.setup(t,qe.popup.shared,Ce),T9(t,qe.popup),H9(t,qe.popup.shared.getSink,qe.popup),lV(t),wV(t,ct,qe.popup.shared),u9(t,Tl,_n.sink,{backstage:qe.popup}),hU(t,_n.sink);const Z2=t.getElement(),LE=Zn(rn.outerContainer),H0={targetNode:Z2,height:LE};return l.render(t,Tt,Wg,qe.popup,H0)},bt=Tt=>(x.set(Tt.mothership),Tt),Pt=()=>{const Tt=Cn(),rn=Lt(),_n=Hd(t)?Wn():bt(rn);g.dialogUi.set(rn),g.popupUi.set(_n),g.mainUi.set(Tt);const Xn={popupUi:_n,dialogUi:rn,mainUi:Tt,uiMotherships:g.getUiMotherships()};return Po(Xn)};return{popups:{backstage:qe.popup,getMothership:()=>H3("popups",x)},dialogs:{backstage:qe.dialog,getMothership:()=>H3("dialogs",y)},renderUI:Pt}},J5=(t,s)=>{const a=O.from(Br(t,"id")).fold(()=>{const l=Ot("dialog-describe");return bn(s,"id",l),l},cn);bn(t,"aria-describedby",a)},CU=(t,s)=>{const a=P(t,"id").fold(()=>{const l=Ot("dialog-label");return bn(s,"id",l),l},cn);bn(t,"aria-labelledby",a)},wU=Q([Ue("lazySink"),po("dragBlockClass"),Ir("getBounds",le),ye("useTabstopAt",Fe),ye("firstTabstop",0),ye("eventOrder",{}),Oa("modalBehaviours",[zt]),tr("onExecute"),jp("onEscape")]),V3={sketch:cn},Q5=Q([ri({name:"draghandle",overrides:(t,s)=>({behaviours:nt([ab.config({mode:"mouse",getTarget:a=>Cl(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Aa({schema:[Ue("dom")],name:"title"}),Aa({factory:V3,schema:[Ue("dom")],name:"close"}),Aa({factory:V3,schema:[Ue("dom")],name:"body"}),ri({factory:V3,schema:[Ue("dom")],name:"footer"}),au({factory:{sketch:(t,s)=>We(J({},t),{dom:s.dom,components:s.components})},schema:[ye("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ye("components",[])],name:"blocker"})]),eI=(t,s,a,l)=>{const d=Bo(),g=H=>{d.set(H);const q=t.lazySink(H).getOrDie(),se=l.blocker(),Ce=q.getSystem().build(We(J({},se),{components:se.components.concat([yl(H)]),behaviours:nt([on.config({}),kn("dialog-blocker-events",[dh(nf(),()=>{zt.focusIn(H)})])])}));Id(q,Ce),zt.focusIn(H)},p=H=>{d.clear(),oa(H.element).each(q=>{H.getSystem().getByDom(q).each(se=>{Ld(se)})})},y=H=>zu(H,t,"body"),x=H=>zu(H,t,"footer"),_=(H,q)=>{Bf.block(H,q)},D=H=>{Bf.unblock(H)},B=Ot("modal-events"),I=We(J({},t.eventOrder),{[Ed()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])});return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:y,getFooter:x,setIdle:D,setBusy:_},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Yr(t.modalBehaviours,[un.config({}),zt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Bf.config({getRoot:d.get}),kn(B,[qs(H=>{CU(H.element,zu(H,t,"title").element),J5(H.element,zu(H,t,"body").element)})])])}},Xr=Or({name:"ModalDialog",configFields:wU(),partFields:Q5(),factory:eI,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),SU=Me([Fr,Kh].concat(V1)),xU=lm,z3=[Kx("button"),Vd,Rl("align","end",["start","end"]),ZC,Gu,$c("buttonType",["primary","secondary"])],U3=[...z3,Mg],W3=[qi("type",["submit","cancel","custom"]),...U3],TU=[qi("type",["menu"]),Jh,Gx,Vd,Qc("items",SU),...z3],EU=[...z3,qi("type",["togglebutton"]),br("tooltip"),jx,Jh,tc("active",!1)],Z3=Bc("type",{submit:W3,cancel:W3,custom:W3,menu:TU,togglebutton:EU}),j3=[Fr,Mg,qi("level",["info","warn","error","success"]),jx,ye("url","")],kU=Me(j3),tI=t=>[Fr,t],_U=[Fr,Mg,Gu,Kx("button"),Vd,jL,$c("buttonType",["primary","secondary","toolbar"]),ZC],OU=Me(_U),ub=[Fr,Kh],Lm=ub.concat([bO]),AU=ub.concat([gO,Gu]),db=Me(AU),nI=lm,DU=Lm.concat([Yv("auto")]),RE=Me(DU),M0=_p([L1,Mg,jx]),ME=Lm.concat([Ha("storageKey","default")]),oI=Me(ME),NE=ca,BE=Me(Lm),sI=ca,rI=ub.concat([Ha("tag","textarea"),br("scriptId"),br("scriptUrl"),K0("settings",void 0)]),RU=ub.concat([Ha("tag","textarea"),Ql("init")]),MU=Ds(t=>En("customeditor.old",Mc(RU),t).orThunk(()=>En("customeditor.new",Mc(rI),t))),gp=ca,NU=Me(Lm),aI=Qg(),N0=t=>[Fr,jf("columns"),t],PE=[Fr,br("html"),Rl("presets","presentation",["presentation","document"])],cI=Me(PE),BU=Lm.concat([tc("sandboxed",!0),tc("transparent",!0)]),PU=Me(BU),$U=ca,IU=Me(ub.concat([vr("height")])),B0=Me([br("url"),Gf("zoom"),Gf("cachedWidth"),Gf("cachedHeight")]),dZ=Lm.concat([vr("inputMode"),vr("placeholder"),tc("maximized",!1),Gu]),LU=Me(dZ),FU=ca,mZ=t=>[Fr,gO,t],HU=[Mg,L1],VU=[Mg,Qc("items",Dl("items",()=>P0))],P0=Al([Me(HU),Me(VU)]),zU=Lm.concat([Qc("items",P0),Gu]),UU=Me(zU),lI=ca,WU=Lm.concat([Eb("items",[Mg,L1]),ef("size",1),Gu]),fZ=Me(WU),e=ca,n=Lm.concat([tc("constrain",!0),Gu]),o=Me(n),r=Me([br("width"),br("height")]),c=ub.concat([gO,ef("min",0),ef("max",0)]),u=Me(c),f=Jl,b=[Fr,Qc("header",ca),Qc("cells",Ci(ca))],C=Me(b),E=Lm.concat([vr("placeholder"),tc("maximized",!1),Gu]),N=Me(E),R=ca,F=[qi("type",["directory","leaf"]),hO,br("id"),Ki("menu",jP)],ee=Me(F),j=F.concat([Qc("children",Dl("children",()=>wi("type",{directory:X,leaf:ee})))]),X=Me(j),fe=wi("type",{directory:X,leaf:ee}),de=[Fr,Qc("items",fe),im("onLeafAction")],be=Me(de),we=Lm.concat([Rl("filetype","file",["image","media","file"]),Gu]),He=Me(we),gt=Me([L1,qx]),ot=t=>Ao("items","items",Tr(),Ci(Ds(s=>En(`Checking item of ${t}`,Ee,s).fold(a=>at.error(Jc(a)),a=>at.value(a))))),Ee=Er(()=>wi("type",{alertbanner:kU,bar:Me(tI(ot("bar"))),button:OU,checkbox:db,colorinput:oI,colorpicker:BE,dropzone:NU,grid:Me(N0(ot("grid"))),iframe:PU,input:LU,listbox:UU,selectbox:fZ,sizeinput:o,slider:u,textarea:N,urlinput:He,customeditor:MU,htmlpanel:cI,imagepreview:IU,collection:RE,label:Me(mZ(ot("label"))),table:C,tree:be,panel:xt})),ke=[Fr,ye("classes",[]),Qc("items",Ee)],xt=Me(ke),Ft=[Kx("tab"),hO,Qc("items",Ee)],Qt=[Fr,Eb("tabs",Ft)],On=Me(Qt),Kn=U3,Ro=Z3,cs=Me([br("title"),Pc("body",wi("type",{panel:xt,tabpanel:On})),Ha("size","normal"),Qc("buttons",Ro),ye("initialData",{}),Ir("onAction",re),Ir("onChange",re),Ir("onSubmit",re),Ir("onClose",re),Ir("onCancel",re),Ir("onTabChange",re)]),wr=t=>En("dialog",cs,t),zc=Me([qi("type",["cancel","custom"]),...Kn]),Ma=Me([br("title"),br("url"),Gf("height"),Gf("width"),qf("buttons",zc),Ir("onAction",re),Ir("onCancel",re),Ir("onClose",re),Ir("onMessage",re)]),st=t=>En("dialog",Ma,t),Mt=t=>Bt(t)?[t].concat(Ie(zr(t),Mt)):Ln(t)?Ie(t,Mt):[],io=t=>kt(t.type)&&kt(t.name),yt={checkbox:nI,colorinput:NE,colorpicker:sI,dropzone:aI,input:FU,iframe:$U,imagepreview:B0,selectbox:e,sizeinput:r,slider:f,listbox:lI,size:r,textarea:R,urlinput:gt,customeditor:gp,collection:M0,togglemenuitem:xU},Kt=t=>O.from(yt[t.type]),nn=t=>Sn(Mt(t),io),Ct=t=>{const s=nn(t),a=Ie(s,l=>Kt(l).fold(()=>[],d=>[Pc(l.name,d)]));return Me(a)},Hn=t=>{var s;const a=vl(wr(t)),l=Ct(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:d}},Mn={open:(t,s)=>{const a=Hn(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=vl(st(s));return t(a)},redial:t=>Hn(t)};var Ns=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,d)=>{t.updateState.each(g=>{const p=g(l,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?DD:AD)(l,p)})};return ds([je(Gs(),(l,d)=>{const g=d;if(!g.universal){const p=t.channel;So(g.channels,p)&&a(l,g.data)}}),qs((l,d)=>{t.initialData.each(g=>{a(l,g)})})])}}),go=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Hr=[Ue("channel"),po("renderComponents"),po("updateState"),po("initialData"),tc("reuseDom",!0)],lr=Object.freeze({__proto__:null,init:()=>{const t=S(O.none()),s=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Fo=Wa({fields:Hr,name:"reflecting",active:Ns,apis:go,state:lr}),Bs=t=>{const s=[],a={};return Ko(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?at.error(s):at.value(a)},Jr=(t,s,a)=>{const l=Do(i0.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ne(t.items,g=>i4(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:nt([zt.config({mode:"acyclic",useTabstopAt:ze(g2)}),Ni.memento(l),gu.memento(l,{postprocess:d=>Bs(d).fold(g=>(console.error(g),{}),cn)})])}},ed=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:px(t.action),behaviours:Yr(t.tabButtonBehaviours,[on.config({}),zt.config({mode:"execution",useSpace:!0,useEnter:!0}),St.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Uc=ar({name:"TabButton",configFields:[ye("uid",void 0),Ue("value"),Ao("dom","dom",wd(()=>({attributes:{role:"tab",id:Ot("aria"),"aria-selected":"false"}})),Sa()),po("action"),ye("domModification",{}),Oa("tabButtonBehaviours",[on,zt,St]),Ue("view")],factory:ed}),Fm=Q([Ue("tabs"),Ue("dom"),ye("clickToDismiss",!1),Oa("tabbarBehaviours",[lo,zt]),sg(["tabClass","selectedClass"])]),bu=wf({factory:Uc,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{lo.dehighlight(l,d),Wt(l,ew(),{tabbar:l,button:d})},a=(l,d)=>{lo.highlight(l,d),Wt(l,ey(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=lo.isHighlighted(d,l);(()=>g&&t.clickToDismiss?s:g?re:a)()(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),mb=Q([bu]),fb=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Yr(t.tabbarBehaviours,[lo.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{bn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{bn(g.element,"aria-selected","false")}}),zt.config({mode:"flow",getInitial:d=>lo.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Gd=Or({name:"Tabbar",configFields:Fm(),partFields:mb(),factory:fb}),qd=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Yr(t.tabviewBehaviours,[un.config({})]),domModification:{attributes:{role:"tabpanel"}}}),ga=ar({name:"Tabview",configFields:[Oa("tabviewBehaviours",[un])],factory:qd}),td=Q([ye("selectFirst",!0),qn("onChangeTab"),qn("onDismissTab"),ye("tabs",[]),Oa("tabSectionBehaviours",[])]),Hm=Aa({factory:Gd,schema:[Ue("dom"),Ru("markers",[Ue("tabClass"),Ue("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),nd=Aa({factory:ga,name:"tabview"}),od=Q([Hm,nd]),Pf=(t,s,a,l)=>{const d=p=>{const y=St.getValue(p);as(p,t,"tabview").each(x=>{an(t.tabs,D=>D.value===y).each(D=>{const B=D.view();P(p.element,"id").each(I=>{bn(x.element,"aria-labelledby",I)}),un.set(x,B),t.onChangeTab(x,p,B)})})},g=(p,y)=>{as(p,t,"tabbar").each(x=>{y(x).each(kd)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:_i(t.tabSectionBehaviours),events:ds(Vt([t.selectFirst?[qs((p,y)=>{g(p,lo.getFirst)})]:[],[je(ey(),(p,y)=>{const x=y.event.button;d(x)}),je(ew(),(p,y)=>{const x=y.event.button;t.onDismissTab(p,x)})]])),apis:{getViewItems:p=>as(p,t,"tabview").map(y=>un.contents(y)).getOr([]),showTab:(p,y)=>{g(p,_=>{const D=lo.getCandidates(_);return an(D,I=>St.getValue(I)===y).filter(I=>!lo.isHighlighted(_,I))})}}}},Na=Or({name:"TabSection",configFields:td(),partFields:od(),factory:Pf,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),zg=(t,s,a)=>Ne(t,(l,d)=>{un.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return un.set(a,[]),g.height}),$f=t=>Dr(ll(t,(s,a)=>s>a?-1:s<a?1:0)),Kd=(t,s,a)=>{const l=fi(t).dom,d=Cl(t,".tox-dialog-wrap").getOr(t),g=Ze(d,"position")==="fixed";let p;g?p=Math.max(l.clientHeight,window.innerHeight):p=Math.max(l.offsetHeight,l.scrollHeight);const y=hr(s),_=s.dom.offsetLeft>=a.dom.offsetLeft+ya(a)?Math.max(hr(a),y):y,D=parseInt(Ze(t,"margin-top"),10)||0,B=parseInt(Ze(t,"margin-bottom"),10)||0,H=hr(t)+D+B-_;return p-H},hp=(t,s)=>{Dr(t).each(a=>Na.showTab(s,a.value))},$0=(t,s)=>{_t(t,"height",s+"px"),_t(t,"flex-basis",s+"px")},I0=(t,s,a)=>{Cl(t,'[role="dialog"]').each(l=>{Hs(l,'[role="tablist"]').each(d=>{a.get().map(g=>(_t(s,"height","0"),_t(s,"flex-basis","0"),Math.min(g,Kd(l,s,d)))).each(g=>{$0(s,g)})})})},L0=t=>Hs(t,'[role="tabpanel"]'),G3=t=>{const s=Bo();return{extraEvents:[qs(d=>{const g=d.element;L0(g).each(p=>{_t(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(y=>{const x=zg(t,p,y);$f(x).fold(s.clear,s.set)}),I0(g,p,s),Vn(p,"visibility"),hp(t,d),requestAnimationFrame(()=>{I0(g,p,s)})})}),je(Xf(),d=>{const g=d.element;L0(g).each(p=>{I0(g,p,s)})}),je(hN,(d,g)=>{const p=d.element;L0(p).each(y=>{const x=Bd(_e(y));_t(y,"visibility","hidden");const _=As(y,"height").map(I=>parseInt(I,10));Vn(y,"height"),Vn(y,"flex-basis");const D=y.dom.getBoundingClientRect().height;_.forall(I=>D>I)?(s.set(D),I0(p,y,s)):_.each(I=>{$0(y,I)}),Vn(y,"visibility"),x.each(eu)})})],selectFirst:!1}},$E="send-data-to-section",q3="send-data-to-view",Vm=(t,s,a)=>{const l=S({}),d=_=>{const D=St.getValue(_),B=Bs(D).getOr({}),I=l.get(),H=Yo(I,B);l.set(H)},g=_=>{const D=l.get();St.setValue(_,D)},p=S(null),y=Ne(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Fs(a.shared.providers.translate(_.title))],view:()=>[i0.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Ne(_.items,B=>i4(D,B,s,a)),formBehaviours:nt([zt.config({mode:"acyclic",useTabstopAt:ze(g2)}),kn("TabView.form.events",[qs(g),el(d)]),kr.config({channels:fo([{key:$E,value:{onReceive:d}},{key:q3,value:{onReceive:g}}])})])}))]})),x=G3(y);return Na.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,B)=>{const I=St.getValue(D);Wt(_,gN,{name:I,oldName:p.get()}),p.set(I)},tabs:y,components:[Na.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Gd.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:nt([cr.config({})])}),Na.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:nt([kn("tabpanel",x.extraEvents),zt.config({mode:"acyclic"}),Un.config({find:_=>Dr(Na.getViewItems(_))}),gu.withComp(O.none(),_=>(_.getSystem().broadcastOn([$E],{}),l.get()),(_,D)=>{l.set(D),_.getSystem().broadcastOn([q3],{})})])})},pp=Ot("update-dialog"),Se=Ot("update-title"),xe=Ot("update-body"),rt=Ot("update-footer"),Xe=Ot("body-send-message"),Zt=(t,s,a,l,d)=>{const g=x=>{const _=x.body;switch(_.type){case"tabpanel":return[Vm(_,x.initialData,l)];default:return[Jr(_,x.initialData,l)]}},p=(x,_)=>O.some({isTabPanel:()=>_.body.type==="tabpanel"}),y={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:J(J({},a.map(x=>({id:x})).getOr({})),d?y:{})},components:[],behaviours:nt([Ni.childAt(0),Fo.config({channel:`${xe}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},uo=(t,s,a,l,d)=>Zt(t,s,O.some(a),l,d),ws=(t,s,a)=>{const l=Zt(t,s,O.none(),a,!1);return Xr.parts.body(l)},Ss=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[oB({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:nt([cr.config({}),on.config({})])})]}],behaviours:nt([zt.config({mode:"acyclic",useTabstopAt:ze(g2)})])};return Xr.parts.body(s)};function sd(t){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sd(t)}function gb(t,s){return gb=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},gb(t,s)}function iI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function U2(t,s,a){return iI()?U2=Reflect.construct:U2=function(d,g,p){var y=[null];y.push.apply(y,g);var x=Function.bind.apply(d,y),_=new x;return p&&gb(_,p.prototype),_},U2.apply(null,arguments)}function zm(t){return In(t)||Ae(t)||Nt(t)||Ar()}function In(t){if(Array.isArray(t))return fn(t)}function Ae(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nt(t,s){if(t){if(typeof t=="string")return fn(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return fn(t,s)}}function fn(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,l=new Array(s);a<s;a++)l[a]=t[a];return l}function Ar(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vu=Object.hasOwnProperty,Ul=Object.setPrototypeOf,Wl=Object.isFrozen,IE=Object.getPrototypeOf,Zl=Object.getOwnPropertyDescriptor,ui=Object.freeze,If=Object.seal,ZU=Object.create,jU=typeof Reflect!="undefined"&&Reflect,uI=jU.apply,GU=jU.construct;uI||(uI=function(s,a,l){return s.apply(a,l)}),ui||(ui=function(s){return s}),If||(If=function(s){return s}),GU||(GU=function(s,a){return U2(s,zm(a))});var gj=Ug(Array.prototype.forEach),hj=Ug(Array.prototype.pop),K3=Ug(Array.prototype.push),dI=Ug(String.prototype.toLowerCase),pj=Ug(String.prototype.match),F0=Ug(String.prototype.replace),bj=Ug(String.prototype.indexOf),vj=Ug(String.prototype.trim),rd=Ug(RegExp.prototype.test),qU=yj(TypeError);function Ug(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return uI(t,s,l)}}function yj(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return GU(t,a)}}function bs(t,s){Ul&&Ul(t,null);for(var a=s.length;a--;){var l=s[a];if(typeof l=="string"){var d=dI(l);d!==l&&(Wl(s)||(s[a]=d),l=d)}t[l]=!0}return t}function W2(t){var s=ZU(null),a;for(a in t)uI(vu,t,[a])&&(s[a]=t[a]);return s}function mI(t,s){for(;t!==null;){var a=Zl(t,s);if(a){if(a.get)return Ug(a.get);if(typeof a.value=="function")return Ug(a.value)}t=IE(t)}function l(d){return console.warn("fallback value for",d),null}return l}var gZ=ui(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),KU=ui(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),YU=ui(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Cj=ui(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),XU=ui(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),wj=ui(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hZ=ui(["#text"]),pZ=ui(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),JU=ui(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bZ=ui(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fI=ui(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Sj=If(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xj=If(/<%[\w\W]*|[\w\W]*%>/gm),Tj=If(/^data-[\-\w.\u00B7-\uFFFF]/),Ej=If(/^aria-[\-\w]+$/),kj=If(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_j=If(/^(?:\w+script|data):/i),Oj=If(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Aj=If(/^html$/i),Dj=function(){return typeof window=="undefined"?null:window},Rj=function(s,a){if(sd(s)!=="object"||typeof s.createPolicy!="function")return null;var l=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(l=a.currentScript.getAttribute(d));var g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML:function(y){return y}})}catch(p){return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function vZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dj(),s=function(Re){return vZ(Re)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,l=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,y=t.Element,x=t.NodeFilter,_=t.NamedNodeMap,D=_===void 0?t.NamedNodeMap||t.MozNamedAttrMap:_,B=t.HTMLFormElement,I=t.DOMParser,H=t.trustedTypes,q=y.prototype,se=mI(q,"cloneNode"),Ce=mI(q,"nextSibling"),he=mI(q,"childNodes"),me=mI(q,"parentNode");if(typeof g=="function"){var $e=l.createElement("template");$e.content&&$e.content.ownerDocument&&(l=$e.content.ownerDocument)}var Be=Rj(H,a),ct=Be?Be.createHTML(""):"",qe=l,pt=qe.implementation,It=qe.createNodeIterator,Yn=qe.createDocumentFragment,Lt=qe.getElementsByTagName,Wn=a.importNode,Cn={};try{Cn=W2(l).documentMode?l.documentMode:{}}catch(jn){}var Zn={};s.isSupported=typeof me=="function"&&pt&&typeof pt.createHTMLDocument!="undefined"&&Cn!==9;var dn=Sj,Po=xj,bt=Tj,Pt=Ej,Tt=_j,rn=Oj,_n=kj,Xn=null,Vr=bs({},[].concat(zm(gZ),zm(KU),zm(YU),zm(XU),zm(hZ))),bo=null,Tl=bs({},[].concat(zm(pZ),zm(JU),zm(bZ),zm(fI))),ir=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ad=null,Yd=null,Wg=!0,Z2=!0,LE=!1,H0=!1,hb=!1,Y3=!1,oW=!1,FE=!1,gI=!1,hI=!1,FZ=!0,sW=!0,X3=!1,HE={},VE=null,HZ=bs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),VZ=null,zZ=bs({},["audio","video","img","source","image","track"]),rW=null,UZ=bs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),aW="http://www.w3.org/1998/Math/MathML",cW="http://www.w3.org/2000/svg",V0="http://www.w3.org/1999/xhtml",pI=V0,lW=!1,zE,sG=["application/xhtml+xml","text/html"],rG="text/html",j2,UE=null,aG=l.createElement("form"),WZ=function(Re){return Re instanceof RegExp||Re instanceof Function},iW=function(Re){UE&&UE===Re||((!Re||sd(Re)!=="object")&&(Re={}),Re=W2(Re),Xn="ALLOWED_TAGS"in Re?bs({},Re.ALLOWED_TAGS):Vr,bo="ALLOWED_ATTR"in Re?bs({},Re.ALLOWED_ATTR):Tl,rW="ADD_URI_SAFE_ATTR"in Re?bs(W2(UZ),Re.ADD_URI_SAFE_ATTR):UZ,VZ="ADD_DATA_URI_TAGS"in Re?bs(W2(zZ),Re.ADD_DATA_URI_TAGS):zZ,VE="FORBID_CONTENTS"in Re?bs({},Re.FORBID_CONTENTS):HZ,ad="FORBID_TAGS"in Re?bs({},Re.FORBID_TAGS):{},Yd="FORBID_ATTR"in Re?bs({},Re.FORBID_ATTR):{},HE="USE_PROFILES"in Re?Re.USE_PROFILES:!1,Wg=Re.ALLOW_ARIA_ATTR!==!1,Z2=Re.ALLOW_DATA_ATTR!==!1,LE=Re.ALLOW_UNKNOWN_PROTOCOLS||!1,H0=Re.SAFE_FOR_TEMPLATES||!1,hb=Re.WHOLE_DOCUMENT||!1,FE=Re.RETURN_DOM||!1,gI=Re.RETURN_DOM_FRAGMENT||!1,hI=Re.RETURN_TRUSTED_TYPE||!1,oW=Re.FORCE_BODY||!1,FZ=Re.SANITIZE_DOM!==!1,sW=Re.KEEP_CONTENT!==!1,X3=Re.IN_PLACE||!1,_n=Re.ALLOWED_URI_REGEXP||_n,pI=Re.NAMESPACE||V0,Re.CUSTOM_ELEMENT_HANDLING&&WZ(Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ir.tagNameCheck=Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&WZ(Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ir.attributeNameCheck=Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&typeof Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ir.allowCustomizedBuiltInElements=Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),zE=sG.indexOf(Re.PARSER_MEDIA_TYPE)===-1?zE=rG:zE=Re.PARSER_MEDIA_TYPE,j2=zE==="application/xhtml+xml"?function($t){return $t}:dI,H0&&(Z2=!1),gI&&(FE=!0),HE&&(Xn=bs({},zm(hZ)),bo=[],HE.html===!0&&(bs(Xn,gZ),bs(bo,pZ)),HE.svg===!0&&(bs(Xn,KU),bs(bo,JU),bs(bo,fI)),HE.svgFilters===!0&&(bs(Xn,YU),bs(bo,JU),bs(bo,fI)),HE.mathMl===!0&&(bs(Xn,XU),bs(bo,bZ),bs(bo,fI))),Re.ADD_TAGS&&(Xn===Vr&&(Xn=W2(Xn)),bs(Xn,Re.ADD_TAGS)),Re.ADD_ATTR&&(bo===Tl&&(bo=W2(bo)),bs(bo,Re.ADD_ATTR)),Re.ADD_URI_SAFE_ATTR&&bs(rW,Re.ADD_URI_SAFE_ATTR),Re.FORBID_CONTENTS&&(VE===HZ&&(VE=W2(VE)),bs(VE,Re.FORBID_CONTENTS)),sW&&(Xn["#text"]=!0),hb&&bs(Xn,["html","head","body"]),Xn.table&&(bs(Xn,["tbody"]),delete ad.tbody),ui&&ui(Re),UE=Re)},ZZ=bs({},["mi","mo","mn","ms","mtext"]),jZ=bs({},["foreignobject","desc","title","annotation-xml"]),cG=bs({},["title","style","font","a","script"]),bI=bs({},KU);bs(bI,YU),bs(bI,Cj);var uW=bs({},XU);bs(uW,wj);var lG=function(Re){var $t=me(Re);(!$t||!$t.tagName)&&($t={namespaceURI:V0,tagName:"template"});var wn=dI(Re.tagName),Qr=dI($t.tagName);return Re.namespaceURI===cW?$t.namespaceURI===V0?wn==="svg":$t.namespaceURI===aW?wn==="svg"&&(Qr==="annotation-xml"||ZZ[Qr]):!!bI[wn]:Re.namespaceURI===aW?$t.namespaceURI===V0?wn==="math":$t.namespaceURI===cW?wn==="math"&&jZ[Qr]:!!uW[wn]:Re.namespaceURI===V0?$t.namespaceURI===cW&&!jZ[Qr]||$t.namespaceURI===aW&&!ZZ[Qr]?!1:!uW[wn]&&(cG[wn]||!bI[wn]):!1},pb=function(Re){K3(s.removed,{element:Re});try{Re.parentNode.removeChild(Re)}catch($t){try{Re.outerHTML=ct}catch(wn){Re.remove()}}},vI=function(Re,$t){try{K3(s.removed,{attribute:$t.getAttributeNode(Re),from:$t})}catch(wn){K3(s.removed,{attribute:null,from:$t})}if($t.removeAttribute(Re),Re==="is"&&!bo[Re])if(FE||gI)try{pb($t)}catch(wn){}else try{$t.setAttribute(Re,"")}catch(wn){}},GZ=function(Re){var $t,wn;if(oW)Re="<remove></remove>"+Re;else{var Qr=pj(Re,/^[\r\n\t ]+/);wn=Qr&&Qr[0]}zE==="application/xhtml+xml"&&(Re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Re+"</body></html>");var Xd=Be?Be.createHTML(Re):Re;if(pI===V0)try{$t=new I().parseFromString(Xd,zE)}catch($i){}if(!$t||!$t.documentElement){$t=pt.createDocument(pI,"template",null);try{$t.documentElement.innerHTML=lW?"":Xd}catch($i){}}var yu=$t.body||$t.documentElement;return Re&&wn&&yu.insertBefore(l.createTextNode(wn),yu.childNodes[0]||null),pI===V0?Lt.call($t,hb?"html":"body")[0]:hb?$t.documentElement:yu},qZ=function(Re){return It.call(Re.ownerDocument||Re,Re,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},iG=function(Re){return Re instanceof B&&(typeof Re.nodeName!="string"||typeof Re.textContent!="string"||typeof Re.removeChild!="function"||!(Re.attributes instanceof D)||typeof Re.removeAttribute!="function"||typeof Re.setAttribute!="function"||typeof Re.namespaceURI!="string"||typeof Re.insertBefore!="function")},J3=function(Re){return sd(p)==="object"?Re instanceof p:Re&&sd(Re)==="object"&&typeof Re.nodeType=="number"&&typeof Re.nodeName=="string"},bb=function(Re,$t,wn){Zn[Re]&&gj(Zn[Re],function(Qr){Qr.call(s,$t,wn,UE)})},KZ=function(Re){var $t;if(bb("beforeSanitizeElements",Re,null),iG(Re)||rd(/[\u0080-\uFFFF]/,Re.nodeName))return pb(Re),!0;var wn=j2(Re.nodeName);if(bb("uponSanitizeElement",Re,{tagName:wn,allowedTags:Xn}),Re.hasChildNodes()&&!J3(Re.firstElementChild)&&(!J3(Re.content)||!J3(Re.content.firstElementChild))&&rd(/<[/\w]/g,Re.innerHTML)&&rd(/<[/\w]/g,Re.textContent)||wn==="select"&&rd(/<template/i,Re.innerHTML))return pb(Re),!0;if(!Xn[wn]||ad[wn]){if(!ad[wn]&&XZ(wn)&&(ir.tagNameCheck instanceof RegExp&&rd(ir.tagNameCheck,wn)||ir.tagNameCheck instanceof Function&&ir.tagNameCheck(wn)))return!1;if(sW&&!VE[wn]){var Qr=me(Re)||Re.parentNode,Xd=he(Re)||Re.childNodes;if(Xd&&Qr)for(var yu=Xd.length,$i=yu-1;$i>=0;--$i)Qr.insertBefore(se(Xd[$i],!0),Ce(Re))}return pb(Re),!0}return Re instanceof y&&!lG(Re)||(wn==="noscript"||wn==="noembed")&&rd(/<\/no(script|embed)/i,Re.innerHTML)?(pb(Re),!0):(H0&&Re.nodeType===3&&($t=Re.textContent,$t=F0($t,dn," "),$t=F0($t,Po," "),Re.textContent!==$t&&(K3(s.removed,{element:Re.cloneNode()}),Re.textContent=$t)),bb("afterSanitizeElements",Re,null),!1)},YZ=function(Re,$t,wn){if(FZ&&($t==="id"||$t==="name")&&(wn in l||wn in aG))return!1;if(!(Z2&&!Yd[$t]&&rd(bt,$t))){if(!(Wg&&rd(Pt,$t))){if(!bo[$t]||Yd[$t]){if(!(XZ(Re)&&(ir.tagNameCheck instanceof RegExp&&rd(ir.tagNameCheck,Re)||ir.tagNameCheck instanceof Function&&ir.tagNameCheck(Re))&&(ir.attributeNameCheck instanceof RegExp&&rd(ir.attributeNameCheck,$t)||ir.attributeNameCheck instanceof Function&&ir.attributeNameCheck($t))||$t==="is"&&ir.allowCustomizedBuiltInElements&&(ir.tagNameCheck instanceof RegExp&&rd(ir.tagNameCheck,wn)||ir.tagNameCheck instanceof Function&&ir.tagNameCheck(wn))))return!1}else if(!rW[$t]){if(!rd(_n,F0(wn,rn,""))){if(!(($t==="src"||$t==="xlink:href"||$t==="href")&&Re!=="script"&&bj(wn,"data:")===0&&VZ[Re])){if(!(LE&&!rd(Tt,F0(wn,rn,"")))){if(wn)return!1}}}}}}return!0},XZ=function(Re){return Re.indexOf("-")>0},JZ=function(Re){var $t,wn,Qr,Xd;bb("beforeSanitizeAttributes",Re,null);var yu=Re.attributes;if(yu){var $i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bo};for(Xd=yu.length;Xd--;){$t=yu[Xd];var yI=$t,Ii=yI.name,QZ=yI.namespaceURI;wn=Ii==="value"?$t.value:vj($t.value),Qr=j2(Ii);var dG=wn;if($i.attrName=Qr,$i.attrValue=wn,$i.keepAttr=!0,$i.forceKeepAttr=void 0,bb("uponSanitizeAttribute",Re,$i),wn=$i.attrValue,!$i.forceKeepAttr){if(!$i.keepAttr){vI(Ii,Re);continue}if(rd(/\/>/i,wn)){vI(Ii,Re);continue}H0&&(wn=F0(wn,dn," "),wn=F0(wn,Po," "));var mG=j2(Re.nodeName);if(!YZ(mG,Qr,wn)){vI(Ii,Re);continue}if(wn!==dG)try{QZ?Re.setAttributeNS(QZ,Ii,wn):Re.setAttribute(Ii,wn)}catch(nq){vI(Ii,Re)}}}bb("afterSanitizeAttributes",Re,null)}},uG=function jn(Re){var $t,wn=qZ(Re);for(bb("beforeSanitizeShadowDOM",Re,null);$t=wn.nextNode();)bb("uponSanitizeShadowNode",$t,null),!KZ($t)&&($t.content instanceof d&&jn($t.content),JZ($t));bb("afterSanitizeShadowDOM",Re,null)};return s.sanitize=function(jn,Re){var $t,wn,Qr,Xd,yu;if(lW=!jn,lW&&(jn="<!-->"),typeof jn!="string"&&!J3(jn)){if(typeof jn.toString!="function")throw qU("toString is not a function");if(jn=jn.toString(),typeof jn!="string")throw qU("dirty is not a string, aborting")}if(!s.isSupported){if(sd(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof jn=="string")return t.toStaticHTML(jn);if(J3(jn))return t.toStaticHTML(jn.outerHTML)}return jn}if(Y3||iW(Re),s.removed=[],typeof jn=="string"&&(X3=!1),X3){if(jn.nodeName){var $i=j2(jn.nodeName);if(!Xn[$i]||ad[$i])throw qU("root node is forbidden and cannot be sanitized in-place")}}else if(jn instanceof p)$t=GZ("<!---->"),wn=$t.ownerDocument.importNode(jn,!0),wn.nodeType===1&&wn.nodeName==="BODY"||wn.nodeName==="HTML"?$t=wn:$t.appendChild(wn);else{if(!FE&&!H0&&!hb&&jn.indexOf("<")===-1)return Be&&hI?Be.createHTML(jn):jn;if($t=GZ(jn),!$t)return FE?null:hI?ct:""}$t&&oW&&pb($t.firstChild);for(var yI=qZ(X3?jn:$t);Qr=yI.nextNode();)Qr.nodeType===3&&Qr===Xd||KZ(Qr)||(Qr.content instanceof d&&uG(Qr.content),JZ(Qr),Xd=Qr);if(Xd=null,X3)return jn;if(FE){if(gI)for(yu=Yn.call($t.ownerDocument);$t.firstChild;)yu.appendChild($t.firstChild);else yu=$t;return bo.shadowroot&&(yu=Wn.call(a,yu,!0)),yu}var Ii=hb?$t.outerHTML:$t.innerHTML;return hb&&Xn["!doctype"]&&$t.ownerDocument&&$t.ownerDocument.doctype&&$t.ownerDocument.doctype.name&&rd(Aj,$t.ownerDocument.doctype.name)&&(Ii="<!DOCTYPE "+$t.ownerDocument.doctype.name+`>
`+Ii),H0&&(Ii=F0(Ii,dn," "),Ii=F0(Ii,Po," ")),Be&&hI?Be.createHTML(Ii):Ii},s.setConfig=function(jn){iW(jn),Y3=!0},s.clearConfig=function(){UE=null,Y3=!1},s.isValidAttribute=function(jn,Re,$t){UE||iW({});var wn=j2(jn),Qr=j2(Re);return YZ(wn,Qr,$t)},s.addHook=function(jn,Re){typeof Re=="function"&&(Zn[jn]=Zn[jn]||[],K3(Zn[jn],Re))},s.removeHook=function(jn){if(Zn[jn])return hj(Zn[jn])},s.removeHooks=function(jn){Zn[jn]&&(Zn[jn]=[])},s.removeAllHooks=function(){Zn={}},s}var Mj=vZ();const Nj=t=>Mj().sanitize(t),Bj=P1.deviceType.isTouch(),yZ=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),CZ=(t,s)=>Xr.parts.close(Us.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:nt([cr.config({})])})),wZ=()=>Xr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),SZ=(t,s)=>Xr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ip(`<p>${Nj(s.translate(t))}</p>`)}]}]}),xZ=t=>Xr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),TZ=(t,s)=>[Mm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Mm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],QU=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return Xr.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),O.some(!0)),useTabstopAt:g=>!g2(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:J({position:"relative"},t.extraStyles)},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ip(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Bj?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:nt([on.config({}),kn("dialog-events",t.dialogEvents.concat([dh(nf(),(g,p)=>{zt.focusIn(g)})])),kn("scroll-lock",[qs(()=>{Gr(vs(),d)}),el(()=>{ms(vs(),d)})]),...t.extraBehaviours]),eventOrder:J({[Lc()]:["dialog-events"],[Ed()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Nu()]:["alloy.base.behaviour","dialog-events","scroll-lock"]},t.eventOrder)})},EZ=t=>Us.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:nt([cr.config({})]),components:[Zu("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{co(s,K1)}}),kZ=(t,s,a,l)=>{const d=g=>[Fs(l.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:J({},a.map(g=>({id:g})).getOr({}))},components:[],behaviours:nt([Fo.config({channel:`${Se}-${s}`,initialData:t,renderComponents:d})])}},_Z=()=>({dom:ip('<div class="tox-dialog__draghandle"></div>')}),Pj=(t,s,a,l)=>Mm.sketch({dom:ip('<div class="tox-dialog__header"></div>'),components:[kZ(t,s,O.some(a),l),_Z(),EZ(l)],containerBehaviours:nt([ab.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Qi(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),$j=(t,s,a)=>{const l=Xr.parts.title(kZ(t,s,O.none(),a)),d=Xr.parts.draghandle(_Z()),g=Xr.parts.close(EZ(a)),p=[l].concat(t.draggable?[d]:[]).concat([g]);return Mm.sketch({dom:ip('<div class="tox-dialog__header"></div>'),components:p})},OZ=(t,s,a)=>$j({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),AZ=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:ip('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),DZ=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{Xr.setBusy(t(),(d,g)=>AZ(l.message,g,s))},onUnblock:()=>{Xr.setIdle(t())}}),RZ=(t,s,a,l)=>{const d=(g,p)=>O.some(p);return ka(QU(We(J({},t),{firstTabstop:1,lazySink:l.shared.getSink,extraBehaviours:[Fo.config({channel:`${pp}-${t.id}`,updateState:d,initialData:s}),gu.memory({}),...t.extraBehaviours],onEscape:g=>{co(g,K1)},dialogEvents:a,eventOrder:{[Gs()]:[Fo.name(),kr.name()],[Ed()]:["scroll-lock",Fo.name(),"messages","dialog-events","alloy.base.behaviour"],[Nu()]:["alloy.base.behaviour","dialog-events","messages",Fo.name(),"scroll-lock"]}})))},eW=(t,s={})=>{const a=l=>{const d=Ne(l.items,g=>{const p=ut(s,g.name).getOr(S(!1));return We(J({},g),{storage:p})});return We(J({},l),{items:d})};return Ne(t,l=>l.type==="menu"?a(l):l)},MZ=t=>vn(t,(s,a)=>a.type==="menu"?vn(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),NZ=(t,s)=>[Pp(nf(),J8),t(s2,(a,l,d,g)=>{Bd(_e(g.element)).fold(re,ky),s.onClose(),l.onClose()}),t(K1,(a,l,d,g)=>{l.onCancel(a),co(g,s2)}),je(mA,(a,l)=>s.onUnblock()),je(dA,(a,l)=>s.onBlock(l.event))],tW={initUrlDialog:(t,s)=>{const a=(d,g)=>je(d,(p,y)=>{l(p,(x,_)=>{g(t(),x,y.event,p)})}),l=(d,g)=>{Fo.getState(d).get().each(p=>{g(p,d)})};return[...NZ(a,s),a(kf,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const l=(g,p)=>je(g,(y,x)=>{d(y,(_,D)=>{p(t(),_,x.event,y)})}),d=(g,p)=>{Fo.getState(g).get().each(y=>{p(y.internalDialog,g)})};return[...NZ(l,s),l(r2,(g,p)=>p.onSubmit(g)),l(Ri,(g,p,y)=>{p.onChange(g,{name:y.name})}),l(kf,(g,p,y,x)=>{const _=()=>zt.focusIn(x),D=H=>G(H,"disabled")||P(H,"aria-disabled").exists(q=>q==="true"),B=_e(x.element),I=Bd(B);p.onAction(g,{name:y.name,value:y.value}),Bd(B).fold(_,H=>{D(H)||I.exists(q=>Nr(H,q)&&D(q))?_():a().toOptional().filter(q=>!Nr(q.element,H)).each(_)})}),l(gN,(g,p,y)=>{p.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),el(g=>{const p=t();St.setValue(g,p.getData())})]}},Ij=(t,s)=>HT(t,t.type,s),Lj=(t,s,a)=>an(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),Fj=(t,s)=>{const a=s.map(y=>y.footerButtons).getOr([]),l=vc(a,y=>y.align==="start"),d=(y,x)=>Mm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:Ne(x,_=>_.memento.asSpec())}),g=d("start",l.pass),p=d("end",l.fail);return[g,p]},BZ=(t,s,a)=>{const l=(d,g)=>{const p=Ne(g.buttons,x=>{const _=Do(Ij(x,a));return{name:x.name,align:x.align,memento:_}}),y=x=>Lj(d,p,x);return O.some({lookupByName:y,footerButtons:p})};return{dom:ip('<div class="tox-dialog__footer"></div>'),components:[],behaviours:nt([Fo.config({channel:`${rt}-${s}`,initialData:t,updateState:l,renderComponents:Fj})])}},Hj=(t,s,a)=>BZ(t,s,a),PZ=(t,s,a)=>Xr.parts.footer(BZ(t,s,a)),$Z=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Un.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return i0.getField(l,s).orThunk(()=>{const d=t.getFooter();return Fo.getState(d).get().bind(p=>p.lookupByName(s))})}else return O.none()},Vj=(t,s)=>{const a=t.getRoot();return Fo.getState(a).get().map(l=>vl(En("data",l.dataValidator,s))).getOr(s)},IZ=(t,s,a)=>{const l=q=>{const se=t.getRoot();se.getSystem().isConnected()&&q(se)},H={getData:()=>{const q=t.getRoot(),se=q.getSystem().isConnected()?t.getFormWrapper():q,Ce=St.getValue(se),he=Qo(a,me=>me.get());return J(J({},Ce),he)},setData:q=>{l(se=>{const Ce=H.getData(),he=Yo(Ce,q),me=Vj(t,he),$e=t.getFormWrapper();St.setValue($e,me),Ko(a,(Be,ct)=>{Bn(he,ct)&&Be.set(he[ct])})})},setEnabled:(q,se)=>{$Z(t,q).each(se?Xt.enable:Xt.disable)},focus:q=>{$Z(t,q).each(on.focus)},block:q=>{if(!kt(q))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(se=>{Wt(se,dA,{message:q})})},unblock:()=>{l(q=>{co(q,mA)})},showTab:q=>{l(se=>{const Ce=t.getBody();Fo.getState(Ce).get().exists(me=>me.isTabPanel())&&Un.getCurrent(Ce).each(me=>{Na.showTab(me,q)})})},redial:q=>{l(se=>{const Ce=t.getId(),he=s(q),me=eW(he.internalDialog.buttons,a);se.getSystem().broadcastOn([`${pp}-${Ce}`],he),se.getSystem().broadcastOn([`${Se}-${Ce}`],he.internalDialog),se.getSystem().broadcastOn([`${xe}-${Ce}`],he.internalDialog),se.getSystem().broadcastOn([`${rt}-${Ce}`],We(J({},he.internalDialog),{buttons:me})),H.setData(he.initialData)})},close:()=>{l(q=>{co(q,s2)})},toggleFullscreen:t.toggleFullscreen};return H},zj=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},Uj=(t,s,a)=>{const l=Ot("dialog"),d=t.internalDialog,g=OZ(d.title,l,a),p=ws({body:d.body,initialData:d.initialData},l,a),y=eW(d.buttons),x=MZ(y),_=PZ({buttons:y},l,a),D=tW.initDialog(()=>se,DZ(()=>H,a.shared.providers,s),a.shared.getSink),B=zj(d.size),I={id:l,header:g,body:p,footer:O.some(_),extraClasses:B,extraBehaviours:[],extraStyles:{}},H=RZ(I,t,D,a),q=(()=>{const Ce=()=>{const me=Xr.getBody(H);return Un.getCurrent(me).getOr(me)},he=()=>{const me="tox-dialog--fullscreen",$e=pe.fromDom(H.element.dom);gc($e,me)?(ms($e,me),Ji($e,B)):(hc($e,B),Gr($e,me))};return{getId:Q(l),getRoot:Q(H),getBody:()=>Xr.getBody(H),getFooter:()=>Xr.getFooter(H),getFormWrapper:Ce,toggleFullscreen:he}})(),se=IZ(q,s.redial,x);return{dialog:H,instanceApi:se}},Wj=(t,s,a,l)=>{const d=Ot("dialog"),g=Ot("dialog-label"),p=Ot("dialog-content"),y=t.internalDialog,x=($e,Be)=>O.some(Be),_=Do(Pj({title:y.title,draggable:!0},d,g,a.shared.providers)),D=Do(uo({body:y.body,initialData:y.initialData},d,p,a,l)),B=eW(y.buttons),I=MZ(B),H=Do(Hj({buttons:B},d,a)),q=tW.initDialog(()=>me,{onBlock:$e=>{Bf.block(Ce,(Be,ct)=>AZ($e.message,ct,a.shared.providers))},onUnblock:()=>{Bf.unblock(Ce)},onClose:()=>s.closeWindow()},a.shared.getSink),se="tox-dialog-inline",Ce=ka({dom:{tag:"div",classes:["tox-dialog",se],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:p}},eventOrder:{[Gs()]:[Fo.name(),kr.name()],[Lc()]:["execute-on-form"],[Ed()]:["reflecting","execute-on-form"]},behaviours:nt([zt.config({mode:"cyclic",onEscape:$e=>(co($e,s2),O.some(!0)),useTabstopAt:$e=>!g2($e)&&(Ga($e)!=="button"||Br($e,"disabled")!=="disabled"),firstTabstop:1}),Fo.config({channel:`${pp}-${d}`,updateState:x,initialData:t}),on.config({}),kn("execute-on-form",q.concat([dh(nf(),($e,Be)=>{zt.focusIn($e)})])),Bf.config({getRoot:()=>O.some(Ce)}),un.config({}),gu.memory({})]),components:[_.asSpec(),D.asSpec(),H.asSpec()]}),he=()=>{const $e="tox-dialog--fullscreen",Be=pe.fromDom(Ce.element.dom);ym(Be,[$e])?(hc(Be,[$e]),Ji(Be,[se])):(hc(Be,[se]),Ji(Be,[$e]))},me=IZ({getId:Q(d),getRoot:Q(Ce),getFooter:()=>H.get(Ce),getBody:()=>D.get(Ce),getFormWrapper:()=>{const $e=D.get(Ce);return Un.getCurrent($e).getOr($e)},toggleFullscreen:he},s.redial,I);return{dialog:Ce,instanceApi:me}};var nW=tinymce.util.Tools.resolve("tinymce.util.URI");const Zj=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!kt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{Wt(y,dA,{message:p})})},unblock:()=>{s(p=>{co(p,mA)})},close:()=>{s(p=>{co(p,s2)})},sendMessage:p=>{s(y=>{y.getSystem().broadcastOn([Xe],p)})}}},jj=["insertContent","setContent","execCommand","close","block","unblock"],LZ=t=>Bt(t)&&jj.indexOf(t.mceAction)!==-1,Gj=t=>!LZ(t)&&Bt(t)&&Bn(t,"mceAction"),qj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=Ho(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Kj=(t,s,a,l)=>{const d=Ot("dialog"),g=OZ(t.title,d,l),p=Ss(t),y=t.buttons.bind(me=>me.length===0?O.none():O.some(PZ({buttons:me},d,l))),x=tW.initUrlDialog(()=>he,DZ(()=>Ce,l.shared.providers,s)),_=J(J({},t.height.fold(()=>({}),me=>({height:me+"px","max-height":me+"px"}))),t.width.fold(()=>({}),me=>({width:me+"px","max-width":me+"px"}))),D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new nW(t.url,{base_uri:new nW(window.location.href)}),I=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,H=Iu(),q=[kn("messages",[qs(()=>{const me=Hc(pe.fromDom(window),"message",$e=>{if(B.isSameOrigin(new nW($e.raw.origin))){const Be=$e.raw.data;LZ(Be)?qj(a,he,Be):Gj(Be)&&t.onMessage(he,Be)}});H.set(me)}),el(H.clear)]),kr.config({channels:{[Xe]:{onReceive:(me,$e)=>{Hs(me.element,"iframe").each(Be=>{const ct=Be.dom.contentWindow;Jn(ct)&&ct.postMessage($e,I)})}}}})],Ce=RZ({id:d,header:g,body:p,footer:y,extraClasses:D,extraBehaviours:q,extraStyles:_},t,x,l),he=Zj(Ce);return{dialog:Ce,instanceApi:he}},Yj=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{Xr.hide(_),d()},p=Do(HT({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),y=wZ(),x=CZ(g,s.providers),_=ka(QU({lazySink:()=>s.getSink(),header:yZ(y,x),body:SZ(l,s.providers),footer:O.some(xZ(TZ([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[je(K1,g)],eventOrder:{}}));Xr.show(_);const D=p.get(_);on.focus(D)}}},Xj=t=>{const s=t.shared;return{open:(l,d)=>{const g=I=>{Xr.hide(D),d(I)},p=Do(HT({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),y=HT({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),x=wZ(),_=CZ(()=>g(!1),s.providers),D=ka(QU({lazySink:()=>s.getSink(),header:yZ(x,_),body:SZ(l,s.providers),footer:O.some(xZ(TZ([],[y,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[je(K1,()=>g(!1)),je(r2,()=>g(!0))],eventOrder:{}}));Xr.show(D);const B=p.get(D);on.focus(B)}}},Jj=(t,s)=>vl(En("data",s,t)),Qj=t=>n2(t,".tox-alert-dialog")||n2(t,".tox-confirm-dialog"),eG=(t,s,a)=>s&&a?[]:[fa.config({contextual:{lazyContext:()=>O.some(k(pe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>t2(t,l.element).map(g=>({bounds:gT(g),optScrollEnv:O.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:va(g.element).top})})).getOrThunk(()=>({bounds:le(),optScrollEnv:O.none()}))})],tG=t=>{const s=t.editor,a=zC(s),l=Yj(t.backstages.dialog),d=Xj(t.backstages.dialog),g=(H,q,se)=>q!==void 0&&q.inline==="toolbar"?_(H,t.backstages.popup.shared.anchors.inlineDialog(),se,q.ariaAttrs):q!==void 0&&q.inline==="cursor"?_(H,t.backstages.popup.shared.anchors.cursor(),se,q.ariaAttrs):x(H,se),p=(H,q)=>y(H,q),y=(H,q)=>{const se=Ce=>{const he=Kj(Ce,{closeWindow:()=>{Xr.hide(he.dialog),q(he.instanceApi)}},s,t.backstages.dialog);return Xr.show(he.dialog),he.instanceApi};return Mn.openUrl(se,H)},x=(H,q)=>{const se=(Ce,he,me)=>{const $e=he,ct=Uj({dataValidator:me,initialData:$e,internalDialog:Ce},{redial:Mn.redial,closeWindow:()=>{Xr.hide(ct.dialog),q(ct.instanceApi)}},t.backstages.dialog);return Xr.show(ct.dialog),ct.instanceApi.setData($e),ct.instanceApi};return Mn.open(se,H)},_=(H,q,se,Ce=!1)=>{const he=(me,$e,Be)=>{const ct=Jj($e,Be),qe=Bo(),pt=t.backstages.popup.shared.header.isPositionedAtTop(),It={dataValidator:Be,initialData:ct,internalDialog:me},Yn=()=>qe.on(Zn=>{Ms.reposition(Zn),fa.refresh(Zn)}),Lt=Wj(It,{redial:Mn.redial,closeWindow:()=>{qe.on(Ms.hide),s.off("ResizeEditor",Yn),qe.clear(),se(Lt.instanceApi)}},t.backstages.popup,Ce),Wn=ka(Ms.sketch(We(J({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},pt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:nt([kn("window-manager-inline-events",[je(gm(),(Zn,dn)=>{co(Lt.dialog,K1)})]),...eG(s,a,pt)]),isExtraPart:(Zn,dn)=>Qj(dn)})));qe.set(Wn);const Cn=()=>{const Zn=s.inline?vs():pe.fromDom(s.getContainer()),dn=k(Zn);return O.some(dn)};return Ms.showWithinBounds(Wn,yl(Lt.dialog),{anchor:q},Cn),(!a||!pt)&&(fa.refresh(Wn),s.on("ResizeEditor",Yn)),Lt.instanceApi.setData(ct),zt.focusIn(Lt.dialog),Lt.instanceApi};return Mn.open(he,H)};return{open:g,openUrl:p,alert:(H,q)=>{l.open(H,q)},close:H=>{H.close()},confirm:(H,q)=>{d.open(H,q)}}},nG=t=>{cR(t),EF(t),S5(t)};var oG=()=>{lt.add("silver",t=>{nG(t);let s=()=>le();const{dialogs:a,popups:l,renderUI:d}=X5(t,{getPopupSinkBounds:()=>s()}),g=()=>Q3(this,null,function*(){const x=yield d();return t2(t,l.getMothership().element).each(D=>{s=()=>gT(D)}),x});d6.register(t,l.backstage.shared);const p=tG({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),y=()=>yL(t,{backstage:l.backstage},l.getMothership());return{renderUI:g,getWindowManagerImpl:Q(p),getNotificationManagerImpl:y}})};oG()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var it=tinymce.util.Tools.resolve("tinymce.ModelManager");const en=(i,m,h)=>{var v;return h(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},Yt=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&en(i,String,(h,v)=>v.isPrototypeOf(h))?"string":m},sn=i=>m=>Yt(m)===i,An=i=>m=>typeof m===i,eo=i=>m=>i===m,ao=sn("string"),kt=sn("object"),Bt=sn("array"),xs=eo(null),Ln=An("boolean"),Ts=eo(void 0),Ho=i=>i==null,Nn=i=>!Ho(i),Mo=An("function"),Jn=An("number"),dt=()=>{},ur=(i,m)=>(...h)=>i(m.apply(null,h)),Qe=(i,m)=>h=>i(m(h)),re=i=>()=>i,Ut=i=>i,Ba=(i,m)=>i===m;function Fn(i,...m){return(...h)=>{const v=m.concat(h);return i.apply(null,v)}}const Q=i=>m=>!i(m),cn=i=>()=>{throw new Error(i)},Go=i=>i(),Jt=re(!1),ze=re(!0);class ue{constructor(m,h){this.tag=m,this.value=h}static some(m){return new ue(!0,m)}static none(){return ue.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ue.some(m(this.value)):ue.none()}bind(m){return this.tag?m(this.value):ue.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ue.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m!=null?m:"Called getOrDie on None")}static from(m){return Nn(m)?ue.some(m):ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ue.singletonNone=new ue(!1);const Ps=Array.prototype.slice,et=Array.prototype.indexOf,Fe=Array.prototype.push,O=(i,m)=>et.call(i,m),gn=(i,m)=>O(i,m)>-1,Ge=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];if(m(T,h))return!0}return!1},Dn=(i,m)=>{const h=[];for(let v=0;v<i;v++)h.push(m(v));return h},Ht=(i,m)=>{const h=i.length,v=new Array(h);for(let T=0;T<h;T++){const A=i[T];v[T]=m(A,T)}return v},Ve=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];m(T,h)}},So=(i,m)=>{for(let h=i.length-1;h>=0;h--){const v=i[h];m(v,h)}},qo=(i,m)=>{const h=[],v=[];for(let T=0,A=i.length;T<A;T++){const $=i[T];(m($,T)?h:v).push($)}return{pass:h,fail:v}},xo=(i,m)=>{const h=[];for(let v=0,T=i.length;v<T;v++){const A=i[v];m(A,v)&&h.push(A)}return h},nr=(i,m,h)=>(So(i,(v,T)=>{h=m(h,v,T)}),h),Ne=(i,m,h)=>(Ve(i,(v,T)=>{h=m(h,v,T)}),h),mt=(i,m,h)=>{for(let v=0,T=i.length;v<T;v++){const A=i[v];if(m(A,v))return ue.some(A);if(h(A,v))break}return ue.none()},V=(i,m)=>mt(i,m,Jt),vc=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];if(m(T,h))return ue.some(h)}return ue.none()},Sn=i=>{const m=[];for(let h=0,v=i.length;h<v;++h){if(!Bt(i[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+i);Fe.apply(m,i[h])}return m},Ws=(i,m)=>Sn(Ht(i,m)),vn=(i,m)=>{for(let h=0,v=i.length;h<v;++h){const T=i[h];if(m(T,h)!==!0)return!1}return!0},cd=i=>{const m=Ps.call(i,0);return m.reverse(),m},an=(i,m)=>{const h={};for(let v=0,T=i.length;v<T;v++){const A=i[v];h[String(A)]=m(A,v)}return h},Xo=(i,m)=>{const h=Ps.call(i,0);return h.sort(m),h},Vt=(i,m)=>m>=0&&m<i.length?ue.some(i[m]):ue.none(),Ie=i=>Vt(i,0),ac=i=>Vt(i,i.length-1),Sr=(i,m)=>{for(let h=0;h<i.length;h++){const v=m(i[h],h);if(v.isSome())return v}return ue.none()},jt=Object.keys,cl=Object.hasOwnProperty,Jo=(i,m)=>{const h=jt(i);for(let v=0,T=h.length;v<T;v++){const A=h[v],$=i[A];m($,A)}},ll=(i,m)=>us(i,(h,v)=>({k:v,v:m(h,v)})),us=(i,m)=>{const h={};return Jo(i,(v,T)=>{const A=m(v,T);h[A.k]=A.v}),h},Dr=i=>(m,h)=>{i[h]=m},Wc=(i,m,h,v)=>{Jo(i,(T,A)=>{(m(T,A)?h:v)(T,A)})},ea=(i,m)=>{const h={};return Wc(i,m,Dr(h),dt),h},Es=(i,m)=>{const h=[];return Jo(i,(v,T)=>{h.push(m(v,T))}),h},Vo=i=>Es(i,Ut),di=(i,m)=>Ko(i,m)?ue.from(i[m]):ue.none(),Ko=(i,m)=>cl.call(i,m),Qo=(i,m)=>Ko(i,m)&&i[m]!==void 0&&i[m]!==null,No=i=>{for(const m in i)if(cl.call(i,m))return!1;return!0},To=typeof window!="undefined"?window:Function("return this;")(),$s=(i,m)=>{let h=m!=null?m:To;for(let v=0;v<i.length&&h!==void 0&&h!==null;++v)h=h[i[v]];return h},dr=(i,m)=>{const h=i.split(".");return $s(h,m)},cc=(i,m)=>dr(i,m),Rr=(i,m)=>{const h=cc(i,m);if(h==null)throw new Error(i+" not available on this browser");return h},Is=Object.getPrototypeOf,zr=i=>Rr("HTMLElement",i),ut=i=>{const m=dr("ownerDocument.defaultView",i);return kt(i)&&(zr(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(Is(i).constructor.name))},Bn=8,Pa=9,Ks=11,El=1,il=3,$o=i=>i.dom.nodeName.toLowerCase(),yc=i=>i.dom.nodeType,lc=i=>m=>yc(m)===i,vo=i=>yc(i)===Bn||$o(i)==="#comment",tn=i=>Ur(i)&&ut(i.dom),Ur=lc(El),Cc=lc(il),wc=lc(Pa),Sc=lc(Ks),ks=i=>m=>Ur(m)&&$o(m)===i,or=(i,m,h)=>{if(ao(h)||Ln(h)||Jn(h))i.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",i),new Error("Attribute value was not simple")},es=(i,m,h)=>{or(i.dom,m,h)},mr=(i,m)=>{const h=i.dom;Jo(m,(v,T)=>{or(h,T,v)})},xc=(i,m)=>{Jo(m,(h,v)=>{h.fold(()=>{ns(i,v)},T=>{or(i.dom,v,T)})})},ts=(i,m)=>{const h=i.dom.getAttribute(m);return h===null?void 0:h},ha=(i,m)=>ue.from(ts(i,m)),ns=(i,m)=>{i.dom.removeAttribute(m)},fr=i=>Ne(i.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),Tc=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,i),new Error(T)}return ta(v.childNodes[0])},mi=(i,m)=>{const v=(m||document).createElement(i);return ta(v)},Zc=(i,m)=>{const v=(m||document).createTextNode(i);return ta(v)},ta=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},pe={fromHtml:Tc,fromTag:mi,fromText:Zc,fromDom:ta,fromPoint:(i,m,h)=>ue.from(i.dom.elementFromPoint(m,h)).map(ta)},Mr=(i,m)=>{const h=i.dom;if(h.nodeType!==El)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},jl=i=>i.nodeType!==El&&i.nodeType!==Pa&&i.nodeType!==Ks||i.childElementCount===0,ul=(i,m)=>{const h=m===void 0?document:m.dom;return jl(h)?[]:Ht(h.querySelectorAll(i),pe.fromDom)},Cu=(i,m)=>{const h=m===void 0?document:m.dom;return jl(h)?ue.none():ue.from(h.querySelector(i)).map(pe.fromDom)},Oo=(i,m)=>i.dom===m.dom,Jd=(i,m)=>{const h=i.dom,v=m.dom;return h===v?!1:h.contains(v)},Li=Mr,dl=i=>pe.fromDom(i.dom.ownerDocument),pa=i=>wc(i)?i:dl(i),_s=i=>pe.fromDom(pa(i).dom.documentElement),Io=i=>pe.fromDom(pa(i).dom.defaultView),ml=i=>ue.from(i.dom.parentNode).map(pe.fromDom),Ga=i=>ue.from(i.dom.parentElement).map(pe.fromDom),Ec=(i,m)=>{const h=Mo(m)?m:Jt;let v=i.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const A=v.parentNode,$=pe.fromDom(A);if(T.push($),h($)===!0)break;v=A}return T},kl=i=>ue.from(i.dom.previousSibling).map(pe.fromDom),_l=i=>ue.from(i.dom.nextSibling).map(pe.fromDom),mo=i=>Ht(i.dom.childNodes,pe.fromDom),ba=(i,m)=>{const h=i.dom.childNodes;return ue.from(h[m]).map(pe.fromDom)},jc=i=>ba(i,0),kc=(i,m)=>{ml(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},$a=(i,m)=>{_l(i).fold(()=>{ml(i).each(T=>{ls(T,m)})},v=>{kc(v,m)})},sr=(i,m)=>{jc(i).fold(()=>{ls(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},ls=(i,m)=>{i.dom.appendChild(m.dom)},ld=(i,m,h)=>{ba(i,h).fold(()=>{ls(i,m)},v=>{kc(v,m)})},Fi=(i,m)=>{kc(i,m),ls(m,i)},Eo=(i,m)=>{Ve(m,(h,v)=>{const T=v===0?i:m[v-1];$a(T,h)})},Nr=(i,m)=>{Ve(m,h=>{ls(i,h)})},na=i=>{i.dom.textContent="",Ve(mo(i),m=>{Os(m)})},Os=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},fi=i=>{const m=mo(i);m.length>0&&Eo(i,m),Os(i)},qa=(i,m)=>pe.fromDom(i.dom.cloneNode(m)),oa=i=>qa(i,!1),ic=i=>qa(i,!0),Hi=(i,m)=>{const h=pe.fromTag(m),v=fr(i);return mr(h,v),h},gi=(i,m)=>{const h=Hi(i,m),v=mo(ic(i));return Nr(h,v),h},wu=(i,m)=>{const h=Hi(i,m);$a(i,h);const v=mo(i);return Nr(h,v),Os(i),h},sa=["tfoot","thead","tbody","colgroup"],Gc=i=>gn(sa,i),hi=(i,m)=>({rows:i,columns:m}),fl=(i,m)=>({row:i,column:m}),Vi=(i,m,h)=>({element:i,rowspan:m,colspan:h}),Z=(i,m,h,v)=>({element:i,rowspan:m,colspan:h,isNew:v}),ce=(i,m,h,v,T,A)=>({element:i,rowspan:m,colspan:h,row:v,column:T,isLocked:A}),ge=(i,m,h)=>({element:i,cells:m,section:h}),_e=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),Ke=(i,m,h)=>({element:i,isNew:m,isLocked:h}),Gt=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),ko=(i,m,h,v)=>({startRow:i,startCol:m,finishRow:h,finishCol:v}),Ys=(i,m,h)=>({element:i,colspan:m,column:h}),to=(i,m)=>({element:i,columns:m}),Xs=i=>Sc(i)&&Nn(i.dom.host),no=Mo(Element.prototype.attachShadow)&&Mo(Node.prototype.getRootNode),vs=re(no),_c=no?i=>pe.fromDom(i.dom.getRootNode()):pa,uc=i=>{const m=_c(i);return Xs(m)?ue.some(m):ue.none()},bn=i=>pe.fromDom(i.dom.host),so=i=>{if(vs()&&Nn(i.target)){const m=pe.fromDom(i.target);if(Ur(m)&&Br(m)&&i.composed&&i.composedPath){const h=i.composedPath();if(h)return Ie(h)}}return ue.from(i.target)},Br=i=>Nn(i.dom.shadowRoot),P=i=>{const m=Cc(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return uc(pe.fromDom(m)).fold(()=>h.body.contains(m),Qe(P,bn))},G=()=>te(pe.fromDom(document)),te=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return pe.fromDom(m)},Te=(i,m,h)=>xo(Ec(i,h),m),wt=(i,m)=>xo(mo(i),m),xn=(i,m)=>{let h=[];return Ve(mo(i),v=>{m(v)&&(h=h.concat([v])),h=h.concat(xn(v,m))}),h},_t=(i,m,h)=>Te(i,v=>Mr(v,m),h),rr=(i,m)=>wt(i,h=>Mr(h,m)),xr=(i,m)=>ul(m,i);var Ze=(i,m,h,v,T)=>i(h,v)?ue.some(h):Mo(T)&&T(h)?ue.none():m(h,v,T);const gr=(i,m,h)=>{let v=i.dom;const T=Mo(h)?h:Jt;for(;v.parentNode;){v=v.parentNode;const A=pe.fromDom(v);if(m(A))return ue.some(A);if(T(A))break}return ue.none()},As=(i,m,h)=>Ze((T,A)=>A(T),gr,i,m,h),Pr=(i,m)=>{const h=T=>m(pe.fromDom(T));return V(i.dom.childNodes,h).map(pe.fromDom)},Wm=(i,m)=>{const h=v=>{for(let T=0;T<v.childNodes.length;T++){const A=pe.fromDom(v.childNodes[T]);if(m(A))return ue.some(A);const $=h(v.childNodes[T]);if($.isSome())return $}return ue.none()};return h(i.dom)},Vn=(i,m,h)=>gr(i,v=>Mr(v,m),h),Gl=(i,m)=>Pr(i,h=>Mr(h,m)),Ia=(i,m)=>Cu(m,i),Js=(i,m,h)=>Ze((T,A)=>Mr(T,A),Vn,i,m,h),hr=(i,m,h=Ba)=>i.exists(v=>h(v,m)),ql=i=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(h);return m},vb=(i,m)=>i!=null?m(i):ue.none(),Lf=(i,m)=>i?ue.some(m):ue.none(),ys=(i,m,h)=>m===""||i.length>=m.length&&i.substr(h,h+m.length)===m,pr=(i,m,h=0,v)=>{const T=i.indexOf(m,h);return T!==-1?Ts(v)?!0:T+m.length<=v:!1},Su=(i,m)=>ys(i,m,0),va=(i,m)=>ys(i,m,i.length-m.length),Qd=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),zo=i=>i.length>0,ya=i=>{const m=parseFloat(i);return isNaN(m)?ue.none():ue.some(m)},Wr=i=>i.style!==void 0&&Mo(i.style.getPropertyValue),em=(i,m,h)=>{if(!ao(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",i),new Error("CSS value must be a string: "+h);Wr(i)&&i.style.setProperty(m,h)},Ui=(i,m)=>{Wr(i)&&i.style.removeProperty(m)},Uo=(i,m,h)=>{const v=i.dom;em(v,m,h)},La=(i,m)=>{const h=i.dom;Jo(m,(v,T)=>{em(h,T,v)})},gl=(i,m)=>{const h=i.dom,T=window.getComputedStyle(h).getPropertyValue(m);return T===""&&!P(i)?id(h,m):T},id=(i,m)=>Wr(i)?i.style.getPropertyValue(m):"",Kl=(i,m)=>{const h=i.dom,v=id(h,m);return ue.from(v).filter(T=>T.length>0)},Oc=(i,m)=>{const h=i.dom;Ui(h,m),hr(ha(i,"style").map(Qd),"")&&ns(i,"style")},Qs=(i,m)=>{const h=i.dom,v=m.dom;Wr(h)&&Wr(v)&&(v.style.cssText=h.style.cssText)},Ca=(i,m,h=0)=>ha(i,m).map(v=>parseInt(v,10)).getOr(h),Ka=(i,m)=>Ca(i,m,1),Ac=i=>ks("col")(i)?Ca(i,"span",1)>1:Ka(i,"colspan")>1,ra=i=>Ka(i,"rowspan")>1,Ls=(i,m)=>parseInt(gl(i,m),10),dc=re(10),tm=re(10),Wi=(i,m)=>Zi(i,m,ze),Zi=(i,m,h)=>Ws(mo(i),v=>Mr(v,m)?h(v)?[v]:[]:Zi(v,m,h)),Zm=(i,m,h=Jt)=>{if(h(m))return ue.none();if(gn(i,$o(m)))return ue.some(m);const v=T=>Mr(T,"table")||h(T);return Vn(m,i.join(","),v)},qc=(i,m)=>Zm(["td","th"],i,m),ji=i=>Wi(i,"th,td"),ud=i=>Mr(i,"colgroup")?rr(i,"col"):Ws(xu(i),m=>rr(m,"col")),Zs=(i,m)=>Js(i,"table",m),nm=i=>Wi(i,"tr"),xu=i=>Zs(i).fold(re([]),m=>rr(m,"colgroup")),Tu=(i,m)=>Ht(i,h=>{if($o(h)==="colgroup"){const v=Ht(ud(h),T=>{const A=Ca(T,"span",1);return Vi(T,1,A)});return ge(h,v,"colgroup")}else{const v=Ht(ji(h),T=>{const A=Ca(T,"rowspan",1),$=Ca(T,"colspan",1);return Vi(T,A,$)});return ge(h,v,m(h))}}),dd=i=>ml(i).map(m=>{const h=$o(m);return Gc(h)?h:"tbody"}).getOr("tbody"),md=i=>{const m=nm(i),v=[...xu(i),...m];return Tu(v,dd)},fd=(i,m)=>Tu(i,()=>m),Eu=i=>{let m=!1,h;return(...v)=>(m||(m=!0,h=i.apply(null,v)),h)},jm=(i,m,h,v)=>{const T=i.isiOS()&&/ipad/i.test(h)===!0,A=i.isiOS()&&!T,$=i.isiOS()||i.isAndroid(),U=$||v("(pointer:coarse)"),K=T||!A&&$&&v("(min-device-width:768px)"),oe=A||$&&!K,ve=m.isSafari()&&i.isiOS()&&/safari/i.test(h)===!1,Ye=!oe&&!K&&!ve;return{isiPad:re(T),isiPhone:re(A),isTablet:re(K),isPhone:re(oe),isTouch:re(U),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:re(ve),isDesktop:re(Ye)}},Gm=(i,m)=>{for(let h=0;h<i.length;h++){const v=i[h];if(v.test(m))return v}},Gi=(i,m)=>{const h=Gm(i,m);if(!h)return{major:0,minor:0};const v=T=>Number(m.replace(h,"$"+T));return gd(v(1),v(2))},vp=(i,m)=>{const h=String(m).toLowerCase();return i.length===0?ne():Gi(i,h)},ne=()=>gd(0,0),gd=(i,m)=>({major:i,minor:m}),Ya={nu:gd,detect:vp,unknown:ne},Ff=(i,m)=>Sr(m.brands,h=>{const v=h.brand.toLowerCase();return V(i,T=>{var A;return v===((A=T.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(T=>({current:T.name,version:Ya.nu(parseInt(h.version,10),0)}))}),yp=(i,m)=>{const h=String(m).toLowerCase();return V(i,v=>v.search(h))},Cp=(i,m)=>yp(i,m).map(h=>{const v=Ya.detect(h.versionRegexes,m);return{current:h.name,version:v}}),ho=(i,m)=>yp(i,m).map(h=>{const v=Ya.detect(h.versionRegexes,m);return{current:h.name,version:v}}),hl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Fa=i=>m=>pr(m,i),Dc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>pr(i,"edge/")&&pr(i,"chrome")&&pr(i,"safari")&&pr(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,hl],search:i=>pr(i,"chrome")&&!pr(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>pr(i,"msie")||pr(i,"trident")},{name:"Opera",versionRegexes:[hl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Fa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Fa("firefox")},{name:"Safari",versionRegexes:[hl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(pr(i,"safari")||pr(i,"mobile/"))&&pr(i,"applewebkit")}],Zg=[{name:"Windows",search:Fa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>pr(i,"iphone")||pr(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Fa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Fa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Fa("linux"),versionRegexes:[]},{name:"Solaris",search:Fa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Fa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Fa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],pi={browsers:re(Dc),oses:re(Zg)},Kc="Edge",om="Chromium",Hf="IE",jg="Opera",mc="Firefox",hd="Safari",Gg=()=>Rc({current:void 0,version:Ya.unknown()}),Rc=i=>{const m=i.current,h=i.version,v=T=>()=>m===T;return{current:m,version:h,isEdge:v(Kc),isChromium:v(om),isIE:v(Hf),isOpera:v(jg),isFirefox:v(mc),isSafari:v(hd)}},Zr={unknown:Gg,nu:Rc,edge:re(Kc),chromium:re(om),ie:re(Hf),opera:re(jg),firefox:re(mc),safari:re(hd)},pd="Windows",bd="iOS",pl="Android",Xa="Linux",qm="macOS",Km="Solaris",Ym="FreeBSD",Xm="ChromeOS",Ol=()=>sm({current:void 0,version:Ya.unknown()}),sm=i=>{const m=i.current,h=i.version,v=T=>()=>m===T;return{current:m,version:h,isWindows:v(pd),isiOS:v(bd),isAndroid:v(pl),isMacOS:v(qm),isLinux:v(Xa),isSolaris:v(Km),isFreeBSD:v(Ym),isChromeOS:v(Xm)}},qg={unknown:Ol,nu:sm,windows:re(pd),ios:re(bd),android:re(pl),linux:re(Xa),macos:re(qm),solaris:re(Km),freebsd:re(Ym),chromeos:re(Xm)},Kg={detect:(i,m,h)=>{const v=pi.browsers(),T=pi.oses(),A=m.bind(K=>Ff(v,K)).orThunk(()=>Cp(v,i)).fold(Zr.unknown,Zr.nu),$=ho(T,i).fold(qg.unknown,qg.nu),U=jm($,A,i,h);return{browser:A,os:$,deviceType:U}}},rm=i=>window.matchMedia(i).matches;let Vf=Eu(()=>Kg.detect(navigator.userAgent,ue.from(navigator.userAgentData),rm));const bi=()=>Vf(),zf=(i,m)=>{const h=(U,K)=>{if(!Jn(K)&&!K.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+K);const oe=U.dom;Wr(oe)&&(oe.style[i]=K+"px")},v=U=>{const K=m(U);if(K<=0||K===null){const oe=gl(U,i);return parseFloat(oe)||0}return K},T=v,A=(U,K)=>Ne(K,(oe,ve)=>{const Ye=gl(U,ve),vt=Ye===void 0?0:parseInt(Ye,10);return isNaN(vt)?oe:oe+vt},0);return{set:h,get:v,getOuter:T,aggregate:A,max:(U,K,oe)=>{const ve=A(U,oe);return K>ve?K-ve:0}}},is=(i,m)=>ya(i).getOr(m),k=(i,m,h)=>is(gl(i,m),h),M=(i,m,h,v)=>{const T=k(i,`padding-${h}`,0),A=k(i,`padding-${v}`,0),$=k(i,`border-${h}-width`,0),U=k(i,`border-${v}-width`,0);return m-T-A-$-U},z=(i,m)=>{const h=i.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:M(i,v,"left","right")},ae=i=>k(i,"height",i.dom.offsetHeight),le=i=>k(i,"width",i.dom.offsetWidth),lt=i=>z(i,"content-box"),qt=zf("width",i=>i.dom.offsetWidth),mn=i=>qt.get(i),Pn=i=>qt.getOuter(i),at=lt,_o=le,$r=(i,m,h)=>{const v=i.cells,T=v.slice(0,m),A=v.slice(m),$=T.concat(h).concat(A);return Uf(i,$)},Yc=(i,m,h)=>$r(i,m,[h]),am=(i,m,h)=>{const v=i.cells;v[m]=h},Uf=(i,m)=>Gt(i.element,m,i.section,i.isNew),Yl=(i,m)=>{const h=i.cells,v=Ht(h,m);return Gt(i.element,v,i.section,i.isNew)},Xc=(i,m)=>i.cells[m],Ja=(i,m)=>Xc(i,m).element,bl=i=>i.cells.length,aa=i=>{const m=qo(i,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},yb=(i,m,h)=>{const v=Ht(i.cells,h);return Gt(m(i.element),v,i.section,!0)},yo="data-snooker-locked-cols",ku=i=>ha(i,yo).bind(m=>ue.from(m.match(/\d+/g))).map(m=>an(m,ze)),vd=i=>{const m=Ne(aa(i).rows,(v,T)=>(Ve(T.cells,(A,$)=>{A.isLocked&&(v[$]=!0)}),v),{}),h=Es(m,(v,T)=>parseInt(T,10));return Xo(h)},js=(i,m)=>i+","+m,Cb=(i,m,h)=>ue.from(i.access[js(m,h)]),W0=(i,m,h)=>{const v=_u(i,T=>h(m,T.element));return v.length>0?ue.some(v[0]):ue.none()},_u=(i,m)=>{const h=Ws(i.all,v=>v.cells);return xo(h,m)},Yo=i=>{const m={};let h=0;return Ve(i.cells,v=>{const T=v.colspan;Dn(T,A=>{const $=h+A;m[$]=Ys(v.element,T,$)}),h+=T}),m},os=i=>{const m={},h=[],T=Ie(i).map(ft=>ft.element).bind(Zs).bind(ku).getOr({});let A=0,$=0,U=0;const{pass:K,fail:oe}=qo(i,ft=>ft.section==="colgroup");Ve(oe,ft=>{const Le=[];Ve(ft.cells,ht=>{let Pe=0;for(;m[js(U,Pe)]!==void 0;)Pe++;const Dt=Qo(T,Pe.toString()),ln=ce(ht.element,ht.rowspan,ht.colspan,U,Pe,Dt);for(let Tn=0;Tn<ht.colspan;Tn++)for(let fs=0;fs<ht.rowspan;fs++){const Da=U+fs,yr=Pe+Tn,wl=js(Da,yr);m[wl]=ln,$=Math.max($,yr+1)}Le.push(ln)}),A++,h.push(ge(ft.element,Le,ft.section)),U++});const{columns:ve,colgroups:Ye}=ac(K).map(ft=>{const Le=Yo(ft);return{colgroups:[to(ft.element,Vo(Le))],columns:Le}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:hi(A,$),access:m,all:h,columns:ve,colgroups:Ye}},zn={fromTable:i=>{const m=md(i);return os(m)},generate:os,getAt:Cb,findItem:W0,filterItems:_u,justCells:i=>Ws(i.all,m=>m.cells),justColumns:i=>Vo(i.columns),hasColumns:i=>jt(i.columns).length>0,getColumnAt:(i,m)=>ue.from(i.columns[m])},Yg=(i,m=ze)=>{const h=i.grid,v=Dn(h.columns,Ut),T=Dn(h.rows,Ut);return Ht(v,A=>wp(()=>Ws(T,oe=>zn.getAt(i,oe,A).filter(ve=>ve.column===A).toArray()),oe=>oe.colspan===1&&m(oe.element),()=>zn.getAt(i,0,A)))},wp=(i,m,h)=>{const v=i();return V(v,m).orThunk(()=>ue.from(v[0]).orThunk(h)).map($=>$.element)},Z0=i=>{const m=i.grid,h=Dn(m.rows,Ut),v=Dn(m.columns,Ut);return Ht(h,T=>wp(()=>Ws(v,K=>zn.getAt(i,T,K).filter(oe=>oe.row===T).fold(re([]),oe=>[oe])),K=>K.rowspan===1,()=>zn.getAt(i,T,0)))},j0=(i,m)=>{if(m<0||m>=i.length-1)return ue.none();const h=i[m].fold(()=>{const T=cd(i.slice(0,m));return Sr(T,(A,$)=>A.map(U=>({value:U,delta:$+1})))},T=>ue.some({value:T,delta:0})),v=i[m+1].fold(()=>{const T=i.slice(m+1);return Sr(T,(A,$)=>A.map(U=>({value:U,delta:$+1})))},T=>ue.some({value:T,delta:1}));return h.bind(T=>v.map(A=>{const $=A.delta+T.delta;return Math.abs(A.value-T.value)/$}))},Wf=(i,m)=>h=>wb(h)==="rtl"?m:i,wb=i=>gl(i,"direction")==="rtl"?"rtl":"ltr",Zf=zf("height",i=>{const m=i.dom;return P(i)?m.getBoundingClientRect().height:m.offsetHeight}),Xl=i=>Zf.get(i),Sb=i=>Zf.getOuter(i),Xg=ae,xb=(i,m)=>({left:i,top:m,translate:(v,T)=>xb(i+v,m+T)}),vi=xb,Sp=i=>{const m=i.getBoundingClientRect();return vi(m.left,m.top)},yi=(i,m)=>i!==void 0?i:m!==void 0?m:0,Jm=i=>{const m=i.dom.ownerDocument,h=m.body,v=m.defaultView,T=m.documentElement;if(h===i.dom)return vi(h.offsetLeft,h.offsetTop);const A=yi(v==null?void 0:v.pageYOffset,T.scrollTop),$=yi(v==null?void 0:v.pageXOffset,T.scrollLeft),U=yi(T.clientTop,h.clientTop),K=yi(T.clientLeft,h.clientLeft);return Tb(i).translate($-K,A-U)},Tb=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?vi(v.offsetLeft,v.offsetTop):P(i)?Sp(m):vi(0,0)},Jg=(i,m)=>({row:i,y:m}),xp=(i,m)=>({col:i,x:m}),Tp=i=>Jm(i).left+Pn(i),wa=i=>Jm(i).left,Ep=(i,m)=>xp(i,wa(m)),Er=(i,m)=>xp(i,Tp(m)),Sd=i=>Jm(i).top,Mc=(i,m)=>Jg(i,Sd(m)),Me=(i,m)=>Jg(i,Sd(m)+Sb(m)),Ci=(i,m,h)=>{if(h.length===0)return[];const v=Ht(h.slice(1),(A,$)=>A.map(U=>i($,U))),T=h[h.length-1].map(A=>m(h.length-1,A));return v.concat([T])},Al=i=>-i,Ou={delta:Ut,positions:i=>Ci(Mc,Me,i),edge:Sd},Sa=Wf({delta:Ut,edge:wa,positions:i=>Ci(Ep,Er,i)},{delta:Al,edge:Tp,positions:i=>Ci(Er,Ep,i)}),Au={delta:(i,m)=>Sa(m).delta(i,m),positions:(i,m)=>Sa(m).positions(i,m),edge:i=>Sa(i).edge(i)},Jl={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ca=(()=>{const i="[0-9]+",h="[eE]"+("[+-]?"+i),v="\\.",T=U=>`(?:${U})?`,$=`[+-]?(?:${["Infinity",i+v+T(i)+T(h),v+i+T(h),i+T(h)].join("|")})`;return new RegExp(`^(${$})(.*)$`)})(),lm=(i,m)=>Ge(m,h=>Ge(Jl[h],v=>i===v)),Je=(i,m)=>ue.from(ca.exec(i)).bind(v=>{const T=Number(v[1]),A=v[2];return lm(A,m)?ue.some({value:T,unit:A}):ue.none()}),Op=/(\d+(\.\d+)?)%/,G0=/(\d+(\.\d+)?)px|em/,Du=ks("col"),wi=(i,m,h)=>{const v=Ga(i).getOrThunk(()=>te(dl(i)));return m(i)/h(v)*100},Qg=(i,m)=>{Uo(i,"width",m+"px")},Ds=(i,m)=>{Uo(i,"width",m+"%")},Qm=(i,m)=>{Uo(i,"height",m+"px")},Si=i=>Xg(i)+"px",En=(i,m,h,v)=>{const T=Zs(i).map(A=>{const $=h(A);return Math.floor(m/100*$)}).getOr(m);return v(i,T),T},vl=(i,m,h,v)=>{const T=parseFloat(i);return va(i,"%")&&$o(m)!=="table"?En(m,T,h,v):T},Nc=i=>{const m=Si(i);return m?vl(m,i,Xl,Qm):Xl(i)},Jc=(i,m,h)=>{const v=h(i),T=Ka(i,m);return v/T},Bc=(i,m)=>Kl(i,m).orThunk(()=>ha(i,m).map(h=>h+"px")),Dl=i=>Bc(i,"width"),Ao=i=>Bc(i,"height"),Qa=i=>wi(i,mn,at),eh=i=>Du(i)?mn(i):_o(i),Ue=i=>Jc(i,"rowspan",Nc),Pc=i=>Dl(i).bind(h=>Je(h,["fixed","relative","empty"])),jf=(i,m,h)=>{Uo(i,"width",m+h)},br=i=>mn(i)+"px",qi=i=>wi(i,mn,at)+"%",Ap=i=>Dl(i).exists(m=>Op.test(m)),Ql=i=>Dl(i).exists(m=>G0.test(m)),q0=i=>Dl(i).isNone(),Ru=re(Op),Eb=ks("col"),Qc=i=>Dl(i).getOrThunk(()=>eh(i)+"px"),po=i=>Ao(i).getOrThunk(()=>Ue(i)+"px"),Ki=i=>Ht(zn.justColumns(i),m=>ue.from(m.element)),Gf=i=>{const m=bi().browser,h=m.isChromium()||m.isFirefox();return Eb(i)?h:!0},vr=(i,m,h,v,T,A)=>i.filter(v).fold(()=>A(j0(h,m)),$=>T($)),$c=(i,m,h,v)=>{const T=Yg(i),A=zn.hasColumns(i)?Ki(i):T,$=[ue.some(Au.edge(m))].concat(Ht(Au.positions(T,m),K=>K.map(oe=>oe.x))),U=Q(Ac);return Ht(A,(K,oe)=>vr(K,oe,$,U,ve=>{if(Gf(ve))return h(ve);{const Ye=vb(T[oe],Ut);return vr(Ye,oe,$,U,vt=>v(ue.some(mn(vt))),v)}},v))},im=i=>i.map(m=>m+"px").getOr(""),qf=(i,m)=>$c(i,m,Qc,im),la=(i,m,h)=>$c(i,m,Qa,v=>v.fold(()=>h.minCellWidth(),T=>T/h.pixelWidth()*100)),th=(i,m,h)=>$c(i,m,eh,v=>v.getOrThunk(h.minCellWidth)),ye=(i,m,h,v,T)=>{const A=Z0(i),$=[ue.some(h.edge(m))].concat(Ht(h.positions(A,m),U=>U.map(K=>K.y)));return Ht(A,(U,K)=>vr(U,K,$,Q(ra),v,T))},ec=(i,m,h)=>ye(i,m,h,Ue,v=>v.getOrThunk(tm)),ef=(i,m,h)=>ye(i,m,h,po,im),Ha=(i,m)=>()=>P(i)?m(i):parseFloat(Kl(i,"width").getOr("0")),Rl=i=>{const m=Ha(i,mn),h=re(0);return{width:m,pixelWidth:m,getWidths:(T,A)=>th(T,i,A),getCellDelta:h,singleColumnWidth:re([0]),minCellWidth:h,setElementWidth:dt,adjustTableWidth:dt,isRelative:!0,label:"none"}},tc=i=>{const m=Ha(i,K=>parseFloat(qi(K))),h=Ha(i,mn);return{width:m,pixelWidth:h,getWidths:(K,oe)=>la(K,i,oe),getCellDelta:K=>K/h()*100,singleColumnWidth:(K,oe)=>[100-K],minCellWidth:()=>dc()/h()*100,setElementWidth:Ds,adjustTableWidth:K=>{const oe=m(),ve=K/100*oe,Ye=oe+ve;Ds(i,Ye)},isRelative:!0,label:"percent"}},Ir=i=>{const m=Ha(i,mn);return{width:m,pixelWidth:m,getWidths:($,U)=>th($,i,U),getCellDelta:Ut,singleColumnWidth:($,U)=>[Math.max(dc(),$+U)-$],minCellWidth:dc,setElementWidth:Qg,adjustTableWidth:$=>{const U=m()+$;Qg(i,U)},isRelative:!1,label:"pixel"}},K0=(i,m)=>Ru().exec(m)!==null?tc(i):Ir(i),w={getTableSize:i=>Dl(i).fold(()=>Rl(i),h=>K0(i,h)),pixelSize:Ir,percentageSize:tc,noneSize:Rl},S=(i,m,h,v,T,A)=>({minRow:i,minCol:m,maxRow:h,maxCol:v,allCells:T,selectedCells:A}),L=(i,m)=>{const h=i.grid.columns;let T=i.grid.rows,A=h,$=0,U=0;const K=[],oe=[];return Jo(i.access,ve=>{if(K.push(ve),m(ve)){oe.push(ve);const Ye=ve.row,vt=Ye+ve.rowspan-1,ft=ve.column,Le=ft+ve.colspan-1;Ye<T?T=Ye:vt>$&&($=vt),ft<A?A=ft:Le>U&&(U=Le)}}),S(T,A,$,U,K,oe)},W=(i,m,h)=>{const v=i[h].element,T=pe.fromTag("td");ls(T,pe.fromTag("br")),(m?ls:sr)(v,T)},ie=(i,m,h,v)=>{const T=xo(i,U=>U.section!=="colgroup"),A=m.grid.columns,$=m.grid.rows;for(let U=0;U<$;U++){let K=!1;for(let oe=0;oe<A;oe++)U<h.minRow||U>h.maxRow||oe<h.minCol||oe>h.maxCol||(zn.getAt(m,U,oe).filter(v).isNone()?W(T,K,U):K=!0)}},Oe=(i,m,h,v)=>{Jo(h.columns,$=>{($.column<m.minCol||$.column>m.maxCol)&&Os($.element)});const T=xo(Wi(i,"tr"),$=>$.dom.childElementCount===0);Ve(T,Os),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ve(Wi(i,"th,td"),$=>{ns($,"rowspan"),ns($,"colspan")}),ns(i,yo),ns(i,"data-snooker-col-series"),w.getTableSize(i).adjustTableWidth(v)},tt=(i,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=th(m,i,h),A=Ne(T,(oe,ve)=>oe+ve,0),K=Ne(T.slice(v.minCol,v.maxCol+1),(oe,ve)=>oe+ve,0)/A*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(K)},Et=(i,m)=>{const h=vt=>Mr(vt.element,m),v=ic(i),T=md(v),A=w.getTableSize(i),$=zn.generate(T),U=L($,h),K="th:not("+m+"),td:not("+m+")",oe=Zi(v,"th,td",vt=>Mr(vt,K));Ve(oe,Os),ie(T,$,U,h);const ve=zn.fromTable(i),Ye=tt(i,ve,A,U);return Oe(v,U,$,Ye),v},hn=" ",fo=((i,m)=>{const h=A=>{if(!i(A))throw new Error("Can only get "+m+" value of a "+m+" node");return v(A).getOr("")},v=A=>i(A)?ue.from(A.dom.nodeValue):ue.none();return{get:h,getOption:v,set:(A,$)=>{if(!i(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=$}}})(Cc,"text"),Lo=i=>fo.get(i),Cs=i=>fo.getOption(i),Ic=(i,m)=>fo.set(i,m),xa=i=>$o(i)==="img"?1:Cs(i).fold(()=>mo(i).length,m=>m.length),Mu=i=>Cs(i).filter(m=>m.trim().length!==0||m.indexOf(hn)>-1).isSome(),Ml=i=>tn(i)&&ts(i,"contenteditable")==="false",um=["img","br"],Kf=i=>Mu(i)||gn(um,$o(i))||Ml(i),Nl=i=>Wm(i,Kf),dm=i=>oh(i,Kf),oh=(i,m)=>{const h=v=>{const T=mo(v);for(let A=T.length-1;A>=0;A--){const $=T[A];if(m($))return ue.some($);const U=h($);if(U.isSome())return U}return ue.none()};return h(i)},sh={scope:["row","col"]},tf=i=>()=>{const m=pe.fromTag("td",i.dom);return ls(m,pe.fromTag("br",i.dom)),m},jr=i=>()=>pe.fromTag("col",i.dom),Yi=i=>()=>pe.fromTag("colgroup",i.dom),Gn=i=>()=>pe.fromTag("tr",i.dom),ss=(i,m,h)=>{const v=gi(i,m);return Jo(h,(T,A)=>{T===null?ns(v,A):es(v,A,T)}),v},fc=i=>i,Wo=(i,m,h)=>Nl(i).map(T=>{const A=h.join(","),$=_t(T,A,U=>Oo(U,i));return nr($,(U,K)=>{const oe=oa(K);return ls(U,oe),oe},m)}).getOr(m),rh=(i,m)=>{Jo(sh,(h,v)=>ha(i,v).filter(T=>gn(h,T)).each(T=>es(m,v,T)))},mm=(i,m,h)=>{const v=($,U)=>{Qs($.element,U),Oc(U,"height"),$.colspan!==1&&Oc(U,"width")},T=$=>{const U=pe.fromTag($o($.element),m.dom),K=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),oe=K.length>0?Wo($.element,U,K):U;return ls(oe,pe.fromTag("br")),v($,U),rh($.element,U),i($.element,U),U};return{col:$=>{const U=pe.fromTag($o($.element),m.dom);return v($,U),i($.element,U),U},colgroup:Yi(m),row:Gn(m),cell:T,replace:ss,colGap:jr(m),gap:tf(m)}},fm=i=>({col:jr(i),colgroup:Yi(i),row:Gn(i),cell:tf(i),replace:fc,colGap:jr(i),gap:tf(i)}),ei=(i,m)=>{const v=(m||document).createElement("div");return v.innerHTML=i,mo(pe.fromDom(v))},nf=i=>Ht(i,pe.fromDom),kb=i=>Js(i,"[contenteditable]"),Bl=(i,m=!1)=>P(i)?i.dom.isContentEditable:kb(i).fold(re(m),h=>of(h)==="true"),of=i=>i.dom.contentEditable,xd=i=>pe.fromDom(i.getBody()),Xi=i=>m=>Oo(m,xd(i)),xi=i=>{ns(i,"data-mce-style");const m=h=>ns(h,"data-mce-style");Ve(ji(i),m),Ve(ud(i),m),Ve(nm(i),m)},Dp=i=>pe.fromDom(i.selection.getStart()),ah=i=>i.getBoundingClientRect().width,X2=i=>i.getBoundingClientRect().height,WE=(i,m)=>{const h=i.dom.getStyle(m,"width")||i.dom.getAttrib(m,"width");return ue.from(h).filter(zo)},er=i=>/^(\d+(\.\d+)?)%$/.test(i),ZE=i=>/^(\d+(\.\d+)?)px$/.test(i),Td=i=>As(i,ks("table")).exists(Bl),Y0=(i,m)=>{const h=m.column,v=m.column+m.colspan-1,T=m.row,A=m.row+m.rowspan-1;return h<=i.finishCol&&v>=i.startCol&&T<=i.finishRow&&A>=i.startRow},X0=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,Gs=(i,m)=>{let h=!0;const v=Fn(X0,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let A=m.startCol;A<=m.finishCol;A++)h=h&&zn.getAt(i,T,A).exists(v);return h?ue.some(m):ue.none()},Lc=(i,m)=>ko(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),ch=(i,m,h)=>{const v=zn.findItem(i,m,Oo),T=zn.findItem(i,h,Oo);return v.bind(A=>T.map($=>Lc(A,$)))},Yf=(i,m,h)=>ch(i,m,h).bind(v=>Gs(i,v)),J2=(i,m,h,v)=>zn.findItem(i,m,Oo).bind(T=>{const A=h>0?T.row+T.rowspan-1:T.row,$=v>0?T.column+T.colspan-1:T.column;return zn.getAt(i,A+h,$+v).map(K=>K.element)}),lh=(i,m,h)=>ch(i,m,h).map(v=>{const T=zn.filterItems(i,Fn(Y0,v));return Ht(T,A=>A.element)}),Rp=(i,m)=>{const h=(v,T)=>Jd(T,v);return zn.findItem(i,m,h).map(v=>v.element)},_b=(i,m,h)=>Zs(i).bind(v=>{const T=Xf(v);return J2(T,i,m,h)}),jE=(i,m,h)=>{const v=Xf(i);return lh(v,m,h)},J0=(i,m,h,v,T)=>{const A=Xf(i),$=Oo(i,h)?ue.some(m):Rp(A,m),U=Oo(i,T)?ue.some(v):Rp(A,v);return $.bind(K=>U.bind(oe=>lh(A,K,oe)))},Mp=(i,m,h)=>{const v=Xf(i);return Yf(v,m,h)},Xf=zn.fromTable;var Ed=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Nu=()=>{const i=oe=>pe.fromDom(oe.dom.cloneNode(!1)),m=oe=>pa(oe).dom,h=oe=>Ur(oe)?$o(oe)==="body"?!0:gn(Ed,$o(oe)):!1,v=oe=>Ur(oe)?gn(["br","img","hr","input"],$o(oe)):!1,T=oe=>Ur(oe)&&ts(oe,"contenteditable")==="false",A=(oe,ve)=>oe.dom.compareDocumentPosition(ve.dom),$=(oe,ve)=>{const Ye=fr(oe);mr(ve,Ye)},U=oe=>{const ve=$o(oe);return gn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ve)},K=oe=>Ur(oe)?ha(oe,"lang"):ue.none();return{up:re({selector:Vn,closest:Js,predicate:gr,all:Ec}),down:re({selector:xr,predicate:xn}),styles:re({get:gl,getRaw:Kl,set:Uo,remove:Oc}),attrs:re({get:ts,set:es,remove:ns,copyTo:$}),insert:re({before:kc,after:$a,afterAll:Eo,append:ls,appendAll:Nr,prepend:sr,wrap:Fi}),remove:re({unwrap:fi,remove:Os}),create:re({nu:pe.fromTag,clone:i,text:pe.fromText}),query:re({comparePosition:A,prevSibling:kl,nextSibling:_l}),property:re({children:mo,name:$o,parent:ml,document:m,isText:Cc,isComment:vo,isElement:Ur,isSpecial:U,getLanguage:K,getText:Lo,setText:Ic,isBoundary:h,isEmptyTag:v,isNonEditable:T}),eq:Oo,is:Li}};const gm=(i,m,h,v)=>{const T=h[0],A=h.slice(1);return v(i,m,T,A)},Ob=(i,m,h)=>h.length>0?gm(i,m,h,sf):ue.none(),sf=(i,m,h,v)=>{const T=m(i,h);return nr(v,(A,$)=>{const U=m(i,$);return Q0(i,A,U)},T)},Q0=(i,m,h)=>m.bind(v=>h.filter(Fn(i.eq,v))),Q2=(i,m)=>Fn(i.eq,m),ey=(i,m,h,v=Jt)=>{const T=[m].concat(i.up().all(m)),A=[h].concat(i.up().all(h)),$=ve=>vc(ve,v).fold(()=>ve,vt=>ve.slice(0,vt+1)),U=$(T),K=$(A),oe=V(U,ve=>Ge(K,Q2(i,ve)));return{firstpath:U,secondpath:K,shared:oe}},ew=Ob,ty=ey,Ab=Nu(),co=(i,m)=>ew(Ab,(h,v)=>i(v),m),Wt=(i,m,h)=>ty(Ab,i,m,h),kd=i=>Vn(i,"table"),Np=(i,m,h)=>{const v=T=>A=>h!==void 0&&h(A)||Oo(A,T);return Oo(i,m)?ue.some({boxes:ue.some([i]),start:i,finish:m}):kd(i).bind(T=>kd(m).bind(A=>{if(Oo(T,A))return ue.some({boxes:jE(T,i,m),start:i,finish:m});if(Jd(T,A)){const $=_t(m,"td,th",v(T)),U=$.length>0?$[$.length-1]:m;return ue.some({boxes:J0(T,i,T,m,A),start:i,finish:U})}else if(Jd(A,T)){const $=_t(i,"td,th",v(A)),U=$.length>0?$[$.length-1]:i;return ue.some({boxes:J0(A,i,T,m,A),start:i,finish:U})}else return Wt(i,m).shared.bind($=>Js($,"table",h).bind(U=>{const K=_t(m,"td,th",v(U)),oe=K.length>0?K[K.length-1]:m,ve=_t(i,"td,th",v(U)),Ye=ve.length>0?ve[ve.length-1]:i;return ue.some({boxes:J0(U,i,T,m,A),start:Ye,finish:oe})}))}))},ih=(i,m)=>{const h=xr(i,m);return h.length>0?ue.some(h):ue.none()},GE=(i,m)=>V(i,h=>Mr(h,m)),Db=(i,m,h)=>Ia(i,m).bind(v=>Ia(i,h).bind(T=>co(kd,[v,T]).map(A=>({first:v,last:T,table:A})))),ds=(i,m)=>Vn(i,"table").bind(h=>Ia(h,m).bind(v=>Np(v,i).bind(T=>T.boxes.map(A=>({boxes:A,start:T.start,finish:T.finish}))))),ny=(i,m,h,v,T)=>GE(i,T).bind(A=>_b(A,m,h).bind($=>ds($,v))),tw=(i,m)=>ih(i,m),nw=(i,m,h)=>Db(i,m,h).bind(v=>{const T=K=>Oo(i,K),A="thead,tfoot,tbody,table",$=Vn(v.first,A,T),U=Vn(v.last,A,T);return $.bind(K=>U.bind(oe=>Oo(K,oe)?Mp(v.table,v.first,v.last):ue.none()))}),je=Ut,Bp=i=>{const m=(v,T)=>ha(v,T).exists(A=>parseInt(A,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&vn(i,h)?ue.some(i):ue.none()},qE=(i,m,h)=>m.length<=1?ue.none():nw(i,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),_d="data-mce-selected",Rb="td["+_d+"],th["+_d+"]",uh="["+_d+"]",Pp="data-mce-first-selected",Jf="td["+Pp+"],th["+Pp+"]",hm="data-mce-last-selected",dh="td["+hm+"],th["+hm+"]",qs=uh,el={selected:_d,selectedSelector:Rb,firstSelected:Pp,firstSelectedSelector:Jf,lastSelected:hm,lastSelectedSelector:dh},mh=(i,m,h)=>({element:h,mergable:qE(m,i,el),unmergable:Bp(i),selection:je(i)}),Od=(i,m,h)=>({element:i,clipboard:m,generators:h}),KE=(i,m,h,v)=>({selection:je(i),clipboard:h,generators:v}),Mb=i=>Zs(i).bind(m=>tw(m,el.firstSelectedSelector)).fold(re(i),m=>m[0]),pm=i=>(m,h)=>{const v=$o(m),T=v==="col"||v==="colgroup"?Mb(m):m;return Js(T,i,h)},eD=pm("th,td,caption"),ow=pm("th,td"),tl=i=>nf(i.model.table.getSelectedCells()),Nb=i=>xo(tl(i),m=>Mr(m,el.selectedSelector)),Bu=i=>Zs(i[0]).map(m=>{const h=Et(m,qs);return xi(h),[h]}),YE=(i,m)=>Ht(m,h=>i.selection.serializer.serialize(h.dom,{})).join(""),fh=i=>Ht(i,m=>m.dom.innerText).join(""),Fc=(i,m)=>{i.on("BeforeGetContent",h=>{const v=T=>{h.preventDefault(),Bu(T).each(A=>{h.content=h.format==="text"?fh(A):YE(i,A)})};if(h.selection===!0){const T=Nb(i);T.length>=1&&v(T)}}),i.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=tl(i);Ie(v).each(T=>{Zs(T).each(A=>{const $=xo(ei(h.content),K=>$o(K)!=="meta"),U=ks("table");if($.length===1&&U($[0])){h.preventDefault();const K=pe.fromDom(i.getDoc()),oe=fm(K),ve=Od(T,$[0],oe);m.pasteCells(A,ve).each(()=>{i.focus()})}})})}})},rf=(i,m)=>({element:i,offset:m}),Ot=(i,m,h)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?h(m).bind(v=>Ot(i,v,h).orThunk(()=>ue.some(v))):ue.none(),sw=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,nc=(i,m)=>{const h=Ot(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(h))return rf(h,sw(i,h));const v=i.property().children(h);return v.length>0?nc(i,v[v.length-1]):rf(h,sw(i,h))},rw=nc,oy=Nu(),XE=i=>rw(oy,i),$p=(i,m)=>{Ac(i)||Pc(i).each(v=>{const T=v.value/2;jf(i,T,v.unit),jf(m,T,v.unit)})},Pl=i=>Ht(i,re(0)),bm=(i,m,h,v,T)=>T(i.slice(0,m)).concat(v).concat(T(i.slice(h))),aw=i=>(m,h,v,T)=>{if(i(v)){const A=Math.max(T,m[h]-Math.abs(v)),$=Math.abs(A-m[h]);return v>=0?$:-$}else return v},Qf=aw(i=>i<0),JE=aw(ze),cw=()=>{const i=(U,K,oe,ve,Ye)=>{const vt=Qf(U,K,ve,Ye);return bm(U,K,oe+1,[vt,0],Pl)},m=(U,K,oe,ve)=>{const Ye=(100+oe)/100,vt=Math.max(ve,(U[K]+oe)/Ye);return Ht(U,(ft,Le)=>(Le===K?vt:ft/Ye)-ft)},h=(U,K,oe,ve,Ye,vt)=>vt?m(U,K,ve,Ye):i(U,K,oe,ve,Ye);return{resizeTable:(U,K)=>U(K),clampTableDelta:Qf,calcLeftEdgeDeltas:h,calcMiddleDeltas:(U,K,oe,ve,Ye,vt,ft)=>h(U,oe,ve,Ye,vt,ft),calcRightEdgeDeltas:(U,K,oe,ve,Ye,vt)=>{if(vt)return m(U,oe,ve,Ye);{const ft=Qf(U,oe,ve,Ye);return Pl(U.slice(0,oe)).concat([ft])}},calcRedestributedWidths:(U,K,oe,ve)=>{if(ve){const vt=(K+oe)/K,ft=Ht(U,Le=>Le/vt);return{delta:vt*100-100,newSizes:ft}}else return{delta:oe,newSizes:U}}}},gh=()=>{const i=($,U,K,oe,ve)=>{const Ye=oe>=0?K:U,vt=JE($,Ye,oe,ve);return bm($,U,K+1,[vt,-vt],Pl)};return{resizeTable:($,U,K)=>{K&&$(U)},clampTableDelta:($,U,K,oe,ve)=>{if(ve){if(K>=0)return K;{const Ye=Ne($,(vt,ft)=>vt+ft-oe,0);return Math.max(-Ye,K)}}else return Qf($,U,K,oe)},calcLeftEdgeDeltas:i,calcMiddleDeltas:($,U,K,oe,ve,Ye)=>i($,K,oe,ve,Ye),calcRightEdgeDeltas:($,U,K,oe,ve,Ye)=>{if(Ye)return Pl($);{const vt=oe/$.length;return Ht($,re(vt))}},calcRedestributedWidths:($,U,K,oe)=>({delta:0,newSizes:$})}},eg=i=>zn.fromTable(i).grid,Bb=ks("th"),tg=i=>vn(i,m=>Bb(m.element)),Pb=(i,m)=>i&&m?"sectionCells":i?"section":"cells",Ip=i=>{const m=i.section==="thead",h=hr($b(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:Pb(m,h)}:{type:"body"}},$b=i=>{const m=xo(i,h=>Bb(h.element));return m.length===0?ue.some("td"):m.length===i.length?ue.some("th"):ue.none()},af=i=>{const m=Ht(i,T=>Ip(T).type),h=gn(m,"header"),v=gn(m,"footer");if(!h&&!v)return ue.some("body");{const T=gn(m,"body");return h&&!T&&!v?ue.some("header"):!h&&!T&&v?ue.some("footer"):ue.none()}},Pu=i=>Sr(i.all,m=>{const h=Ip(m);return h.type==="header"?ue.from(h.subType):ue.none()}),Ta=(i,m,h)=>Ke(h(i.element,m),!0,i.isLocked),Lp=(i,m)=>i.section!==m?Gt(i.element,i.cells,m,i.isNew):i,lw=()=>({transformRow:Lp,transformCell:(i,m,h)=>{const v=h(i.element,m),T=$o(v)!=="td"?wu(v,"td"):v;return Ke(T,i.isNew,i.isLocked)}}),Ib=()=>({transformRow:Lp,transformCell:Ta}),sy=()=>({transformRow:(i,m)=>Lp(i,m==="thead"?"tbody":m),transformCell:Ta}),Ad={getTableSectionType:(i,m)=>{const h=zn.fromTable(i);switch(Pu(h).getOr(m)){case"section":return lw();case"sectionCells":return Ib();case"cells":return sy()}},section:lw,sectionCells:Ib,cells:sy,fallback:()=>({transformRow:Ut,transformCell:Ta})},hh=(i,m,h,v)=>{h===v?ns(i,m):es(i,m,h)},iw=(i,m,h)=>{ac(rr(i,m)).fold(()=>sr(i,h),v=>$a(v,h))},uw=(i,m)=>{const h=Gl(i,m).getOrThunk(()=>{const v=pe.fromTag(m,dl(i).dom);return m==="thead"?iw(i,"caption,colgroup",v):m==="colgroup"?iw(i,"caption",v):ls(i,v),v});return na(h),h},ek=(i,m)=>{const h=[],v=[],T=ft=>Ht(ft,Le=>{Le.isNew&&h.push(Le.element);const ht=Le.element;return na(ht),Ve(Le.cells,Pe=>{Pe.isNew&&v.push(Pe.element),hh(Pe.element,"colspan",Pe.colspan,1),hh(Pe.element,"rowspan",Pe.rowspan,1),ls(ht,Pe.element)}),ht}),A=ft=>Ws(ft,Le=>Ht(Le.cells,ht=>(hh(ht.element,"span",ht.colspan,1),ht.element))),$=(ft,Le)=>{const ht=uw(i,Le),Dt=(Le==="colgroup"?A:T)(ft);Nr(ht,Dt)},U=ft=>{Gl(i,ft).each(Os)},K=(ft,Le)=>{ft.length>0?$(ft,Le):U(Le)},oe=[],ve=[],Ye=[],vt=[];return Ve(m,ft=>{switch(ft.section){case"thead":oe.push(ft);break;case"tbody":ve.push(ft);break;case"tfoot":Ye.push(ft);break;case"colgroup":vt.push(ft);break}}),K(vt,"colgroup"),K(oe,"thead"),K(ve,"tbody"),K(Ye,"tfoot"),{newRows:h,newCells:v}},rs=i=>Ht(i,m=>{const h=oa(m.element);return Ve(m.cells,v=>{const T=ic(v.element);hh(T,"colspan",v.colspan,1),hh(T,"rowspan",v.rowspan,1),ls(h,T)}),h}),tk=(i,m)=>Ht(i,h=>Xc(h,m)),nk=(i,m)=>i[m],dw=(i,m)=>{if(i.length===0)return 0;const h=i[0];return vc(i,T=>!m(h.element,T.element)).getOr(i.length)},Lb=(i,m,h,v)=>{const T=nk(i,m),A=T.section==="colgroup",$=dw(T.cells.slice(h),v),U=A?1:dw(tk(i.slice(m),h),v);return{colspan:$,rowspan:U}},mw=(i,m)=>{const h=Ht(i,T=>Ht(T.cells,Jt)),v=(T,A,$,U)=>{for(let K=T;K<T+$;K++)for(let oe=A;oe<A+U;oe++)h[K][oe]=!0};return Ht(i,(T,A)=>{const $=Ws(T.cells,(U,K)=>{if(h[A][K]===!1){const oe=Lb(i,A,K,m);return v(A,K,oe.rowspan,oe.colspan),[Z(U.element,oe.rowspan,oe.colspan,U.isNew)]}else return[]});return _e(T.element,$,T.section,T.isNew)})},Ti=(i,m,h)=>{const v=[];Ve(i.colgroups,T=>{const A=[];for(let $=0;$<i.grid.columns;$++){const U=zn.getColumnAt(i,$).map(K=>Ke(K.element,h,!1)).getOrThunk(()=>Ke(m.colGap(),!0,!1));A.push(U)}v.push(Gt(T.element,A,"colgroup",h))});for(let T=0;T<i.grid.rows;T++){const A=[];for(let K=0;K<i.grid.columns;K++){const oe=zn.getAt(i,T,K).map(ve=>Ke(ve.element,h,ve.isLocked)).getOrThunk(()=>Ke(m.gap(),!0,!1));A.push(oe)}const $=i.all[T],U=Gt($.element,A,$.section,h);v.push(U)}return v},Va=(i,m)=>Ti(i,m,!1),Fb=i=>mw(i,Oo),vm=(i,m)=>Sr(i.all,h=>V(h.cells,v=>Oo(m,v.element))),ng=(i,m,h)=>{const v=Ht(m.selection,A=>qc(A).bind($=>vm(i,$)).filter(h)),T=ql(v);return Lf(T.length>0,T)},Ea=(i,m,h,v,T)=>(A,$,U,K)=>{const oe=zn.fromTable(A),ve=ue.from(K==null?void 0:K.section).getOrThunk(Ad.fallback);return m(oe,$).map(vt=>{const ft=Va(oe,U),Le=i(ft,vt,Oo,T(U),ve),ht=vd(Le.grid),Pe=Fb(Le.grid);return{info:vt,grid:Pe,cursor:Le.cursor,lockedColumns:ht}}).bind(vt=>{const ft=ek(A,vt.grid),Le=ue.from(K==null?void 0:K.sizing).getOrThunk(()=>w.getTableSize(A)),ht=ue.from(K==null?void 0:K.resize).getOrThunk(gh);return h(A,vt.grid,vt.info,{sizing:Le,resize:ht,section:ve}),v(A),ns(A,yo),vt.lockedColumns.length>0&&es(A,yo,vt.lockedColumns.join(",")),ue.some({cursor:vt.cursor,newRows:ft.newRows,newCells:ft.newCells})})},fw=(i,m)=>qc(m.element).bind(h=>vm(i,h).map(v=>We(J({},v),{generators:m.generators,clipboard:m.clipboard}))),gw=(i,m)=>ng(i,m,ze).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),tD=(i,m)=>m.mergable,hw=(i,m)=>m.unmergable,cf=(i,m)=>ng(i,m,ze),lf=(i,m)=>ng(i,m,h=>!h.isLocked),Hb=(i,m)=>vm(i,m).exists(h=>!h.isLocked),pw=(i,m)=>vn(m,h=>Hb(i,h)),$u=(i,m)=>tD(i,m).filter(h=>pw(i,h.cells)),nl=(i,m)=>hw(i,m).filter(h=>pw(i,h)),Gr=(i,m,h,v)=>{const T=aa(i).rows;if(T.length===0)return i;for(let A=m.startRow;A<=m.finishRow;A++)for(let $=m.startCol;$<=m.finishCol;$++){const U=T[A],K=Xc(U,$).isLocked;am(U,$,Ke(v(),!1,K))}return i},bw=(i,m,h,v)=>{const T=aa(i).rows;let A=!0;for(let $=0;$<T.length;$++)for(let U=0;U<bl(T[0]);U++){const K=T[$],oe=Xc(K,U),ve=oe.element,Ye=h(ve,m);Ye&&!A?am(K,U,Ke(v(),!0,oe.isLocked)):Ye&&(A=!1)}return i},ms=(i,m)=>Ne(i,(h,v)=>Ge(h,T=>m(T.element,v.element))?h:h.concat([v]),[]),gc=(i,m,h,v)=>(m>0&&m<i[0].cells.length&&Ve(i,T=>{const A=T.cells[m-1];let $=0;const U=v();for(;T.cells.length>m+$&&h(A.element,T.cells[m+$].element);)am(T,m+$,Ke(U,!0,T.cells[m+$].isLocked)),$++}),i),Ji=(i,m,h,v)=>{const T=aa(i).rows;if(m>0&&m<T.length){const A=T[m-1].cells,$=ms(A,h);Ve($,U=>{let K=ue.none();for(let oe=m;oe<T.length;oe++)for(let ve=0;ve<bl(T[0]);ve++){const Ye=T[oe],vt=Xc(Ye,ve);h(vt.element,U.element)&&(K.isNone()&&(K=ue.some(v())),K.each(Le=>{am(Ye,ve,Ke(Le,!0,vt.isLocked))}))}})}return i},hc=i=>{const m=A=>A(i),h=re(i),v=()=>T,T={tag:!0,inner:i,fold:(A,$)=>$(i),isValue:ze,isError:Jt,map:A=>uf.value(A(i)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:A=>{A(i)},toOptional:()=>ue.some(i)};return T},ym=i=>{const m=()=>h,h={tag:!1,inner:i,fold:(v,T)=>v(i),isValue:Jt,isError:ze,map:m,mapError:v=>uf.error(v(i)),bind:m,exists:Jt,forall:ze,getOr:Ut,or:Ut,getOrThunk:Go,orThunk:Go,getOrDie:cn(String(i)),each:dt,toOptional:ue.none};return h},uf={value:hc,error:ym,fromOption:(i,m)=>i.fold(()=>ym(m),hc)},ti=(i,m,h)=>{if(i.row>=m.length||i.column>bl(m[0]))return uf.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),T=v[0].cells.slice(i.column),A=bl(h[0]),$=h.length;return uf.value({rowDelta:v.length-$,colDelta:T.length-A})},Ei=(i,m)=>{const h=bl(i[0]),v=bl(m[0]);return{rowDelta:0,colDelta:h-v}},ry=(i,m)=>{const h=i.length,v=m.length;return{rowDelta:h-v,colDelta:0}},Hp=(i,m,h,v)=>{const T=m.section==="colgroup"?h.col:h.cell;return Dn(i,A=>Ke(T(),!0,v(A)))},vw=(i,m,h,v)=>{const T=i[i.length-1];return i.concat(Dn(m,()=>{const A=T.section==="colgroup"?h.colgroup:h.row,$=yb(T,A,Ut),U=Hp($.cells.length,$,h,K=>Ko(v,K.toString()));return Uf($,U)}))},ay=(i,m,h,v)=>Ht(i,T=>{const A=Hp(m,T,h,Jt);return $r(T,v,A)}),yw=(i,m,h)=>Ht(i,v=>Ne(h,(T,A)=>{const $=Hp(1,v,m,ze)[0];return Yc(T,A,$)},v)),ph=(i,m,h)=>{const v=m.colDelta<0?ay:Ut,T=m.rowDelta<0?vw:Ut,A=vd(i),$=bl(i[0]),U=Ge(A,ve=>ve===$-1),K=v(i,Math.abs(m.colDelta),h,U?$-1:$),oe=vd(K);return T(K,Math.abs(m.rowDelta),h,an(oe,ze))},Cw=(i,m,h,v)=>{const T=Xc(i[m],h),A=Fn(v,T.element),$=i[m];return i.length>1&&bl($)>1&&(h>0&&A(Ja($,h-1))||h<$.cells.length-1&&A(Ja($,h+1))||m>0&&A(Ja(i[m-1],h))||m<i.length-1&&A(Ja(i[m+1],h)))},ok=(i,m,h,v,T,A)=>{const $=i.row,U=i.column,K=h.length,oe=bl(h[0]),ve=$+K,Ye=U+oe+A.length,vt=an(A,ze);for(let ft=$;ft<ve;ft++){let Le=0;for(let ht=U;ht<Ye;ht++){if(vt[ht]){Le++;continue}Cw(m,ft,ht,T)&&bw(m,Ja(m[ft],ht),T,v.cell);const Pe=ht-U-Le,Dt=Xc(h[ft-$],Pe),ln=Dt.element,Tn=v.replace(ln);am(m[ft],ht,Ke(Tn,!0,Dt.isLocked))}}return m},sk=(i,m,h)=>{const v=bl(m[0]),T=aa(m).cols.length+i.row,A=Dn(v-i.column,U=>U+i.column),$=V(A,U=>vn(h,K=>K!==U)).getOr(v-1);return{row:T,column:$}},cy=(i,m,h)=>xo(h,v=>v>=i.column&&v<=bl(m[0])+i.column),ww=(i,m,h,v,T)=>{const A=vd(m),$=sk(i,m,A),U=aa(h).rows,K=cy($,U,A);return ti($,m,U).map(ve=>{const Ye=We(J({},ve),{colDelta:ve.colDelta-K.length}),vt=ph(m,Ye,v),ft=vd(vt),Le=cy($,U,ft);return ok($,vt,U,v,T,Le)})},Sw=(i,m,h,v,T)=>{gc(m,i,T,v.cell);const A=ry(h,m),$=ph(h,A,v),U=ry(m,$),K=ph(m,U,v);return Ht(K,(oe,ve)=>$r(oe,i,$[ve].cells))},xw=(i,m,h,v,T)=>{Ji(m,i,T,v.cell);const A=vd(m),$=Ei(m,h),U=We(J({},$),{colDelta:$.colDelta-A.length}),K=ph(m,U,v),{cols:oe,rows:ve}=aa(K),Ye=vd(K),vt=Ei(h,m),ft=We(J({},vt),{colDelta:vt.colDelta+Ye.length}),Le=yw(h,v,Ye),ht=ph(Le,ft,v);return[...oe,...ve.slice(0,i),...ht,...ve.slice(i,ve.length)]},Tw=(i,m,h,v)=>yb(i,T=>v(T,h),m),df=(i,m,h,v,T)=>{const{rows:A,cols:$}=aa(i),U=A.slice(0,m),K=A.slice(m),oe=Tw(A[h],(ve,Ye)=>m>0&&m<A.length&&v(Ja(A[m-1],Ye),Ja(A[m],Ye))?Xc(A[m],Ye):Ke(T(ve.element,v),!0,ve.isLocked),v,T);return[...$,...U,oe,...K]},Ew=(i,m,h,v,T,A,$)=>{if(h==="colgroup"||!v){const U=Xc(i,T);return Ke($(U.element,A),!0,!1)}else return Xc(i,m)},kw=(i,m,h,v,T)=>Ht(i,A=>{const $=m>0&&m<bl(A)&&v(Ja(A,m-1),Ja(A,m)),U=Ew(A,m,A.section,$,h,v,T);return Yc(A,m,U)}),rk=(i,m)=>Ws(i,h=>{const v=h.cells,T=nr(m,(A,$)=>$>=0&&$<A.length?A.slice(0,$).concat(A.slice($+1)):A,v);return T.length>0?[Gt(h.element,T,h.section,h.isNew)]:[]}),_w=(i,m,h)=>{const{rows:v,cols:T}=aa(i);return[...T,...v.slice(0,m),...v.slice(h+1)]},og=(i,m,h,v)=>Ja(i[m],h)!==void 0&&m>0&&v(Ja(i[m-1],h),Ja(i[m],h)),Fs=(i,m,h)=>m>0&&h(Ja(i,m-1),Ja(i,m)),Cm=(i,m,h,v)=>og(i,m,h,v)||Fs(i[m],h,v),Ow=(i,m)=>vn(m,Ut)&&tg(i.cells)?ze:(v,T,A)=>!($o(v.element)==="th"&&m[A]),ak=(i,m)=>vn(m,Ut)&&tg(i)?ze:(v,T,A)=>!($o(v.element)==="th"&&m[T]),Vp=(i,m,h,v)=>{const T=$=>$==="row"?ra(m):Ac(m),A=$=>T($)?`${$}group`:$;return i?Bb(m)?A(h):null:v&&Bb(m)?A(h==="row"?"col":"row"):null},ka=(i,m)=>(h,v,T)=>ue.some(Vp(i,h.element,"col",m[T])),yl=(i,m)=>(h,v)=>ue.some(Vp(i,h.element,"row",m[v])),ly=(i,m,h)=>Ke(h(i.element,m),!0,i.isLocked),Vb=(i,m,h,v,T,A,$)=>{const U=K=>Ge(m,oe=>h(K.element,oe.element));return Ht(i,(K,oe)=>Yl(K,(ve,Ye)=>{if(U(ve)){const vt=$(ve,oe,Ye)?T(ve,h,v):ve;return A(vt,oe,Ye).each(ft=>{xc(vt.element,{scope:ue.from(ft)})}),vt}else return ve}))},zb=(i,m,h)=>Ws(i,(v,T)=>Cm(i,T,m,h)?[]:[Xc(v,m)]),ck=(i,m,h)=>{const v=i[m];return Ws(v.cells,(T,A)=>Cm(i,m,A,h)?[]:[T])},Aw=(i,m,h,v,T)=>{const A=aa(i).rows,$=Ws(m,ve=>zb(A,ve,v)),U=Ht(A,ve=>tg(ve.cells)),K=ak($,U),oe=yl(h,U);return Vb(i,$,v,T,ly,oe,K)},zp=(i,m,h,v,T,A,$)=>{const{cols:U,rows:K}=aa(i),oe=K[m[0]],ve=Ws(m,Pe=>ck(K,Pe,T)),Ye=Ht(oe.cells,(Pe,Dt)=>tg(zb(K,Dt,T))),vt=[...K];Ve(m,Pe=>{vt[Pe]=$.transformRow(K[Pe],h)});const ft=[...U,...vt],Le=Ow(oe,Ye),ht=ka(v,Ye);return Vb(ft,ve,T,A,$.transformCell,ht,Le)},Cl=(i,m,h,v)=>{const T=aa(i).rows,A=Ht(m,$=>Xc(T[$.row],$.column));return Vb(i,A,h,v,ly,ue.none,ze)},Hs={generate:i=>{if(!Bt(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],h={};return Ve(i,(v,T)=>{const A=jt(v);if(A.length!==1)throw new Error("one and only one name per case");const $=A[0],U=v[$];if(h[$]!==void 0)throw new Error("duplicate key detected:"+$);if($==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Bt(U))throw new Error("case arguments must be an array");m.push($),h[$]=(...K)=>{const oe=K.length;if(oe!==U.length)throw new Error("Wrong number of arguments to case "+$+". Expected "+U.length+" ("+U+"), got "+oe);return{fold:(...Ye)=>{if(Ye.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+Ye.length);return Ye[T].apply(null,K)},match:Ye=>{const vt=jt(Ye);if(m.length!==vt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+vt.join(","));if(!vn(m,Le=>gn(vt,Le)))throw new Error("Not all branches were specified when using match. Specified: "+vt.join(", ")+`
Required: `+m.join(", "));return Ye[$].apply(null,K)},log:Ye=>{}}}}),h}},Qi=Hs.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Dd=J({},Qi),lk=(i,m)=>i.length===0?Dd.none():i.length===1?Dd.only(0):m===0?Dd.left(0,1):m===i.length-1?Dd.right(m-1,m):m>0&&m<i.length-1?Dd.middle(m-1,m,m+1):Dd.none(),iy=(i,m,h,v,T)=>{const A=i.slice(0),$=lk(i,m),U=re(Ht(A,re(0))),K=vt=>v.singleColumnWidth(A[vt],h),oe=(vt,ft)=>T.calcLeftEdgeDeltas(A,vt,ft,h,v.minCellWidth(),v.isRelative),ve=(vt,ft,Le)=>T.calcMiddleDeltas(A,vt,ft,Le,h,v.minCellWidth(),v.isRelative),Ye=(vt,ft)=>T.calcRightEdgeDeltas(A,vt,ft,h,v.minCellWidth(),v.isRelative);return $.fold(U,K,oe,ve,Ye)},Rw=(i,m,h)=>{let v=0;for(let T=i;T<m;T++)v+=h[T]!==void 0?h[T]:0;return v},mf=(i,m)=>{const h=zn.justCells(i);return Ht(h,v=>{const T=Rw(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},Mw=(i,m)=>{const h=zn.justColumns(i);return Ht(h,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},Rd=(i,m)=>{const h=zn.justCells(i);return Ht(h,v=>{const T=Rw(v.row,v.row+v.rowspan,m);return{element:v.element,height:T,rowspan:v.rowspan}})},uy=(i,m)=>Ht(i.all,(h,v)=>({element:h.element,height:m[v]})),Up=i=>nr(i,(m,h)=>m+h,0),dy=(i,m)=>zn.hasColumns(i)?Mw(i,m):mf(i,m),Ub=(i,m,h)=>{const v=dy(i,m);Ve(v,T=>{h.setElementWidth(T.element,T.width)})},Wp=(i,m,h,v,T)=>{const A=zn.fromTable(i),$=T.getCellDelta(m),U=T.getWidths(A,T),K=h===A.grid.columns-1,oe=v.clampTableDelta(U,h,$,T.minCellWidth(),K),ve=iy(U,h,oe,T,v),Ye=Ht(ve,(vt,ft)=>vt+U[ft]);Ub(A,Ye,T),v.resizeTable(T.adjustTableWidth,oe,K)},my=(i,m,h,v)=>{const T=zn.fromTable(i),A=ec(T,i,v),$=Ht(A,(ve,Ye)=>h===Ye?Math.max(m+ve,tm()):ve),U=Rd(T,$),K=uy(T,$);Ve(K,ve=>{Qm(ve.element,ve.height)}),Ve(U,ve=>{Qm(ve.element,ve.height)});const oe=Up($);Qm(i,oe)},Zp=(i,m,h,v,T)=>{const A=zn.generate(m),$=v.getWidths(A,v),U=v.pixelWidth(),{newSizes:K,delta:oe}=T.calcRedestributedWidths($,U,h.pixelDelta,v.isRelative);Ub(A,K,v),v.adjustTableWidth(oe)},Nw=(i,m,h,v)=>{const T=zn.generate(m),A=v.getWidths(T,v);Ub(T,A,v)},wm=i=>Ne(i,(h,v)=>Ge(h,A=>A.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),Wb=ks("col"),Bw=ks("colgroup"),fy=i=>$o(i)==="tr"||Bw(i),ff=i=>{const m=Ca(i,"colspan",1),h=Ca(i,"rowspan",1);return{element:i,colspan:m,rowspan:h}},Md=(i,m=ff)=>{const h=U=>Wb(U.element)?i.col(U):i.cell(U),v=U=>Bw(U.element)?i.colgroup(U):i.row(U),T=U=>{if(fy(U))return v({element:U});{const K=U,oe=h(m(K));return A=ue.some({item:K,replacement:oe}),oe}};let A=ue.none();return{getOrInit:(U,K)=>A.fold(()=>T(U),oe=>K(U,oe.item)?oe.replacement:T(U))}},sg=i=>m=>{const h=[],v=($,U)=>V(h,K=>U(K.item,$)),T=$=>{const U=i==="td"?{scope:null}:{},K=m.replace($,i,U);return h.push({item:$,sub:K}),K};return{replaceOrInit:($,U)=>{if(fy($)||Wb($))return $;{const K=$;return v(K,U).fold(()=>T(K),oe=>U($,oe.item)?oe.sub:T(K))}}}},De=i=>ha(i,"scope").map(m=>m.substr(0,3)),tr={modification:Md,transform:sg,merging:i=>({unmerge:v=>{const T=De(v);return T.each(A=>es(v,"scope",A)),()=>{const A=i.cell({element:v,colspan:1,rowspan:1});return Oc(A,"width"),Oc(v,"width"),T.each($=>es(A,"scope",$)),A}},merge:v=>{const T=()=>{const A=ql(Ht(v,De));if(A.length===0)return ue.none();{const $=A[0],U=["row","col"];return Ge(A,oe=>oe!==$&&gn(U,oe))?ue.none():ue.from($)}};return Oc(v[0],"width"),T().fold(()=>ns(v[0],"scope"),A=>es(v[0],"scope",A+"group")),re(v[0])}})},rg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],jp=(i,m)=>{const h=i.property().name(m);return gn(["ol","ul"],h)},Co=(i,m)=>{const h=i.property().name(m);return gn(rg,h)},gy=(i,m)=>gn(["br","img","hr","input"],i.property().name(m)),Gp=Nu(),ia=i=>Co(Gp,i),Nd=i=>jp(Gp,i),ik=i=>gy(Gp,i),Pw=i=>{const m=ks("br"),h=K=>vn(K,oe=>m(oe)||Cc(oe)&&Lo(oe).trim().length===0),v=K=>$o(K)==="li"||gr(K,Nd).isSome(),T=K=>_l(K).map(oe=>ia(oe)?!0:ik(oe)?$o(oe)!=="img":!1).getOr(!1),A=K=>dm(K).bind(oe=>{const ve=T(oe);return ml(oe).map(Ye=>ve===!0||v(Ye)||m(oe)||ia(Ye)&&!Oo(K,Ye)?[]:[pe.fromTag("br")])}).getOr([]),U=(()=>{const K=Ws(i,oe=>{const ve=mo(oe);return h(ve)?[]:ve.concat(A(oe))});return K.length===0?[pe.fromTag("br")]:K})();na(i[0]),Nr(i[0],U)},$w=i=>Bl(i,!0),bh=i=>{ji(i).length===0&&Os(i)},vh=(i,m)=>({grid:i,cursor:m}),Zb=i=>Sr(i,m=>Sr(m.cells,h=>{const v=h.element;return Lf($w(v),v)})),hy=(i,m,h)=>{var v,T;const A=aa(i).rows;return ue.from((T=(v=A[m])===null||v===void 0?void 0:v.cells[h])===null||T===void 0?void 0:T.element).filter($w).orThunk(()=>Zb(A))},ol=(i,m,h)=>{const v=hy(i,m,h);return vh(i,v)},yh=i=>Ne(i,(h,v)=>Ge(h,A=>A.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),qp=(i,m,h,v)=>{const T=m[0].row,A=yh(m),$=nr(A,(U,K)=>({grid:df(U.grid,T,K.row+U.delta,h,v.getOrInit),delta:U.delta+1}),{grid:i,delta:0}).grid;return ol($,T,m[0].column)},Iw=(i,m,h,v)=>{const T=yh(m),A=T[T.length-1],$=A.row+A.rowspan,U=nr(T,(K,oe)=>df(K,$,oe.row,h,v.getOrInit),i);return ol(U,$,m[0].column)},ag=(i,m,h,v)=>{const T=m.details,A=wm(T),$=A[0].column,U=nr(A,(K,oe)=>({grid:kw(K.grid,$,oe.column+K.delta,h,v.getOrInit),delta:K.delta+1}),{grid:i,delta:0}).grid;return ol(U,T[0].row,$)},ni=(i,m,h,v)=>{const T=m.details,A=T[T.length-1],$=A.column+A.colspan,U=wm(T),K=nr(U,(oe,ve)=>kw(oe,$,ve.column,h,v.getOrInit),i);return ol(K,T[0].row,$)},py=(i,m,h,v)=>{const T=wm(m),A=Ht(T,U=>U.column),$=Aw(i,A,!0,h,v.replaceOrInit);return ol($,m[0].row,m[0].column)},za=(i,m,h,v)=>{const T=Cl(i,m,h,v.replaceOrInit);return ol(T,m[0].row,m[0].column)},Lw=(i,m,h,v)=>{const T=wm(m),A=Ht(T,U=>U.column),$=Aw(i,A,!1,h,v.replaceOrInit);return ol($,m[0].row,m[0].column)},Sm=(i,m,h,v)=>{const T=Cl(i,m,h,v.replaceOrInit);return ol(T,m[0].row,m[0].column)},jb=(i,m)=>(h,v,T,A,$)=>{const U=yh(v),K=Ht(U,ve=>ve.row),oe=zp(h,K,i,m,T,A.replaceOrInit,$);return ol(oe,v[0].row,v[0].column)},by=jb("thead",!0),Fw=jb("tbody",!1),vy=jb("tfoot",!1),Gb=(i,m,h,v)=>{const T=wm(m.details),A=rk(i,Ht(T,U=>U.column)),$=A.length>0?A[0].cells.length-1:0;return ol(A,T[0].row,Math.min(T[0].column,$))},yy=(i,m,h,v)=>{const T=yh(m),A=_w(i,T[0].row,T[T.length-1].row),$=A.length>0?A.length-1:0;return ol(A,Math.min(m[0].row,$),m[0].column)},uk=(i,m,h,v)=>{const T=m.cells;Pw(T);const A=Gr(i,m.bounds,h,v.merge(T));return vh(A,ue.from(T[0]))},Cy=(i,m,h,v)=>{const A=nr(m,($,U)=>bw($,U,h,v.unmerge(U)),i);return vh(A,ue.from(m[0]))},Ua=(i,m,h,v)=>{const A=((K,oe)=>{const ve=zn.fromTable(K);return Ti(ve,oe,!0)})(m.clipboard,m.generators),$=fl(m.row,m.column);return ww($,i,A,m.generators,h).fold(()=>vh(i,ue.some(m.element)),K=>ol(K,m.row,m.column))},qr=(i,m,h)=>{const v=fd(i,h.section),T=zn.generate(v);return Ti(T,m,!0)},Il=(i,m,h,v)=>{const T=aa(i).rows,A=m.cells[0].column,$=T[m.cells[0].row],U=qr(m.clipboard,m.generators,$),K=Sw(A,i,U,m.generators,h);return ol(K,m.cells[0].row,m.cells[0].column)},Vs=(i,m,h,v)=>{const T=aa(i).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,$=T[m.cells[0].row],U=qr(m.clipboard,m.generators,$),K=Sw(A,i,U,m.generators,h);return ol(K,m.cells[0].row,m.cells[0].column)},ki=(i,m,h,v)=>{const T=aa(i).rows,A=m.cells[0].row,$=T[A],U=qr(m.clipboard,m.generators,$),K=xw(A,i,U,m.generators,h);return ol(K,m.cells[0].row,m.cells[0].column)},zs=(i,m,h,v)=>{const T=aa(i).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,$=T[m.cells[0].row],U=qr(m.clipboard,m.generators,$),K=xw(A,i,U,m.generators,h);return ol(K,m.cells[0].row,m.cells[0].column)},wy=(i,m)=>{const h=zn.fromTable(i);return cf(h,m).bind(T=>{const A=T[T.length-1],$=T[0].column,U=A.column+A.colspan,K=Sn(Ht(h.all,oe=>xo(oe.cells,ve=>ve.column>=$&&ve.column<U)));return $b(K)}).getOr("")},Sy=(i,m)=>{const h=zn.fromTable(i);return cf(h,m).bind($b).getOr("")},Hw=(i,m)=>{const h=zn.fromTable(i);return cf(h,m).bind(T=>{const A=T[T.length-1],$=T[0].row,U=A.row+A.rowspan,K=h.all.slice($,U);return af(K)}).getOr("")},qb=(i,m,h,v)=>Nw(i,m,h,v.sizing),Kp=(i,m,h,v)=>Zp(i,m,h,v.sizing,v.resize),Kb=(i,m)=>Ge(m,h=>h.column===0&&h.isLocked),Yb=(i,m)=>Ge(m,h=>h.column+h.colspan>=i.grid.columns&&h.isLocked),Yp=(i,m)=>{const h=Yg(i),v=wm(m);return Ne(v,(T,A)=>{const U=h[A.column].map(Pn).getOr(0);return T+U},0)},Vw=i=>(m,h)=>cf(m,h).filter(v=>!(i?Kb:Yb)(m,v)).map(v=>({details:v,pixelDelta:Yp(m,v)})),zw=(i,m)=>lf(i,m).map(h=>({details:h,pixelDelta:-Yp(i,h)})),Uw=i=>(m,h)=>gw(m,h).filter(v=>!(i?Kb:Yb)(m,v.cells)),xy=tr.transform("th"),Xb=tr.transform("td"),Jb=Ea(qp,cf,dt,dt,tr.modification),Rt=Ea(Iw,cf,dt,dt,tr.modification),Ty=Ea(ag,Vw(!0),Kp,dt,tr.modification),Ww=Ea(ni,Vw(!1),Kp,dt,tr.modification),dk=Ea(Gb,zw,Kp,bh,tr.modification),Zw=Ea(yy,cf,dt,bh,tr.modification),nt=Ea(py,lf,dt,dt,xy),jw=Ea(Lw,lf,dt,dt,Xb),Wa=Ea(by,lf,dt,dt,xy),mk=Ea(Fw,lf,dt,dt,Xb),Ey=Ea(vy,lf,dt,dt,Xb),fk=Ea(za,lf,dt,dt,xy),kr=Ea(Sm,lf,dt,dt,Xb),Qb=Ea(uk,$u,qb,dt,tr.merging),gk=Ea(Cy,nl,qb,dt,tr.merging),eu=Ea(Ua,fw,qb,dt,tr.modification),ky=Ea(Il,Uw(!0),dt,dt,tr.modification),Xp=Ea(Vs,Uw(!1),dt,dt,tr.modification),Bd=Ea(ki,gw,dt,dt,tr.modification),tu=Ea(zs,gw,dt,dt,tr.modification),ev=wy,nu=Sy,Gw=Hw,_y=(i,m)=>i.dispatch("NewRow",{node:m}),tv=(i,m)=>i.dispatch("NewCell",{node:m}),gf=(i,m,h)=>{i.dispatch("TableModified",We(J({},h),{table:m}))},qw=(i,m,h,v,T)=>{i.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:T})},Oy=i=>{i.dispatch("TableSelectionClear")},hk=(i,m,h,v,T)=>{i.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:T})},nv=(i,m,h,v,T)=>{i.dispatch("ObjectResized",{target:m,width:h,height:v,origin:T})},Jp={structure:!1,style:!0},Za={structure:!0,style:!1},Kw={structure:!0,style:!0},Ch=i=>m=>m.options.get(i),Yw="100%",ov=i=>{var m;const h=i.dom,v=(m=h.getParent(i.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:i.getBody();return at(pe.fromDom(v))+"px"},Xw=(i,m)=>Bo(i)||!Hc(i)?m:Iu(i)?We(J({},m),{width:ov(i)}):We(J({},m),{width:Yw}),Jw=(i,m)=>Bo(i)||Hc(i)?m:Iu(i)?We(J({},m),{width:ov(i)}):We(J({},m),{width:Yw}),pk=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=gn(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=gn(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},wh=i=>ue.from(i.options.get("table_clone_elements")),bk=i=>{const m=i.options.get("object_resizing");return gn(m.split(","),"table")},Qw=Ch("table_header_type"),sv=Ch("table_column_resizing"),eS=i=>sv(i)==="preservetable",cg=i=>sv(i)==="resizetable",Qp=Ch("table_sizing_mode"),Sh=i=>Qp(i)==="relative",Iu=i=>Qp(i)==="fixed",Bo=i=>Qp(i)==="responsive",tS=Ch("table_resize_bars"),Hc=Ch("table_style_by_css"),Ay=i=>{const m=i.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:Jw(i,h)},nS=i=>{const m=i.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:Xw(i,h)},oS=Ch("table_use_colgroups"),lg=(i,m)=>Sh(i)?w.percentageSize(m):Iu(i)?w.pixelSize(m):w.getTableSize(m),vk=(i,m,h)=>{const v=Sl=>$o(xd(Sl))==="table",T=Sl=>!v(i)||eg(Sl).rows>1,A=Sl=>!v(i)||eg(Sl).columns>1,$=wh(i),U=cg(i)?dt:$p,K=Sl=>{switch(Qw(i)){case"section":return Ad.section();case"sectionCells":return Ad.sectionCells();case"cells":return Ad.cells();default:return Ad.getTableSectionType(Sl,"section")}},oe=(Sl,jv)=>jv.cursor.fold(()=>{const A1=ji(Sl);return Ie(A1).filter(P).map(Ai=>{h.clearSelectedCells(Sl.dom);const Rs=i.dom.createRng();return Rs.selectNode(Ai.dom),i.selection.setRng(Rs),es(Ai,"data-mce-selected","1"),Rs})},A1=>{const Ai=XE(A1),Rs=i.dom.createRng();return Rs.setStart(Ai.element.dom,Ai.offset),Rs.setEnd(Ai.element.dom,Ai.offset),i.selection.setRng(Rs),h.clearSelectedCells(Sl.dom),ue.some(Rs)}),ve=(Sl,jv,A1,Ai)=>(Rs,x_,lx=!1)=>{xi(Rs);const ix=pe.fromDom(i.getDoc()),T_=mm(A1,ix,$),E_={sizing:lg(i,Rs),resize:cg(i)?cw():gh(),section:K(Rs)};return jv(Rs)?Sl(Rs,x_,T_,E_).bind(Tf=>{m.refresh(Rs.dom),Ve(Tf.newRows,D1=>{_y(i,D1.dom)}),Ve(Tf.newCells,D1=>{tv(i,D1.dom)});const _C=oe(Rs,Tf);return P(Rs)&&(xi(Rs),lx||gf(i,Rs.dom,Ai)),_C.map(D1=>({rng:D1,effect:Ai}))}):ue.none()},Ye=ve(Zw,T,dt,Za),vt=ve(dk,A,dt,Za),ft=ve(Jb,ze,dt,Za),Le=ve(Rt,ze,dt,Za),ht=ve(Ty,ze,U,Za),Pe=ve(Ww,ze,U,Za),Dt=ve(Qb,ze,dt,Za),ln=ve(gk,ze,dt,Za),Tn=ve(ky,ze,dt,Za),fs=ve(Xp,ze,dt,Za),Da=ve(Bd,ze,dt,Za),yr=ve(tu,ze,dt,Za),wl=ve(eu,ze,dt,Kw),xf=ve(fk,ze,dt,Za),Wv=ve(kr,ze,dt,Za),kC=ve(nt,ze,dt,Za),Zv=ve(jw,ze,dt,Za),Zo=ve(Wa,ze,dt,Za),rl=ve(mk,ze,dt,Za),al=ve(Ey,ze,dt,Za);return{deleteRow:Ye,deleteColumn:vt,insertRowsBefore:ft,insertRowsAfter:Le,insertColumnsBefore:ht,insertColumnsAfter:Pe,mergeCells:Dt,unmergeCells:ln,pasteColsBefore:Tn,pasteColsAfter:fs,pasteRowsBefore:Da,pasteRowsAfter:yr,pasteCells:wl,makeCellsHeader:xf,unmakeCellsHeader:Wv,makeColumnsHeader:kC,unmakeColumnsHeader:Zv,makeRowsHeader:Zo,makeRowsBody:rl,makeRowsFooter:al,getTableRowType:Gw,getTableCellType:nu,getTableColType:ev}},sS=(i,m,h)=>{const v=Ca(i,m,1);h===1||v<=1?ns(i,m):es(i,m,Math.min(h,v))},rS=(i,m)=>h=>{const v=h.column+h.colspan-1,T=h.column;return v>=i&&T<m},yk=(i,m,h)=>{if(zn.hasColumns(i)){const v=xo(zn.justColumns(i),rS(m,h)),T=Ht(v,$=>{const U=ic($.element);return sS(U,"span",h-m),U}),A=pe.fromTag("colgroup");return Nr(A,T),[A]}else return[]},Ck=(i,m,h)=>Ht(i.all,v=>{const T=xo(v.cells,rS(m,h)),A=Ht(T,U=>{const K=ic(U.element);return sS(K,"colspan",h-m),K}),$=pe.fromTag("tr");return Nr($,A),$}),wk=(i,m)=>{const h=zn.fromTable(i);return lf(h,m).map(T=>{const A=T[T.length-1],$=T[0].column,U=A.column+A.colspan,K=yk(h,$,U),oe=Ck(h,$,U);return[...K,...oe]})},aS=(i,m,h)=>{const v=zn.fromTable(i);return cf(v,m).bind(A=>{const $=Ti(v,h,!1),K=aa($).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),oe=Ws(K,Ye=>{const vt=xo(Ye.cells,ft=>!ft.isLocked);return vt.length>0?[We(J({},Ye),{cells:vt})]:[]}),ve=Fb(oe);return Lf(ve.length>0,ve)}).map(A=>rs(A))},xh=Hs.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),e1=(i,m,h)=>{const v=h.substring(0,h.length-i.length),T=parseFloat(v);return v===T.toString()?m(T):xh.invalid(h)},Sk=i=>va(i,"%")?e1("%",xh.percent,i):va(i,"px")?e1("px",xh.pixels,i):xh.invalid(i),ig=We(J({},xh),{from:Sk}),xk=(i,m)=>Ht(i,h=>ig.from(h).fold(()=>h,T=>T/m*100+"%",T=>T+"%")),Tk=(i,m,h)=>{const v=h/m;return Ht(i,T=>ig.from(T).fold(()=>T,$=>$*v+"px",$=>$/100*h+"px"))},cS=(i,m)=>{const h=i.fold(()=>re(""),v=>{const T=v/m;return re(T+"px")},()=>{const v=100/m;return re(v+"%")});return Dn(m,h)},lS=(i,m,h)=>i.fold(()=>m,v=>Tk(m,h,v),v=>xk(m,h)),iS=(i,m,h)=>{const v=ig.from(h),T=vn(i,A=>A==="0px")?cS(v,i.length):lS(v,i,m);return kk(T)},ug=(i,m)=>i.length===0?m:nr(i,(h,v)=>ig.from(v).fold(re(0),Ut,Ut)+h,0),uS=(i,m)=>{const h=Math.floor(i);return{value:h+m,remainder:i-h}},Ek=(i,m)=>ig.from(i).fold(re(i),h=>h+m+"px",h=>h+m+"%"),kk=i=>{if(i.length===0)return i;const m=nr(i,(v,T)=>{const A=ig.from(T).fold(()=>({value:T,remainder:0}),$=>uS($,"px"),$=>({value:$+"%",remainder:0}));return{output:[A.value].concat(v.output),remainder:v.remainder+A.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([Ek(h[h.length-1],Math.round(m.remainder))])},_k=ig.from,Th=(i,m,h)=>{Ve(m,v=>{const T=i.slice(v.column,v.colspan+v.column),A=ug(T,dc());Uo(v.element,"width",A+h)})},dg=(i,m,h)=>{Ve(m,(v,T)=>{const A=ug([i[T]],dc());Uo(v.element,"width",A+h)})},rv=(i,m,h,v)=>{Ve(h,T=>{const A=i.slice(T.row,T.rowspan+T.row),$=ug(A,tm());Uo(T.element,"height",$+v)}),Ve(m,(T,A)=>{Uo(T.element,"height",i[A])})},av=i=>_k(i).fold(re("px"),re("px"),re("%")),dS=(i,m,h)=>{const v=zn.fromTable(i),T=v.all,A=zn.justCells(v),$=zn.justColumns(v);m.each(U=>{const K=av(U),oe=mn(i),ve=qf(v,i),Ye=iS(ve,oe,U);zn.hasColumns(v)?dg(Ye,$,K):Th(Ye,A,K),Uo(i,"width",U)}),h.each(U=>{const K=av(U),oe=Xl(i),ve=ef(v,i,Ou),Ye=iS(ve,oe,U);rv(Ye,T,A,K),Uo(i,"height",U)})},Pd=Ap,cv=Ql,mS=q0,Lu=i=>{ns(i,"width")},hf=i=>{const m=qi(i);dS(i,ue.some(m),ue.none()),Lu(i)},Dy=i=>{const m=br(i);dS(i,ue.some(m),ue.none()),Lu(i)},fS=i=>{Oc(i,"width");const m=ud(i),h=m.length>0?m:ji(i);Ve(h,v=>{Oc(v,"width"),Lu(v)}),Lu(i)},Ok={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},gS=()=>pe.fromTag("th"),hS=()=>pe.fromTag("td"),Ak=()=>pe.fromTag("col"),Dk=(i,m,h,v)=>{const T=pe.fromTag("tr");for(let A=0;A<i;A++){const $=v<m||A<h?gS():hS();A<h&&es($,"scope","row"),v<m&&es($,"scope","col"),ls($,pe.fromTag("br")),ls(T,$)}return T},pS=i=>{const m=pe.fromTag("colgroup");return Dn(i,()=>ls(m,Ak())),m},lv=(i,m,h,v)=>Dn(i,T=>Dk(m,h,v,T)),bS=(i,m,h,v,T,A=Ok)=>{const $=pe.fromTag("table"),U=T!=="cells";La($,A.styles),mr($,A.attributes),A.colGroups&&ls($,pS(m));const K=Math.min(i,h);if(U&&h>0){const ft=pe.fromTag("thead");ls($,ft);const ht=lv(h,m,T==="sectionCells"?K:0,v);Nr(ft,ht)}const oe=pe.fromTag("tbody");ls($,oe);const ve=U?i-K:i,vt=lv(ve,m,U?0:h,v);return Nr(oe,vt),$},Rk=i=>i.dom.innerHTML,Mk=i=>{const m=pe.fromTag("div"),h=pe.fromDom(i.dom.cloneNode(!0));return ls(m,h),Rk(m)},Nk=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},Ry=(i,m)=>{Ia(m,"td,th").each(Fn(Nk,i))},vS=(i,m)=>{Ve(xr(m,"tr"),h=>{_y(i,h.dom),Ve(xr(h,"th,td"),v=>{tv(i,v.dom)})})},yS=i=>ao(i)&&i.indexOf("%")!==-1,CS=(i,m,h,v,T)=>{const A=nS(i),$={styles:A,attributes:Ay(i),colGroups:oS(i)};return i.undoManager.ignore(()=>{const U=bS(h,m,T,v,Qw(i),$);es(U,"data-mce-id","__mce");const K=Mk(U);i.insertContent(K),i.addVisual()}),Ia(xd(i),'table[data-mce-id="__mce"]').map(U=>(Iu(i)?Dy(U):Bo(i)?fS(U):(Sh(i)||yS(A.width))&&hf(U),xi(U),ns(U,"data-mce-id"),vS(i,U),Ry(i,U),U.dom)).getOrNull()},wS=(i,m,h,v={})=>{const T=A=>Jn(A)&&A>0;if(T(m)&&T(h)){const A=v.headerRows||0,$=v.headerColumns||0;return CS(i,h,m,$,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var t1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const My="x-tinymce/dom-table-",Ny=My+"rows",n1=My+"columns",iv=i=>{const m=t1.FakeClipboardItem(i);t1.write([m])},By=i=>{var m;const h=(m=t1.read())!==null&&m!==void 0?m:[];return Sr(h,v=>ue.from(v.getType(i)))},SS=i=>{By(i).isSome()&&t1.clear()},xS=i=>{i.fold(Bk,m=>iv({[Ny]:m}))},pf=()=>By(Ny),Bk=()=>SS(Ny),TS=i=>{i.fold(Pk,m=>iv({[n1]:m}))},o1=()=>By(n1),Pk=()=>SS(n1),uv=i=>eD(Dp(i),Xi(i)).filter(Td),$k=i=>ow(Dp(i),Xi(i)).filter(Td),Ik=(i,m)=>{const h=Xi(i),v=()=>uv(i).each(Pe=>{Zs(Pe,h).filter(Q(h)).each(Dt=>{const ln=pe.fromText("");if($a(Dt,ln),Os(Dt),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const Tn=i.dom.createRng();Tn.setStart(ln.dom,0),Tn.setEnd(ln.dom,0),i.selection.setRng(Tn),i.nodeChanged()}})}),T=Pe=>uv(i).each(Dt=>{Bo(i)||Iu(i)||Sh(i)||Zs(Dt,h).each(Tn=>{Pe==="relative"&&!Pd(Tn)?hf(Tn):Pe==="fixed"&&!cv(Tn)?Dy(Tn):Pe==="responsive"&&!mS(Tn)&&fS(Tn),xi(Tn),gf(i,Tn.dom,Za)})}),A=Pe=>Zs(Pe,h),$=Pe=>$k(i).bind(Dt=>A(Dt).map(ln=>Pe(ln,Dt))),U=(Pe,Dt)=>{$(ln=>{i.formatter.toggle("tableclass",{value:Dt},ln.dom),gf(i,ln.dom,Jp)})},K=(Pe,Dt)=>{$(ln=>{const Tn=tl(i),Da=vn(Tn,yr=>i.formatter.match("tablecellclass",{value:Dt},yr.dom))?i.formatter.remove:i.formatter.apply;Ve(Tn,yr=>Da("tablecellclass",{value:Dt},yr.dom)),gf(i,ln.dom,Jp)})},oe=()=>{uv(i).each(Pe=>{Zs(Pe,h).each(Dt=>{Gl(Dt,"caption").fold(()=>{const ln=pe.fromTag("caption");ls(ln,pe.fromText("Caption")),ld(Dt,ln,0),i.selection.setCursorLocation(ln.dom,0)},ln=>{ks("caption")(Pe)&&Cu("td",Dt).each(Tn=>i.selection.setCursorLocation(Tn.dom,0)),Os(ln)}),gf(i,Dt.dom,Za)})})},ve=Pe=>{i.focus()},Ye=(Pe,Dt=!1)=>$((ln,Tn)=>{const fs=mh(tl(i),ln,Tn);Pe(ln,fs,Dt).each(ve)}),vt=()=>$((Pe,Dt)=>{const ln=mh(tl(i),Pe,Dt),Tn=mm(dt,pe.fromDom(i.getDoc()),ue.none());return aS(Pe,ln,Tn)}),ft=()=>$((Pe,Dt)=>{const ln=mh(tl(i),Pe,Dt);return wk(Pe,ln)}),Le=(Pe,Dt)=>Dt().each(ln=>{const Tn=Ht(ln,fs=>ic(fs));$((fs,Da)=>{const yr=fm(pe.fromDom(i.getDoc())),wl=KE(tl(i),Da,Tn,yr);Pe(fs,wl).each(ve)})}),ht=Pe=>(Dt,ln)=>di(ln,"type").each(Tn=>{Ye(Pe(Tn),ln.no_events)});Jo({mceTableSplitCells:()=>Ye(m.unmergeCells),mceTableMergeCells:()=>Ye(m.mergeCells),mceTableInsertRowBefore:()=>Ye(m.insertRowsBefore),mceTableInsertRowAfter:()=>Ye(m.insertRowsAfter),mceTableInsertColBefore:()=>Ye(m.insertColumnsBefore),mceTableInsertColAfter:()=>Ye(m.insertColumnsAfter),mceTableDeleteCol:()=>Ye(m.deleteColumn),mceTableDeleteRow:()=>Ye(m.deleteRow),mceTableCutCol:()=>ft().each(Pe=>{TS(Pe),Ye(m.deleteColumn)}),mceTableCutRow:()=>vt().each(Pe=>{xS(Pe),Ye(m.deleteRow)}),mceTableCopyCol:()=>ft().each(Pe=>TS(Pe)),mceTableCopyRow:()=>vt().each(Pe=>xS(Pe)),mceTablePasteColBefore:()=>Le(m.pasteColsBefore,o1),mceTablePasteColAfter:()=>Le(m.pasteColsAfter,o1),mceTablePasteRowBefore:()=>Le(m.pasteRowsBefore,pf),mceTablePasteRowAfter:()=>Le(m.pasteRowsAfter,pf),mceTableDelete:v,mceTableCellToggleClass:K,mceTableToggleClass:U,mceTableToggleCaption:oe,mceTableSizingMode:(Pe,Dt)=>T(Dt),mceTableCellType:ht(Pe=>Pe==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:ht(Pe=>Pe==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:ht(Pe=>{switch(Pe){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Pe,Dt)=>i.addCommand(Dt,Pe)),i.addCommand("mceInsertTable",(Pe,Dt)=>{wS(i,Dt.rows,Dt.columns,Dt.options)}),i.addCommand("mceTableApplyCellStyle",(Pe,Dt)=>{const ln=Da=>"tablecell"+Da.toLowerCase().replace("-","");if(!kt(Dt))return;const Tn=xo(tl(i),Td);if(Tn.length===0)return;const fs=ea(Dt,(Da,yr)=>i.formatter.has(ln(yr))&&ao(Da));No(fs)||(Jo(fs,(Da,yr)=>{const wl=ln(yr);Ve(Tn,xf=>{Da===""?i.formatter.remove(wl,{value:null},xf.dom,!0):i.formatter.apply(wl,{value:Da},xf.dom)})}),A(Tn[0]).each(Da=>gf(i,Da.dom,Jp)))})},ES=(i,m)=>{const h=Xi(i),v=T=>ow(Dp(i)).bind(A=>Zs(A,h).map($=>{const U=mh(tl(i),$,A);return T($,U)})).getOr("");Jo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,A)=>i.addQueryValueHandler(A,T))},mg=Hs.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),s1=(i,m,h,v)=>i.fold(m,h,v),r1=i=>i.fold(Ut,Ut,Ut),Py=mg.before,Lk=mg.on,$y=mg.after,pc={before:Py,on:Lk,after:$y,cata:s1,getStart:r1},Eh={create:(i,m)=>({selection:i,kill:m})},Fk=(i,m)=>{const h=i.document.createRange();return h.selectNode(m.dom),h},a1=(i,m)=>{const h=i.document.createRange();return fg(h,m),h},fg=(i,m)=>i.selectNodeContents(m.dom),gg=(i,m)=>{m.fold(h=>{i.setStartBefore(h.dom)},(h,v)=>{i.setStart(h.dom,v)},h=>{i.setStartAfter(h.dom)})},dv=(i,m)=>{m.fold(h=>{i.setEndBefore(h.dom)},(h,v)=>{i.setEnd(h.dom,v)},h=>{i.setEndAfter(h.dom)})},kh=(i,m,h)=>{const v=i.document.createRange();return gg(v,m),dv(v,h),v},mv=(i,m,h,v,T)=>{const A=i.document.createRange();return A.setStart(m.dom,h),A.setEnd(v.dom,T),A},bf=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),_r=i=>{const m=i.getClientRects(),h=m.length>0?m[0]:i.getBoundingClientRect();return h.width>0||h.height>0?ue.some(h).map(bf):ue.none()},hg=Hs.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Iy=(i,m,h)=>m(pe.fromDom(h.startContainer),h.startOffset,pe.fromDom(h.endContainer),h.endOffset),Hk=(i,m)=>m.match({domRange:h=>({ltr:re(h),rtl:ue.none}),relative:(h,v)=>({ltr:Eu(()=>kh(i,h,v)),rtl:Eu(()=>ue.some(kh(i,v,h)))}),exact:(h,v,T,A)=>({ltr:Eu(()=>mv(i,h,v,T,A)),rtl:Eu(()=>ue.some(mv(i,T,A,h,v)))})}),Ly=(i,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>hg.rtl(pe.fromDom(T.endContainer),T.endOffset,pe.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>Iy(i,hg.ltr,h)):Iy(i,hg.ltr,h)},_h=(i,m)=>{const h=Hk(i,m);return Ly(i,h)},pg=(i,m)=>_h(i,m).match({ltr:(v,T,A,$)=>{const U=i.document.createRange();return U.setStart(v.dom,T),U.setEnd(A.dom,$),U},rtl:(v,T,A,$)=>{const U=i.document.createRange();return U.setStart(A.dom,$),U.setEnd(v.dom,T),U}});hg.ltr,hg.rtl;const Oh={create:(i,m,h,v)=>({start:i,soffset:m,finish:h,foffset:v})},c1={create:(i,m,h,v)=>({start:pc.on(i,m),finish:pc.on(h,v)})},_S=(i,m)=>{const h=pg(i,m);return Oh.create(pe.fromDom(h.startContainer),h.startOffset,pe.fromDom(h.endContainer),h.endOffset)},xm=c1.create,fv=(i,m,h,v,T,A,$)=>Oo(h,T)&&v===A?ue.none():Js(h,"td,th",m).bind(U=>Js(T,"td,th",m).bind(K=>ua(i,m,U,K,$))),ua=(i,m,h,v,T)=>Oo(h,v)?ue.none():Np(h,v,m).bind(A=>{const $=A.boxes.getOr([]);return $.length>1?(T(i,$,A.start,A.finish),ue.some(Eh.create(ue.some(xm(h,0,h,xa(h))),!0))):ue.none()}),OS=(i,m,h,v,T)=>{const A=$=>(T.clearBeforeUpdate(h),T.selectRange(h,$.boxes,$.start,$.finish),$.boxes);return ny(v,i,m,T.firstSelectedSelector,T.lastSelectedSelector).map(A)},ou=(i,m)=>({item:i,mode:m}),Vy=(i,m,h,v=Fu)=>i.property().parent(m).map(T=>ou(T,v)),Fu=(i,m,h,v=Hu)=>h.sibling(i,m).map(T=>ou(T,v)),Hu=(i,m,h,v=Hu)=>{const T=i.property().children(m);return h.first(T).map($=>ou($,v))},zy=[{current:Vy,next:Fu,fallback:ue.none()},{current:Fu,next:Hu,fallback:ue.some(Vy)},{current:Hu,next:Hu,fallback:ue.some(Fu)}],Ah=(i,m,h,v,T=zy)=>V(T,$=>$.current===h).bind($=>$.current(i,m,v,$.next).orThunk(()=>$.fallback.bind(U=>Ah(i,m,U,v)))),gv={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?ue.some(h[h.length-1]):ue.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?ue.some(h[0]):ue.none()})},hv=(i,m,h,v,T,A)=>Ah(i,m,v,T).bind(U=>A(U.item)?ue.none():h(U.item)?ue.some(U.item):hv(i,U.item,h,U.mode,T,A)),pv=(i,m,h,v)=>hv(i,m,h,Fu,gv.left(),v),Vu=(i,m,h,v)=>hv(i,m,h,Fu,gv.right(),v),Uy=i=>m=>i.property().children(m).length===0,zk=(i,m,h)=>Wy(i,m,Uy(i),h),DS=(i,m,h)=>Zy(i,m,Uy(i),h),Wy=pv,Zy=Vu,bv=Nu(),RS=(i,m)=>zk(bv,i,m),oi=(i,m)=>DS(bv,i,m),vv=(i,m,h)=>Wy(bv,i,m,h),MS=(i,m,h)=>Zy(bv,i,m,h),Dh=(i,m,h)=>gr(i,m,h).isSome(),bc=Hs.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),su=(i,m,h)=>{const v=i.getRect(m),T=i.getRect(h);return T.right>v.left&&T.left<v.right},Ll=i=>Js(i,"tr"),$d=(i,m,h,v,T,A,$)=>Js(v,"td,th",$).bind(U=>Js(m,"td,th",$).map(K=>Oo(U,K)?Oo(v,U)&&xa(U)===T?A(K):bc.none("in same cell"):co(Ll,[U,K]).fold(()=>su(i,K,U)?bc.success():A(K),oe=>A(K)))).getOr(bc.none("default")),NS=(i,m,h,v,T)=>i.fold(m,h,v,T),sl=We(J({},bc),{verify:$d,cata:NS}),Kr=(i,m,h,v)=>({parent:i,children:m,element:h,index:v}),jy=i=>ml(i).bind(m=>{const h=mo(m);return l1(h,i).map(v=>Kr(m,h,i,v))}),l1=(i,m)=>vc(i,Fn(Oo,m)),bg=ks("br"),i1=(i,m,h)=>m(i,h).bind(v=>Cc(v)&&Lo(v).trim().length===0?i1(v,m,h):ue.some(v)),yv=(i,m,h)=>h.traverse(m).orThunk(()=>i1(m,h.gather,i)).map(h.relative),u1=(i,m)=>ba(i,m).filter(bg).orThunk(()=>ba(i,m-1).filter(bg)),BS=(i,m,h,v)=>u1(m,h).bind(T=>v.traverse(T).fold(()=>i1(T,v.gather,i).map(v.relative),A=>jy(A).map($=>pc.on($.parent,$.index)))),Uk=(i,m,h,v)=>(bg(m)?yv(i,m,v):BS(i,m,h,v)).map(A=>({start:A,finish:A})),Wk=i=>sl.cata(i,m=>ue.none(),()=>ue.none(),m=>ue.some(rf(m,0)),m=>ue.some(rf(m,xa(m)))),Id=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),d1=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),Cv=(i,m,h)=>({left:i.left+m,top:i.top+h,right:i.right+m,bottom:i.bottom+h}),Ld=i=>i.top,wv=i=>i.bottom,Sv=(i,m,h)=>h>=0&&h<xa(m)?i.getRangedRect(m,h,m,h+1):h>0?i.getRangedRect(m,h-1,m,h):ue.none(),vg=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),Gy=(i,m)=>ue.some(i.getRect(m)),PS=(i,m,h)=>Ur(m)?Gy(i,m).map(vg):Cc(m)?Sv(i,m,h).map(vg):ue.none(),qy=(i,m)=>Ur(m)?Gy(i,m).map(vg):Cc(m)?i.getRangedRect(m,0,m,xa(m)).map(vg):ue.none(),vf=5,Zk=100,_a=Hs.generate([{none:[]},{retry:["caret"]}]),jk=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,Rh=(i,m,h)=>As(m,ia).fold(Jt,v=>qy(i,v).exists(T=>jk(h,T))),Mh=(i,m,h,v,T)=>{const A=Id(T,vf);return Math.abs(h.bottom-v.bottom)<1||h.top>T.bottom?_a.retry(A):h.top===T.bottom?_a.retry(Id(T,1)):Rh(i,m,T)?_a.retry(Cv(A,vf,0)):_a.none()},Gk={point:Ld,adjuster:(i,m,h,v,T)=>{const A=d1(T,vf);return Math.abs(h.top-v.top)<1||h.bottom<T.top?_a.retry(A):h.bottom===T.top?_a.retry(d1(T,1)):Rh(i,m,T)?_a.retry(Cv(A,vf,0)):_a.none()},move:d1,gather:RS},qk={point:wv,adjuster:Mh,move:Id,gather:oi},xv=(i,m,h)=>i.elementFromPoint(m,h).filter(v=>$o(v)==="table").isSome(),Kk=(i,m,h,v,T)=>Tv(i,m,h,m.move(v,vf),T),Tv=(i,m,h,v,T)=>T===0?ue.some(v):xv(i,v.left,m.point(v))?Kk(i,m,h,v,T-1):i.situsFromPoint(v.left,m.point(v)).bind(A=>A.start.fold(ue.none,$=>qy(i,$).bind(U=>m.adjuster(i,$,U,h,v).fold(ue.none,K=>Tv(i,m,h,K,T-1))).orThunk(()=>ue.some(v)),ue.none)),Yk=(i,m,h)=>i.point(m)>h.getInnerHeight()?ue.some(i.point(m)-h.getInnerHeight()):i.point(m)<0?ue.some(-i.point(m)):ue.none(),IS=(i,m,h)=>{const v=i.move(h,vf),T=Tv(m,i,h,v,Zk).getOr(v);return Yk(i,T,m).fold(()=>m.situsFromPoint(T.left,i.point(T)),A=>(m.scrollBy(0,A),m.situsFromPoint(T.left,i.point(T)-A)))},Ev={tryUp:Fn(IS,Gk),tryDown:Fn(IS,qk),getJumpSize:re(vf)},Xk=20,Ky=(i,m,h)=>i.getSelection().bind(v=>Uk(m,v.finish,v.foffset,h).fold(()=>ue.some(rf(v.finish,v.foffset)),T=>{const A=i.fromSitus(T),$=sl.verify(i,v.finish,v.foffset,A.finish,A.foffset,h.failure,m);return Wk($)})),m1=(i,m,h,v,T,A)=>A===0?ue.none():Nh(i,m,h,v,T).bind($=>{const U=i.fromSitus($),K=sl.verify(i,h,v,U.finish,U.foffset,T.failure,m);return sl.cata(K,()=>ue.none(),()=>ue.some($),oe=>Oo(h,oe)&&v===0?Qn(i,h,v,d1,T):m1(i,m,oe,0,T,A-1),oe=>Oo(h,oe)&&v===xa(oe)?Qn(i,h,v,Id,T):m1(i,m,oe,xa(oe),T,A-1))}),Qn=(i,m,h,v,T)=>PS(i,m,h).bind(A=>Tm(i,T,v(A,Ev.getJumpSize()))),Tm=(i,m,h)=>{const v=bi().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,h):ue.none()},Nh=(i,m,h,v,T)=>PS(i,h,v).bind(A=>Tm(i,T,A)),Yy=(i,m,h)=>Ky(i,m,h).bind(v=>m1(i,m,v.element,v.offset,h,Xk).map(i.fromSitus)),LS=(i,m)=>Dh(i,h=>ml(h).exists(v=>Oo(v,m))),Em=(i,m,h,v,T)=>Js(v,"td,th",m).bind(A=>Js(A,"table",m).bind($=>LS(T,$)?Yy(i,m,h).bind(U=>Js(U.finish,"td,th",m).map(K=>({start:A,finish:K,range:U}))):ue.none())),Bh=(i,m,h,v,T,A)=>A(v,m).orThunk(()=>Em(i,m,h,v,T).map($=>{const U=$.range;return Eh.create(ue.some(xm(U.start,U.soffset,U.finish,U.foffset)),!0)})),Xy=(i,m)=>Js(i,"tr",m).bind(h=>Js(h,"table",m).bind(v=>{const T=xr(v,"tr");return Oo(h,T[0])?vv(v,A=>dm(A).isSome(),m).map(A=>{const $=xa(A);return Eh.create(ue.some(xm(A,$,A,$)),!0)}):ue.none()})),Jy=(i,m)=>Js(i,"tr",m).bind(h=>Js(h,"table",m).bind(v=>{const T=xr(v,"tr");return Oo(h,T[T.length-1])?MS(v,A=>Nl(A).isSome(),m).map(A=>Eh.create(ue.some(xm(A,0,A,0)),!0)):ue.none()})),kv=(i,m,h,v,T,A,$)=>Em(i,h,v,T,A).bind(U=>ua(m,h,U.start,U.finish,$)),_v=i=>{let m=i;return{get:()=>m,set:T=>{m=T}}},FS=i=>{const m=_v(ue.none()),h=()=>m.get().each(i);return{clear:()=>{h(),m.set(ue.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:U=>{h(),m.set(ue.some(U))}}},f1=()=>{const i=FS(dt),m=h=>i.get().each(h);return We(J({},i),{on:m})},g1=(i,m)=>Js(i,"td,th",m),HS=i=>Ga(i).exists(Bl),VS=(i,m,h,v)=>{const T=f1(),A=T.clear,$=ve=>{T.on(Ye=>{v.clearBeforeUpdate(m),g1(ve.target,h).each(vt=>{Np(Ye,vt,h).each(ft=>{const Le=ft.boxes.getOr([]);if(Le.length===1){const ht=Le[0],Pe=of(ht)==="false",Dt=hr(kb(ve.target),ht,Oo);Pe&&Dt&&(v.selectRange(m,Le,ht,ht),i.selectContents(ht))}else Le.length>1&&(v.selectRange(m,Le,ft.start,ft.finish),i.selectContents(vt))})})})};return{clearstate:A,mousedown:ve=>{v.clear(m),g1(ve.target,h).filter(HS).each(T.set)},mouseover:ve=>{$(ve)},mouseup:ve=>{$(ve),A()}}},Ph={traverse:_l,gather:oi,relative:pc.before,retry:Ev.tryDown,failure:sl.failedDown},Ov={traverse:kl,gather:RS,relative:pc.before,retry:Ev.tryUp,failure:sl.failedUp},yg=i=>m=>m===i,yf=yg(38),h1=yg(40),Cg=i=>i>=37&&i<=40,zS={isBackward:yg(37),isForward:yg(39)},Qy={isBackward:yg(39),isForward:yg(37)},$h=i=>{const m=i!==void 0?i.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return vi(h,v)},eC=(i,m,h)=>{const T=(h!==void 0?h.dom:document).defaultView;T&&T.scrollBy(i,m)},Av=Hs.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Jk=i=>Av.exact(i.start,i.soffset,i.finish,i.foffset),US=i=>i.match({domRange:m=>pe.fromDom(m.startContainer),relative:(m,h)=>pc.getStart(m),exact:(m,h,v,T)=>m}),Cf=Av.domRange,tC=Av.relative,nC=Av.exact,Dv=i=>{const m=US(i);return Io(m)},WS=Oh.create,km={domRange:Cf,relative:tC,exact:nC,exactFromRange:Jk,getWin:Dv,range:WS},oC=(i,m,h)=>{var v,T;return ue.from((T=(v=i.dom).caretPositionFromPoint)===null||T===void 0?void 0:T.call(v,m,h)).bind(A=>{if(A.offsetNode===null)return ue.none();const $=i.dom.createRange();return $.setStart(A.offsetNode,A.offset),$.collapse(),ue.some($)})},St=(i,m,h)=>{var v,T;return ue.from((T=(v=i.dom).caretRangeFromPoint)===null||T===void 0?void 0:T.call(v,m,h))},Oa=(()=>document.caretPositionFromPoint?oC:document.caretRangeFromPoint?St:ue.none)(),_i=(i,m,h)=>{const v=pe.fromDom(i.document);return Oa(v,m,h).map(T=>Oh.create(pe.fromDom(T.startContainer),T.startOffset,pe.fromDom(T.endContainer),T.endOffset))},Yr=(i,m)=>{const h=$o(i);return h==="input"?pc.after(i):gn(["br","img"],h)?m===0?pc.before(i):pc.after(i):pc.on(i,m)},ru=(i,m)=>{const h=i.fold(pc.before,Yr,pc.after),v=m.fold(pc.before,Yr,pc.after);return km.relative(h,v)},si=(i,m,h,v)=>{const T=Yr(i,m),A=Yr(h,v);return km.relative(T,A)},Lr=(i,m,h,v)=>{const A=dl(i).dom.createRange();return A.setStart(i.dom,m),A.setEnd(h.dom,v),A},sC=(i,m,h,v)=>{const T=Lr(i,m,h,v),A=Oo(i,h)&&m===v;return T.collapsed&&!A},Ih=i=>ue.from(i.getSelection()),wg=(i,m)=>{Ih(i).each(h=>{h.removeAllRanges(),h.addRange(m)})},p1=(i,m,h,v,T)=>{const A=mv(i,m,h,v,T);wg(i,A)},ZS=(i,m,h,v,T,A)=>{m.collapse(h.dom,v),m.extend(T.dom,A)},jS=(i,m)=>_h(i,m).match({ltr:(h,v,T,A)=>{p1(i,h,v,T,A)},rtl:(h,v,T,A)=>{Ih(i).each($=>{if($.setBaseAndExtent)$.setBaseAndExtent(h.dom,v,T.dom,A);else if($.extend)try{ZS(i,$,h,v,T,A)}catch(U){p1(i,T,A,h,v)}else p1(i,T,A,h,v)})}}),GS=(i,m,h,v,T)=>{const A=si(m,h,v,T);jS(i,A)},Rv=(i,m,h)=>{const v=ru(m,h);jS(i,v)},rC=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),h=i.getRangeAt(i.rangeCount-1);return ue.some(Oh.create(pe.fromDom(m.startContainer),m.startOffset,pe.fromDom(h.endContainer),h.endOffset))}else return ue.none()},qS=i=>{if(i.anchorNode===null||i.focusNode===null)return rC(i);{const m=pe.fromDom(i.anchorNode),h=pe.fromDom(i.focusNode);return sC(m,i.anchorOffset,h,i.focusOffset)?ue.some(Oh.create(m,i.anchorOffset,h,i.focusOffset)):rC(i)}},b1=(i,m,h=!0)=>{const T=(h?a1:Fk)(i,m);wg(i,T)},v1=i=>Ih(i).filter(m=>m.rangeCount>0).bind(qS),y1=i=>v1(i).map(m=>km.exact(m.start,m.soffset,m.finish,m.foffset)),C1=(i,m)=>{const h=pg(i,m);return _r(h)},Mv=(i,m,h)=>_i(i,m,h),Nv=i=>{Ih(i).each(m=>m.removeAllRanges())},Sg=i=>({elementFromPoint:(Pe,Dt)=>pe.fromPoint(pe.fromDom(i.document),Pe,Dt),getRect:Pe=>Pe.dom.getBoundingClientRect(),getRangedRect:(Pe,Dt,ln,Tn)=>{const fs=km.exact(Pe,Dt,ln,Tn);return C1(i,fs)},getSelection:()=>y1(i).map(Pe=>_S(i,Pe)),fromSitus:Pe=>{const Dt=km.relative(Pe.start,Pe.finish);return _S(i,Dt)},situsFromPoint:(Pe,Dt)=>Mv(i,Pe,Dt).map(ln=>c1.create(ln.start,ln.soffset,ln.finish,ln.foffset)),clearSelection:()=>{Nv(i)},collapseSelection:(Pe=!1)=>{y1(i).each(Dt=>Dt.fold(ln=>ln.collapse(Pe),(ln,Tn)=>{const fs=Pe?ln:Tn;Rv(i,fs,fs)},(ln,Tn,fs,Da)=>{const yr=Pe?ln:fs,wl=Pe?Tn:Da;GS(i,yr,wl,yr,wl)}))},setSelection:Pe=>{GS(i,Pe.start,Pe.soffset,Pe.finish,Pe.foffset)},setRelativeSelection:(Pe,Dt)=>{Rv(i,Pe,Dt)},selectNode:Pe=>{b1(i,Pe,!1)},selectContents:Pe=>{b1(i,Pe)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>$h(pe.fromDom(i.document)).top,scrollBy:(Pe,Dt)=>{eC(Pe,Dt,pe.fromDom(i.document))}}),Fl=(i,m)=>({rows:i,cols:m}),w1=(i,m,h,v)=>{const T=Sg(i),A=VS(T,m,h,v);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},KS=i=>As(i,tn).exists(Bl),aC=(i,m)=>KS(i)||KS(m),Qk=(i,m,h,v)=>{const T=Sg(i),A=()=>(v.clear(m),ue.none());return{keydown:(K,oe,ve,Ye,vt,ft)=>{const Le=K.raw,ht=Le.which,Pe=Le.shiftKey===!0;return ih(m,v.selectedSelector).fold(()=>(Cg(ht)&&!Pe&&v.clearBeforeUpdate(m),Cg(ht)&&Pe&&!aC(oe,Ye)?ue.none:h1(ht)&&Pe?Fn(kv,T,m,h,Ph,Ye,oe,v.selectRange):yf(ht)&&Pe?Fn(kv,T,m,h,Ov,Ye,oe,v.selectRange):h1(ht)?Fn(Bh,T,h,Ph,Ye,oe,Jy):yf(ht)?Fn(Bh,T,h,Ov,Ye,oe,Xy):ue.none),ln=>{const Tn=fs=>()=>Sr(fs,yr=>OS(yr.rows,yr.cols,m,ln,v)).fold(()=>Db(m,v.firstSelectedSelector,v.lastSelectedSelector).map(yr=>{const wl=h1(ht)||ft.isForward(ht)?pc.after:pc.before;return T.setRelativeSelection(pc.on(yr.first,0),wl(yr.table)),v.clear(m),Eh.create(ue.none(),!0)}),yr=>ue.some(Eh.create(ue.none(),!0)));return Cg(ht)&&Pe&&!aC(oe,Ye)?ue.none:h1(ht)&&Pe?Tn([Fl(1,0)]):yf(ht)&&Pe?Tn([Fl(-1,0)]):ft.isBackward(ht)&&Pe?Tn([Fl(0,-1),Fl(-1,0)]):ft.isForward(ht)&&Pe?Tn([Fl(0,1),Fl(1,0)]):Cg(ht)&&!Pe?A:ue.none})()},keyup:(K,oe,ve,Ye,vt)=>ih(m,v.selectedSelector).fold(()=>{const ft=K.raw,Le=ft.which;return ft.shiftKey===!0&&Cg(Le)&&aC(oe,Ye)?fv(m,h,oe,ve,Ye,vt,v.selectRange):ue.none()},ue.none)}},YS=(i,m,h,v)=>{const T=Sg(i);return(A,$)=>{v.clearBeforeUpdate(m),Np(A,$,h).each(U=>{const K=U.boxes.getOr([]);v.selectRange(m,K,U.start,U.finish),T.selectContents($),T.collapseSelection()})}},S1=(i,m)=>{const h=ts(i,m);return h===void 0||h===""?[]:h.split(" ")},e_=(i,m,h)=>{const T=S1(i,m).concat([h]);return es(i,m,T.join(" ")),!0},x1=(i,m,h)=>{const v=xo(S1(i,m),T=>T!==h);return v.length>0?es(i,m,v.join(" ")):ns(i,m),!1},Aa=i=>i.dom.classList!==void 0,au=i=>S1(i,"class"),ri=(i,m)=>e_(i,"class",m),wf=(i,m)=>x1(i,"class",m),cu=(i,m)=>{Aa(i)?i.dom.classList.add(m):ri(i,m)},t_=i=>{(Aa(i)?i.dom.classList:au(i)).length===0&&ns(i,"class")},cC=(i,m)=>{Aa(i)?i.dom.classList.remove(m):wf(i,m),t_(i)},lC=(i,m)=>Aa(i)&&i.dom.classList.contains(m),iC=(i,m)=>{Ve(m,h=>{cC(i,h)})},n_=i=>m=>{cu(m,i)},uC=i=>m=>{iC(m,i)},dC={byClass:i=>{const m=n_(i.selected),h=uC([i.selected,i.lastSelected,i.firstSelected]),v=A=>{const $=xr(A,i.selectedSelector);Ve($,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(A,$,U,K)=>{v(A),Ve($,m),cu(U,i.firstSelected),cu(K,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,h)=>{const v=K=>{ns(K,i.selected),ns(K,i.firstSelected),ns(K,i.lastSelected)},T=K=>{es(K,i.selected,"1")},A=K=>{$(K),h()},$=K=>{const oe=xr(K,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);Ve(oe,v)};return{clearBeforeUpdate:$,clear:A,selectRange:(K,oe,ve,Ye)=>{A(K),Ve(oe,T),es(ve,i.firstSelected,"1"),es(Ye,i.lastSelected,"1"),m(oe,ve,Ye)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},mC=(i,m,h,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return h(i.elements)}},as=()=>({tag:"none"}),zu=i=>({tag:"multiple",elements:i}),fC=i=>({tag:"single",element:i}),gC=(i,m,h)=>({get:()=>tw(i(),h).fold(()=>m().fold(as,fC),zu)}),XS=(i,m)=>{const h=i.slice(0,m[m.length-1].row+1),v=Fb(h);return Ws(v,T=>{const A=T.cells.slice(0,m[m.length-1].column+1);return Ht(A,$=>$.element)})},Bv=(i,m)=>{const h=i.slice(m[0].row+m[0].rowspan-1,i.length),v=Fb(h);return Ws(v,T=>{const A=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return Ht(A,$=>$.element)})},JS=(i,m,h)=>{const v=zn.fromTable(i);return cf(v,m).map(A=>{const $=Ti(v,h,!1),{rows:U}=aa($),K=XS(U,A),oe=Bv(U,A);return{upOrLeftCells:K,downOrRightCells:oe}})},Pv=(i,m,h,v,T,A,$)=>({target:i,x:m,y:h,stop:v,prevent:T,kill:A,raw:$}),QS=i=>{const m=pe.fromDom(so(i).getOr(i.target)),h=()=>i.stopPropagation(),v=()=>i.preventDefault(),T=ur(v,h);return Pv(m,i.clientX,i.clientY,h,v,T,i)},r_=(i,m)=>h=>{i(h)&&m(QS(h))},ex=(i,m,h,v,T)=>{const A=r_(h,v);return i.dom.addEventListener(m,A,T),{unbind:Fn(hC,i,m,A,T)}},a_=(i,m,h,v)=>ex(i,m,h,v,!1),hC=(i,m,h,v)=>{i.dom.removeEventListener(m,h,v)},tx=ze,At=(i,m,h)=>a_(i,m,tx,h),Uu=QS,pC=i=>!lC(pe.fromDom(i.target),"ephox-snooker-resizer-bar"),nx=(i,m)=>{const h=gC(()=>pe.fromDom(i.getBody()),()=>ow(Dp(i),Xi(i)),el.selectedSelector),v=(K,oe,ve)=>{Zs(oe).each(vt=>{const ft=wh(i),Le=mm(dt,pe.fromDom(i.getDoc()),ft),ht=tl(i),Pe=JS(vt,{selection:ht},Le);qw(i,K,oe,ve,Pe)})},T=()=>Oy(i),A=dC.byAttr(el,v,T);return i.on("init",K=>{const oe=i.getWin(),ve=xd(i),Ye=Xi(i),vt=()=>{const Zo=i.selection,rl=pe.fromDom(Zo.getStart()),al=pe.fromDom(Zo.getEnd());co(Zs,[rl,al]).fold(()=>A.clear(ve),dt)},ft=w1(oe,ve,Ye,A),Le=Qk(oe,ve,Ye,A),ht=YS(oe,ve,Ye,A),Pe=Zo=>Zo.raw.shiftKey===!0;i.on("TableSelectorChange",Zo=>ht(Zo.start,Zo.finish));const Dt=(Zo,rl)=>{Pe(Zo)&&(rl.kill&&Zo.kill(),rl.selection.each(al=>{const ai=km.relative(al.start,al.finish),Vl=pg(oe,ai);i.selection.setRng(Vl)}))},ln=Zo=>{const rl=Uu(Zo);if(rl.raw.shiftKey&&Cg(rl.raw.which)){const al=i.selection.getRng(),ai=pe.fromDom(al.startContainer),Vl=pe.fromDom(al.endContainer);Le.keyup(rl,ai,al.startOffset,Vl,al.endOffset).each(Uh=>{Dt(rl,Uh)})}},Tn=Zo=>{const rl=Uu(Zo);m.hide();const al=i.selection.getRng(),ai=pe.fromDom(al.startContainer),Vl=pe.fromDom(al.endContainer),Uh=Wf(zS,Qy)(pe.fromDom(i.selection.getStart()));Le.keydown(rl,ai,al.startOffset,Vl,al.endOffset,Uh).each(Sl=>{Dt(rl,Sl)}),m.show()},fs=Zo=>Zo.button===0,Da=Zo=>Zo.buttons===void 0?!0:(Zo.buttons&1)!==0,yr=Zo=>{ft.clearstate()},wl=Zo=>{fs(Zo)&&pC(Zo)&&ft.mousedown(Uu(Zo))},xf=Zo=>{Da(Zo)&&pC(Zo)&&ft.mouseover(Uu(Zo))},Wv=Zo=>{fs(Zo)&&pC(Zo)&&ft.mouseup(Uu(Zo))},Zv=(()=>{const Zo=_v(pe.fromDom(ve)),rl=_v(0);return{touchEnd:ai=>{const Vl=pe.fromDom(ai.target);if(ks("td")(Vl)||ks("th")(Vl)){const Uh=Zo.get(),Sl=rl.get();Oo(Uh,Vl)&&ai.timeStamp-Sl<300&&(ai.preventDefault(),ht(Vl,Vl))}Zo.set(Vl),rl.set(ai.timeStamp)}}})();i.on("dragstart",yr),i.on("mousedown",wl),i.on("mouseover",xf),i.on("mouseup",Wv),i.on("touchend",Zv.touchEnd),i.on("keyup",ln),i.on("keydown",Tn),i.on("NodeChange",vt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(el.firstSelected),i.serializer.addTempAttr(el.lastSelected)}),{getSelectedCells:()=>mC(h.get(),re([]),K=>Ht(K,oe=>oe.dom),K=>[K.dom]),clearSelectedCells:K=>A.clear(pe.fromDom(K))}},ar=i=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=xo(m,$=>$!==A)},trigger:(...A)=>{const $={};Ve(i,(U,K)=>{$[U]=A[K]}),Ve(m,U=>{U($)})}}},Or=i=>{const m=ll(i,v=>({bind:v.bind,unbind:v.unbind})),h=ll(i,v=>v.trigger);return{registry:m,trigger:h}},Lh=(i,m)=>{let h=null;const v=()=>{xs(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...A)=>{v(),h=setTimeout(()=>{h=null,i.apply(null,A)},m)}}},T1=i=>i.slice(0).sort(),c_=(i,m)=>{throw new Error("All required keys ("+T1(i).join(", ")+") were not specified. Specified keys were: "+T1(m).join(", ")+".")},l_=i=>{throw new Error("Unsupported keys for object: "+T1(i).join(", "))},Un=(i,m)=>{if(!Bt(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");Ve(m,h=>{if(!ao(h))throw new Error("The value "+h+" in the "+i+" fields was not a string.")})},bC=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+T1(i).join(", ")+") were not.")},Fh=i=>{const m=T1(i);V(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},$v=(i,m)=>i_(i,m,{validate:Mo,label:"function"}),i_=(i,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Un("required",m),Fh(m),v=>{const T=jt(v);vn(m,U=>gn(T,U))||c_(m,T),i(m,T);const $=xo(m,U=>!h.validate(v[U],U));return $.length>0&&bC($,h.label),v}},u_=(i,m)=>{const h=xo(m,v=>!gn(i,v));h.length>0&&l_(h)},vC=i=>$v(u_,i),nD=vC(["compare","extract","mutate","sink"]),ox=vC(["element","start","stop","destroy"]),d_=vC(["forceDrop","drop","move","delayDrop"]),yC=()=>{let i=ue.none();const m=()=>{i=ue.none()},h=(A,$)=>{const U=i.map(K=>A.compare(K,$));return i=ue.some($),U},v=(A,$)=>{$.extract(A).each(K=>{h($,K).each(ve=>{T.trigger.move(ve)})})},T=Or({move:ar(["info"])});return{onEvent:v,reset:m,events:T.registry}},CC=()=>{const i=Or({move:ar(["info"])});return{onEvent:dt,reset:dt,events:i.registry}},sx=()=>{const i=CC(),m=yC();let h=i;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=i},isOn:()=>h===m,onEvent:(U,K)=>{h.onEvent(U,K)},events:m.events}},rx=(i,m,h)=>{let v=!1;const T=Or({start:ar([]),stop:ar([])}),A=sx(),$=()=>{Le.stop(),A.isOn()&&(A.off(),T.trigger.stop())},U=Lh($,200),K=Pe=>{Le.start(Pe),A.on(),T.trigger.start()},oe=Pe=>{U.cancel(),A.onEvent(Pe,m)};A.events.move.bind(Pe=>{m.mutate(i,Pe.info)});const ve=()=>{v=!0},Ye=()=>{v=!1},vt=()=>v,ft=Pe=>(...Dt)=>{v&&Pe.apply(null,Dt)},Le=m.sink(d_({forceDrop:$,drop:ft($),move:ft(oe),delayDrop:ft(U.throttle)}),h),ht=()=>{Le.destroy()};return{element:Le.element,go:K,on:ve,off:Ye,isActive:vt,destroy:ht,events:T.registry}},ax=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},m_=ax("ephox-dragster").resolve,f_=i=>{const m=J({layerClass:m_("blocker")},i),h=pe.fromTag("div");return es(h,"role","presentation"),La(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),cu(h,m_("blocker")),cu(h,m.layerClass),{element:re(h),destroy:()=>{Os(h)}}};var g_=nD({compare:(i,m)=>vi(m.left-i.left,m.top-i.top),extract:i=>ue.some(vi(i.x,i.y)),sink:(i,m)=>{const h=f_(m),v=At(h.element(),"mousedown",i.forceDrop),T=At(h.element(),"mouseup",i.drop),A=At(h.element(),"mousemove",i.move),$=At(h.element(),"mouseout",i.delayDrop),U=()=>{h.destroy(),T.unbind(),A.unbind(),$.unbind(),v.unbind()},K=ve=>{ls(ve,h.element())},oe=()=>{Os(h.element())};return ox({element:h.element,start:K,stop:oe,destroy:U})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const E1=(i,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:g_;return rx(i,v,m)},Lv=ax("ephox-snooker").resolve,h_=()=>{const i=Or({drag:ar(["xDelta","yDelta"])});return{mutate:(h,v)=>{i.trigger.drag(h,v)},events:i.registry}},p_=()=>{const i=Or({drag:ar(["xDelta","yDelta","target"])});let m=ue.none();const h=h_();return h.events.drag.bind(A=>{m.each($=>{i.trigger.drag(A.xDelta,A.yDelta,$)})}),{assign:A=>{m=ue.some(A)},get:()=>m,mutate:h.mutate,events:i.registry}},Sf=(i,m,h,v,T)=>{const A=pe.fromTag("div");return La(A,{position:"absolute",left:m-v/2+"px",top:h+"px",height:T+"px",width:v+"px"}),mr(A,{"data-column":i,role:"presentation"}),A},Fv=(i,m,h,v,T)=>{const A=pe.fromTag("div");return La(A,{position:"absolute",left:m+"px",top:h-T/2+"px",height:T+"px",width:v+"px"}),mr(A,{"data-row":i,role:"presentation"}),A},wC=Lv("resizer-bar"),Hv=Lv("resizer-rows"),SC=Lv("resizer-cols"),k1=7,b_=(i,m)=>Ws(i.all,(h,v)=>m(h.element)?[v]:[]),v_=(i,m)=>{const h=[];return Dn(i.grid.columns,v=>{zn.getColumnAt(i,v).map(A=>A.element).forall(m)&&h.push(v)}),xo(h,v=>{const T=zn.filterItems(i,A=>A.column===v);return vn(T,A=>m(A.element))})},_1=i=>{const m=xr(i.parent(),"."+wC);Ve(m,Os)},Vv=(i,m,h)=>{const v=i.origin();Ve(m,T=>{T.each(A=>{const $=h(v,A);cu($,wC),ls(i.parent(),$)})})},y_=(i,m,h,v)=>{Vv(i,m,(T,A)=>{const $=Sf(A.col,A.x-T.left,h.top-T.top,k1,v);return cu($,SC),$})},lo=(i,m,h,v)=>{Vv(i,m,(T,A)=>{const $=Fv(A.row,h.left-T.left,A.y-T.top,v,k1);return cu($,Hv),$})},C_=(i,m,h,v,T)=>{const A=Jm(h),$=m.isResizable,U=v.length>0?Ou.positions(v,h):[],K=U.length>0?b_(i,$):[],oe=xo(U,(ft,Le)=>Ge(K,ht=>Le===ht));lo(m,oe,A,Pn(h));const ve=T.length>0?Au.positions(T,h):[],Ye=ve.length>0?v_(i,$):[],vt=xo(ve,(ft,Le)=>Ge(Ye,ht=>Le===ht));y_(m,vt,A,Sb(h))},Fd=(i,m)=>{if(_1(i),i.isResizable(m)){const h=zn.fromTable(m),v=Z0(h),T=Yg(h);C_(h,i,m,v,T)}},lu=(i,m)=>{const h=xr(i.parent(),"."+wC);Ve(h,m)},zv=i=>{lu(i,m=>{Uo(m,"display","none")})},Hl=i=>{lu(i,m=>{Uo(m,"display","block")})},Hh=i=>lC(i,Hv),Vh=i=>lC(i,SC),xg=Lv("resizer-bar-dragging"),_m=i=>{const m=p_(),h=E1(m,{});let v=ue.none();const T=(Le,ht)=>ue.from(ts(Le,ht));m.events.drag.bind(Le=>{T(Le.target,"data-row").each(ht=>{const Pe=Ls(Le.target,"top");Uo(Le.target,"top",Pe+Le.yDelta+"px")}),T(Le.target,"data-column").each(ht=>{const Pe=Ls(Le.target,"left");Uo(Le.target,"left",Pe+Le.xDelta+"px")})});const A=(Le,ht)=>{const Pe=Ls(Le,ht),Dt=Ca(Le,"data-initial-"+ht,0);return Pe-Dt};h.events.stop.bind(()=>{m.get().each(Le=>{v.each(ht=>{T(Le,"data-row").each(Pe=>{const Dt=A(Le,"top");ns(Le,"data-initial-top"),ft.trigger.adjustHeight(ht,Dt,parseInt(Pe,10))}),T(Le,"data-column").each(Pe=>{const Dt=A(Le,"left");ns(Le,"data-initial-left"),ft.trigger.adjustWidth(ht,Dt,parseInt(Pe,10))}),Fd(i,ht)})})});const $=(Le,ht)=>{ft.trigger.startAdjust(),m.assign(Le),es(Le,"data-initial-"+ht,Ls(Le,ht)),cu(Le,xg),Uo(Le,"opacity","0.2"),h.go(i.parent())},U=At(i.parent(),"mousedown",Le=>{Hh(Le.target)&&$(Le.target,"top"),Vh(Le.target)&&$(Le.target,"left")}),K=Le=>Oo(Le,i.view()),oe=Le=>Js(Le,"table",K).filter(Bl),ve=At(i.view(),"mouseover",Le=>{oe(Le.target).fold(()=>{P(Le.target)&&_1(i)},ht=>{h.isActive()&&(v=ue.some(ht),Fd(i,ht))})}),Ye=()=>{U.unbind(),ve.unbind(),h.destroy(),_1(i)},vt=Le=>{Fd(i,Le)},ft=Or({adjustHeight:ar(["table","delta","row"]),adjustWidth:ar(["table","delta","column"]),startAdjust:ar([])});return{destroy:Ye,refresh:vt,on:h.on,off:h.off,hideBars:Fn(zv,i),showBars:Fn(Hl,i),events:ft.registry}},Tg={create:(i,m,h)=>{const v=Ou,T=Au,A=_m(i),$=Or({beforeResize:ar(["table","type"]),afterResize:ar(["table","type"]),startDrag:ar([])});return A.events.adjustHeight.bind(U=>{const K=U.table;$.trigger.beforeResize(K,"row");const oe=v.delta(U.delta,K);my(K,oe,U.row,v),$.trigger.afterResize(K,"row")}),A.events.startAdjust.bind(U=>{$.trigger.startDrag()}),A.events.adjustWidth.bind(U=>{const K=U.table;$.trigger.beforeResize(K,"col");const oe=T.delta(U.delta,K),ve=h(K);Wp(K,oe,U.column,m,ve),$.trigger.afterResize(K,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:$.registry}}},Oi={only:(i,m)=>{const h=wc(i)?_s(i):i;return{parent:re(h),view:re(i),origin:re(vi(0,0)),isResizable:m}},detached:(i,m,h)=>{const v=()=>Jm(m);return{parent:re(m),view:re(i),origin:v,isResizable:h}},body:(i,m,h)=>({parent:re(m),view:re(i),origin:re(vi(0,0)),isResizable:h})},Eg=()=>{const i=pe.fromTag("div");return La(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ls(G(),i),i},w_=(i,m)=>i.inline?Oi.body(pe.fromDom(i.getBody()),Eg(),m):Oi.only(pe.fromDom(i.getDoc()),m),Uv=(i,m)=>{i.inline&&Os(m.parent())},ro=i=>Nn(i)&&i.nodeName==="TABLE",TC="bar-",cx=i=>ts(i,"data-mce-resize")!=="false",O1=i=>{const m=zn.fromTable(i);zn.hasColumns(m)||Ve(ji(i),h=>{const v=gl(h,"width");Uo(h,"width",v),ns(h,"width")})},S_=i=>{const m=f1(),h=f1(),v=f1();let T,A;const $=Le=>lg(i,Le),U=()=>eS(i)?gh():cw(),K=Le=>eg(Le).columns,oe=(Le,ht,Pe)=>{const Dt=va(ht,"e");if(A===""&&hf(Le),Pe!==T&&A!==""){Uo(Le,"width",A);const ln=U(),Tn=$(Le),fs=eS(i)||Dt?K(Le)-1:0;Wp(Le,Pe-T,fs,ln,Tn)}else if(er(A)){const ln=parseFloat(A.replace("%","")),Tn=Pe*ln/T;Uo(Le,"width",Tn+"%")}ZE(A)&&O1(Le)},ve=()=>{h.on(Le=>{Le.destroy()}),v.on(Le=>{Uv(i,Le)})};return i.on("init",()=>{const Le=w_(i,cx);if(v.set(Le),bk(i)&&tS(i)){const ht=U(),Pe=Tg.create(Le,ht,$);Pe.on(),Pe.events.startDrag.bind(Dt=>{m.set(i.selection.getRng())}),Pe.events.beforeResize.bind(Dt=>{const ln=Dt.table.dom;hk(i,ln,ah(ln),X2(ln),TC+Dt.type)}),Pe.events.afterResize.bind(Dt=>{const ln=Dt.table,Tn=ln.dom;xi(ln),m.on(fs=>{i.selection.setRng(fs),i.focus()}),nv(i,Tn,ah(Tn),X2(Tn),TC+Dt.type),i.undoManager.add()}),h.set(Pe)}}),i.on("ObjectResizeStart",Le=>{const ht=Le.target;if(ro(ht)){const Pe=pe.fromDom(ht);Ve(i.dom.select(".mce-clonedresizable"),Dt=>{i.dom.addClass(Dt,"mce-"+sv(i)+"-columns")}),!cv(Pe)&&Iu(i)?Dy(Pe):!Pd(Pe)&&Sh(i)&&hf(Pe),mS(Pe)&&Su(Le.origin,TC)&&hf(Pe),T=Le.width,A=Bo(i)?"":WE(i,ht).getOr("")}}),i.on("ObjectResized",Le=>{const ht=Le.target;if(ro(ht)){const Pe=pe.fromDom(ht),Dt=Le.origin;Su(Dt,"corner-")&&oe(Pe,Dt,Le.width),xi(Pe),gf(i,Pe.dom,Jp)}}),i.on("SwitchMode",()=>{h.on(Le=>{i.mode.isReadOnly()?Le.hideBars():Le.showBars()})}),i.on("dragstart dragend",Le=>{h.on(ht=>{Le.type==="dragstart"?(ht.hideBars(),ht.off()):(ht.on(),ht.showBars())})}),i.on("remove",()=>{ve()}),{refresh:Le=>{h.on(ht=>ht.refreshBars(pe.fromDom(Le)))},hide:()=>{h.on(Le=>Le.hideBars())},show:()=>{h.on(Le=>Le.showBars())}}},zh=i=>{pk(i);const m=S_(i),h=nx(i,m),v=vk(i,m,h);return Ik(i,v),ES(i,v),Fc(i,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},kg=i=>({table:zh(i)});var EC=()=>{it.add("dom",kg)};EC()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const en=(kt,Bt)=>{kt.focus(),kt.undoManager.transact(()=>{kt.setContent(Bt)}),kt.selection.setCursorLocation(),kt.nodeChanged()},Yt=kt=>kt.getContent({source_view:!0}),sn=kt=>{const Bt=Yt(kt);kt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Bt},onSubmit:xs=>{en(kt,xs.getData().code),xs.close()}})},An=kt=>{kt.addCommand("mceCodeEditor",()=>{sn(kt)})},eo=kt=>{const Bt=()=>kt.execCommand("mceCodeEditor");kt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Bt}),kt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Bt})};var ao=()=>{it.add("code",kt=>(An(kt),eo(kt),{}))};ao()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const en=Object.getPrototypeOf,Yt=(P,G,te)=>{var Te;return te(P,G.prototype)?!0:((Te=P.constructor)===null||Te===void 0?void 0:Te.name)===G.name},sn=P=>{const G=typeof P;return P===null?"null":G==="object"&&Array.isArray(P)?"array":G==="object"&&Yt(P,String,(te,Te)=>Te.isPrototypeOf(te))?"string":G},An=P=>G=>sn(G)===P,eo=P=>G=>typeof G===P,ao=P=>G=>P===G,kt=(P,G)=>xs(P)&&Yt(P,G,(te,Te)=>en(te)===Te),Bt=An("string"),xs=An("object"),Ln=P=>kt(P,Object),Ts=An("array"),Ho=ao(null),Nn=eo("boolean"),Mo=P=>P==null,Jn=P=>!Mo(P),dt=eo("function"),ur=eo("number"),Qe=(P,G)=>{if(Ts(P)){for(let te=0,Te=P.length;te<Te;++te)if(!G(P[te]))return!1;return!0}return!1},re=()=>{};class Ut{constructor(G,te){this.tag=G,this.value=te}static some(G){return new Ut(!0,G)}static none(){return Ut.singletonNone}fold(G,te){return this.tag?te(this.value):G()}isSome(){return this.tag}isNone(){return!this.tag}map(G){return this.tag?Ut.some(G(this.value)):Ut.none()}bind(G){return this.tag?G(this.value):Ut.none()}exists(G){return this.tag&&G(this.value)}forall(G){return!this.tag||G(this.value)}filter(G){return!this.tag||G(this.value)?this:Ut.none()}getOr(G){return this.tag?this.value:G}or(G){return this.tag?this:G}getOrThunk(G){return this.tag?this.value:G()}orThunk(G){return this.tag?this:G()}getOrDie(G){if(this.tag)return this.value;throw new Error(G!=null?G:"Called getOrDie on None")}static from(G){return Jn(G)?Ut.some(G):Ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(G){this.tag&&G(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ut.singletonNone=new Ut(!1);const Ba=Object.keys,Fn=Object.hasOwnProperty,Q=(P,G)=>{const te=Ba(P);for(let Te=0,wt=te.length;Te<wt;Te++){const xn=te[Te],_t=P[xn];G(_t,xn)}},cn=P=>(G,te)=>{P[te]=G},Go=(P,G,te,Te)=>{Q(P,(wt,xn)=>{(G(wt,xn)?te:Te)(wt,xn)})},Jt=(P,G)=>{const te={};return Go(P,G,cn(te),re),te},ze=(P,G)=>Fn.call(P,G),ue=(P,G)=>ze(P,G)&&P[G]!==void 0&&P[G]!==null,Ps=Array.prototype.push,et=P=>{const G=[];for(let te=0,Te=P.length;te<Te;++te){if(!Ts(P[te]))throw new Error("Arr.flatten item "+te+" was not an array, input: "+P);Ps.apply(G,P[te])}return G},Fe=(P,G)=>G>=0&&G<P.length?Ut.some(P[G]):Ut.none(),O=P=>Fe(P,0),gn=(P,G)=>{for(let te=0;te<P.length;te++){const Te=G(P[te],te);if(Te.isSome())return Te}return Ut.none()};typeof window!="undefined"||Function("return this;")();const Ge=(P,G,te)=>{if(Bt(te)||Nn(te)||ur(te))P.setAttribute(G,te+"");else throw console.error("Invalid call to Attribute.set. Key ",G,":: Value ",te,":: Element ",P),new Error("Attribute value was not simple")},Dn=(P,G,te)=>{Ge(P.dom,G,te)},Ht=(P,G)=>{P.dom.removeAttribute(G)},Ve=(P,G)=>{const Te=(G||document).createElement("div");if(Te.innerHTML=P,!Te.hasChildNodes()||Te.childNodes.length>1){const wt="HTML does not have a single root node";throw console.error(wt,P),new Error(wt)}return xo(Te.childNodes[0])},So=(P,G)=>{const Te=(G||document).createElement(P);return xo(Te)},qo=(P,G)=>{const Te=(G||document).createTextNode(P);return xo(Te)},xo=P=>{if(P==null)throw new Error("Node cannot be null or undefined");return{dom:P}},Ne={fromHtml:Ve,fromTag:So,fromText:qo,fromDom:xo,fromPoint:(P,G,te)=>Ut.from(P.dom.elementFromPoint(G,te)).map(xo)};var mt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),V=tinymce.util.Tools.resolve("tinymce.util.URI");const vc=P=>P.length>0,Sn=P=>G=>G.options.get(P),Ws=P=>{const G=P.options.register;G("image_dimensions",{processor:"boolean",default:!0}),G("image_advtab",{processor:"boolean",default:!1}),G("image_uploadtab",{processor:"boolean",default:!0}),G("image_prepend_url",{processor:"string",default:""}),G("image_class_list",{processor:"object[]"}),G("image_description",{processor:"boolean",default:!0}),G("image_title",{processor:"boolean",default:!1}),G("image_caption",{processor:"boolean",default:!1}),G("image_list",{processor:te=>{const Te=te===!1||Bt(te)||Qe(te,xs)||dt(te);return Te?{value:te,valid:Te}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},vn=Sn("image_dimensions"),cd=Sn("image_advtab"),an=Sn("image_uploadtab"),Xo=Sn("image_prepend_url"),Vt=Sn("image_class_list"),Ie=Sn("image_description"),ac=Sn("image_title"),Sr=Sn("image_caption"),jt=Sn("image_list"),cl=Sn("a11y_advanced_options"),Jo=Sn("automatic_uploads"),ll=P=>vc(P.options.get("images_upload_url")),us=P=>Jn(P.options.get("images_upload_handler")),Dr=(P,G)=>Math.max(parseInt(P,10),parseInt(G,10)),Wc=P=>new Promise(G=>{const te=document.createElement("img"),Te=xn=>{te.onload=te.onerror=null,te.parentNode&&te.parentNode.removeChild(te),G(xn)};te.onload=()=>{const xn=Dr(te.width,te.clientWidth),_t=Dr(te.height,te.clientHeight),rr={width:xn,height:_t};Te(Promise.resolve(rr))},te.onerror=()=>{Te(Promise.reject(`Failed to get image dimensions for: ${P}`))};const wt=te.style;wt.visibility="hidden",wt.position="fixed",wt.bottom=wt.left="0px",wt.width=wt.height="auto",document.body.appendChild(te),te.src=P}),ea=P=>(P&&(P=P.replace(/px$/,"")),P),Es=P=>(P.length>0&&/^[0-9]+$/.test(P)&&(P+="px"),P),Vo=P=>{if(P.margin){const G=String(P.margin).split(" ");switch(G.length){case 1:P["margin-top"]=P["margin-top"]||G[0],P["margin-right"]=P["margin-right"]||G[0],P["margin-bottom"]=P["margin-bottom"]||G[0],P["margin-left"]=P["margin-left"]||G[0];break;case 2:P["margin-top"]=P["margin-top"]||G[0],P["margin-right"]=P["margin-right"]||G[1],P["margin-bottom"]=P["margin-bottom"]||G[0],P["margin-left"]=P["margin-left"]||G[1];break;case 3:P["margin-top"]=P["margin-top"]||G[0],P["margin-right"]=P["margin-right"]||G[1],P["margin-bottom"]=P["margin-bottom"]||G[2],P["margin-left"]=P["margin-left"]||G[1];break;case 4:P["margin-top"]=P["margin-top"]||G[0],P["margin-right"]=P["margin-right"]||G[1],P["margin-bottom"]=P["margin-bottom"]||G[2],P["margin-left"]=P["margin-left"]||G[3]}delete P.margin}return P},di=(P,G)=>{const te=jt(P);Bt(te)?fetch(te).then(Te=>{Te.ok&&Te.json().then(G)}):dt(te)?te(G):G(te)},Ko=(P,G,te)=>{const Te=()=>{te.onload=te.onerror=null,P.selection&&(P.selection.select(te),P.nodeChanged())};te.onload=()=>{!G.width&&!G.height&&vn(P)&&P.dom.setAttribs(te,{width:String(te.clientWidth),height:String(te.clientHeight)}),Te()},te.onerror=Te},Qo=P=>new Promise((G,te)=>{const Te=new FileReader;Te.onload=()=>{G(Te.result)},Te.onerror=()=>{var wt;te((wt=Te.error)===null||wt===void 0?void 0:wt.message)},Te.readAsDataURL(P)}),No=P=>P.nodeName==="IMG"&&(P.hasAttribute("data-mce-object")||P.hasAttribute("data-mce-placeholder")),To=(P,G)=>{const te=P.options.get;return V.isDomSafe(G,"img",{allow_html_data_urls:te("allow_html_data_urls"),allow_script_urls:te("allow_script_urls"),allow_svg_data_urls:te("allow_svg_data_urls")})},$s=mt.DOM,dr=P=>P.style.marginLeft&&P.style.marginRight&&P.style.marginLeft===P.style.marginRight?ea(P.style.marginLeft):"",cc=P=>P.style.marginTop&&P.style.marginBottom&&P.style.marginTop===P.style.marginBottom?ea(P.style.marginTop):"",Rr=P=>P.style.borderWidth?ea(P.style.borderWidth):"",Is=(P,G)=>{var te;return P.hasAttribute(G)&&(te=P.getAttribute(G))!==null&&te!==void 0?te:""},zr=P=>P.parentNode!==null&&P.parentNode.nodeName==="FIGURE",ut=(P,G,te)=>{te===""||te===null?P.removeAttribute(G):P.setAttribute(G,te)},Bn=P=>{const G=$s.create("figure",{class:"image"});$s.insertAfter(G,P),G.appendChild(P),G.appendChild($s.create("figcaption",{contentEditable:"true"},"Caption")),G.contentEditable="false"},Pa=P=>{const G=P.parentNode;Jn(G)&&($s.insertAfter(P,G),$s.remove(G))},Ks=P=>{zr(P)?Pa(P):Bn(P)},El=(P,G)=>{const te=P.getAttribute("style"),Te=G(te!==null?te:"");Te.length>0?(P.setAttribute("style",Te),P.setAttribute("data-mce-style",Te)):P.removeAttribute("style")},il=(P,G)=>(te,Te,wt)=>{const xn=te.style;xn[Te]?(xn[Te]=Es(wt),El(te,G)):ut(te,Te,wt)},$o=(P,G)=>P.style[G]?ea(P.style[G]):Is(P,G),yc=(P,G)=>{const te=Es(G);P.style.marginLeft=te,P.style.marginRight=te},lc=(P,G)=>{const te=Es(G);P.style.marginTop=te,P.style.marginBottom=te},vo=(P,G)=>{const te=Es(G);P.style.borderWidth=te},tn=(P,G)=>{P.style.borderStyle=G},Ur=P=>{var G;return(G=P.style.borderStyle)!==null&&G!==void 0?G:""},Cc=P=>Jn(P)&&P.nodeName==="FIGURE",wc=P=>P.nodeName==="IMG",Sc=P=>$s.getAttrib(P,"alt").length===0&&$s.getAttrib(P,"role")==="presentation",ks=P=>Sc(P)?"":Is(P,"alt"),or=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),es=(P,G)=>{var te;const Te=document.createElement("img");return ut(Te,"style",G.style),(dr(Te)||G.hspace!=="")&&yc(Te,G.hspace),(cc(Te)||G.vspace!=="")&&lc(Te,G.vspace),(Rr(Te)||G.border!=="")&&vo(Te,G.border),(Ur(Te)||G.borderStyle!=="")&&tn(Te,G.borderStyle),P((te=Te.getAttribute("style"))!==null&&te!==void 0?te:"")},mr=(P,G)=>{const te=document.createElement("img");if(Tc(P,We(J({},G),{caption:!1}),te),ha(te,G.alt,G.isDecorative),G.caption){const Te=$s.create("figure",{class:"image"});return Te.appendChild(te),Te.appendChild($s.create("figcaption",{contentEditable:"true"},"Caption")),Te.contentEditable="false",Te}else return te},xc=(P,G)=>({src:Is(G,"src"),alt:ks(G),title:Is(G,"title"),width:$o(G,"width"),height:$o(G,"height"),class:Is(G,"class"),style:P(Is(G,"style")),caption:zr(G),hspace:dr(G),vspace:cc(G),border:Rr(G),borderStyle:Ur(G),isDecorative:Sc(G)}),ts=(P,G,te,Te,wt)=>{te[Te]!==G[Te]&&wt(P,Te,String(te[Te]))},ha=(P,G,te)=>{if(te){$s.setAttrib(P,"role","presentation");const Te=Ne.fromDom(P);Dn(Te,"alt","")}else{if(Ho(G)){const Te=Ne.fromDom(P);Ht(Te,"alt")}else{const Te=Ne.fromDom(P);Dn(Te,"alt",G)}$s.getAttrib(P,"role")==="presentation"&&$s.setAttrib(P,"role","")}},ns=(P,G,te)=>{(te.alt!==G.alt||te.isDecorative!==G.isDecorative)&&ha(P,te.alt,te.isDecorative)},fr=(P,G)=>(te,Te,wt)=>{P(te,wt),El(te,G)},Tc=(P,G,te)=>{const Te=xc(P,te);ts(te,Te,G,"caption",(wt,xn,_t)=>Ks(wt)),ts(te,Te,G,"src",ut),ts(te,Te,G,"title",ut),ts(te,Te,G,"width",il("width",P)),ts(te,Te,G,"height",il("height",P)),ts(te,Te,G,"class",ut),ts(te,Te,G,"style",fr((wt,xn)=>ut(wt,"style",xn),P)),ts(te,Te,G,"hspace",fr(yc,P)),ts(te,Te,G,"vspace",fr(lc,P)),ts(te,Te,G,"border",fr(vo,P)),ts(te,Te,G,"borderStyle",fr(tn,P)),ns(te,Te,G)},mi=(P,G)=>{const te=P.dom.styles.parse(G),Te=Vo(te),wt=P.dom.styles.parse(P.dom.styles.serialize(Te));return P.dom.styles.serialize(wt)},Zc=P=>{const G=P.selection.getNode(),te=P.dom.getParent(G,"figure.image");return te?P.dom.select("img",te)[0]:G&&(G.nodeName!=="IMG"||No(G))?null:G},ta=(P,G)=>{var te;const Te=P.dom,wt=Jt(P.schema.getTextBlockElements(),(_t,rr)=>!P.schema.isValidChild(rr,"figure")),xn=Te.getParent(G.parentNode,_t=>ue(wt,_t.nodeName),P.getBody());return xn&&(te=Te.split(xn,G))!==null&&te!==void 0?te:G},Um=P=>{const G=Zc(P);return G?xc(te=>mi(P,te),G):or()},pe=(P,G)=>{const te=mr(wt=>mi(P,wt),G);P.dom.setAttrib(te,"data-mce-id","__mcenew"),P.focus(),P.selection.setContent(te.outerHTML);const Te=P.dom.select('*[data-mce-id="__mcenew"]')[0];if(P.dom.setAttrib(Te,"data-mce-id",null),Cc(Te)){const wt=ta(P,Te);P.selection.select(wt)}else P.selection.select(Te)},Mr=(P,G)=>{P.dom.setAttrib(G,"src",G.getAttribute("src"))},jl=(P,G)=>{if(G){const te=P.dom.is(G.parentNode,"figure.image")?G.parentNode:G;P.dom.remove(te),P.focus(),P.nodeChanged(),P.dom.isEmpty(P.getBody())&&(P.setContent(""),P.selection.setCursorLocation())}},ul=(P,G)=>{const te=Zc(P);if(te)if(Tc(Te=>mi(P,Te),G,te),Mr(P,te),Cc(te.parentNode)){const Te=te.parentNode;ta(P,Te),P.selection.select(te.parentNode)}else P.selection.select(te),Ko(P,G,te)},Cu=(P,G)=>{const te=G.src;return We(J({},G),{src:To(P,te)?te:""})},Oo=(P,G)=>{const te=Zc(P);if(te){const Te=xc(_t=>mi(P,_t),te),wt=J(J({},Te),G),xn=Cu(P,wt);wt.src?ul(P,xn):jl(P,te)}else G.src&&pe(P,J(J({},or()),G))},dl=(P=>(...G)=>{if(G.length===0)throw new Error("Can't merge zero objects");const te={};for(let Te=0;Te<G.length;Te++){const wt=G[Te];for(const xn in wt)ze(wt,xn)&&(te[xn]=P(te[xn],wt[xn]))}return te})((P,G)=>Ln(P)&&Ln(G)?dl(P,G):G);var pa=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),_s=tinymce.util.Tools.resolve("tinymce.util.Tools");const Io=P=>Bt(P.value)?P.value:"",ml=P=>Bt(P.text)?P.text:Bt(P.title)?P.title:"",Ga=(P,G)=>{const te=[];return _s.each(P,Te=>{const wt=ml(Te);if(Te.menu!==void 0){const xn=Ga(Te.menu,G);te.push({text:wt,items:xn})}else{const xn=G(Te);te.push({text:wt,value:xn})}}),te},Ec=(P=Io)=>G=>G?Ut.from(G).map(te=>Ga(te,P)):Ut.none(),kl=P=>Ec(Io)(P),_l=P=>ze(P,"items"),mo=(P,G)=>gn(P,te=>_l(te)?mo(te.items,G):te.value===G?Ut.some(te):Ut.none()),jc={sanitizer:Ec,sanitize:kl,findEntry:(P,G)=>P.bind(te=>mo(te,G))},$a={makeTab:P=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},sr=P=>{const G=jc.sanitizer(Ia=>P.convertURL(Ia.value||Ia.url||"","src")),te=new Promise(Ia=>{di(P,Js=>{Ia(G(Js).map(hr=>et([[{text:"None",value:""}],hr])))})}),Te=jc.sanitize(Vt(P)),wt=cd(P),xn=an(P),_t=ll(P),rr=us(P),xr=Um(P),Ze=Ie(P),gr=ac(P),As=vn(P),Pr=Sr(P),Wm=cl(P),Vn=Jo(P),Gl=Ut.some(Xo(P)).filter(Ia=>Bt(Ia)&&Ia.length>0);return te.then(Ia=>({image:xr,imageList:Ia,classList:Te,hasAdvTab:wt,hasUploadTab:xn,hasUploadUrl:_t,hasUploadHandler:rr,hasDescription:Ze,hasImageTitle:gr,hasDimensions:As,hasImageCaption:Pr,prependURL:Gl,hasAccessibilityOptions:Wm,automaticUploads:Vn}))},ls=P=>{const G={name:"src",type:"urlinput",filetype:"image",label:"Source"},te=P.imageList.map(gr=>({name:"images",type:"listbox",label:"Image list",items:gr})),Te={name:"alt",type:"input",label:"Alternative description",enabled:!(P.hasAccessibilityOptions&&P.image.isDecorative)},wt={name:"title",type:"input",label:"Image title"},xn={name:"dimensions",type:"sizeinput"},_t={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},rr=P.classList.map(gr=>({name:"classes",type:"listbox",label:"Class",items:gr})),xr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Ze=gr=>gr?{type:"grid",columns:2}:{type:"panel"};return et([[G],te.toArray(),P.hasAccessibilityOptions&&P.hasDescription?[_t]:[],P.hasDescription?[Te]:[],P.hasImageTitle?[wt]:[],P.hasDimensions?[xn]:[],[We(J({},Ze(P.classList.isSome()&&P.hasImageCaption)),{items:et([rr.toArray(),P.hasImageCaption?[xr]:[]])})]])},Fi={makeTab:P=>({title:"General",name:"general",items:ls(P)}),makeItems:ls},Nr={makeTab:P=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},na=P=>({prevImage:jc.findEntry(P.imageList,P.image.src),prevAlt:P.image.alt,open:!0}),Os=P=>({src:{value:P.src,meta:{}},images:P.src,alt:P.alt,title:P.title,dimensions:{width:P.width,height:P.height},classes:P.class,caption:P.caption,style:P.style,vspace:P.vspace,border:P.border,hspace:P.hspace,borderstyle:P.borderStyle,fileinput:[],isDecorative:P.isDecorative}),fi=(P,G)=>({src:P.src.value,alt:(P.alt===null||P.alt.length===0)&&G?null:P.alt,title:P.title,width:P.dimensions.width,height:P.dimensions.height,class:P.classes,style:P.style,caption:P.caption,hspace:P.hspace,vspace:P.vspace,border:P.border,borderStyle:P.borderstyle,isDecorative:P.isDecorative}),qa=(P,G)=>/^(?:[a-zA-Z]+:)?\/\//.test(G)?Ut.none():P.prependURL.bind(te=>G.substring(0,te.length)!==te?Ut.some(te+G):Ut.none()),oa=(P,G)=>{const te=G.getData();qa(P,te.src.value).each(Te=>{G.setData({src:{value:Te,meta:te.src.meta}})})},ic=(P,G,te)=>{P.hasDescription&&Bt(te.alt)&&(G.alt=te.alt),P.hasAccessibilityOptions&&(G.isDecorative=te.isDecorative||G.isDecorative||!1),P.hasImageTitle&&Bt(te.title)&&(G.title=te.title),P.hasDimensions&&(Bt(te.width)&&(G.dimensions.width=te.width),Bt(te.height)&&(G.dimensions.height=te.height)),Bt(te.class)&&jc.findEntry(P.classList,te.class).each(Te=>{G.classes=Te.value}),P.hasImageCaption&&Nn(te.caption)&&(G.caption=te.caption),P.hasAdvTab&&(Bt(te.style)&&(G.style=te.style),Bt(te.vspace)&&(G.vspace=te.vspace),Bt(te.border)&&(G.border=te.border),Bt(te.hspace)&&(G.hspace=te.hspace),Bt(te.borderstyle)&&(G.borderstyle=te.borderstyle))},Hi=(P,G)=>{const te=G.getData(),Te=te.src.meta;if(Te!==void 0){const wt=dl({},te);ic(P,wt,Te),G.setData(wt)}},gi=(P,G,te,Te)=>{const wt=Te.getData(),xn=wt.src.value,_t=wt.src.meta||{};!_t.width&&!_t.height&&G.hasDimensions&&(vc(xn)?P.imageSize(xn).then(rr=>{te.open&&Te.setData({dimensions:rr})}).catch(rr=>console.error(rr)):Te.setData({dimensions:{width:"",height:""}}))},wu=(P,G,te)=>{const Te=te.getData(),wt=jc.findEntry(P.imageList,Te.src.value);G.prevImage=wt,te.setData({images:wt.map(xn=>xn.value).getOr("")})},sa=(P,G,te,Te)=>{oa(G,Te),Hi(G,Te),gi(P,G,te,Te),wu(G,te,Te)},Gc=(P,G,te,Te)=>{const wt=Te.getData(),xn=jc.findEntry(G.imageList,wt.images);xn.each(_t=>{wt.alt===""||te.prevImage.map(xr=>xr.text===wt.alt).getOr(!1)?_t.value===""?Te.setData({src:_t,alt:te.prevAlt}):Te.setData({src:_t,alt:_t.text}):Te.setData({src:_t})}),te.prevImage=xn,sa(P,G,te,Te)},hi=(P,G,te,Te)=>{const wt=Te.getData();Te.block("Uploading image"),O(wt.fileinput).fold(()=>{Te.unblock()},xn=>{const _t=URL.createObjectURL(xn),rr=()=>{Te.unblock(),URL.revokeObjectURL(_t)},xr=Ze=>{Te.setData({src:{value:Ze,meta:{}}}),Te.showTab("general"),sa(P,G,te,Te)};Qo(xn).then(Ze=>{const gr=P.createBlobCache(xn,_t,Ze);G.automaticUploads?P.uploadImage(gr).then(As=>{xr(As.url),rr()}).catch(As=>{rr(),P.alertErr(As)}):(P.addToBlobCache(gr),xr(gr.blobUri()),Te.unblock())})})},fl=(P,G,te)=>(Te,wt)=>{wt.name==="src"?sa(P,G,te,Te):wt.name==="images"?Gc(P,G,te,Te):wt.name==="alt"?te.prevAlt=Te.getData().alt:wt.name==="fileinput"?hi(P,G,te,Te):wt.name==="isDecorative"&&Te.setEnabled("alt",!Te.getData().isDecorative)},Vi=P=>()=>{P.open=!1},Z=P=>P.hasAdvTab||P.hasUploadUrl||P.hasUploadHandler?{type:"tabpanel",tabs:et([[Fi.makeTab(P)],P.hasAdvTab?[$a.makeTab(P)]:[],P.hasUploadTab&&(P.hasUploadUrl||P.hasUploadHandler)?[Nr.makeTab(P)]:[]])}:{type:"panel",items:Fi.makeItems(P)},ce=(P,G,te)=>Te=>{const wt=dl(Os(G.image),Te.getData()),xn=We(J({},wt),{style:es(te.normalizeCss,fi(wt,!1))});P.execCommand("mceUpdateImage",!1,fi(xn,G.hasAccessibilityOptions)),P.editorUpload.uploadImagesAuto(),Te.close()},ge=P=>G=>To(P,G)?Wc(P.documentBaseURI.toAbsolute(G)).then(te=>({width:String(te.width),height:String(te.height)})):Promise.resolve({width:"",height:""}),_e=P=>(G,te,Te)=>{var wt;return P.editorUpload.blobCache.create({blob:G,blobUri:te,name:(wt=G.name)===null||wt===void 0?void 0:wt.replace(/\.[^\.]+$/,""),filename:G.name,base64:Te.split(",")[1]})},Ke=P=>G=>{P.editorUpload.blobCache.add(G)},Gt=P=>G=>{P.windowManager.alert(G)},ko=P=>G=>mi(P,G),Ys=P=>G=>P.dom.parseStyle(G),to=P=>(G,te)=>P.dom.serializeStyle(G,te),Xs=P=>G=>pa(P).upload([G],!1).then(te=>{var Te;return te.length===0?Promise.reject("Failed to upload image"):te[0].status===!1?Promise.reject((Te=te[0].error)===null||Te===void 0?void 0:Te.message):te[0]}),no=P=>{const G={imageSize:ge(P),addToBlobCache:Ke(P),createBlobCache:_e(P),alertErr:Gt(P),normalizeCss:ko(P),parseStyle:Ys(P),serializeStyle:to(P),uploadImage:Xs(P)};return{open:()=>{sr(P).then(Te=>{const wt=na(Te);return{title:"Insert/Edit Image",size:"normal",body:Z(Te),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Os(Te.image),onSubmit:ce(P,Te,G),onChange:fl(G,Te,wt),onClose:Vi(wt)}}).then(P.windowManager.open)}}},vs=P=>{P.addCommand("mceImage",no(P).open),P.addCommand("mceUpdateImage",(G,te)=>{P.undoManager.transact(()=>Oo(P,te))})},_c=P=>{const G=P.attr("class");return Jn(G)&&/\bimage\b/.test(G)},uc=P=>G=>{let te=G.length;const Te=wt=>{wt.attr("contenteditable",P?"true":null)};for(;te--;){const wt=G[te];_c(wt)&&(wt.attr("contenteditable",P?"false":null),_s.each(wt.getAll("figcaption"),Te))}},bn=P=>{P.on("PreInit",()=>{P.parser.addNodeFilter("figure",uc(!0)),P.serializer.addNodeFilter("figure",uc(!1))})},so=P=>{P.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:no(P).open,onSetup:G=>(G.setActive(Jn(Zc(P))),P.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",G.setActive).unbind)}),P.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:no(P).open}),P.ui.registry.addContextMenu("image",{update:G=>Cc(G)||wc(G)&&!No(G)?["image"]:[]})};var Br=()=>{it.add("image",P=>{Ws(P),bn(P),so(P),vs(P)})};Br()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const en=(Z,ce,ge)=>{var _e;return ge(Z,ce.prototype)?!0:((_e=Z.constructor)===null||_e===void 0?void 0:_e.name)===ce.name},Yt=Z=>{const ce=typeof Z;return Z===null?"null":ce==="object"&&Array.isArray(Z)?"array":ce==="object"&&en(Z,String,(ge,_e)=>_e.isPrototypeOf(ge))?"string":ce},sn=Z=>ce=>Yt(ce)===Z,An=Z=>ce=>typeof ce===Z,eo=Z=>ce=>Z===ce,ao=sn("string"),kt=sn("object"),Bt=sn("array"),xs=eo(null),Ln=An("boolean"),Ts=Z=>Z==null,Ho=Z=>!Ts(Z),Nn=An("function"),Mo=(Z,ce)=>{if(Bt(Z)){for(let ge=0,_e=Z.length;ge<_e;++ge)if(!ce(Z[ge]))return!1;return!0}return!1},Jn=()=>{},dt=Z=>()=>Z,ur=(Z,ce)=>Z===ce;class Qe{constructor(ce,ge){this.tag=ce,this.value=ge}static some(ce){return new Qe(!0,ce)}static none(){return Qe.singletonNone}fold(ce,ge){return this.tag?ge(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?Qe.some(ce(this.value)):Qe.none()}bind(ce){return this.tag?ce(this.value):Qe.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:Qe.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce!=null?ce:"Called getOrDie on None")}static from(ce){return Ho(ce)?Qe.some(ce):Qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qe.singletonNone=new Qe(!1);const re=Array.prototype.indexOf,Ut=Array.prototype.push,Ba=(Z,ce)=>re.call(Z,ce),Fn=(Z,ce)=>Ba(Z,ce)>-1,Q=(Z,ce)=>{const ge=Z.length,_e=new Array(ge);for(let Ke=0;Ke<ge;Ke++){const Gt=Z[Ke];_e[Ke]=ce(Gt,Ke)}return _e},cn=(Z,ce)=>{for(let ge=0,_e=Z.length;ge<_e;ge++){const Ke=Z[ge];ce(Ke,ge)}},Go=(Z,ce,ge)=>(cn(Z,(_e,Ke)=>{ge=ce(ge,_e,Ke)}),ge),Jt=Z=>{const ce=[];for(let ge=0,_e=Z.length;ge<_e;++ge){if(!Bt(Z[ge]))throw new Error("Arr.flatten item "+ge+" was not an array, input: "+Z);Ut.apply(ce,Z[ge])}return ce},ze=(Z,ce)=>Jt(Q(Z,ce)),ue=(Z,ce)=>{for(let ge=0;ge<Z.length;ge++){const _e=ce(Z[ge],ge);if(_e.isSome())return _e}return Qe.none()},Ps=(Z,ce,ge=ur)=>Z.exists(_e=>ge(_e,ce)),et=Z=>{const ce=[],ge=_e=>{ce.push(_e)};for(let _e=0;_e<Z.length;_e++)Z[_e].each(ge);return ce},Fe=(Z,ce)=>Z?Qe.some(ce):Qe.none(),O=Z=>ce=>ce.options.get(Z),gn=Z=>{const ce=Z.options.register;ce("link_assume_external_targets",{processor:ge=>{const _e=ao(ge)||Ln(ge);return _e?ge===!0?{value:1,valid:_e}:ge==="http"||ge==="https"?{value:ge,valid:_e}:{value:0,valid:_e}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ce("link_context_toolbar",{processor:"boolean",default:!1}),ce("link_list",{processor:ge=>ao(ge)||Nn(ge)||Mo(ge,kt)}),ce("link_default_target",{processor:"string"}),ce("link_default_protocol",{processor:"string",default:"https"}),ce("link_target_list",{processor:ge=>Ln(ge)||Mo(ge,kt),default:!0}),ce("link_rel_list",{processor:"object[]",default:[]}),ce("link_class_list",{processor:"object[]",default:[]}),ce("link_title",{processor:"boolean",default:!0}),ce("allow_unsafe_link_target",{processor:"boolean",default:!1}),ce("link_quicklink",{processor:"boolean",default:!1})},Ge=O("link_assume_external_targets"),Dn=O("link_context_toolbar"),Ht=O("link_list"),Ve=O("link_default_target"),So=O("link_default_protocol"),qo=O("link_target_list"),xo=O("link_rel_list"),nr=O("link_class_list"),Ne=O("link_title"),mt=O("allow_unsafe_link_target"),V=O("link_quicklink");var vc=tinymce.util.Tools.resolve("tinymce.util.Tools");const Sn=Z=>ao(Z.value)?Z.value:"",Ws=Z=>ao(Z.text)?Z.text:ao(Z.title)?Z.title:"",vn=(Z,ce)=>{const ge=[];return vc.each(Z,_e=>{const Ke=Ws(_e);if(_e.menu!==void 0){const Gt=vn(_e.menu,ce);ge.push({text:Ke,items:Gt})}else{const Gt=ce(_e);ge.push({text:Ke,value:Gt})}}),ge},cd=(Z=Sn)=>ce=>Qe.from(ce).map(ge=>vn(ge,Z)),Vt={sanitize:Z=>cd(Sn)(Z),sanitizeWith:cd,createUi:(Z,ce)=>ge=>({name:Z,type:"listbox",label:ce,items:ge}),getValue:Sn},Ie=Object.keys,ac=Object.hasOwnProperty,Sr=(Z,ce)=>{const ge=Ie(Z);for(let _e=0,Ke=ge.length;_e<Ke;_e++){const Gt=ge[_e],ko=Z[Gt];ce(ko,Gt)}},jt=Z=>(ce,ge)=>{Z[ge]=ce},cl=(Z,ce,ge,_e)=>{Sr(Z,(Ke,Gt)=>{(ce(Ke,Gt)?ge:_e)(Ke,Gt)})},Jo=(Z,ce)=>{const ge={};return cl(Z,ce,jt(ge),Jn),ge},ll=(Z,ce)=>ac.call(Z,ce),us=(Z,ce)=>ll(Z,ce)&&Z[ce]!==void 0&&Z[ce]!==null;var Dr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Wc=tinymce.util.Tools.resolve("tinymce.util.URI");const ea=Z=>Ho(Z)&&Z.nodeName.toLowerCase()==="a",Es=Z=>ea(Z)&&!!Ko(Z),Vo=(Z,ce)=>{if(Z.collapsed)return[];{const ge=Z.cloneContents(),_e=ge.firstChild,Ke=new Dr(_e,ge),Gt=[];let ko=_e;do ce(ko)&&Gt.push(ko);while(ko=Ke.next());return Gt}},di=Z=>/^\w+:/i.test(Z),Ko=Z=>{var ce,ge;return(ge=(ce=Z.getAttribute("data-mce-href"))!==null&&ce!==void 0?ce:Z.getAttribute("href"))!==null&&ge!==void 0?ge:""},Qo=(Z,ce)=>{const ge=["noopener"],_e=Z?Z.split(/\s+/):[],Ke=to=>vc.trim(to.sort().join(" ")),Gt=to=>(to=ko(to),to.length>0?to.concat(ge):ge),ko=to=>to.filter(Xs=>vc.inArray(ge,Xs)===-1),Ys=ce?Gt(_e):ko(_e);return Ys.length>0?Ke(Ys):""},No=Z=>Z.replace(/\uFEFF/g,""),To=(Z,ce)=>(ce=ce||cc(Z.selection.getRng())[0]||Z.selection.getNode(),Bn(ce)?Qe.from(Z.dom.select("a[href]",ce)[0]):Qe.from(Z.dom.getParent(ce,"a[href]"))),$s=(Z,ce)=>To(Z,ce).isSome(),dr=(Z,ce)=>{const ge=ce.fold(()=>Z.getContent({format:"text"}),_e=>_e.innerText||_e.textContent||"");return No(ge)},cc=Z=>Vo(Z,Es),Rr=Z=>vc.grep(Z,Es),Is=Z=>Rr(Z).length>0,zr=Z=>cc(Z).length>0,ut=Z=>{const ce=Z.schema.getTextInlineElements(),ge=Gt=>Gt.nodeType===1&&!ea(Gt)&&!ll(ce,Gt.nodeName.toLowerCase());if(To(Z).exists(Gt=>Gt.hasAttribute("data-mce-block")))return!1;const Ke=Z.selection.getRng();return Ke.collapsed?!0:Vo(Ke,ge).length===0},Bn=Z=>Ho(Z)&&Z.nodeName==="FIGURE"&&/\bimage\b/i.test(Z.className),Pa=Z=>Go(["title","rel","class","target"],(ge,_e)=>(Z[_e].each(Ke=>{ge[_e]=Ke.length>0?Ke:null}),ge),{href:Z.href}),Ks=(Z,ce)=>(ce==="http"||ce==="https")&&!di(Z)?ce+"://"+Z:Z,El=(Z,ce)=>{const ge=J({},ce);if(xo(Z).length===0&&!mt(Z)){const _e=Qo(ge.rel,ge.target==="_blank");ge.rel=_e||null}return Qe.from(ge.target).isNone()&&qo(Z)===!1&&(ge.target=Ve(Z)),ge.href=Ks(ge.href,Ge(Z)),ge},il=(Z,ce,ge,_e)=>{ge.each(Ke=>{ll(ce,"innerText")?ce.innerText=Ke:ce.textContent=Ke}),Z.dom.setAttribs(ce,_e),Z.selection.select(ce)},$o=(Z,ce,ge,_e)=>{const Ke=Z.dom;Bn(ce)?ks(Ke,ce,_e):ge.fold(()=>{Z.execCommand("mceInsertLink",!1,_e)},Gt=>{Z.insertContent(Ke.createHTML("a",_e,Ke.encode(Gt)))})},yc=(Z,ce,ge)=>{const _e=Z.selection.getNode(),Ke=To(Z,_e),Gt=El(Z,Pa(ge));Z.undoManager.transact(()=>{ge.href===ce.href&&ce.attach(),Ke.fold(()=>{$o(Z,_e,ge.text,Gt)},ko=>{Z.focus(),il(Z,ko,ge.text,Gt)})})},lc=Z=>{const ce=Z.dom,ge=Z.selection,_e=ge.getBookmark(),Ke=ge.getRng().cloneRange(),Gt=ce.getParent(Ke.startContainer,"a[href]",Z.getBody()),ko=ce.getParent(Ke.endContainer,"a[href]",Z.getBody());Gt&&Ke.setStartBefore(Gt),ko&&Ke.setEndAfter(ko),ge.setRng(Ke),Z.execCommand("unlink"),ge.moveToBookmark(_e)},vo=Z=>{Z.undoManager.transact(()=>{const ce=Z.selection.getNode();Bn(ce)?Sc(Z,ce):lc(Z),Z.focus()})},tn=Z=>{const{class:ce,href:ge,rel:_e,target:Ke,text:Gt,title:ko}=Z;return Jo({class:ce.getOrNull(),href:ge,rel:_e.getOrNull(),target:Ke.getOrNull(),text:Gt.getOrNull(),title:ko.getOrNull()},(Ys,to)=>xs(Ys)===!1)},Ur=(Z,ce)=>{const ge=Z.options.get,_e={allow_html_data_urls:ge("allow_html_data_urls"),allow_script_urls:ge("allow_script_urls"),allow_svg_data_urls:ge("allow_svg_data_urls")},Ke=ce.href;return We(J({},ce),{href:Wc.isDomSafe(Ke,"a",_e)?Ke:""})},Cc=(Z,ce,ge)=>{const _e=Ur(Z,ge);Z.hasPlugin("rtc",!0)?Z.execCommand("createlink",!1,tn(_e)):yc(Z,ce,_e)},wc=Z=>{Z.hasPlugin("rtc",!0)?Z.execCommand("unlink"):vo(Z)},Sc=(Z,ce)=>{var ge;const _e=Z.dom.select("img",ce)[0];if(_e){const Ke=Z.dom.getParents(_e,"a[href]",ce)[0];Ke&&((ge=Ke.parentNode)===null||ge===void 0||ge.insertBefore(_e,Ke),Z.dom.remove(Ke))}},ks=(Z,ce,ge)=>{var _e;const Ke=Z.select("img",ce)[0];if(Ke){const Gt=Z.create("a",ge);(_e=Ke.parentNode)===null||_e===void 0||_e.insertBefore(Gt,Ke),Gt.appendChild(Ke)}},or=Z=>us(Z,"items"),es=(Z,ce)=>ue(ce,ge=>or(ge)?es(Z,ge.items):Fe(ge.value===Z,ge)),mr=(Z,ce,ge,_e)=>{const Ke=_e[ce],Gt=Z.length>0;return Ke!==void 0?es(Ke,ge).map(ko=>({url:{value:ko.value,meta:{text:Gt?Z:ko.text,attach:Jn}},text:Gt?Z:ko.text})):Qe.none()},xc=(Z,ce)=>ce==="link"?Z.link:ce==="anchor"?Z.anchor:Qe.none(),ha={init:(Z,ce)=>{const ge={text:Z.text,title:Z.title},_e=to=>{var Xs;return Fe(ge.title.length<=0,Qe.from((Xs=to.meta)===null||Xs===void 0?void 0:Xs.title).getOr(""))},Ke=to=>{var Xs;return Fe(ge.text.length<=0,Qe.from((Xs=to.meta)===null||Xs===void 0?void 0:Xs.text).getOr(to.value))},Gt=to=>{const Xs=Ke(to.url),no=_e(to.url);return Xs.isSome()||no.isSome()?Qe.some(J(J({},Xs.map(vs=>({text:vs})).getOr({})),no.map(vs=>({title:vs})).getOr({}))):Qe.none()},ko=(to,Xs)=>{const no=xc(ce,Xs).getOr([]);return mr(ge.text,Xs,no,to)};return{onChange:(to,Xs)=>{const no=Xs.name;return no==="url"?Gt(to()):Fn(["anchor","link"],no)?ko(to(),no):((no==="text"||no==="title")&&(ge[no]=to()[no]),Qe.none())}}},getDelta:mr};var ns=tinymce.util.Tools.resolve("tinymce.util.Delay");const fr=(Z,ce,ge)=>{const _e=Z.selection.getRng();ns.setEditorTimeout(Z,()=>{Z.windowManager.confirm(ce,Ke=>{Z.selection.setRng(_e),ge(Ke)})})},Tc=Z=>{const ce=Z.href;return ce.indexOf("@")>0&&ce.indexOf("/")===-1&&ce.indexOf("mailto:")===-1?Qe.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:_e=>We(J({},_e),{href:"mailto:"+ce})}):Qe.none()},mi=(Z,ce)=>ge=>{const _e=ge.href;return Z===1&&!di(_e)||Z===0&&/^\s*www(\.|\d\.)/i.test(_e)?Qe.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ce}:// prefix?`,preprocess:Gt=>We(J({},Gt),{href:ce+"://"+_e})}):Qe.none()},ta={preprocess:(Z,ce)=>ue([Tc,mi(Ge(Z),So(Z))],ge=>ge(ce)).fold(()=>Promise.resolve(ce),ge=>new Promise(_e=>{fr(Z,ge.message,Ke=>{_e(Ke?ge.preprocess(ce):ce)})}))},pe={getAnchors:Z=>{const ce=Z.dom.select("a:not([href])"),ge=ze(ce,_e=>{const Ke=_e.name||_e.id;return Ke?[{text:Ke,value:"#"+Ke}]:[]});return ge.length>0?Qe.some([{text:"None",value:""}].concat(ge)):Qe.none()}},jl={getClasses:Z=>{const ce=nr(Z);return ce.length>0?Vt.sanitize(ce):Qe.none()}},ul=Z=>{try{return Qe.some(JSON.parse(Z))}catch(ce){return Qe.none()}},Oo={getLinks:Z=>{const ce=_e=>Z.convertURL(_e.value||_e.url||"","href"),ge=Ht(Z);return new Promise(_e=>{ao(ge)?fetch(ge).then(Ke=>Ke.ok?Ke.text().then(ul):Promise.reject()).then(_e,()=>_e(Qe.none())):Nn(ge)?ge(Ke=>_e(Qe.some(Ke))):_e(Qe.from(ge))}).then(_e=>_e.bind(Vt.sanitizeWith(ce)).map(Ke=>Ke.length>0?[{text:"None",value:""}].concat(Ke):Ke))}},Li={getRels:(Z,ce)=>{const ge=xo(Z);if(ge.length>0){const _e=Ps(ce,"_blank"),Ke=mt(Z)===!1,Gt=Ys=>Qo(Vt.getValue(Ys),_e);return(Ke?Vt.sanitizeWith(Gt):Vt.sanitize)(ge)}return Qe.none()}},dl=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],_s={getTargets:Z=>{const ce=qo(Z);return Bt(ce)?Vt.sanitize(ce).orThunk(()=>Qe.some(dl)):ce===!1?Qe.none():Qe.some(dl)}},Io=(Z,ce,ge)=>{const _e=Z.getAttrib(ce,ge);return _e!==null&&_e.length>0?Qe.some(_e):Qe.none()},ml=(Z,ce)=>{const ge=Z.dom,Ke=ut(Z)?Qe.some(dr(Z.selection,ce)):Qe.none(),Gt=ce.bind(no=>Qe.from(ge.getAttrib(no,"href"))),ko=ce.bind(no=>Qe.from(ge.getAttrib(no,"target"))),Ys=ce.bind(no=>Io(ge,no,"rel")),to=ce.bind(no=>Io(ge,no,"class")),Xs=ce.bind(no=>Io(ge,no,"title"));return{url:Gt,text:Ke,title:Xs,target:ko,rel:Ys,linkClass:to}},Ec={collect:(Z,ce)=>Oo.getLinks(Z).then(ge=>{const _e=ml(Z,ce);return{anchor:_e,catalogs:{targets:_s.getTargets(Z),rels:Li.getRels(Z,_e.target),classes:jl.getClasses(Z),anchor:pe.getAnchors(Z),link:ge},optNode:ce,flags:{titleEnabled:Ne(Z)}}})},kl=(Z,ce)=>ge=>{const _e=ge.getData();if(!_e.url.value){wc(Z),ge.close();return}const Ke=Ys=>Qe.from(_e[Ys]).filter(to=>!Ps(ce.anchor[Ys],to)),Gt={href:_e.url.value,text:Ke("text"),target:Ke("target"),rel:Ke("rel"),class:Ke("linkClass"),title:Ke("title")},ko={href:_e.url.value,attach:_e.url.meta!==void 0&&_e.url.meta.attach?_e.url.meta.attach:Jn};ta.preprocess(Z,Gt).then(Ys=>{Cc(Z,ko,Ys)}),ge.close()},_l=Z=>{const ce=To(Z);return Ec.collect(Z,ce)},mo=(Z,ce)=>{const ge=Z.anchor,_e=ge.url.getOr("");return{url:{value:_e,meta:{original:{value:_e}}},text:ge.text.getOr(""),title:ge.title.getOr(""),anchor:_e,link:_e,rel:ge.rel.getOr(""),target:ge.target.or(ce).getOr(""),linkClass:ge.linkClass.getOr("")}},ba=(Z,ce,ge)=>{const _e=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Ke=Z.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Gt=Z.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],ko=Qe.from(Ve(ge)),Ys=mo(Z,ko),to=Z.catalogs,Xs=ha.init(Ys,to);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Jt([_e,Ke,Gt,et([to.anchor.map(Vt.createUi("anchor","Anchors")),to.rels.map(Vt.createUi("rel","Rel")),to.targets.map(Vt.createUi("target","Open link in...")),to.link.map(Vt.createUi("link","Link list")),to.classes.map(Vt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ys,onChange:(vs,{name:_c})=>{Xs.onChange(vs.getData,{name:_c}).each(uc=>{vs.setData(uc)})},onSubmit:ce}},jc=Z=>{_l(Z).then(ge=>{const _e=kl(Z,ge);return ba(ge,_e,Z)}).then(ge=>{Z.windowManager.open(ge)})},kc=Z=>{Z.addCommand("mceLink",(ce,ge)=>{(ge==null?void 0:ge.dialog)===!0||!V(Z)?jc(Z):Z.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var $a=tinymce.util.Tools.resolve("tinymce.util.VK");const sr=(Z,ce)=>{document.body.appendChild(Z),Z.dispatchEvent(ce),document.body.removeChild(Z)},ls=Z=>{const ce=document.createElement("a");ce.target="_blank",ce.href=Z,ce.rel="noreferrer noopener";const ge=document.createEvent("MouseEvents");ge.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),sr(ce,ge)},ld=(Z,ce)=>Z.dom.getParent(ce,"a[href]"),Fi=Z=>ld(Z,Z.selection.getStart()),Eo=Z=>Z.altKey===!0&&Z.shiftKey===!1&&Z.ctrlKey===!1&&Z.metaKey===!1,Nr=(Z,ce)=>{if(ce){const ge=Ko(ce);if(/^#/.test(ge)){const _e=Z.dom.select(ge);_e.length&&Z.selection.scrollIntoView(_e[0],!0)}else ls(ce.href)}},na=Z=>()=>{Z.execCommand("mceLink",!1,{dialog:!0})},Os=Z=>()=>{Nr(Z,Fi(Z))},fi=Z=>{Z.on("click",ce=>{const ge=ld(Z,ce.target);ge&&$a.metaKeyPressed(ce)&&(ce.preventDefault(),Nr(Z,ge))}),Z.on("keydown",ce=>{if(!ce.isDefaultPrevented()&&ce.keyCode===13&&Eo(ce)){const ge=Fi(Z);ge&&(ce.preventDefault(),Nr(Z,ge))}})},qa=(Z,ce)=>(Z.on("NodeChange",ce),()=>Z.off("NodeChange",ce)),oa=Z=>ce=>{const ge=()=>ce.setActive(!Z.mode.isReadOnly()&&$s(Z,Z.selection.getNode()));return ge(),qa(Z,ge)},ic=Z=>(Z.selection.isCollapsed()?Rr(Z.dom.getParents(Z.selection.getStart())):cc(Z.selection.getRng())).length===1,Hi=Z=>ce=>{const ge=()=>ce.setEnabled(ic(Z));return ge(),qa(Z,ge)},gi=Z=>ce=>{const ge=Ke=>Is(Ke)||zr(Z.selection.getRng()),_e=Z.dom.getParents(Z.selection.getStart());return ce.setEnabled(ge(_e)),qa(Z,Ke=>ce.setEnabled(ge(Ke.parents)))},wu=Z=>{Z.addShortcut("Meta+K","",()=>{Z.execCommand("mceLink")})},sa=Z=>{Z.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:na(Z),onSetup:oa(Z)}),Z.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Os(Z),onSetup:Hi(Z)}),Z.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>wc(Z),onSetup:gi(Z)})},Gc=Z=>{Z.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Os(Z),onSetup:Hi(Z)}),Z.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:na(Z)}),Z.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>wc(Z),onSetup:gi(Z)})},hi=Z=>{const ce="link unlink openlink",ge="link";Z.ui.registry.addContextMenu("link",{update:_e=>Z.dom.isEditable(_e)?Is(Z.dom.getParents(_e,"a"))?ce:ge:""})},fl=Z=>{const ce=Ke=>{Ke.selection.collapse(!1)},ge=Ke=>{const Gt=Z.selection.getNode();return Ke.setEnabled($s(Z,Gt)),Jn},_e=Ke=>{const Gt=To(Z),ko=ut(Z);if(Gt.isNone()&&ko){const Ys=dr(Z.selection,Gt);return Fe(Ys.length===0,Ke)}else return Qe.none()};Z.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:oa(Z)},label:"Link",predicate:Ke=>Dn(Z)&&$s(Z,Ke),initValue:()=>To(Z).fold(dt(""),Ko),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ke=>{const Gt=Z.selection.getNode();return Ke.setActive($s(Z,Gt)),oa(Z)(Ke)},onAction:Ke=>{const Gt=Ke.getValue(),ko=_e(Gt);Cc(Z,{href:Gt,attach:Jn},{href:Gt,text:ko,title:Qe.none(),rel:Qe.none(),target:Qe.none(),class:Qe.none()}),ce(Z),Ke.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ge,onAction:Ke=>{wc(Z),Ke.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ge,onAction:Ke=>{Os(Z)(),Ke.hide()}}]})};var Vi=()=>{it.add("link",Z=>{gn(Z),sa(Z),Gc(Z),hi(Z),fl(Z),fi(Z),kc(Z),wu(Z)})};Vi()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager"),en=tinymce.util.Tools.resolve("tinymce.Env"),Yt=tinymce.util.Tools.resolve("tinymce.util.Tools");const sn=Nn=>Mo=>Mo.options.get(Nn),An=sn("content_style"),eo=sn("content_css_cors"),ao=sn("body_class"),kt=sn("body_id"),Bt=Nn=>{var Mo;let Jn="";const dt=Nn.dom.encode,ur=(Mo=An(Nn))!==null&&Mo!==void 0?Mo:"";Jn+='<base href="'+dt(Nn.documentBaseURI.getURI())+'">';const Qe=eo(Nn)?' crossorigin="anonymous"':"";Yt.each(Nn.contentCSS,Jt=>{Jn+='<link type="text/css" rel="stylesheet" href="'+dt(Nn.documentBaseURI.toAbsolute(Jt))+'"'+Qe+">"}),ur&&(Jn+='<style type="text/css">'+ur+"</style>");const re=kt(Nn),Ut=ao(Nn),Fn='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(en.os.isMacOS()||en.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",Q=Nn.getBody().dir,cn=Q?' dir="'+dt(Q)+'"':"";return"<!DOCTYPE html><html><head>"+Jn+'</head><body id="'+dt(re)+'" class="mce-content-body '+dt(Ut)+'"'+cn+">"+Nn.getContent()+Fn+"</body></html>"},xs=Nn=>{const Mo=Bt(Nn);Nn.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Mo}}).focus("close")},Ln=Nn=>{Nn.addCommand("mcePreview",()=>{xs(Nn)})},Ts=Nn=>{const Mo=()=>Nn.execCommand("mcePreview");Nn.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Mo}),Nn.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Mo})};var Ho=()=>{it.add("preview",Nn=>{Ln(Nn),Ts(Nn)})};Ho()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const en=(w,S,L)=>{var W;return L(w,S.prototype)?!0:((W=w.constructor)===null||W===void 0?void 0:W.name)===S.name},Yt=w=>{const S=typeof w;return w===null?"null":S==="object"&&Array.isArray(w)?"array":S==="object"&&en(w,String,(L,W)=>W.isPrototypeOf(L))?"string":S},sn=w=>S=>Yt(S)===w,An=w=>S=>typeof S===w,eo=w=>S=>w===S,ao=sn("string"),kt=sn("array"),Bt=An("boolean"),xs=eo(void 0),Ln=w=>w==null,Ts=w=>!Ln(w),Ho=An("function"),Nn=An("number"),Mo=()=>{},Jn=(w,S)=>L=>w(S(L)),dt=w=>()=>w,ur=w=>w,Qe=(w,S)=>w===S;function re(w,...S){return(...L)=>{const W=S.concat(L);return w.apply(null,W)}}const Ut=w=>{w()},Ba=dt(!1),Fn=dt(!0);class Q{constructor(S,L){this.tag=S,this.value=L}static some(S){return new Q(!0,S)}static none(){return Q.singletonNone}fold(S,L){return this.tag?L(this.value):S()}isSome(){return this.tag}isNone(){return!this.tag}map(S){return this.tag?Q.some(S(this.value)):Q.none()}bind(S){return this.tag?S(this.value):Q.none()}exists(S){return this.tag&&S(this.value)}forall(S){return!this.tag||S(this.value)}filter(S){return!this.tag||S(this.value)?this:Q.none()}getOr(S){return this.tag?this.value:S}or(S){return this.tag?this:S}getOrThunk(S){return this.tag?this.value:S()}orThunk(S){return this.tag?this:S()}getOrDie(S){if(this.tag)return this.value;throw new Error(S!=null?S:"Called getOrDie on None")}static from(S){return Ts(S)?Q.some(S):Q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(S){this.tag&&S(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Q.singletonNone=new Q(!1);const cn=Object.keys,Go=Object.hasOwnProperty,Jt=(w,S)=>{const L=cn(w);for(let W=0,ie=L.length;W<ie;W++){const Oe=L[W],tt=w[Oe];S(tt,Oe)}},ze=w=>(S,L)=>{w[L]=S},ue=(w,S,L,W)=>{Jt(w,(ie,Oe)=>{(S(ie,Oe)?L:W)(ie,Oe)})},Ps=(w,S)=>{const L={};return ue(w,S,ze(L),Mo),L},et=(w,S)=>{const L=[];return Jt(w,(W,ie)=>{L.push(S(W,ie))}),L},Fe=w=>et(w,ur),O=w=>cn(w).length,gn=(w,S)=>Ge(w,S)?Q.from(w[S]):Q.none(),Ge=(w,S)=>Go.call(w,S),Dn=(w,S)=>Ge(w,S)&&w[S]!==void 0&&w[S]!==null,Ht=Array.prototype.indexOf,Ve=Array.prototype.push,So=(w,S)=>Ht.call(w,S),qo=(w,S)=>So(w,S)>-1,xo=(w,S)=>{for(let L=0,W=w.length;L<W;L++){const ie=w[L];if(S(ie,L))return!0}return!1},nr=(w,S)=>{const L=[];for(let W=0;W<w;W++)L.push(S(W));return L},Ne=(w,S)=>{const L=w.length,W=new Array(L);for(let ie=0;ie<L;ie++){const Oe=w[ie];W[ie]=S(Oe,ie)}return W},mt=(w,S)=>{for(let L=0,W=w.length;L<W;L++){const ie=w[L];S(ie,L)}},V=(w,S)=>{for(let L=w.length-1;L>=0;L--){const W=w[L];S(W,L)}},vc=(w,S)=>{const L=[],W=[];for(let ie=0,Oe=w.length;ie<Oe;ie++){const tt=w[ie];(S(tt,ie)?L:W).push(tt)}return{pass:L,fail:W}},Sn=(w,S)=>{const L=[];for(let W=0,ie=w.length;W<ie;W++){const Oe=w[W];S(Oe,W)&&L.push(Oe)}return L},Ws=(w,S,L)=>(V(w,(W,ie)=>{L=S(L,W,ie)}),L),vn=(w,S,L)=>(mt(w,(W,ie)=>{L=S(L,W,ie)}),L),cd=(w,S,L)=>{for(let W=0,ie=w.length;W<ie;W++){const Oe=w[W];if(S(Oe,W))return Q.some(Oe);if(L(Oe,W))break}return Q.none()},an=(w,S)=>cd(w,S,Ba),Xo=w=>{const S=[];for(let L=0,W=w.length;L<W;++L){if(!kt(w[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+w);Ve.apply(S,w[L])}return S},Vt=(w,S)=>Xo(Ne(w,S)),Ie=(w,S)=>{for(let L=0,W=w.length;L<W;++L){const ie=w[L];if(S(ie,L)!==!0)return!1}return!0},ac=(w,S)=>{const L={};for(let W=0,ie=w.length;W<ie;W++){const Oe=w[W];L[String(Oe)]=S(Oe,W)}return L},Sr=(w,S)=>S>=0&&S<w.length?Q.some(w[S]):Q.none(),jt=w=>Sr(w,0),cl=w=>Sr(w,w.length-1),Jo=(w,S)=>{for(let L=0;L<w.length;L++){const W=S(w[L],L);if(W.isSome())return W}return Q.none()},ll=8,us=9,Dr=11,Wc=1,ea=3,Es=(w,S)=>{const W=(S||document).createElement("div");if(W.innerHTML=w,!W.hasChildNodes()||W.childNodes.length>1){const ie="HTML does not have a single root node";throw console.error(ie,w),new Error(ie)}return Ko(W.childNodes[0])},Vo=(w,S)=>{const W=(S||document).createElement(w);return Ko(W)},di=(w,S)=>{const W=(S||document).createTextNode(w);return Ko(W)},Ko=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},No={fromHtml:Es,fromTag:Vo,fromText:di,fromDom:Ko,fromPoint:(w,S,L)=>Q.from(w.dom.elementFromPoint(S,L)).map(Ko)},To=(w,S)=>{const L=w.dom;if(L.nodeType!==Wc)return!1;{const W=L;if(W.matches!==void 0)return W.matches(S);if(W.msMatchesSelector!==void 0)return W.msMatchesSelector(S);if(W.webkitMatchesSelector!==void 0)return W.webkitMatchesSelector(S);if(W.mozMatchesSelector!==void 0)return W.mozMatchesSelector(S);throw new Error("Browser lacks native selectors")}},$s=w=>w.nodeType!==Wc&&w.nodeType!==us&&w.nodeType!==Dr||w.childElementCount===0,dr=(w,S)=>{const L=S===void 0?document:S.dom;return $s(L)?[]:Ne(L.querySelectorAll(w),No.fromDom)},cc=(w,S)=>{const L=S===void 0?document:S.dom;return $s(L)?Q.none():Q.from(L.querySelector(w)).map(No.fromDom)},Rr=(w,S)=>w.dom===S.dom,Is=To;typeof window!="undefined"||Function("return this;")();const zr=w=>w.dom.nodeName.toLowerCase(),ut=w=>w.dom.nodeType,Bn=w=>S=>ut(S)===w,Pa=w=>ut(w)===ll||zr(w)==="#comment",Ks=Bn(Wc),El=Bn(ea),il=Bn(us),$o=Bn(Dr),yc=w=>S=>Ks(S)&&zr(S)===w,lc=w=>No.fromDom(w.dom.ownerDocument),vo=w=>il(w)?w:lc(w),tn=w=>Q.from(w.dom.parentNode).map(No.fromDom),Ur=(w,S)=>{const L=Ho(S)?S:Ba;let W=w.dom;const ie=[];for(;W.parentNode!==null&&W.parentNode!==void 0;){const Oe=W.parentNode,tt=No.fromDom(Oe);if(ie.push(tt),L(tt)===!0)break;W=Oe}return ie},Cc=w=>Q.from(w.dom.previousSibling).map(No.fromDom),wc=w=>Q.from(w.dom.nextSibling).map(No.fromDom),Sc=w=>Ne(w.dom.childNodes,No.fromDom),ks=(w,S)=>{const L=w.dom.childNodes;return Q.from(L[S]).map(No.fromDom)},or=w=>ks(w,0),es=w=>$o(w)&&Ts(w.dom.host),xc=Ho(Element.prototype.attachShadow)&&Ho(Node.prototype.getRootNode)?w=>No.fromDom(w.dom.getRootNode()):vo,ts=w=>{const S=xc(w);return es(S)?Q.some(S):Q.none()},ha=w=>No.fromDom(w.dom.host),ns=w=>{const S=El(w)?w.dom.parentNode:w.dom;if(S==null||S.ownerDocument===null)return!1;const L=S.ownerDocument;return ts(No.fromDom(S)).fold(()=>L.body.contains(S),Jn(ns,ha))};var fr=(w,S,L,W,ie)=>w(L,W)?Q.some(L):Ho(ie)&&ie(L)?Q.none():S(L,W,ie);const Tc=(w,S,L)=>{let W=w.dom;const ie=Ho(L)?L:Ba;for(;W.parentNode;){W=W.parentNode;const Oe=No.fromDom(W);if(S(Oe))return Q.some(Oe);if(ie(Oe))break}return Q.none()},mi=(w,S,L)=>fr((ie,Oe)=>Oe(ie),Tc,w,S,L),Zc=(w,S)=>{const L=ie=>S(No.fromDom(ie));return an(w.dom.childNodes,L).map(No.fromDom)},ta=(w,S,L)=>Tc(w,W=>To(W,S),L),Um=(w,S)=>Zc(w,L=>To(L,S)),pe=(w,S)=>cc(S,w),Mr=(w,S,L)=>fr((ie,Oe)=>To(ie,Oe),ta,w,S,L),jl=w=>Mr(w,"[contenteditable]"),ul=(w,S=!1)=>ns(w)?w.dom.isContentEditable:jl(w).fold(dt(S),L=>Cu(L)==="true"),Cu=w=>w.dom.contentEditable,Oo=w=>w.nodeName.toLowerCase(),Jd=w=>No.fromDom(w.getBody()),Li=w=>S=>Rr(S,Jd(w)),dl=w=>w?w.replace(/px$/,""):"",pa=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,_s=w=>No.fromDom(w.selection.getStart()),Io=w=>No.fromDom(w.selection.getEnd()),ml=w=>mi(w,yc("table")).forall(ul),Ga=(w,S)=>Sn(Sc(w),S),Ec=(w,S)=>{let L=[];return mt(Sc(w),W=>{S(W)&&(L=L.concat([W])),L=L.concat(Ec(W,S))}),L},kl=(w,S)=>Ga(w,L=>To(L,S)),_l=(w,S)=>dr(S,w),mo=(w,S,L)=>{if(ao(L)||Bt(L)||Nn(L))w.setAttribute(S,L+"");else throw console.error("Invalid call to Attribute.set. Key ",S,":: Value ",L,":: Element ",w),new Error("Attribute value was not simple")},ba=(w,S,L)=>{mo(w.dom,S,L)},jc=(w,S)=>{const L=w.dom;Jt(S,(W,ie)=>{mo(L,ie,W)})},kc=(w,S)=>{const L=w.dom.getAttribute(S);return L===null?void 0:L},$a=(w,S)=>Q.from(kc(w,S)),sr=(w,S)=>{w.dom.removeAttribute(S)},ls=w=>vn(w.dom.attributes,(S,L)=>(S[L.name]=L.value,S),{}),ld=(w,S,L=Qe)=>w.exists(W=>L(W,S)),Fi=w=>{const S=[],L=W=>{S.push(W)};for(let W=0;W<w.length;W++)w[W].each(L);return S},Eo=(w,S,L)=>w.isSome()&&S.isSome()?Q.some(L(w.getOrDie(),S.getOrDie())):Q.none(),Nr=w=>w.bind(ur),na=(w,S)=>w?Q.some(S):Q.none(),Os=(w,S)=>w.substring(S),fi=(w,S,L)=>S===""||w.length>=S.length&&w.substr(L,L+S.length)===S,qa=(w,S)=>oa(w,S)?Os(w,S.length):w,oa=(w,S)=>fi(w,S,0),Hi=(w=>S=>S.replace(w,""))(/^\s+|\s+$/g),gi=w=>w.length>0,wu=w=>!gi(w),sa=(w,S=10)=>{const L=parseInt(w,S);return isNaN(L)?Q.none():Q.some(L)},Gc=w=>{const S=parseFloat(w);return isNaN(S)?Q.none():Q.some(S)},hi=w=>w.style!==void 0&&Ho(w.style.getPropertyValue),fl=(w,S,L)=>{if(!ao(L))throw console.error("Invalid call to CSS.set. Property ",S,":: Value ",L,":: Element ",w),new Error("CSS value must be a string: "+L);hi(w)&&w.style.setProperty(S,L)},Vi=(w,S)=>{hi(w)&&w.style.removeProperty(S)},Z=(w,S,L)=>{const W=w.dom;fl(W,S,L)},ce=(w,S)=>{const L=w.dom,ie=window.getComputedStyle(L).getPropertyValue(S);return ie===""&&!ns(w)?ge(L,S):ie},ge=(w,S)=>hi(w)?w.style.getPropertyValue(S):"",_e=(w,S)=>{const L=w.dom,W=ge(L,S);return Q.from(W).filter(ie=>ie.length>0)},Ke=(w,S)=>{const L=w.dom;Vi(L,S),ld($a(w,"style").map(Hi),"")&&sr(w,"style")},Gt=(w,S,L=0)=>$a(w,S).map(W=>parseInt(W,10)).getOr(L),ko=(w,S)=>Ys(w,S,Fn),Ys=(w,S,L)=>Vt(Sc(w),W=>To(W,S)?L(W)?[W]:[]:Ys(W,S,L)),to=["tfoot","thead","tbody","colgroup"],Xs=w=>qo(to,w),no=(w,S)=>({rows:w,columns:S}),vs=(w,S,L)=>({element:w,rowspan:S,colspan:L}),_c=(w,S,L,W,ie,Oe)=>({element:w,rowspan:S,colspan:L,row:W,column:ie,isLocked:Oe}),uc=(w,S,L)=>({element:w,cells:S,section:L}),bn=(w,S,L,W)=>({startRow:w,startCol:S,finishRow:L,finishCol:W}),so=(w,S,L)=>({element:w,colspan:S,column:L}),Br=(w,S)=>({element:w,columns:S}),P=(w,S,L=Ba)=>{if(L(S))return Q.none();if(qo(w,zr(S)))return Q.some(S);const W=ie=>To(ie,"table")||L(ie);return ta(S,w.join(","),W)},G=(w,S)=>P(["td","th"],w,S),te=w=>ko(w,"th,td"),Te=w=>To(w,"colgroup")?kl(w,"col"):Vt(_t(w),S=>kl(S,"col")),wt=(w,S)=>Mr(w,"table",S),xn=w=>ko(w,"tr"),_t=w=>wt(w).fold(dt([]),S=>kl(S,"colgroup")),rr=(w,S)=>Ne(w,L=>{if(zr(L)==="colgroup"){const W=Ne(Te(L),ie=>{const Oe=Gt(ie,"span",1);return vs(ie,1,Oe)});return uc(L,W,"colgroup")}else{const W=Ne(te(L),ie=>{const Oe=Gt(ie,"rowspan",1),tt=Gt(ie,"colspan",1);return vs(ie,Oe,tt)});return uc(L,W,S(L))}}),xr=w=>tn(w).map(S=>{const L=zr(S);return Xs(L)?L:"tbody"}).getOr("tbody"),Ze=w=>{const S=xn(w),W=[..._t(w),...S];return rr(W,xr)},gr="data-snooker-locked-cols",As=w=>$a(w,gr).bind(S=>Q.from(S.match(/\d+/g))).map(S=>ac(S,Fn)),Pr=(w,S)=>w+","+S,Wm=(w,S,L)=>Q.from(w.access[Pr(S,L)]),Vn=(w,S,L)=>{const W=Gl(w,ie=>L(S,ie.element));return W.length>0?Q.some(W[0]):Q.none()},Gl=(w,S)=>{const L=Vt(w.all,W=>W.cells);return Sn(L,S)},Ia=w=>{const S={};let L=0;return mt(w.cells,W=>{const ie=W.colspan;nr(ie,Oe=>{const tt=L+Oe;S[tt]=so(W.element,ie,tt)}),L+=ie}),S},Js=w=>{const S={},L=[],ie=jt(w).map(Ic=>Ic.element).bind(wt).bind(As).getOr({});let Oe=0,tt=0,Et=0;const{pass:hn,fail:pn}=vc(w,Ic=>Ic.section==="colgroup");mt(pn,Ic=>{const xa=[];mt(Ic.cells,Mu=>{let Ml=0;for(;S[Pr(Et,Ml)]!==void 0;)Ml++;const um=Dn(ie,Ml.toString()),Kf=_c(Mu.element,Mu.rowspan,Mu.colspan,Et,Ml,um);for(let Nl=0;Nl<Mu.colspan;Nl++)for(let dm=0;dm<Mu.rowspan;dm++){const oh=Et+dm,sh=Ml+Nl,tf=Pr(oh,sh);S[tf]=Kf,tt=Math.max(tt,sh+1)}xa.push(Kf)}),Oe++,L.push(uc(Ic.element,xa,Ic.section)),Et++});const{columns:fo,colgroups:Lo}=cl(hn).map(Ic=>{const xa=Ia(Ic);return{colgroups:[Br(Ic.element,Fe(xa))],columns:xa}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:no(Oe,tt),access:S,all:L,columns:fo,colgroups:Lo}},pr={fromTable:w=>{const S=Ze(w);return Js(S)},generate:Js,getAt:Wm,findItem:Vn,filterItems:Gl,justCells:w=>Vt(w.all,S=>S.cells),justColumns:w=>Fe(w.columns),hasColumns:w=>cn(w.columns).length>0,getColumnAt:(w,S)=>Q.from(w.columns[S])};var Su=tinymce.util.Tools.resolve("tinymce.util.Tools");const va=(w,S,L)=>{const W=w.select("td,th",S);let ie;for(let Oe=0;Oe<W.length;Oe++){const tt=w.getStyle(W[Oe],L);if(xs(ie)&&(ie=tt),ie!==tt)return""}return ie},zi=(w,S,L)=>{Su.each("left center right".split(" "),W=>{W!==L&&w.formatter.remove("align"+W,{},S)}),L&&w.formatter.apply("align"+L,{},S)},Qd=(w,S,L)=>{Su.each("top middle bottom".split(" "),W=>{W!==L&&w.formatter.remove("valign"+W,{},S)}),L&&w.formatter.apply("valign"+L,{},S)},zo=(w,S,L)=>{w.dispatch("TableModified",We(J({},L),{table:S}))},ya=(w,S)=>Gc(w).getOr(S),Wr=(w,S,L)=>ya(ce(w,S),L),em=(w,S,L,W)=>{const ie=Wr(w,`padding-${L}`,0),Oe=Wr(w,`padding-${W}`,0),tt=Wr(w,`border-${L}-width`,0),Et=Wr(w,`border-${W}-width`,0);return S-ie-Oe-tt-Et},Ui=(w,S)=>{const L=w.dom,W=L.getBoundingClientRect().width||L.offsetWidth;return S==="border-box"?W:em(w,W,"left","right")},La=w=>Ui(w,"content-box");var gl=tinymce.util.Tools.resolve("tinymce.Env");const id="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Kl=nr(5,w=>{const S=`${w+1}px`;return{title:S,value:S}}),Oc=Ne(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),Qs="100%",Ca=w=>{var S;const L=w.dom,W=(S=L.getParent(w.selection.getStart(),L.isBlock))!==null&&S!==void 0?S:w.getBody();return La(No.fromDom(W))+"px"},Ka=(w,S)=>jm(w)||!Zs(w)?S:Eu(w)?We(J({},S),{width:Ca(w)}):We(J({},S),{width:Qs}),Ac=(w,S)=>jm(w)||Zs(w)?S:Eu(w)?We(J({},S),{width:Ca(w)}):We(J({},S),{width:Qs}),ra=w=>S=>S.options.get(w),Ls=w=>{const S=w.options.register;S("table_border_widths",{processor:"object[]",default:Kl}),S("table_border_styles",{processor:"object[]",default:Oc}),S("table_cell_advtab",{processor:"boolean",default:!0}),S("table_row_advtab",{processor:"boolean",default:!0}),S("table_advtab",{processor:"boolean",default:!0}),S("table_appearance_options",{processor:"boolean",default:!0}),S("table_grid",{processor:"boolean",default:!gl.deviceType.isTouch()}),S("table_cell_class_list",{processor:"object[]",default:[]}),S("table_row_class_list",{processor:"object[]",default:[]}),S("table_class_list",{processor:"object[]",default:[]}),S("table_toolbar",{processor:"string",default:id}),S("table_background_color_map",{processor:"object[]",default:[]}),S("table_border_color_map",{processor:"object[]",default:[]})},dc=ra("table_sizing_mode"),tm=ra("table_border_widths"),Wi=ra("table_border_styles"),Zi=ra("table_cell_advtab"),Zm=ra("table_row_advtab"),qc=ra("table_advtab"),ji=ra("table_appearance_options"),ud=ra("table_grid"),Zs=ra("table_style_by_css"),nm=ra("table_cell_class_list"),xu=ra("table_row_class_list"),Tu=ra("table_class_list"),dd=ra("table_toolbar"),md=ra("table_background_color_map"),fd=ra("table_border_color_map"),Eu=w=>dc(w)==="fixed",jm=w=>dc(w)==="responsive",Gm=w=>{const S=w.options,L=S.get("table_default_styles");return S.isSet("table_default_styles")?L:Ka(w,L)},Gi=w=>{const S=w.options,L=S.get("table_default_attributes");return S.isSet("table_default_attributes")?L:Ac(w,L)},vp=(w,S)=>S.column>=w.startCol&&S.column+S.colspan-1<=w.finishCol&&S.row>=w.startRow&&S.row+S.rowspan-1<=w.finishRow,ne=(w,S)=>{let L=!0;const W=re(vp,S);for(let ie=S.startRow;ie<=S.finishRow;ie++)for(let Oe=S.startCol;Oe<=S.finishCol;Oe++)L=L&&pr.getAt(w,ie,Oe).exists(W);return L?Q.some(S):Q.none()},gd=(w,S)=>bn(Math.min(w.row,S.row),Math.min(w.column,S.column),Math.max(w.row+w.rowspan-1,S.row+S.rowspan-1),Math.max(w.column+w.colspan-1,S.column+S.colspan-1)),Ya=(w,S,L)=>{const W=pr.findItem(w,S,Rr),ie=pr.findItem(w,L,Rr);return W.bind(Oe=>ie.map(tt=>gd(Oe,tt)))},Ff=(w,S,L)=>Ya(w,S,L).bind(W=>ne(w,W)),yp=(w,S,L)=>{const W=Cp(w);return Ff(W,S,L)},Cp=pr.fromTable,ho=(w,S)=>{tn(w).each(W=>{W.dom.insertBefore(S.dom,w.dom)})},hl=(w,S)=>{wc(w).fold(()=>{tn(w).each(ie=>{Dc(ie,S)})},W=>{ho(W,S)})},Fa=(w,S)=>{or(w).fold(()=>{Dc(w,S)},W=>{w.dom.insertBefore(S.dom,W.dom)})},Dc=(w,S)=>{w.dom.appendChild(S.dom)},Zg=(w,S)=>{ho(w,S),Dc(S,w)},pi=(w,S)=>{mt(S,(L,W)=>{const ie=W===0?w:S[W-1];hl(ie,L)})},Kc=(w,S)=>{mt(S,L=>{Dc(w,L)})},om=w=>{const S=w.dom;S.parentNode!==null&&S.parentNode.removeChild(S)},Hf=w=>{const S=Sc(w);S.length>0&&pi(w,S),om(w)},mc=((w,S)=>{const L=Oe=>{if(!w(Oe))throw new Error("Can only get "+S+" value of a "+S+" node");return W(Oe).getOr("")},W=Oe=>w(Oe)?Q.from(Oe.dom.nodeValue):Q.none();return{get:L,getOption:W,set:(Oe,tt)=>{if(!w(Oe))throw new Error("Can only set raw "+S+" value of a "+S+" node");Oe.dom.nodeValue=tt}}})(El,"text"),hd=w=>mc.get(w),Gg=(w,S)=>mc.set(w,S);var Rc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Zr=()=>{const w=pn=>No.fromDom(pn.dom.cloneNode(!1)),S=pn=>vo(pn).dom,L=pn=>Ks(pn)?zr(pn)==="body"?!0:qo(Rc,zr(pn)):!1,W=pn=>Ks(pn)?qo(["br","img","hr","input"],zr(pn)):!1,ie=pn=>Ks(pn)&&kc(pn,"contenteditable")==="false",Oe=(pn,fo)=>pn.dom.compareDocumentPosition(fo.dom),tt=(pn,fo)=>{const Lo=ls(pn);jc(fo,Lo)},Et=pn=>{const fo=zr(pn);return qo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],fo)},hn=pn=>Ks(pn)?$a(pn,"lang"):Q.none();return{up:dt({selector:ta,closest:Mr,predicate:Tc,all:Ur}),down:dt({selector:_l,predicate:Ec}),styles:dt({get:ce,getRaw:_e,set:Z,remove:Ke}),attrs:dt({get:kc,set:ba,remove:sr,copyTo:tt}),insert:dt({before:ho,after:hl,afterAll:pi,append:Dc,appendAll:Kc,prepend:Fa,wrap:Zg}),remove:dt({unwrap:Hf,remove:om}),create:dt({nu:No.fromTag,clone:w,text:No.fromText}),query:dt({comparePosition:Oe,prevSibling:Cc,nextSibling:wc}),property:dt({children:Sc,name:zr,parent:tn,document:S,isText:El,isComment:Pa,isElement:Ks,isSpecial:Et,getLanguage:hn,getText:hd,setText:Gg,isBoundary:L,isEmptyTag:W,isNonEditable:ie}),eq:Rr,is:Is}};const pd=(w,S,L,W)=>{const ie=L[0],Oe=L.slice(1);return W(w,S,ie,Oe)},bd=(w,S,L)=>L.length>0?pd(w,S,L,pl):Q.none(),pl=(w,S,L,W)=>{const ie=S(w,L);return Ws(W,(Oe,tt)=>{const Et=S(w,tt);return Xa(w,Oe,Et)},ie)},Xa=(w,S,L)=>S.bind(W=>L.filter(re(w.eq,W))),qm=bd,Km=Zr(),Ym=(w,S)=>qm(Km,(L,W)=>w(W),S),Xm=w=>ta(w,"table"),Ol=(w,S)=>{const L=_l(w,S);return L.length>0?Q.some(L):Q.none()},sm=(w,S,L)=>pe(w,S).bind(W=>pe(w,L).bind(ie=>Ym(Xm,[W,ie]).map(Oe=>({first:W,last:ie,table:Oe})))),qg=(w,S)=>Ol(w,S),U0=(w,S,L)=>sm(w,S,L).bind(W=>{const ie=hn=>Rr(w,hn),Oe="thead,tfoot,tbody,table",tt=ta(W.first,Oe,ie),Et=ta(W.last,Oe,ie);return tt.bind(hn=>Et.bind(pn=>Rr(hn,pn)?yp(W.table,W.first,W.last):Q.none()))}),Kg=w=>Ne(w,No.fromDom),rm="data-mce-selected",Vf="td["+rm+"],th["+rm+"]",bi="data-mce-first-selected",zf="td["+bi+"],th["+bi+"]",is="data-mce-last-selected",k="td["+is+"],th["+is+"]",M={selected:rm,selectedSelector:Vf,firstSelected:bi,firstSelectedSelector:zf,lastSelected:is,lastSelectedSelector:k},z=w=>wt(w).bind(S=>qg(S,M.firstSelectedSelector)).fold(dt(w),S=>S[0]),ae=w=>(S,L)=>{const W=zr(S),ie=W==="col"||W==="colgroup"?z(S):S;return Mr(ie,w,L)},le=ae("th,td,caption"),lt=ae("th,td"),qt=w=>Kg(w.model.table.getSelectedCells()),mn=(w,S)=>{const L=lt(w),W=L.bind(ie=>wt(ie)).map(ie=>xn(ie));return Eo(L,W,(ie,Oe)=>Sn(Oe,tt=>xo(Kg(tt.dom.cells),Et=>kc(Et,S)==="1"||Rr(Et,ie)))).getOr([])},Pn=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],at=w=>({value:am(w)}),_o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,$r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Yc=w=>_o.test(w)||$r.test(w),am=w=>qa(w,"#").toUpperCase(),Uf=w=>Yc(w)?Q.some({value:am(w)}):Q.none(),Yl=w=>{const S=w.toString(16);return(S.length===1?"0"+S:S).toUpperCase()},Xc=w=>{const S=Yl(w.red)+Yl(w.green)+Yl(w.blue);return at(S)},Ja=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,bl=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,aa=(w,S,L,W)=>({red:w,green:S,blue:L,alpha:W}),yb=(w,S,L,W)=>{const ie=parseInt(w,10),Oe=parseInt(S,10),tt=parseInt(L,10),Et=parseFloat(W);return aa(ie,Oe,tt,Et)},yo=w=>{if(w==="transparent")return Q.some(aa(0,0,0,0));const S=Ja.exec(w);if(S!==null)return Q.some(yb(S[1],S[2],S[3],"1"));const L=bl.exec(w);return L!==null?Q.some(yb(L[1],L[2],L[3],L[4])):Q.none()},ku=w=>Uf(w).orThunk(()=>yo(w).map(Xc)).getOrThunk(()=>{const S=document.createElement("canvas");S.height=1,S.width=1;const L=S.getContext("2d");L.clearRect(0,0,S.width,S.height),L.fillStyle="#FFFFFF",L.fillStyle=w,L.fillRect(0,0,1,1);const W=L.getImageData(0,0,1,1).data,ie=W[0],Oe=W[1],tt=W[2],Et=W[3];return Xc(aa(ie,Oe,tt,Et))}),vd=w=>yo(w).map(Xc).map(S=>"#"+S.value).getOr(w),js=w=>{let S=w;return{get:()=>S,set:ie=>{S=ie}}},Cb=w=>{const S=js(Q.none()),L=()=>S.get().each(w);return{clear:()=>{L(),S.set(Q.none())},isSet:()=>S.get().isSome(),get:()=>S.get(),set:Et=>{L(),S.set(Q.some(Et))}}},W0=()=>Cb(w=>w.unbind()),_u=(w,S,L)=>W=>{const ie=W0(),Oe=wu(L),tt=()=>{const Et=qt(w),hn=pn=>w.formatter.match(S,{value:L},pn.dom,Oe);Oe?(W.setActive(!xo(Et,hn)),ie.set(w.formatter.formatChanged(S,pn=>W.setActive(!pn),!0))):(W.setActive(Ie(Et,hn)),ie.set(w.formatter.formatChanged(S,W.setActive,!1,{value:L})))};return w.initialized?tt():w.on("init",tt),ie.clear},Yo=w=>Dn(w,"menu"),os=w=>Ne(w,S=>{const L=S.text||S.title||"";return Yo(S)?{text:L,items:os(S.menu)}:{text:L,value:S.value}}),Tr=(w,S,L,W)=>Ne(S,ie=>{const Oe=ie.text||ie.title;return Yo(ie)?{type:"nestedmenuitem",text:Oe,getSubmenuItems:()=>Tr(w,ie.menu,L,W)}:{text:Oe,type:"togglemenuitem",onAction:()=>W(ie.value),onSetup:_u(w,L,ie.value)}}),yd=(w,S)=>L=>{w.execCommand("mceTableApplyCellStyle",!1,{[S]:L})},Cd=w=>Vt(w,S=>Yo(S)?[We(J({},S),{menu:Cd(S.menu)})]:gi(S.value)?[S]:[]),cm=(w,S,L,W)=>ie=>ie(Tr(w,S,L,W)),wd=(w,S,L)=>{const W=Ne(S,ie=>({text:ie.title,value:"#"+ku(ie.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:W.length>0?W:void 0,allowCustomColors:!1},onAction:ie=>{const Oe=ie.value==="remove"?"":ie.value;w.execCommand("mceTableApplyCellStyle",!1,{[L]:Oe})}}]},zn=w=>()=>{const L=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:L})},Yg=w=>()=>{const L=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:L})},wp=w=>{const S=os(nm(w));return S.length>0?Q.some({name:"class",type:"listbox",label:"Class",items:S}):Q.none()},Z0=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Pn}],j0=w=>Z0.concat(wp(w).toArray()),Wf=(w,S)=>{const W=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(os(Wi(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:S==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(W):W}},Zf={normal:(w,S)=>{const L=w.dom;return{setAttrib:(tt,Et)=>{L.setAttrib(S,tt,Et)},setStyle:(tt,Et)=>{L.setStyle(S,tt,Et)},setFormat:(tt,Et)=>{Et===""?w.formatter.remove(tt,{value:null},S,!0):w.formatter.apply(tt,{value:Et},S)}}}},Xl=yc("th"),Sb=(w,S)=>w&&S?"sectionCells":w?"section":"cells",Xg=w=>{const S=w.section==="thead",L=ld(xb(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:S||L?{type:"header",subType:Sb(S,L)}:{type:"body"}},xb=w=>{const S=Sn(w,L=>Xl(L.element));return S.length===0?Q.some("td"):S.length===w.length?Q.some("th"):Q.none()},vi=w=>{const S=Ne(w,ie=>Xg(ie).type),L=qo(S,"header"),W=qo(S,"footer");if(!L&&!W)return Q.some("body");{const ie=qo(S,"body");return L&&!ie&&!W?Q.some("header"):!L&&!ie&&W?Q.some("footer"):Q.none()}},Sp=w=>{let S=!1,L;return(...W)=>(S||(S=!0,L=w.apply(null,W)),L)},yi=(w,S)=>Jo(w.all,L=>an(L.cells,W=>Rr(S,W.element))),Jm=(w,S,L)=>{const W=Ne(S.selection,Oe=>G(Oe).bind(tt=>yi(w,tt)).filter(L)),ie=Fi(W);return na(ie.length>0,ie)},Tb=(w,S)=>S.mergable,Jg=(w,S)=>S.unmergable,xp=(w,S)=>Jm(w,S,Fn),Tp=(w,S)=>yi(w,S).exists(L=>!L.isLocked),wa=(w,S)=>Ie(S,L=>Tp(w,L)),Ep=(w,S)=>Tb(w,S).filter(L=>wa(w,L.cells)),Er=(w,S)=>Jg(w,S).filter(L=>wa(w,L)),Me={generate:w=>{if(!kt(w))throw new Error("cases must be an array");if(w.length===0)throw new Error("there must be at least one case");const S=[],L={};return mt(w,(W,ie)=>{const Oe=cn(W);if(Oe.length!==1)throw new Error("one and only one name per case");const tt=Oe[0],Et=W[tt];if(L[tt]!==void 0)throw new Error("duplicate key detected:"+tt);if(tt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!kt(Et))throw new Error("case arguments must be an array");S.push(tt),L[tt]=(...hn)=>{const pn=hn.length;if(pn!==Et.length)throw new Error("Wrong number of arguments to case "+tt+". Expected "+Et.length+" ("+Et+"), got "+pn);return{fold:(...Lo)=>{if(Lo.length!==w.length)throw new Error("Wrong number of arguments to fold. Expected "+w.length+", got "+Lo.length);return Lo[ie].apply(null,hn)},match:Lo=>{const Cs=cn(Lo);if(S.length!==Cs.length)throw new Error("Wrong number of arguments to match. Expected: "+S.join(",")+`
Actual: `+Cs.join(","));if(!Ie(S,xa=>qo(Cs,xa)))throw new Error("Not all branches were specified when using match. Specified: "+Cs.join(", ")+`
Required: `+S.join(", "));return Lo[tt].apply(null,hn)},log:Lo=>{}}}}),L}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]);J({},Me);const Al=(w,S)=>{const L=pr.fromTable(w);return xp(L,S).bind(ie=>{const Oe=ie[ie.length-1],tt=ie[0].row,Et=Oe.row+Oe.rowspan,hn=L.all.slice(tt,Et);return vi(hn)}).getOr("")},Ou=w=>oa(w,"rgb")?vd(w):w,kp=w=>{const S=No.fromDom(w);return{borderwidth:_e(S,"border-width").getOr(""),borderstyle:_e(S,"border-style").getOr(""),bordercolor:_e(S,"border-color").map(Ou).getOr(""),backgroundcolor:_e(S,"background-color").map(Ou).getOr("")}},_p=w=>{const S=w[0],L=w.slice(1);return mt(L,W=>{mt(cn(S),ie=>{Jt(W,(Oe,tt)=>{const Et=S[ie];Et!==""&&ie===tt&&Et!==Oe&&(S[ie]="")})})}),S},Sa=(w,S,L,W)=>an(w,ie=>!xs(L.formatter.matchNode(W,S+ie))).getOr(""),Au=re(Sa,["left","center","right"],"align"),Jl=re(Sa,["top","middle","bottom"],"valign"),ca=(w,S)=>{const L=Gm(w),W=Gi(w),ie=()=>({borderstyle:gn(L,"border-style").getOr(""),bordercolor:Ou(gn(L,"border-color").getOr("")),backgroundcolor:Ou(gn(L,"background-color").getOr(""))}),Oe={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},tt=()=>{const fo=L["border-width"];return Zs(w)&&fo?{border:fo}:gn(W,"border").fold(()=>({}),Lo=>({border:Lo}))},Et=S?ie():{},hn=()=>{const fo=gn(L,"border-spacing").or(gn(W,"cellspacing")).fold(()=>({}),Cs=>({cellspacing:Cs})),Lo=gn(L,"border-padding").or(gn(W,"cellpadding")).fold(()=>({}),Cs=>({cellpadding:Cs}));return J(J({},fo),Lo)};return J(J(J(J(J(J({},Oe),L),W),Et),tt()),hn())},lm=w=>wt(No.fromDom(w)).map(S=>{const L={selection:Kg(w.cells)};return Al(S,L)}).getOr(""),Je=(w,S,L)=>{const W=(Et,hn)=>{const pn=_e(No.fromDom(hn),"border-width");return Zs(w)&&pn.isSome()?pn.getOr(""):Et.getAttrib(hn,"border")||va(w.dom,hn,"border-width")||va(w.dom,hn,"border")||""},ie=w.dom,Oe=Zs(w)?ie.getStyle(S,"border-spacing")||ie.getAttrib(S,"cellspacing"):ie.getAttrib(S,"cellspacing")||ie.getStyle(S,"border-spacing"),tt=Zs(w)?va(ie,S,"padding")||ie.getAttrib(S,"cellpadding"):ie.getAttrib(S,"cellpadding")||va(ie,S,"padding");return J({width:ie.getStyle(S,"width")||ie.getAttrib(S,"width"),height:ie.getStyle(S,"height")||ie.getAttrib(S,"height"),cellspacing:Oe!=null?Oe:"",cellpadding:tt!=null?tt:"",border:W(ie,S),caption:!!ie.select("caption",S)[0],class:ie.getAttrib(S,"class",""),align:Au(w,S)},L?kp(S):{})},Op=(w,S,L)=>{const W=w.dom;return J({height:W.getStyle(S,"height")||W.getAttrib(S,"height"),class:W.getAttrib(S,"class",""),type:lm(S),align:Au(w,S)},L?kp(S):{})},G0=(w,S,L,W)=>{const ie=w.dom,Oe=W.getOr(S),tt=(Et,hn)=>ie.getStyle(Et,hn)||ie.getAttrib(Et,hn);return J({width:tt(Oe,"width"),height:tt(S,"height"),scope:ie.getAttrib(S,"scope"),celltype:Oo(S),class:ie.getAttrib(S,"class",""),halign:Au(w,S),valign:Jl(w,S)},L?kp(S):{})},Du=(w,S)=>{const L=pr.fromTable(w),W=pr.justCells(L),ie=Sn(W,Oe=>xo(S,tt=>Rr(Oe.element,tt)));return Ne(ie,Oe=>({element:Oe.element.dom,column:pr.getColumnAt(L,Oe.column).map(tt=>tt.element.dom)}))},wi=(w,S,L,W)=>{W("scope")&&w.setAttrib("scope",L.scope),W("class")&&w.setAttrib("class",L.class),W("height")&&w.setStyle("height",pa(L.height)),W("width")&&S.setStyle("width",pa(L.width))},Qg=(w,S,L)=>{L("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",S.backgroundcolor),L("bordercolor")&&w.setFormat("tablecellbordercolor",S.bordercolor),L("borderstyle")&&w.setFormat("tablecellborderstyle",S.borderstyle),L("borderwidth")&&w.setFormat("tablecellborderwidth",pa(S.borderwidth))},Ds=(w,S,L,W)=>{const ie=S.length===1;mt(S,Oe=>{const tt=Oe.element,Et=ie?Fn:W,hn=Zf.normal(w,tt),pn=Oe.column.map(fo=>Zf.normal(w,fo)).getOr(hn);wi(hn,pn,L,Et),Zi(w)&&Qg(hn,L,Et),W("halign")&&zi(w,tt,L.halign),W("valign")&&Qd(w,tt,L.valign)})},Qm=(w,S)=>{w.execCommand("mceTableCellType",!1,{type:S.celltype,no_events:!0})},Si=(w,S,L,W)=>{const ie=Ps(W,(Oe,tt)=>L[tt]!==Oe);O(ie)>0&&S.length>=1&&wt(S[0]).each(Oe=>{const tt=Du(Oe,S),Et=O(Ps(ie,(pn,fo)=>fo!=="scope"&&fo!=="celltype"))>0,hn=Ge(ie,"celltype");(Et||Ge(ie,"scope"))&&Ds(w,tt,W,re(Ge,ie)),hn&&Qm(w,W),zo(w,Oe.dom,{structure:hn,style:Et})})},En=(w,S,L,W)=>{const ie=W.getData();W.close(),w.undoManager.transact(()=>{Si(w,S,L,ie),w.focus()})},vl=(w,S)=>{const L=wt(S[0]).map(W=>Ne(Du(W,S),ie=>G0(w,ie.element,Zi(w),ie.column)));return _p(L.getOrDie())},Nc=w=>{const S=qt(w);if(S.length===0)return;const L=vl(w,S),W={type:"tabpanel",tabs:[{title:"General",name:"general",items:j0(w)},Wf(w,"cell")]},ie={type:"panel",items:[{type:"grid",columns:2,items:j0(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:Zi(w)?W:ie,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:L,onSubmit:re(En,w,S,L)})},Jc=w=>{const S=os(xu(w));return S.length>0?Q.some({name:"class",type:"listbox",label:"Class",items:S}):Q.none()},Bc=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Dl=w=>Bc.concat(Jc(w).toArray()),Ao=(w,S,L)=>{L("class")&&w.setAttrib("class",S.class),L("height")&&w.setStyle("height",pa(S.height))},Qa=(w,S,L)=>{L("backgroundcolor")&&w.setStyle("background-color",S.backgroundcolor),L("bordercolor")&&w.setStyle("border-color",S.bordercolor),L("borderstyle")&&w.setStyle("border-style",S.borderstyle)},eh=(w,S,L,W)=>{const Oe=S.length===1?Fn:W;mt(S,tt=>{const Et=Zf.normal(w,tt);Ao(Et,L,Oe),Zm(w)&&Qa(Et,L,Oe),W("align")&&zi(w,tt,L.align)})},Ue=(w,S)=>{w.execCommand("mceTableRowType",!1,{type:S.type,no_events:!0})},Pc=(w,S,L,W)=>{const ie=Ps(W,(Oe,tt)=>L[tt]!==Oe);if(O(ie)>0){const Oe=Ge(ie,"type"),tt=Oe?O(ie)>1:!0;tt&&eh(w,S,W,re(Ge,ie)),Oe&&Ue(w,W),wt(No.fromDom(S[0])).each(Et=>zo(w,Et.dom,{structure:Oe,style:tt}))}},jf=(w,S,L,W)=>{const ie=W.getData();W.close(),w.undoManager.transact(()=>{Pc(w,S,L,ie),w.focus()})},br=w=>{const S=mn(_s(w),M.selected);if(S.length===0)return;const L=Ne(S,tt=>Op(w,tt.dom,Zm(w))),W=_p(L),ie={type:"tabpanel",tabs:[{title:"General",name:"general",items:Dl(w)},Wf(w,"row")]},Oe={type:"panel",items:[{type:"grid",columns:2,items:Dl(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Zm(w)?ie:Oe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:W,onSubmit:re(jf,w,Ne(S,tt=>tt.dom),W)})},qi=(w,S,L)=>{const W=L?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ie=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Oe=ji(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],tt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Et=S.length>0?[{type:"listbox",name:"class",label:"Class",items:S}]:[];return W.concat(ie).concat(Oe).concat(tt).concat(Et)},Ap=(w,S,L,W)=>{if(S.tagName==="TD"||S.tagName==="TH")ao(L)&&Ts(W)?w.setStyle(S,L,W):w.setStyles(S,L);else if(S.children)for(let ie=0;ie<S.children.length;ie++)Ap(w,S.children[ie],L,W)},Ql=(w,S,L)=>{const W=w.dom,ie={},Oe={};if(xs(L.class)||(ie.class=L.class),Oe.height=pa(L.height),Zs(w)?Oe.width=pa(L.width):W.getAttrib(S,"width")&&(ie.width=dl(L.width)),Zs(w)?(Oe["border-width"]=pa(L.border),Oe["border-spacing"]=pa(L.cellspacing)):(ie.border=L.border,ie.cellpadding=L.cellpadding,ie.cellspacing=L.cellspacing),Zs(w)&&S.children)for(let tt=0;tt<S.children.length;tt++)Ap(W,S.children[tt],{"border-width":pa(L.border),padding:pa(L.cellpadding)}),qc(w)&&Ap(W,S.children[tt],{"border-color":L.bordercolor});if(qc(w)){const tt=L;Oe["background-color"]=tt.backgroundcolor,Oe["border-color"]=tt.bordercolor,Oe["border-style"]=tt.borderstyle}ie.style=W.serializeStyle(J(J({},Gm(w)),Oe)),W.setAttribs(S,J(J({},Gi(w)),ie))},q0=(w,S,L,W)=>{const ie=w.dom,Oe=W.getData(),tt=Ps(Oe,(Et,hn)=>L[hn]!==Et);W.close(),Oe.class===""&&delete Oe.class,w.undoManager.transact(()=>{if(!S){const Et=sa(Oe.cols).getOr(1),hn=sa(Oe.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:hn,columns:Et}),S=lt(_s(w),Li(w)).bind(pn=>wt(pn,Li(w))).map(pn=>pn.dom).getOrDie()}if(O(tt)>0){Ql(w,S,Oe);const Et=ie.select("caption",S)[0];(Et&&!Oe.caption||!Et&&Oe.caption)&&w.execCommand("mceTableToggleCaption"),zi(w,S,Oe.align)}if(w.focus(),w.addVisual(),O(tt)>0){const Et=Ge(tt,"caption"),hn=Et?O(tt)>1:!0;zo(w,S,{structure:Et,style:hn})}})},Ru=(w,S)=>{const L=w.dom;let W,ie=ca(w,qc(w));S?(ie.cols="1",ie.rows="1",qc(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor="")):(W=L.getParent(w.selection.getStart(),"table",w.getBody()),W?ie=Je(w,W,qc(w)):qc(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor=""));const Oe=os(Tu(w));Oe.length>0&&ie.class&&(ie.class=ie.class.replace(/\s*mce\-item\-table\s*/g,""));const tt={type:"grid",columns:2,items:qi(w,Oe,S)},Et=()=>({type:"panel",items:[tt]}),hn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[tt]},Wf(w,"table")]}),pn=qc(w)?hn():Et();w.windowManager.open({title:"Table Properties",size:"normal",body:pn,onSubmit:re(q0,w,W,ie),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ie})},Eb=w=>{const S=L=>{ml(_s(w))&&L()};Jt({mceTableProps:re(Ru,w,!1),mceTableRowProps:re(br,w),mceTableCellProps:re(Nc,w),mceInsertTableDialog:re(Ru,w,!0)},(L,W)=>w.addCommand(W,()=>S(L)))},Qc=(w,S)=>Um(w,S).isSome(),po=ur,Ki=w=>{const S=(W,ie)=>$a(W,ie).exists(Oe=>parseInt(Oe,10)>1),L=W=>S(W,"rowspan")||S(W,"colspan");return w.length>0&&Ie(w,L)?Q.some(w):Q.none()},Gf=(w,S,L)=>S.length<=1?Q.none():U0(w,L.firstSelectedSelector,L.lastSelectedSelector).map(W=>({bounds:W,cells:S})),vr=w=>({element:w,mergable:Q.none(),unmergable:Q.none(),selection:[w]}),$c=(w,S,L)=>({element:L,mergable:Gf(S,w,M),unmergable:Ki(w),selection:po(w)}),im=w=>{const S=js(Q.none()),L=js([]);let W=Q.none();const ie=yc("caption"),Oe=Gn=>W.forall(ss=>!ss[Gn]),tt=()=>le(_s(w),Li(w)),Et=()=>le(Io(w),Li(w)),hn=()=>tt().bind(Gn=>Nr(Eo(wt(Gn),Et().bind(wt),(ss,fc)=>Rr(ss,fc)?ie(Gn)?Q.some(vr(Gn)):Q.some($c(qt(w),ss,Gn)):Q.none()))),pn=Gn=>wt(Gn.element).map(fc=>{const Wo=pr.fromTable(fc),rh=xp(Wo,Gn).getOr([]),mm=vn(rh,(fm,ei)=>(ei.isLocked&&(fm.onAny=!0,ei.column===0?fm.onFirst=!0:ei.column+ei.colspan>=Wo.grid.columns&&(fm.onLast=!0)),fm),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Ep(Wo,Gn).isSome(),unmergeable:Er(Wo,Gn).isSome(),locked:mm}}),fo=()=>{S.set(Sp(hn)()),W=S.get().bind(pn),mt(L.get(),Ut)},Lo=Gn=>(Gn(),L.set(L.get().concat([Gn])),()=>{L.set(Sn(L.get(),ss=>ss!==Gn))}),Cs=(Gn,ss)=>Lo(()=>S.get().fold(()=>{Gn.setEnabled(!1)},fc=>{Gn.setEnabled(!ss(fc))})),Ic=(Gn,ss,fc)=>Lo(()=>S.get().fold(()=>{Gn.setEnabled(!1),Gn.setActive(!1)},Wo=>{Gn.setEnabled(!ss(Wo)),Gn.setActive(fc(Wo))})),xa=Gn=>W.exists(ss=>ss.locked[Gn]),Mu=Gn=>Cs(Gn,ss=>!1),Ml=Gn=>Cs(Gn,ss=>ie(ss.element)),um=Gn=>ss=>Cs(ss,fc=>ie(fc.element)||xa(Gn)),Kf=Gn=>ss=>Cs(ss,fc=>ie(fc.element)||Gn().isNone()),Nl=(Gn,ss)=>fc=>Cs(fc,Wo=>ie(Wo.element)||Gn().isNone()||xa(ss)),dm=Gn=>Cs(Gn,ss=>Oe("mergeable")),oh=Gn=>Cs(Gn,ss=>Oe("unmergeable")),sh=Gn=>Ic(Gn,Ba,ss=>wt(ss.element,Li(w)).exists(Wo=>Qc(Wo,"caption"))),tf=(Gn,ss)=>fc=>Ic(fc,Wo=>ie(Wo.element),()=>w.queryCommandValue(Gn)===ss),jr=tf("mceTableRowType","header"),Yi=tf("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",fo),{onSetupTable:Mu,onSetupCellOrRow:Ml,onSetupColumn:um,onSetupPasteable:Kf,onSetupPasteableColumn:Nl,onSetupMergeable:dm,onSetupUnmergeable:oh,resetTargets:fo,onSetupTableWithCaption:sh,onSetupTableRowHeaders:jr,onSetupTableColumnHeaders:Yi,targets:S.get}};var qf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const la="x-tinymce/dom-table-",th=la+"rows",ye=la+"columns",ec=w=>{var S;const L=(S=qf.read())!==null&&S!==void 0?S:[];return Jo(L,W=>Q.from(W.getType(w)))},ef=()=>ec(th),Ha=()=>ec(ye),Rl=(w,S)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:Et=>Et("inserttable | cell row column | advtablesort | tableprops deletetable")});const L=Et=>()=>w.execCommand(Et),W=(Et,hn)=>{w.queryCommandSupported(hn.command)&&w.ui.registry.addButton(Et,We(J({},hn),{onAction:Ho(hn.onAction)?hn.onAction:L(hn.command)}))},ie=(Et,hn)=>{w.queryCommandSupported(hn.command)&&w.ui.registry.addToggleButton(Et,We(J({},hn),{onAction:Ho(hn.onAction)?hn.onAction:L(hn.command)}))};W("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:S.onSetupTable}),W("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:S.onSetupTable}),W("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:S.onSetupCellOrRow}),W("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:S.onSetupMergeable}),W("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:S.onSetupUnmergeable}),W("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:S.onSetupCellOrRow}),W("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:S.onSetupCellOrRow}),W("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:S.onSetupCellOrRow}),W("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:S.onSetupCellOrRow}),W("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:S.onSetupColumn("onFirst")}),W("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:S.onSetupColumn("onLast")}),W("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:S.onSetupColumn("onAny")}),W("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:S.onSetupCellOrRow}),W("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:S.onSetupCellOrRow}),W("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:S.onSetupPasteable(ef)}),W("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:S.onSetupPasteable(ef)}),W("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:S.onSetupColumn("onAny")}),W("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:S.onSetupColumn("onAny")}),W("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:S.onSetupPasteableColumn(Ha,"onFirst")}),W("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:S.onSetupPasteableColumn(Ha,"onLast")}),W("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const Oe=Cd(Tu(w));Oe.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:cm(w,Oe,"tableclass",Et=>w.execCommand("mceTableToggleClass",!1,Et)),onSetup:S.onSetupTable});const tt=Cd(nm(w));tt.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:cm(w,tt,"tablecellclass",Et=>w.execCommand("mceTableCellToggleClass",!1,Et)),onSetup:S.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:cm(w,Pn,"tablecellverticalalign",yd(w,"vertical-align")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:cm(w,tm(w),"tablecellborderwidth",yd(w,"border-width")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:cm(w,Wi(w),"tablecellborderstyle",yd(w,"border-style")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Et=>Et(wd(w,md(w),"background-color")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Et=>Et(wd(w,fd(w),"border-color")),onSetup:S.onSetupCellOrRow})),ie("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),ie("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:zn(w),onSetup:S.onSetupTableRowHeaders}),ie("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Yg(w),onSetup:S.onSetupTableColumnHeaders})},tc=w=>{const S=W=>w.dom.is(W,"table")&&w.getBody().contains(W),L=dd(w);L.length>0&&w.ui.registry.addContextToolbar("table",{predicate:S,items:L,scope:"node",position:"node"})},Ir=(w,S)=>{const L=Lo=>()=>w.execCommand(Lo),W=(Lo,Cs)=>w.queryCommandSupported(Cs.command)?(w.ui.registry.addMenuItem(Lo,We(J({},Cs),{onAction:Ho(Cs.onAction)?Cs.onAction:L(Cs.command)})),!0):!1,ie=(Lo,Cs)=>{w.queryCommandSupported(Cs.command)&&w.ui.registry.addToggleMenuItem(Lo,We(J({},Cs),{onAction:Ho(Cs.onAction)?Cs.onAction:L(Cs.command)}))},Oe=Lo=>{w.execCommand("mceInsertTable",!1,{rows:Lo.numRows,columns:Lo.numColumns})},tt=[W("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:S.onSetupCellOrRow}),W("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:S.onSetupCellOrRow}),W("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:S.onSetupCellOrRow}),W("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:S.onSetupCellOrRow}),W("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:S.onSetupCellOrRow}),W("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:S.onSetupCellOrRow}),W("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:S.onSetupPasteable(ef)}),W("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:S.onSetupPasteable(ef)})],Et=[W("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:S.onSetupColumn("onFirst")}),W("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:S.onSetupColumn("onLast")}),W("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:S.onSetupColumn("onAny")}),W("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:S.onSetupColumn("onAny")}),W("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:S.onSetupColumn("onAny")}),W("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:S.onSetupPasteableColumn(Ha,"onFirst")}),W("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:S.onSetupPasteableColumn(Ha,"onLast")})],hn=[W("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:S.onSetupCellOrRow}),W("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:S.onSetupMergeable}),W("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:S.onSetupUnmergeable})];ud(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Oe}]}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTableDialog")}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTableDialog")}),W("tableprops",{text:"Table properties",onSetup:S.onSetupTable,command:"mceTableProps"}),W("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:S.onSetupTable,command:"mceTableDelete"}),qo(tt,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:dt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),qo(Et,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:dt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),qo(hn,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:dt("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(S.resetTargets(),S.targets().fold(dt(""),Lo=>zr(Lo.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const pn=Cd(Tu(w));pn.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Tr(w,pn,"tableclass",Lo=>w.execCommand("mceTableToggleClass",!1,Lo)),onSetup:S.onSetupTable});const fo=Cd(nm(w));fo.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Tr(w,fo,"tablecellclass",Lo=>w.execCommand("mceTableCellToggleClass",!1,Lo)),onSetup:S.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Tr(w,Pn,"tablecellverticalalign",yd(w,"vertical-align")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Tr(w,tm(w),"tablecellborderwidth",yd(w,"border-width")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Tr(w,Wi(w),"tablecellborderstyle",yd(w,"border-style")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>wd(w,md(w),"background-color"),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>wd(w,fd(w),"border-color"),onSetup:S.onSetupCellOrRow})),ie("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),ie("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:zn(w),onSetup:S.onSetupTableRowHeaders}),ie("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Yg(w),onSetup:S.onSetupTableRowHeaders})},K0=w=>{const S=im(w);Ls(w),Eb(w),Ir(w,S),Rl(w,S),tc(w)};var nh=()=>{it.add("table",K0)};nh()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const en=(k,M,z)=>{var ae;return z(k,M.prototype)?!0:((ae=k.constructor)===null||ae===void 0?void 0:ae.name)===M.name},Yt=k=>{const M=typeof k;return k===null?"null":M==="object"&&Array.isArray(k)?"array":M==="object"&&en(k,String,(z,ae)=>ae.isPrototypeOf(z))?"string":M},sn=k=>M=>Yt(M)===k,An=k=>M=>typeof M===k,eo=sn("string"),ao=sn("object"),kt=sn("array"),Bt=An("boolean"),xs=k=>k==null,Ln=k=>!xs(k),Ts=An("function"),Ho=An("number"),Nn=()=>{},Mo=k=>()=>k,Jn=(k,M)=>k===M,dt=k=>M=>!k(M),ur=Mo(!1);class Qe{constructor(M,z){this.tag=M,this.value=z}static some(M){return new Qe(!0,M)}static none(){return Qe.singletonNone}fold(M,z){return this.tag?z(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?Qe.some(M(this.value)):Qe.none()}bind(M){return this.tag?M(this.value):Qe.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:Qe.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M!=null?M:"Called getOrDie on None")}static from(M){return Ln(M)?Qe.some(M):Qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qe.singletonNone=new Qe(!1);const re=Array.prototype.slice,Ut=Array.prototype.indexOf,Ba=Array.prototype.push,Fn=(k,M)=>Ut.call(k,M),Q=(k,M)=>Fn(k,M)>-1,cn=(k,M)=>{for(let z=0,ae=k.length;z<ae;z++){const le=k[z];if(M(le,z))return!0}return!1},Go=(k,M)=>{const z=k.length,ae=new Array(z);for(let le=0;le<z;le++){const lt=k[le];ae[le]=M(lt,le)}return ae},Jt=(k,M)=>{for(let z=0,ae=k.length;z<ae;z++){const le=k[z];M(le,z)}},ze=(k,M)=>{const z=[];for(let ae=0,le=k.length;ae<le;ae++){const lt=k[ae];M(lt,ae)&&z.push(lt)}return z},ue=(k,M)=>{if(k.length===0)return[];{let z=M(k[0]);const ae=[];let le=[];for(let lt=0,qt=k.length;lt<qt;lt++){const mn=k[lt],Pn=M(mn);Pn!==z&&(ae.push(le),le=[]),z=Pn,le.push(mn)}return le.length!==0&&ae.push(le),ae}},Ps=(k,M,z)=>(Jt(k,(ae,le)=>{z=M(z,ae,le)}),z),et=(k,M,z)=>{for(let ae=0,le=k.length;ae<le;ae++){const lt=k[ae];if(M(lt,ae))return Qe.some(lt);if(z(lt,ae))break}return Qe.none()},Fe=(k,M)=>et(k,M,ur),O=k=>{const M=[];for(let z=0,ae=k.length;z<ae;++z){if(!kt(k[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+k);Ba.apply(M,k[z])}return M},gn=(k,M)=>O(Go(k,M)),Ge=k=>{const M=re.call(k,0);return M.reverse(),M},Dn=(k,M)=>M>=0&&M<k.length?Qe.some(k[M]):Qe.none(),Ht=k=>Dn(k,0),Ve=k=>Dn(k,k.length-1),So=(k,M)=>{const z=[],ae=Ts(M)?le=>cn(z,lt=>M(lt,le)):le=>Q(z,le);for(let le=0,lt=k.length;le<lt;le++){const qt=k[le];ae(qt)||z.push(qt)}return z},qo=(k,M,z=Jn)=>k.exists(ae=>z(ae,M)),xo=(k,M,z=Jn)=>nr(k,M,z).getOr(k.isNone()&&M.isNone()),nr=(k,M,z)=>k.isSome()&&M.isSome()?Qe.some(z(k.getOrDie(),M.getOrDie())):Qe.none(),Ne=1,mt=(k,M)=>{const ae=(M||document).createElement("div");if(ae.innerHTML=k,!ae.hasChildNodes()||ae.childNodes.length>1){const le="HTML does not have a single root node";throw console.error(le,k),new Error(le)}return Sn(ae.childNodes[0])},V=(k,M)=>{const ae=(M||document).createElement(k);return Sn(ae)},vc=(k,M)=>{const ae=(M||document).createTextNode(k);return Sn(ae)},Sn=k=>{if(k==null)throw new Error("Node cannot be null or undefined");return{dom:k}},vn={fromHtml:mt,fromTag:V,fromText:vc,fromDom:Sn,fromPoint:(k,M,z)=>Qe.from(k.dom.elementFromPoint(M,z)).map(Sn)},cd=(k,M)=>{const z=k.dom;if(z.nodeType!==Ne)return!1;{const ae=z;if(ae.matches!==void 0)return ae.matches(M);if(ae.msMatchesSelector!==void 0)return ae.msMatchesSelector(M);if(ae.webkitMatchesSelector!==void 0)return ae.webkitMatchesSelector(M);if(ae.mozMatchesSelector!==void 0)return ae.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},an=(k,M)=>k.dom===M.dom,Xo=(k,M)=>{const z=k.dom,ae=M.dom;return z===ae?!1:z.contains(ae)},Vt=cd;var Ie=(k,M,z,ae,le)=>k(z,ae)?Qe.some(z):Ts(le)&&le(z)?Qe.none():M(z,ae,le);typeof window!="undefined"||Function("return this;")();const ac=k=>k.dom.nodeName.toLowerCase(),Sr=k=>k.dom.nodeType,cl=(k=>M=>Sr(M)===k)(Ne),Jo=k=>M=>cl(M)&&ac(M)===k,ll=k=>Qe.from(k.dom.parentNode).map(vn.fromDom),us=k=>Qe.from(k.dom.parentElement).map(vn.fromDom),Dr=k=>Qe.from(k.dom.nextSibling).map(vn.fromDom),Wc=k=>Go(k.dom.childNodes,vn.fromDom),ea=(k,M)=>{const z=k.dom.childNodes;return Qe.from(z[M]).map(vn.fromDom)},Es=k=>ea(k,0),Vo=k=>ea(k,k.dom.childNodes.length-1),di=(k,M,z)=>{let ae=k.dom;const le=Ts(z)?z:ur;for(;ae.parentNode;){ae=ae.parentNode;const lt=vn.fromDom(ae);if(M(lt))return Qe.some(lt);if(le(lt))break}return Qe.none()},Ko=(k,M,z)=>Ie((le,lt)=>lt(le),di,k,M,z),Qo=(k,M)=>{ll(k).each(ae=>{ae.dom.insertBefore(M.dom,k.dom)})},No=(k,M)=>{Dr(k).fold(()=>{ll(k).each(le=>{To(le,M)})},ae=>{Qo(ae,M)})},To=(k,M)=>{k.dom.appendChild(M.dom)},$s=(k,M)=>{Jt(M,z=>{Qo(k,z)})},dr=(k,M)=>{Jt(M,z=>{To(k,z)})},cc=k=>{k.dom.textContent="",Jt(Wc(k),M=>{Rr(M)})},Rr=k=>{const M=k.dom;M.parentNode!==null&&M.parentNode.removeChild(M)};var Is=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),zr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ut=tinymce.util.Tools.resolve("tinymce.util.VK");const Bn=k=>Go(k,vn.fromDom),Pa=Object.keys,Ks=(k,M)=>{const z=Pa(k);for(let ae=0,le=z.length;ae<le;ae++){const lt=z[ae],qt=k[lt];M(qt,lt)}},El=k=>(M,z)=>{k[z]=M},il=(k,M,z,ae)=>{Ks(k,(le,lt)=>{(M(le,lt)?z:ae)(le,lt)})},$o=(k,M)=>{const z={};return il(k,M,El(z),Nn),z},yc=(k,M,z)=>{if(eo(z)||Bt(z)||Ho(z))k.setAttribute(M,z+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",z,":: Element ",k),new Error("Attribute value was not simple")},lc=(k,M)=>{const z=k.dom;Ks(M,(ae,le)=>{yc(z,le,ae)})},vo=k=>Ps(k.dom.attributes,(M,z)=>(M[z.name]=z.value,M),{}),tn=(k,M)=>vn.fromDom(k.dom.cloneNode(M)),Ur=k=>tn(k,!0),Cc=(k,M)=>{const z=vn.fromTag(M),ae=vo(k);return lc(z,ae),z},wc=(k,M)=>{const z=Cc(k,M);No(k,z);const ae=Wc(k);return dr(z,ae),Rr(k),z};var Sc=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ks=tinymce.util.Tools.resolve("tinymce.util.Tools");const or=k=>M=>Ln(M)&&M.nodeName.toLowerCase()===k,es=k=>M=>Ln(M)&&k.test(M.nodeName),mr=k=>Ln(k)&&k.nodeType===3,xc=k=>Ln(k)&&k.nodeType===1,ts=es(/^(OL|UL|DL)$/),ha=es(/^(OL|UL)$/),ns=or("ol"),fr=es(/^(LI|DT|DD)$/),Tc=es(/^(DT|DD)$/),mi=es(/^(TH|TD)$/),Zc=or("br"),ta=k=>{var M;return((M=k.parentNode)===null||M===void 0?void 0:M.firstChild)===k},Um=(k,M)=>Ln(M)&&M.nodeName in k.schema.getTextBlockElements(),pe=(k,M)=>Ln(k)&&k.nodeName in M,Mr=(k,M)=>Ln(M)&&M.nodeName in k.schema.getVoidElements(),jl=(k,M)=>Zc(M)?k.isBlock(M.nextSibling)&&!Zc(M.previousSibling):!1,ul=(k,M,z)=>{const ae=k.isEmpty(M);return z&&k.select("span[data-mce-type=bookmark]",M).length>0?!1:ae},Cu=(k,M)=>k.isChildOf(M,k.getRoot()),Oo=k=>M=>M.options.get(k),Jd=k=>{const M=k.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},Li=Oo("lists_indent_on_tab"),dl=Oo("forced_root_block"),pa=Oo("forced_root_block_attrs"),_s=(k,M)=>{const z=k.dom,ae=k.schema.getBlockElements(),le=z.createFragment(),lt=dl(k),qt=pa(k);let mn,Pn,at=!1;for(Pn=z.create(lt,qt),pe(M.firstChild,ae)||le.appendChild(Pn);mn=M.firstChild;){const _o=mn.nodeName;!at&&(_o!=="SPAN"||mn.getAttribute("data-mce-type")!=="bookmark")&&(at=!0),pe(mn,ae)?(le.appendChild(mn),Pn=null):(Pn||(Pn=z.create(lt,qt),le.appendChild(Pn)),Pn.appendChild(mn))}return!at&&Pn&&Pn.appendChild(z.create("br",{"data-mce-bogus":"1"})),le},Io=Sc.DOM,ml=(k,M,z)=>{const ae=at=>{const _o=at.parentNode;_o&&ks.each(le,$r=>{_o.insertBefore($r,z.parentNode)}),Io.remove(at)},le=Io.select('span[data-mce-type="bookmark"]',M),lt=_s(k,z),qt=Io.createRng();qt.setStartAfter(z),qt.setEndAfter(M);const mn=qt.extractContents();for(let at=mn.firstChild;at;at=at.firstChild)if(at.nodeName==="LI"&&k.dom.isEmpty(at)){Io.remove(at);break}k.dom.isEmpty(mn)||Io.insertAfter(mn,M),Io.insertAfter(lt,M);const Pn=z.parentElement;Pn&&ul(k.dom,Pn)&&ae(Pn),Io.remove(z),ul(k.dom,M)&&Io.remove(M)},Ga=Jo("dd"),Ec=Jo("dt"),kl=(k,M)=>{Ga(M)?wc(M,"dt"):Ec(M)&&us(M).each(z=>ml(k,z.dom,M.dom))},_l=k=>{Ec(k)&&wc(k,"dd")},mo=(k,M,z)=>{M==="Indent"?Jt(z,_l):Jt(z,ae=>kl(k,ae))},ba=(k,M)=>{if(mr(k))return{container:k,offset:M};const z=Is.getNode(k,M);return mr(z)?{container:z,offset:M>=k.childNodes.length?z.data.length:0}:z.previousSibling&&mr(z.previousSibling)?{container:z.previousSibling,offset:z.previousSibling.data.length}:z.nextSibling&&mr(z.nextSibling)?{container:z.nextSibling,offset:0}:{container:k,offset:M}},jc=k=>{const M=k.cloneRange(),z=ba(k.startContainer,k.startOffset);M.setStart(z.container,z.offset);const ae=ba(k.endContainer,k.endOffset);return M.setEnd(ae.container,ae.offset),M},kc=["OL","UL","DL"],$a=kc.join(","),sr=(k,M)=>{const z=M||k.selection.getStart(!0);return k.dom.getParent(z,$a,qa(k,z))},ls=(k,M)=>Ln(k)&&M.length===1&&M[0]===k,ld=k=>ze(k.querySelectorAll($a),ts),Fi=k=>{const M=sr(k),z=k.selection.getSelectedBlocks();return ls(M,z)?ld(M):ze(z,ae=>ts(ae)&&M!==ae)},Eo=(k,M)=>{const z=ks.map(M,ae=>{const le=k.dom.getParent(ae,"li,dd,dt",qa(k,ae));return le||ae});return So(z)},Nr=k=>{const M=k.selection.getSelectedBlocks();return ze(Eo(k,M),fr)},na=k=>ze(Nr(k),Tc),Os=(k,M)=>{const z=k.dom.getParents(M,"TD,TH");return z.length>0?z[0]:k.getBody()},fi=(k,M)=>!ts(M)&&!fr(M)&&cn(kc,z=>k.isValidChild(M.nodeName,z)),qa=(k,M)=>{const z=k.dom.getParents(M,k.dom.isBlock);return Fe(z,le=>fi(k.schema,le)).getOr(k.getBody())},oa=(k,M)=>{const z=k.dom.getParents(M,"ol,ul",qa(k,M));return Ve(z)},ic=k=>{const M=oa(k,k.selection.getStart()),z=ze(k.selection.getSelectedBlocks(),ha);return M.toArray().concat(z)},Hi=k=>{const M=ic(k);return gi(k,M)},gi=(k,M)=>{const z=Go(M,ae=>oa(k,ae).getOr(ae));return So(z)},wu=k=>/\btox\-/.test(k.className),sa=(k,M)=>et(k,ts,mi).exists(z=>z.nodeName===M&&!wu(z)),Gc=(k,M)=>M!==null&&!k.dom.isEditable(M),hi=k=>{const M=sr(k);return Gc(k,M)},fl=(k,M)=>{const z=k.dom.getParent(M,"ol,ul,dl");return Gc(k,z)},Vi=k=>cn(k.selection.getSelectedBlocks(),dt(k.dom.isEditable)),Z=(k,M)=>{const z=k.selection.getNode();return M({parents:k.dom.getParents(z),element:z}),k.on("NodeChange",M),()=>k.off("NodeChange",M)},ce=(k,M)=>{const ae=(M||document).createDocumentFragment();return Jt(k,le=>{ae.appendChild(le.dom)}),vn.fromDom(ae)},ge=(k,M,z)=>k.dispatch("ListMutation",{action:M,element:z}),Ke=(k=>M=>M.replace(k,""))(/^\s+|\s+$/g),Gt=k=>k.length>0,ko=k=>!Gt(k),Ys=k=>k.style!==void 0&&Ts(k.style.getPropertyValue),to=(k,M,z)=>{if(!eo(z))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",z,":: Element ",k),new Error("CSS value must be a string: "+z);Ys(k)&&k.style.setProperty(M,z)},Xs=(k,M,z)=>{const ae=k.dom;to(ae,M,z)},no=(k,M)=>{To(k.item,M.list)},vs=k=>{for(let M=1;M<k.length;M++)no(k[M-1],k[M])},_c=(k,M)=>{nr(Ve(k),Ht(M),no)},uc=(k,M)=>{const z={list:vn.fromTag(M,k),item:vn.fromTag("li",k)};return To(z.list,z.item),z},bn=(k,M,z)=>{const ae=[];for(let le=0;le<z;le++)ae.push(uc(k,M.listType));return ae},so=(k,M)=>{for(let z=0;z<k.length-1;z++)Xs(k[z].item,"list-style-type","none");Ve(k).each(z=>{lc(z.list,M.listAttributes),lc(z.item,M.itemAttributes),dr(z.item,M.content)})},Br=(k,M)=>{ac(k.list)!==M.listType&&(k.list=wc(k.list,M.listType)),lc(k.list,M.listAttributes)},P=(k,M,z)=>{const ae=vn.fromTag("li",k);return lc(ae,M),dr(ae,z),ae},G=(k,M)=>{To(k.list,M),k.item=M},te=(k,M,z)=>{const ae=M.slice(0,z.depth);return Ve(ae).each(le=>{const lt=P(k,z.itemAttributes,z.content);G(le,lt),Br(le,z)}),ae},Te=(k,M,z)=>{const ae=bn(k,z,z.depth-M.length);return vs(ae),so(ae,z),_c(M,ae),M.concat(ae)},wt=(k,M)=>{const z=Ps(M,(ae,le)=>le.depth>ae.length?Te(k,ae,le):te(k,ae,le),[]);return Ht(z).map(ae=>ae.list)},xn=k=>Vt(k,"OL,UL"),_t=k=>Es(k).exists(xn),rr=k=>Vo(k).exists(xn),xr=k=>k.depth>0,Ze=k=>k.isSelected,gr=k=>{const M=Wc(k),z=rr(k)?M.slice(0,-1):M;return Go(z,Ur)},As=(k,M,z)=>ll(k).filter(cl).map(ae=>({depth:M,dirty:!1,isSelected:z,content:gr(k),itemAttributes:vo(k),listAttributes:vo(ae),listType:ac(ae)})),Pr=(k,M)=>{switch(k){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},Wm=(k,M)=>{k.listType=M.listType,k.listAttributes=J({},M.listAttributes)},Vn=k=>{k.listAttributes=$o(k.listAttributes,(M,z)=>z!=="start")},Gl=(k,M)=>{const z=k[M].depth,ae=lt=>lt.depth===z&&!lt.dirty,le=lt=>lt.depth<z;return et(Ge(k.slice(0,M)),ae,le).orThunk(()=>et(k.slice(M+1),ae,le))},Ia=k=>(Jt(k,(M,z)=>{Gl(k,z).fold(()=>{M.dirty&&Vn(M)},ae=>Wm(M,ae))}),k),Js=k=>{let M=k;return{get:()=>M,set:le=>{M=le}}},hr=(k,M,z,ae)=>Es(ae).filter(xn).fold(()=>{M.each(qt=>{an(qt.start,ae)&&z.set(!0)});const le=As(ae,k,z.get());M.each(qt=>{an(qt.end,ae)&&z.set(!1)});const lt=Vo(ae).filter(xn).map(qt=>ql(k,M,z,qt)).getOr([]);return le.toArray().concat(lt)},le=>ql(k,M,z,le)),ql=(k,M,z,ae)=>gn(Wc(ae),le=>{const lt=xn(le)?ql:hr,qt=k+1;return lt(qt,M,z,le)}),vb=(k,M)=>{const z=Js(!1),ae=0;return Go(k,le=>({sourceList:le,entries:ql(ae,M,z,le)}))},Lf=(k,M)=>{const z=Ia(M);return Go(z,ae=>{const le=ce(ae.content);return vn.fromDom(_s(k,le.dom))})},ys=(k,M)=>{const z=Ia(M);return wt(k.contentDocument,z).toArray()},pr=(k,M)=>gn(ue(M,xr),z=>Ht(z).exists(xr)?ys(k,z):Lf(k,z)),Su=(k,M)=>{Jt(ze(k,Ze),z=>Pr(M,z))},va=k=>{const M=Go(Nr(k),vn.fromDom);return nr(Fe(M,dt(_t)),Fe(Ge(M),dt(_t)),(z,ae)=>({start:z,end:ae}))},zi=(k,M,z)=>{const ae=vb(M,va(k));Jt(ae,le=>{Su(le.entries,z);const lt=pr(k,le.entries);Jt(lt,qt=>{ge(k,z==="Indent"?"IndentList":"OutdentList",qt.dom)}),$s(le.sourceList,lt),Rr(le.sourceList)})},Qd=(k,M)=>{const z=Bn(Hi(k)),ae=Bn(na(k));let le=!1;if(z.length||ae.length){const lt=k.selection.getBookmark();zi(k,z,M),mo(k,M,ae),k.selection.moveToBookmark(lt),k.selection.setRng(jc(k.selection.getRng())),k.nodeChanged(),le=!0}return le},zo=(k,M)=>!hi(k)&&Qd(k,M),ya=k=>zo(k,"Indent"),Wr=k=>zo(k,"Outdent"),em=k=>zo(k,"Flatten"),Ui="\uFEFF",Uo=k=>k===Ui;var La=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const gl=Sc.DOM,id=k=>{const M={},z=ae=>{let le=k[ae?"startContainer":"endContainer"],lt=k[ae?"startOffset":"endOffset"];if(xc(le)){const qt=gl.create("span",{"data-mce-type":"bookmark"});le.hasChildNodes()?(lt=Math.min(lt,le.childNodes.length-1),ae?le.insertBefore(qt,le.childNodes[lt]):gl.insertAfter(qt,le.childNodes[lt])):le.appendChild(qt),le=qt,lt=0}M[ae?"startContainer":"endContainer"]=le,M[ae?"startOffset":"endOffset"]=lt};return z(!0),k.collapsed||z(),M},Kl=k=>{const M=ae=>{const le=mn=>{var Pn;let at=(Pn=mn.parentNode)===null||Pn===void 0?void 0:Pn.firstChild,_o=0;for(;at;){if(at===mn)return _o;(!xc(at)||at.getAttribute("data-mce-type")!=="bookmark")&&_o++,at=at.nextSibling}return-1};let lt=k[ae?"startContainer":"endContainer"],qt=k[ae?"startOffset":"endOffset"];if(lt){if(xc(lt)&&lt.parentNode){const mn=lt;qt=le(lt),lt=lt.parentNode,gl.remove(mn),!lt.hasChildNodes()&&gl.isBlock(lt)&&lt.appendChild(gl.create("br"))}k[ae?"startContainer":"endContainer"]=lt,k[ae?"startOffset":"endOffset"]=qt}};M(!0),M();const z=gl.createRng();return z.setStart(k.startContainer,k.startOffset),k.endContainer&&z.setEnd(k.endContainer,k.endOffset),jc(z)},Oc=k=>{switch(k){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Qs=(k,M,z)=>{const ae=z["list-style-type"]?z["list-style-type"]:null;k.setStyle(M,"list-style-type",ae)},Ca=(k,M)=>{ks.each(M,(z,ae)=>{k.setAttribute(ae,z)})},Ka=(k,M,z)=>{Ca(M,z["list-attributes"]),ks.each(k.select("li",M),ae=>{Ca(ae,z["list-item-attributes"])})},Ac=(k,M,z)=>{Qs(k,M,z),Ka(k,M,z)},ra=(k,M,z)=>{ks.each(z,ae=>k.setStyle(M,ae,""))},Ls=(k,M)=>Ln(M)&&!pe(M,k.schema.getBlockElements()),dc=(k,M,z,ae)=>{let le=M[z?"startContainer":"endContainer"];const lt=M[z?"startOffset":"endOffset"];xc(le)&&(le=le.childNodes[Math.min(lt,le.childNodes.length-1)]||le),!z&&Zc(le.nextSibling)&&(le=le.nextSibling);const qt=(mn,Pn)=>{var at;const _o=new zr(mn,ae),$r=Pn?"next":"prev";let Yc;for(;Yc=_o[$r]();)if(!(Mr(k,Yc)||Uo(Yc.textContent)||((at=Yc.textContent)===null||at===void 0?void 0:at.length)===0))return Qe.some(Yc);return Qe.none()};if(z&&mr(le))if(Uo(le.textContent))le=qt(le,!1).getOr(le);else for(le.parentNode!==null&&Ls(k,le.parentNode)&&(le=le.parentNode);le.previousSibling!==null&&(Ls(k,le.previousSibling)||mr(le.previousSibling));)le=le.previousSibling;if(!z&&mr(le))if(Uo(le.textContent))le=qt(le,!0).getOr(le);else for(le.parentNode!==null&&Ls(k,le.parentNode)&&(le=le.parentNode);le.nextSibling!==null&&(Ls(k,le.nextSibling)||mr(le.nextSibling));)le=le.nextSibling;for(;le.parentNode!==ae;){const mn=le.parentNode;if(Um(k,le)||/^(TD|TH)$/.test(mn.nodeName))return le;le=mn}return le},tm=(k,M,z)=>{const ae=[],le=k.dom,lt=dc(k,M,!0,z),qt=dc(k,M,!1,z);let mn;const Pn=[];for(let at=lt;at&&(Pn.push(at),at!==qt);at=at.nextSibling);return ks.each(Pn,at=>{var _o;if(Um(k,at)){ae.push(at),mn=null;return}if(le.isBlock(at)||Zc(at)){Zc(at)&&le.remove(at),mn=null;return}const $r=at.nextSibling;if(La.isBookmarkNode(at)&&(ts($r)||Um(k,$r)||!$r&&at.parentNode===z)){mn=null;return}mn||(mn=le.create("p"),(_o=at.parentNode)===null||_o===void 0||_o.insertBefore(mn,at),ae.push(mn)),mn.appendChild(at)}),ae},Wi=(k,M,z)=>{const ae=k.getStyle(M,"list-style-type");let le=z?z["list-style-type"]:"";return le=le===null?"":le,ae===le},Zi=(k,M,z)=>{const ae=k.selection.getRng();let le="LI";const lt=qa(k,k.selection.getStart(!0)),qt=k.dom;if(qt.getContentEditable(k.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&(le="DT");const mn=id(ae),Pn=tm(k,ae,lt);ks.each(Pn,at=>{let _o;const $r=at.previousSibling,Yc=at.parentNode;fr(Yc)||($r&&ts($r)&&$r.nodeName===M&&Wi(qt,$r,z)?(_o=$r,at=qt.rename(at,le),$r.appendChild(at)):(_o=qt.create(M),Yc.insertBefore(_o,at),_o.appendChild(at),at=qt.rename(at,le)),ra(qt,at,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Ac(qt,_o,z),Zs(k.dom,_o))}),k.selection.setRng(Kl(mn))},Zm=(k,M)=>ts(k)&&k.nodeName===(M==null?void 0:M.nodeName),qc=(k,M,z)=>{const ae=k.getStyle(M,"list-style-type",!0),le=k.getStyle(z,"list-style-type",!0);return ae===le},ji=(k,M)=>k.className===M.className,ud=(k,M,z)=>Zm(M,z)&&qc(k,M,z)&&ji(M,z),Zs=(k,M)=>{let z,ae=M.nextSibling;if(ud(k,M,ae)){const le=ae;for(;z=le.firstChild;)M.appendChild(z);k.remove(le)}if(ae=M.previousSibling,ud(k,M,ae)){const le=ae;for(;z=le.lastChild;)M.insertBefore(z,M.firstChild);k.remove(le)}},nm=(k,M,z,ae)=>{if(M.nodeName!==z){const le=k.dom.rename(M,z);Ac(k.dom,le,ae),ge(k,Oc(z),le)}else Ac(k.dom,M,ae),ge(k,Oc(z),M)},xu=(k,M,z,ae,le)=>{const lt=ts(M);if(lt&&M.nodeName===ae&&!Tu(le))em(k);else{Zi(k,ae,le);const qt=id(k.selection.getRng()),mn=lt?[M,...z]:z;ks.each(mn,Pn=>{nm(k,Pn,ae,le)}),k.selection.setRng(Kl(qt))}},Tu=k=>"list-style-type"in k,dd=(k,M,z,ae)=>{if(M!==k.getBody())if(M)if(M.nodeName===z&&!Tu(ae)&&!wu(M))em(k);else{const le=id(k.selection.getRng());Ac(k.dom,M,ae);const lt=k.dom.rename(M,z);Zs(k.dom,lt),k.selection.setRng(Kl(le)),Zi(k,z,ae),ge(k,Oc(z),lt)}else Zi(k,z,ae),ge(k,Oc(z),M)},md=(k,M,z)=>{const ae=sr(k);if(fl(k,ae)||Vi(k))return;const le=Fi(k),lt=ao(z)?z:{};le.length>0?xu(k,ae,le,M,lt):dd(k,ae,M,lt)},fd=Sc.DOM,Eu=(k,M)=>{const z=M.parentElement;if(z&&z.nodeName==="LI"&&z.firstChild===M){const ae=z.previousSibling;ae&&ae.nodeName==="LI"?(ae.appendChild(M),ul(k,z)&&fd.remove(z)):fd.setStyle(z,"listStyleType","none")}if(ts(z)){const ae=z.previousSibling;ae&&ae.nodeName==="LI"&&ae.appendChild(M)}},jm=(k,M)=>{const z=ks.grep(k.select("ol,ul",M));ks.each(z,ae=>{Eu(k,ae)})},Gm=(k,M,z,ae)=>{let le=M.startContainer;const lt=M.startOffset;if(mr(le)&&(z?lt<le.data.length:lt>0))return le;const qt=k.schema.getNonEmptyElements();xc(le)&&(le=Is.getNode(le,lt));const mn=new zr(le,ae);z&&jl(k.dom,le)&&mn.next();const Pn=z?mn.next.bind(mn):mn.prev2.bind(mn);for(;le=Pn();)if(le.nodeName==="LI"&&!le.hasChildNodes()||qt[le.nodeName]||mr(le)&&le.data.length>0)return le;return null},Gi=(k,M)=>{const z=M.childNodes;return z.length===1&&!ts(z[0])&&k.isBlock(z[0])},vp=(k,M)=>{Gi(k,M)&&k.remove(M.firstChild,!0)},ne=(k,M,z)=>{let ae;const le=Gi(k,z)?z.firstChild:z;if(vp(k,M),!ul(k,M,!0))for(;ae=M.firstChild;)le.appendChild(ae)},gd=(k,M,z)=>{let ae;const le=M.parentNode;if(!Cu(k,M)||!Cu(k,z))return;ts(z.lastChild)&&(ae=z.lastChild),le===z.lastChild&&Zc(le.previousSibling)&&k.remove(le.previousSibling);const lt=z.lastChild;lt&&Zc(lt)&&M.hasChildNodes()&&k.remove(lt),ul(k,z,!0)&&cc(vn.fromDom(z)),ne(k,M,z),ae&&z.appendChild(ae);const mn=Xo(vn.fromDom(z),vn.fromDom(M))?k.getParents(M,ts,z):[];k.remove(M),Jt(mn,Pn=>{ul(k,Pn)&&Pn!==k.getRoot()&&k.remove(Pn)})},Ya=(k,M,z)=>{cc(vn.fromDom(z)),gd(k.dom,M,z),k.selection.setCursorLocation(z,0)},Ff=(k,M,z,ae)=>{const le=k.dom;if(le.isEmpty(ae))Ya(k,z,ae);else{const lt=id(M);gd(le,z,ae),k.selection.setRng(Kl(lt))}},yp=(k,M,z,ae)=>{const le=id(M);gd(k.dom,z,ae);const lt=Kl(le);k.selection.setRng(lt)},Cp=(k,M)=>{const z=k.dom,ae=k.selection,le=ae.getStart(),lt=Os(k,le),qt=z.getParent(ae.getStart(),"LI",lt);if(qt){const mn=qt.parentElement;if(mn===k.getBody()&&ul(z,mn))return!0;const Pn=jc(ae.getRng()),at=z.getParent(Gm(k,Pn,M,lt),"LI",lt);if(at&&at!==qt)return k.undoManager.transact(()=>{M?Ff(k,Pn,at,qt):ta(qt)?Wr(k):yp(k,Pn,qt,at)}),!0;if(!at&&!M&&Pn.startOffset===0&&Pn.endOffset===0)return k.undoManager.transact(()=>{em(k)}),!0}return!1},ho=(k,M,z)=>{const ae=k.getParent(M.parentNode,k.isBlock,z);k.remove(M),ae&&k.isEmpty(ae)&&k.remove(ae)},hl=(k,M)=>{const z=k.dom,ae=k.selection.getStart(),le=Os(k,ae),lt=z.getParent(ae,z.isBlock,le);if(lt&&z.isEmpty(lt)){const qt=jc(k.selection.getRng()),mn=z.getParent(Gm(k,qt,M,le),"LI",le);if(mn){const Pn=Yc=>Q(["td","th","caption"],ac(Yc)),at=Yc=>Yc.dom===le,_o=Ko(vn.fromDom(mn),Pn,at),$r=Ko(vn.fromDom(qt.startContainer),Pn,at);return xo(_o,$r,an)?(k.undoManager.transact(()=>{ho(z,lt,le),Zs(z,mn.parentNode),k.selection.select(mn,!0),k.selection.collapse(M)}),!0):!1}}return!1},Fa=(k,M)=>Cp(k,M)||hl(k,M),Dc=k=>{const M=k.selection.getStart(),z=Os(k,M);return k.dom.getParent(M,"LI,DT,DD",z)||Nr(k).length>0},Zg=k=>Dc(k)?(k.undoManager.transact(()=>{k.execCommand("Delete"),jm(k.dom,k.getBody())}),!0):!1,pi=(k,M)=>{const z=k.selection;return!fl(k,z.getNode())&&(z.isCollapsed()?Fa(k,M):Zg(k))},Kc=k=>{k.on("ExecCommand",M=>{const z=M.command.toLowerCase();(z==="delete"||z==="forwarddelete")&&Dc(k)&&jm(k.dom,k.getBody())}),k.on("keydown",M=>{M.keyCode===ut.BACKSPACE?pi(k,!1)&&M.preventDefault():M.keyCode===ut.DELETE&&pi(k,!0)&&M.preventDefault()})},om=k=>({backspaceDelete:M=>{pi(k,M)}}),Hf=(k,M)=>{const z=sr(k);z===null||fl(k,z)||k.undoManager.transact(()=>{ao(M.styles)&&k.dom.setStyles(z,M.styles),ao(M.attrs)&&Ks(M.attrs,(ae,le)=>k.dom.setAttrib(z,le,ae))})},jg=k=>{const M=Ge(Ke(k).split("")),z=Go(M,(ae,le)=>{const lt=ae.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,le)*lt});return Ps(z,(ae,le)=>ae+le,0)},mc=k=>{if(k--,k<0)return"";{const M=k%26,z=Math.floor(k/26),ae=mc(z),le=String.fromCharCode("A".charCodeAt(0)+M);return ae+le}},hd=k=>/^[A-Z]+$/.test(k),Gg=k=>/^[a-z]+$/.test(k),Rc=k=>/^[0-9]+$/.test(k),Zr=k=>Rc(k)?2:hd(k)?0:Gg(k)?1:ko(k)?3:4,pd=k=>{switch(Zr(k)){case 2:return Qe.some({listStyleType:Qe.none(),start:k});case 0:return Qe.some({listStyleType:Qe.some("upper-alpha"),start:jg(k).toString()});case 1:return Qe.some({listStyleType:Qe.some("lower-alpha"),start:jg(k).toString()});case 3:return Qe.some({listStyleType:Qe.none(),start:""});case 4:return Qe.none()}},bd=k=>{const M=parseInt(k.start,10);return qo(k.listStyleType,"upper-alpha")?mc(M):qo(k.listStyleType,"lower-alpha")?mc(M).toLowerCase():k.start},pl=k=>{const M=sr(k);!ns(M)||fl(k,M)||k.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:bd({start:k.dom.getAttrib(M,"start","1"),listStyleType:Qe.from(k.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:z=>{const ae=z.getData();pd(ae.start).each(le=>{k.execCommand("mceListUpdate",!1,{attrs:{start:le.start==="1"?"":le.start},styles:{"list-style-type":le.listStyleType.getOr("")}})}),z.close()}})},Xa=(k,M)=>()=>{const z=sr(k);return Ln(z)&&z.nodeName===M},qm=k=>{k.addCommand("mceListProps",()=>{pl(k)})},Km=k=>{k.on("BeforeExecCommand",M=>{const z=M.command.toLowerCase();z==="indent"?ya(k):z==="outdent"&&Wr(k)}),k.addCommand("InsertUnorderedList",(M,z)=>{md(k,"UL",z)}),k.addCommand("InsertOrderedList",(M,z)=>{md(k,"OL",z)}),k.addCommand("InsertDefinitionList",(M,z)=>{md(k,"DL",z)}),k.addCommand("RemoveList",()=>{em(k)}),qm(k),k.addCommand("mceListUpdate",(M,z)=>{ao(z)&&Hf(k,z)}),k.addQueryStateHandler("InsertUnorderedList",Xa(k,"UL")),k.addQueryStateHandler("InsertOrderedList",Xa(k,"OL")),k.addQueryStateHandler("InsertDefinitionList",Xa(k,"DL"))};var Ym=tinymce.util.Tools.resolve("tinymce.html.Node");const Xm=k=>k.type===3,Ol=k=>k.length===0,sm=k=>{const M=(le,lt)=>{const qt=Ym.create("li");Jt(le,mn=>qt.append(mn)),lt?k.insert(qt,lt,!0):k.append(qt)},z=(le,lt)=>Xm(lt)?[...le,lt]:!Ol(le)&&!Xm(lt)?(M(le,lt),[]):le,ae=Ps(k.children(),z,[]);Ol(ae)||M(ae)},qg=k=>{k.on("PreInit",()=>{const{parser:M}=k;M.addNodeFilter("ul,ol",z=>Jt(z,sm))})},U0=k=>{k.on("keydown",M=>{M.keyCode!==ut.TAB||ut.metaKeyPressed(M)||k.undoManager.transact(()=>{(M.shiftKey?Wr(k):ya(k))&&M.preventDefault()})})},Kg=k=>{Li(k)&&U0(k),Kc(k)},rm=(k,M)=>z=>Z(k,le=>{z.setActive(sa(le.parents,M)),z.setEnabled(!fl(k,le.element))}),Vf=k=>{const M=z=>()=>k.execCommand(z);k.hasPlugin("advlist")||(k.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:rm(k,"OL")}),k.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:rm(k,"UL")}))},bi=(k,M)=>z=>Z(k,le=>z.setEnabled(sa(le.parents,M)&&!fl(k,le.element))),zf=k=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>k.execCommand("mceListProps"),onSetup:bi(k,"OL")};k.ui.registry.addMenuItem("listprops",M),k.ui.registry.addContextMenu("lists",{update:z=>{const ae=sr(k,z);return ns(ae)?["listprops"]:[]}})};var is=()=>{it.add("lists",k=>(Jd(k),qg(k),k.hasPlugin("rtc",!0)?qm(k):(Kg(k),Km(k)),Vf(k),zf(k),om(k)))};is()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const en=(et,Fe,O)=>{const gn=Fe==="UL"?"InsertUnorderedList":"InsertOrderedList";et.execCommand(gn,!1,O===!1?null:{"list-style-type":O})},Yt=et=>{et.addCommand("ApplyUnorderedListStyle",(Fe,O)=>{en(et,"UL",O["list-style-type"])}),et.addCommand("ApplyOrderedListStyle",(Fe,O)=>{en(et,"OL",O["list-style-type"])})},sn=et=>Fe=>Fe.options.get(et),An=et=>{const Fe=et.options.register;Fe("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Fe("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},eo=sn("advlist_number_styles"),ao=sn("advlist_bullet_styles"),kt=et=>et==null,Bt=et=>!kt(et);var xs=tinymce.util.Tools.resolve("tinymce.util.Tools");class Ln{constructor(Fe,O){this.tag=Fe,this.value=O}static some(Fe){return new Ln(!0,Fe)}static none(){return Ln.singletonNone}fold(Fe,O){return this.tag?O(this.value):Fe()}isSome(){return this.tag}isNone(){return!this.tag}map(Fe){return this.tag?Ln.some(Fe(this.value)):Ln.none()}bind(Fe){return this.tag?Fe(this.value):Ln.none()}exists(Fe){return this.tag&&Fe(this.value)}forall(Fe){return!this.tag||Fe(this.value)}filter(Fe){return!this.tag||Fe(this.value)?this:Ln.none()}getOr(Fe){return this.tag?this.value:Fe}or(Fe){return this.tag?this:Fe}getOrThunk(Fe){return this.tag?this.value:Fe()}orThunk(Fe){return this.tag?this:Fe()}getOrDie(Fe){if(this.tag)return this.value;throw new Error(Fe!=null?Fe:"Called getOrDie on None")}static from(Fe){return Bt(Fe)?Ln.some(Fe):Ln.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Fe){this.tag&&Fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ln.singletonNone=new Ln(!1);const Ts=(et,Fe,O)=>{for(let gn=0,Ge=et.length;gn<Ge;gn++){const Dn=et[gn];if(Fe(Dn,gn))return Ln.some(Dn);if(O(Dn,gn))break}return Ln.none()},Ho=et=>/\btox\-/.test(et.className),Nn=(et,Fe)=>et.dom.isChildOf(Fe,et.getBody()),Mo=et=>Fe=>Bt(Fe)&&et.test(Fe.nodeName),Jn=Mo(/^(OL|UL|DL)$/),dt=Mo(/^(TH|TD)$/),ur=(et,Fe,O)=>Ts(Fe,gn=>Jn(gn)&&!Ho(gn),dt).exists(gn=>gn.nodeName===O&&Nn(et,gn)),Qe=et=>{const Fe=et.dom.getParent(et.selection.getNode(),"ol,ul"),O=et.dom.getStyle(Fe,"listStyleType");return Ln.from(O)},re=(et,Fe)=>Fe!==null&&!et.dom.isEditable(Fe),Ut=(et,Fe)=>{const O=et.dom.getParent(Fe,"ol,ul,dl");return re(et,O)},Ba=(et,Fe)=>{const O=et.selection.getNode();return Fe({parents:et.dom.getParents(O),element:O}),et.on("NodeChange",Fe),()=>et.off("NodeChange",Fe)},Fn=et=>et.replace(/\-/g," ").replace(/\b\w/g,Fe=>Fe.toUpperCase()),Q=et=>kt(et)||et==="default"?"":et,cn=(et,Fe)=>O=>{const gn=(Dn,Ht)=>{const Ve=Dn.selection.getStart(!0);O.setActive(ur(Dn,Ht,Fe)),O.setEnabled(!Ut(Dn,Ve))};return Ba(et,Dn=>gn(et,Dn.parents))},Go=(et,Fe,O,gn,Ge,Dn)=>{et.ui.registry.addSplitButton(Fe,{tooltip:O,icon:Ge==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Ht=>{const Ve=xs.map(Dn,So=>{const qo=Ge==="OL"?"num":"bull",xo=So==="disc"||So==="decimal"?"default":So,nr=Q(So),Ne=Fn(So);return{type:"choiceitem",value:nr,icon:"list-"+qo+"-"+xo,text:Ne}});Ht(Ve)},onAction:()=>et.execCommand(gn),onItemAction:(Ht,Ve)=>{en(et,Ge,Ve)},select:Ht=>Qe(et).map(So=>Ht===So).getOr(!1),onSetup:cn(et,Ge)})},Jt=(et,Fe,O,gn,Ge,Dn)=>{et.ui.registry.addToggleButton(Fe,{active:!1,tooltip:O,icon:Ge==="OL"?"ordered-list":"unordered-list",onSetup:cn(et,Ge),onAction:()=>et.queryCommandState(gn)||Dn===""?et.execCommand(gn):en(et,Ge,Dn)})},ze=(et,Fe,O,gn,Ge,Dn)=>{Dn.length>1?Go(et,Fe,O,gn,Ge,Dn):Jt(et,Fe,O,gn,Ge,Q(Dn[0]))},ue=et=>{ze(et,"numlist","Numbered list","InsertOrderedList","OL",eo(et)),ze(et,"bullist","Bullet list","InsertUnorderedList","UL",ao(et))};var Ps=()=>{it.add("advlist",et=>{et.hasPlugin("lists")?(An(et),ue(et),Yt(et)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})};Ps()})();const XG={components:{Editor:KG},props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},height:{type:Number,default:300},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"code image link preview table lists advlist"},toolbar:{type:[String,Array],default:"undo redo |  forecolor backcolor bold italic underline strikethrough link | blocks fontfamily fontsize | alignleft aligncenter alignright alignjustify outdent indent lineheight | bullist numlist | image table  preview | code selectall"}},data(){return{init:{language_url:"/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"/tinymce/skins/ui/oxide",content_css:"/tinymce/skins/content/default/content.css",menubar:!1,statusbar:!0,plugins:this.plugins,toolbar:this.toolbar,fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px",height:this.height,placeholder:this.placeholder,branding:!1,resize:!0,elementpath:!0,content_style:"",images_upload_handler(it,en){return new Promise((Yt,sn)=>{new FormData})},setup:it=>{it.on("init",function(){this.getBody().style.fontSize="14px"})}},contentValue:this.modelValue}},watch:{modelValue(it){this.contentValue=it},contentValue(it){this.$emit("update:modelValue",it)}},mounted(){lj.init({})},methods:{onClick(it){this.$emit("onClick",it,lj)}}};function JG(it,en,Yt,sn,An,eo){const ao=xG("Editor");return ij(),TG("div",{class:EG({"c-disabled":Yt.disabled})},[bp(ao,{modelValue:An.contentValue,"onUpdate:modelValue":en[0]||(en[0]=kt=>An.contentValue=kt),init:An.init,disabled:Yt.disabled,placeholder:Yt.placeholder,onClick:eo.onClick},null,8,["modelValue","init","disabled","placeholder","onClick"])],2)}const QG=BG(XG,[["render",JG]]),gq={__name:"MemoPageDetailForm",props:{data:{type:Object,default(){return{}}},readonly:{type:Boolean,default:!0},isCreateMode:{type:Boolean,default:!1}},setup(it,{expose:en}){const sn=mW(it.data),An=mW(),eo=kG({content:[{required:!0,message:"请输入内容",trigger:"blur"}]});return en({validate:kt=>An.value.validate(kt)}),(kt,Bt)=>{const xs=OG,Ln=AG,Ts=DG,Ho=NG,Nn=RG,Mo=MG;return ij(),_G(Mo,{ref_key:"form",ref:An,model:z0(sn),rules:z0(eo),"label-width":"auto","label-position":"right","status-icon":""},{default:q2(()=>[bp(Nn,{shadow:"never"},{default:q2(()=>[bp(Ts,{span:24},{default:q2(()=>[bp(Ln,{label:"标题",prop:"content"},{default:q2(()=>[bp(xs,{modelValue:z0(sn).content,"onUpdate:modelValue":Bt[0]||(Bt[0]=Jn=>z0(sn).content=Jn),disabled:it.readonly,placeholder:"请输入标题"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),bp(Ts,{span:24,style:{"margin-bottom":"12px"}},{default:q2(()=>[bp(QG,{modelValue:z0(sn).note,"onUpdate:modelValue":Bt[1]||(Bt[1]=Jn=>z0(sn).note=Jn),disabled:it.readonly},null,8,["modelValue","disabled"])]),_:1}),bp(Ts,{span:24},{default:q2(()=>[bp(Ln,{label:"状态",prop:"status"},{default:q2(()=>[bp(Ho,{modelValue:z0(sn).status,"onUpdate:modelValue":Bt[2]||(Bt[2]=Jn=>z0(sn).status=Jn),style:{width:"10%"},dict:"memo-status",disabled:it.readonly,placeholder:it.readonly?" ":"请选择"},null,8,["modelValue","disabled","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}};export{gq as default};
