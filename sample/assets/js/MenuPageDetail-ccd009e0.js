var H=Object.defineProperty;var C=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var P=(r,o,l)=>o in r?H(r,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[o]=l,$=(r,o)=>{for(var l in o||(o={}))U.call(o,l)&&P(r,l,o[l]);if(C)for(var l of C(o))q.call(o,l)&&P(r,l,o[l]);return r};import{M as J,N as K,u as Q,r as B,$ as W,b as T,c as _,d as w,e,g as n,h as i,f as c,t as X,k as E,l as v,j as Y,O as Z,F as ee,z as te,x as le,y as ae,A as ne,P as oe}from"./index-332affe8.js";/* empty css                   */import{T as ie}from"./ToobarLeftRight-450f8d70.js";/* empty css                  *//* empty css               *//* empty css                */import{u as se}from"./useDetailPageHooks-c305666f.js";import O from"./MenuPageDetailForm-67a30dae.js";const V="useMenuPageSettingStore",re=J({id:V,state:()=>({drawerDetailMode:!0,pageSize:10,pageSizes:[10,20,30,50],showSelection:!0,showIndex:!0,showOperation:!0,header:[{key:"title",title:"菜单名称",width:"300",align:"left",headerAlign:"center",sortable:!1,fixed:"left"},{key:"url",title:"路径",width:"",align:"left",headerAlign:"center",sortable:!1},{key:"component",title:"组件",width:"",align:"left",headerAlign:"center",sortable:!1,hidden:!1},{key:"icon",title:"菜单图标",width:150,align:"left",headerAlign:"center",sortable:!1},{key:"menuType",title:"菜单类型",width:"",align:"left",headerAlign:"center",sortable:!1,hidden:!0},{key:"buttonAuth",title:"权限标识",width:"100",align:"left",headerAlign:"center",sortable:!1},{key:"sort",title:"排序",width:"80",align:"center",headerAlign:"center",sortable:!1},{key:"hidden",title:"是否隐藏菜单",width:"",align:"left",headerAlign:"center",sortable:!1,hidden:!0},{key:"openType",title:"菜单打开方式",width:"",align:"left",headerAlign:"center",sortable:!1,hidden:!0}]}),getters:{pageOptions(){return{pageTitle:"菜单",urlAdd:"/system/menu/add",urlEdit:"/system/menu/edit",urlSearch:"/system/menu/list",urlDelete:"/system/menu/delete",urlDeleteBatch:"/system/menu/deleteBatch"}}},actions:{},persist:K(V)}),de={key:0},ue={style:{"margin-left":"10px","font-size":"16px"}},pe=c("span",null,"保 存",-1),ce=c("span",null,"返 回",-1),me={style:{width:"700px"}},fe={key:1},_e={style:{padding:"0 60px"}},ye=c("span",null,"保 存",-1),ge={__name:"MenuPageDetail",setup(r){const o=Q("menu"),l=re(),M=B(),S=B(),z=$({mitt:o,createCallback:I,viewCallback:N,editCallback:L},l.pageOptions),{formData:t,title:h,readonly:d,isCreateMode:u,visible:p,fnClose:k,fnSave:D}=se(z);function I(){t.value.level=1,t.value.menuType="2",t.value.hidden="0",t.value.openType="1",t.value.parentMenuType="1",d.value=!1,u.value=!0}function N(a){t.value.parentMenuType=a.menuType=="3"?"2":"1",d.value=!0,u.value=!1,a.level>1&&b(a.parentId)}function L(a){t.value.parentMenuType=a.menuType=="3"?"2":"1",d.value=!1,u.value=!1,a.level>1&&b(a.parentId)}o.on("detail:addsub",a=>{!l.drawerDetailMode&&o.emit("main:show",!1),h.value=`新建${l.pageOptions.pageTitle}`,p.value=!0,t.value={},t.value.level=a.level+1,t.value.parentId=a.id,t.value.parentMenuType=a.menuType,t.value.menuType=a.menuType=="2"?"3":"2",t.value.hidden="0",t.value.openType="1",d.value=!1,u.value=!0,a.menuType=="2"&&(t.value.menuType="3",t.value.buttonStatus="1"),b(a.id)});const b=a=>{W("/common/api/dict",{code:"id",name:"title",dict:"sys_menu",key:"id",value:a}).then(m=>{m.success&&m.data.length&&(t.value.parentTitle=m.data[0].name)})};return(a,s)=>{const m=T("Grid"),y=te,x=le,R=ae,A=T("Select"),g=ne,j=T("ArrowLeft"),F=ie,G=oe;return _(),w(ee,null,[!e(l).drawerDetailMode&&e(p)?(_(),w("div",de,[n(x,{style:{"align-items":"center",height:"26px"}},{default:i(()=>[n(y,null,{default:i(()=>[n(m)]),_:1}),c("span",ue,X(e(h)),1)]),_:1}),n(R,{style:{margin:"16px 0 8px"}}),n(F,{style:{"margin-bottom":"8px"},class:"c-btn"},{left:i(()=>[e(d)?v("",!0):(_(),E(g,{key:0,type:"primary",onClick:s[0]||(s[0]=f=>e(D)(e(S)))},{default:i(()=>[n(y,null,{default:i(()=>[n(A)]),_:1}),pe]),_:1})),n(g,{onClick:s[1]||(s[1]=f=>e(k)(e(l).drawerDetailMode))},{default:i(()=>[n(y,null,{default:i(()=>[n(j)]),_:1}),ce]),_:1})]),_:1}),c("div",me,[n(O,{ref_key:"formPanel",ref:S,data:e(t),"is-create-mode":e(u),readonly:e(d)},null,8,["data","is-create-mode","readonly"])])])):v("",!0),e(l).drawerDetailMode&&e(p)?(_(),w("div",fe,[n(G,{modelValue:e(p),"onUpdate:modelValue":s[4]||(s[4]=f=>Z(p)?p.value=f:null),title:e(h),size:"700","before-close":e(k)},{footer:i(()=>[n(x,null,{default:i(()=>[e(d)?v("",!0):(_(),E(g,{key:0,type:"primary",onClick:s[2]||(s[2]=f=>e(D)(e(M)))},{default:i(()=>[n(y,null,{default:i(()=>[n(A)]),_:1}),ye]),_:1})),n(g,{onClick:s[3]||(s[3]=f=>e(k)(e(l).drawerDetailMode))},{default:i(()=>[Y("关 闭")]),_:1})]),_:1})]),default:i(()=>[c("div",_e,[n(O,{ref_key:"formDrower",ref:M,data:e(t),"is-create-mode":e(u),readonly:e(d)},null,8,["data","is-create-mode","readonly"])])]),_:1},8,["modelValue","title","before-close"])])):v("",!0)],64)}}},xe=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{xe as M,ge as _,re as u};
