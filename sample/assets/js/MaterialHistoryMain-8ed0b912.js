import{M as $,N as O,a as q,o as R,b as j,c as o,d as u,g as a,h as n,e,w as G,k as g,l as m,F as h,m as J,n as K,f as x,t as W,E as X,s as Y,x as Z,y as ee,z as te,A as ae,_ as ne,G as le,H as oe,I as ie,J as re,K as se,L as de}from"./index-cda6fd2d.js";import{_ as ge}from"./PageTableSetting-0a31d728.js";import{_ as pe}from"./SearchForm-8ba70070.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                    *//* empty css                   *//* empty css                  *//* empty css                */import{T as ce}from"./ToobarLeftRight-c77e0e73.js";/* empty css               *//* empty css                */import{u as fe}from"./useMainPageHooks-e91e0ef8.js";/* empty css                        */import"./_plugin-vue_export-helper-c27b6911.js";const k="useMaterialHistoryTableSettingStore",ue=$({id:k,state:()=>({pageSize:20,pageSizes:[10,20,30,50],showSelection:!1,showIndex:!0,showOperation:!1,header:[{key:"opTime",title:"操作日时",width:"150",align:"center",headerAlign:"center",sortable:!1,fixed:"left"},{key:"code",title:"物资编码",width:"80",align:"center",headerAlign:"center",sortable:!1,fixed:"left"},{key:"name",title:"物资名称",width:"150",align:"left",headerAlign:"center",sortable:!1,fixed:"left"},{key:"unit",title:"计量单位",width:"80",align:"center",headerAlign:"center",sortable:!1},{key:"inOut",title:"操作类型",width:"80",align:"center",headerAlign:"center",sortable:!1,fixed:!1},{key:"inQuantity",title:"入库数量",width:"100",align:"right",headerAlign:"center",sortable:!1},{key:"outQuantity",title:"出库数量",width:"100",align:"right",headerAlign:"center",sortable:!1},{key:"quantity",title:"剩余库存",width:100,align:"right",headerAlign:"center",sortable:!1},{key:"inFrom",title:"入库来源",width:"100",align:"left",headerAlign:"center",sortable:!1},{key:"outTo",title:"出库去处",width:"100",align:"left",headerAlign:"center",sortable:!1},{key:"labCode",title:"实验编号",width:"100",align:"left",headerAlign:"center",sortable:!1},{key:"labName",title:"实验名称",width:150,align:"left",headerAlign:"center",sortable:!1},{key:"note",title:"备注",width:"",align:"left",headerAlign:"center",sortable:!1},{key:"opUser",title:"经办者",width:"100",align:"center",headerAlign:"center",sortable:!1,fixed:"right"}]}),getters:{pageOptions(){return{urlSearch:"/lab/material/inoutHistoryList"}}},actions:{},persist:O(k)}),me=x("span",null,"导 出",-1),Le={__name:"MaterialHistoryMain",setup(he){const z=q(),C={pageSettingStore:ue(),defaultSearchCondition:{status:["10","30"]}},{formData:s,tableData:A,tableHeight:_,pagging:i,pageSettingStore:d,showTableLoadding:E,onPaggingChange:b,fnSearch:p,fnChangeColumnWidth:v,fnSwitchMaximizePage:D}=fe(C);R(()=>p());function T(H,l,r){return r&&(l.property=="inQuantity"||l.property=="outQuantity"||l.property=="quantity")?Number(r).toLocaleString("zh"):r}return(H,l)=>{const r=X,y=Y,N=Z,I=ee,L=j("Download"),M=te,c=ae,w=ne,S=le,f=oe,V=ie,P=re,B=se,F=de;return o(),u(h,null,[a(pe,{data:e(s),onSearch:e(p)},{default:n(()=>[a(N,null,{default:n(()=>[a(y,{label:"编码"},{default:n(()=>[a(r,{modelValue:e(s).code,"onUpdate:modelValue":l[0]||(l[0]=t=>e(s).code=t)},null,8,["modelValue"])]),_:1}),a(y,{label:"名称"},{default:n(()=>[a(r,{modelValue:e(s).name,"onUpdate:modelValue":l[1]||(l[1]=t=>e(s).name=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["data","onSearch"]),a(I,{style:{margin:"0 0 8px"}}),a(ce,{style:{"margin-bottom":"8px"},class:"c-btn"},{left:n(()=>[a(c,{disabled:"",type:"primary"},{default:n(()=>[a(M,null,{default:n(()=>[a(L)]),_:1}),me]),_:1})]),right:n(()=>[a(S,{content:"刷新数据",placement:"top"},{default:n(()=>[a(c,{circle:"",onClick:l[2]||(l[2]=t=>e(p)(1))},{default:n(()=>[a(w,{name:"refresh-right"})]),_:1})]),_:1}),a(S,{content:"缩放页面",placement:"top"},{default:n(()=>[a(c,{circle:"",onClick:e(D)},{default:n(()=>[a(w,{name:"zoom"})]),_:1},8,["onClick"])]),_:1}),a(ge,{"setting-store":e(d),"select-visible":!1,"operation-visible":!1,"mode-visible":!1},null,8,["setting-store"])]),_:1}),G((o(),g(P,{ref:"table",data:e(A),"max-height":e(_),height:e(_),border:"",stripe:"",size:"small",onHeaderDragend:e(v)},{empty:n(()=>[a(V,{description:"暂无数据"})]),default:n(()=>[e(d).showSelection?(o(),g(f,{key:0,fixed:"",type:"selection","header-align":"center",align:"center",width:"36"})):m("",!0),e(d).showIndex?(o(),g(f,{key:1,fixed:"",type:"index",label:"#",index:t=>t+1,"header-align":"center",align:"center",resizable:!1},null,8,["index"])):m("",!0),(o(!0),u(h,null,J(e(d).header,(t,U)=>(o(),u(h,{key:U},[t.hidden?m("",!0):(o(),g(f,{key:0,prop:t.key,label:t.title,width:t.width>=1?t.width:"",fixed:t.fixed,align:t.align,"header-align":t.headerAlign,"show-overflow-tooltip":"",sortable:t.sortable,formatter:T},K({_:2},[t.key==="unit"?{name:"default",fn:n(Q=>[x("span",null,W(e(z).name("unit",Q.row.unit)),1)]),key:"0"}:void 0]),1032,["prop","label","width","fixed","align","header-align","sortable"]))],64))),128))]),_:1},8,["data","max-height","height","onHeaderDragend"])),[[F,e(E)]]),a(B,{"current-page":e(i).pageNo,"onUpdate:currentPage":l[3]||(l[3]=t=>e(i).pageNo=t),"page-size":e(i).pageSize,"onUpdate:pageSize":l[4]||(l[4]=t=>e(i).pageSize=t),class:"c-pagging",total:e(i).total,"page-sizes":e(i).pageSizes,layout:"->,total, sizes, prev, pager, next, jumper",onSizeChange:e(b),onCurrentChange:e(b)},null,8,["current-page","page-size","total","page-sizes","onSizeChange","onCurrentChange"])],64)}}};export{Le as default};
