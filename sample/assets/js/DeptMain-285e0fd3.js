import{u as X,r as S,o as Y,b as B,c as l,d as w,w as T,v as Z,e as t,f as c,g as e,h as n,i as ee,j as $,k as d,l as f,F as b,m as te,z as ne,A as oe,B as ae,C as le,D as ie,_ as re,G as se,H as de,y as ce,I as pe,J as _e,L as me}from"./index-cda6fd2d.js";import{_ as ue}from"./PageTableSetting-0a31d728.js";/* empty css                    *//* empty css               *//* empty css                   *//* empty css                     */import{T as fe}from"./ToobarLeftRight-c77e0e73.js";/* empty css                  *//* empty css                        *//* empty css                         *//* empty css                */import{u as he}from"./useMainPageHooks-e91e0ef8.js";import{u as ge,_ as we}from"./DeptPageDetail-0af864ee.js";/* empty css                 */import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css               */import"./useDetailPageHooks-d2e8d0be.js";import"./DeptPageDetailForm-5cb693fb.js";/* empty css                *//* empty css                *//* empty css                        */const be=c("span",null,"新 建",-1),ke=c("span",{style:{"margin-left":"4px"}},"编辑",-1),ye=c("span",{style:{"margin-left":"4px"}},"添加子机构",-1),xe=c("span",{style:{"margin-left":"4px"}},"删除",-1),Oe={__name:"DeptMain",setup(Ce){const h=X("dept"),z={mitt:h,pageSettingStore:ge(),searchCallback:G,withoutSearchForm:!0,withoutPagging:!0},{visible:M,tableData:g,tableHeight:k,pageSettingStore:s,showTableLoadding:P,hasSelect:F,fnSearch:H,fnCreate:I,fnEdit:L,fnDeleteRow:N,fnDeleteBatch:V,fnChangeColumnWidth:A,fnSwitchMaximizePage:R}=he(z),y=S(),x=S([]);Y(()=>h.emit("main:mounted",y));const j=a=>h.emit("detail:addsub",a);function G(){if(g.value){const a=[];g.value.forEach(i=>C(i,a)),x.value=a}}function C(a,i){const p=a.children||[];p.length&&(i.push(a.id),p.forEach(_=>C(_,i)))}return(a,i)=>{const p=B("CirclePlusFilled"),_=ne,r=oe,J=B("arrow-down"),K=ae,O=le,W=ie,v=re,D=se,m=de,E=ce,q=pe,Q=_e,U=me;return l(),w(b,null,[T(c("div",null,[e(fe,{style:{"margin-bottom":"8px"},class:"c-btn"},{left:n(()=>[e(r,{type:"primary",onClick:t(I)},{default:n(()=>[e(_,null,{default:n(()=>[e(p)]),_:1}),be]),_:1},8,["onClick"]),e(W,{style:{"margin-left":"8px"},size:"default"},{dropdown:n(()=>[e(O,null,{default:n(()=>[e(K,{icon:t(ee),onClick:t(V)},{default:n(()=>[$("批量删除")]),_:1},8,["icon","onClick"])]),_:1})]),default:n(()=>[e(r,{type:"warning",disabled:!t(F)},{default:n(()=>[$(" 批量操作"),e(_,{class:"el-icon--right"},{default:n(()=>[e(J)]),_:1})]),_:1},8,["disabled"])]),_:1})]),right:n(()=>[e(D,{content:"刷新数据",placement:"top"},{default:n(()=>[e(r,{circle:"",onClick:i[0]||(i[0]=o=>t(H)(1))},{default:n(()=>[e(v,{name:"refresh-right"})]),_:1})]),_:1}),e(D,{content:"缩放页面",placement:"top"},{default:n(()=>[e(r,{circle:"",onClick:t(R)},{default:n(()=>[e(v,{name:"zoom"})]),_:1},8,["onClick"])]),_:1}),e(ue,{"setting-store":t(s)},null,8,["setting-store"])]),_:1}),T((l(),d(Q,{ref_key:"table",ref:y,data:t(g),"max-height":t(k),height:t(k),border:"",stripe:"",size:"small","row-key":"id","expand-row-keys":t(x),onHeaderDragend:t(A)},{empty:n(()=>[e(q,{description:"暂无数据"})]),default:n(()=>[t(s).showSelection?(l(),d(m,{key:0,fixed:"",type:"selection","header-align":"center",align:"center",width:"36"})):f("",!0),t(s).showIndex?(l(),d(m,{key:1,fixed:"",type:"index",label:"#",index:o=>o+1,"header-align":"center",align:"center",resizable:!1},null,8,["index"])):f("",!0),(l(!0),w(b,null,te(t(s).header,(o,u)=>(l(),w(b,{key:u},[o.hidden?f("",!0):(l(),d(m,{key:0,prop:o.key,label:o.title,width:o.width>=1?o.width:"",fixed:o.fixed,align:o.align,"header-align":o.headerAlign,"show-overflow-tooltip":"",sortable:o.sortable},null,8,["prop","label","width","fixed","align","header-align","sortable"]))],64))),128)),t(s).showOperation?(l(),d(m,{key:2,fixed:"right",label:"操作",width:"200","header-align":"center",align:"center"},{default:n(o=>[e(r,{type:"primary",link:"",onClick:u=>t(L)(o.row)},{default:n(()=>[ke]),_:2},1032,["onClick"]),e(E,{direction:"vertical"}),e(r,{type:"primary",disabled:o.row.level=="9",link:"",onClick:u=>j(o.row)},{default:n(()=>[ye]),_:2},1032,["disabled","onClick"]),e(E,{direction:"vertical"}),e(r,{type:"primary",disabled:o.row.level=="9",link:"",onClick:u=>t(N)(o.row)},{default:n(()=>[xe]),_:2},1032,["disabled","onClick"])]),_:1})):f("",!0)]),_:1},8,["data","max-height","height","expand-row-keys","onHeaderDragend"])),[[U,t(P)]])],512),[[Z,t(M)]]),e(we)],64)}}};export{Oe as default};
