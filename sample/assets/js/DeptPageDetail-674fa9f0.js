var j=Object.defineProperty;var T=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var $=(r,o,t)=>o in r?j(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,B=(r,o)=>{for(var t in o||(o={}))F.call(o,t)&&$(r,t,o[t]);if(T)for(var t of T(o))G.call(o,t)&&$(r,t,o[t]);return r};import{M as H,N as U,u as q,r as E,$ as J,b as h,c as m,d as b,e,g as a,h as l,f as d,t as K,k as N,l as y,j as Q,O as W,F as X,z as Y,x as Z,y as ee,A as te,P as ae}from"./index-332affe8.js";/* empty css                   */import{T as oe}from"./ToobarLeftRight-450f8d70.js";/* empty css                  *//* empty css               *//* empty css                */import{u as le}from"./useDetailPageHooks-c305666f.js";import O from"./DeptPageDetailForm-c9bee2ec.js";const V="useDeptPageSettingStore",ne=H({id:V,state:()=>({drawerDetailMode:!0,pageSize:10,pageSizes:[10,20,30,50],showSelection:!0,showIndex:!0,showOperation:!0,header:[{key:"deptName",title:"组织机构名称",width:"300",align:"left",headerAlign:"center",sortable:!1,fixed:"left"},{key:"sort",title:"排序",width:"80",align:"center",headerAlign:"center",sortable:!1}]}),getters:{pageOptions(){return{pageTitle:"部门",urlAdd:"/system/dept/add",urlEdit:"/system/dept/edit",urlSearch:"/system/dept/list",urlDelete:"/system/dept/delete",urlDeleteBatch:"/system/dept/deleteBatch"}}},actions:{},persist:U(V)}),se={key:0},re={style:{"margin-left":"10px","font-size":"16px"}},ie=d("span",null,"保 存",-1),de=d("span",null,"返 回",-1),pe={style:{width:"700px"}},ue={key:1},ce={style:{padding:"0 60px"}},me=d("span",null,"保 存",-1),_e={__name:"DeptPageDetail",setup(r){const o=q("dept"),t=ne(),S=E(),w=E(),z=B({mitt:o,viewCallback:C,editCallback:C},t.pageOptions),{formData:_,title:v,readonly:p,isCreateMode:k,visible:i,fnClose:D,fnSave:x}=le(z);o.on("detail:addsub",s=>{!t.drawerDetailMode&&o.emit("main:show",!1),v.value=`新建${t.pageOptions.pageTitle}`,_.value={parentId:s.id,parentTitle:s.deptName,level:s.level+1},p.value=!1,k.value=!0,i.value=!0});function C(s){if(!(s!=null&&s.level))return;const n={code:"id",name:"dept_name",dict:"sys_dept",key:"id",value:s.parentId};J("/common/api/dict",n).then(u=>{u.success&&u.data.length&&(_.value.parentTitle=u.data[0].name)})}return(s,n)=>{const u=h("Grid"),f=Y,M=Z,A=ee,P=h("Select"),g=te,I=h("ArrowLeft"),L=oe,R=ae;return m(),b(X,null,[!e(t).drawerDetailMode&&e(i)?(m(),b("div",se,[a(M,{style:{"align-items":"center",height:"26px"}},{default:l(()=>[a(f,null,{default:l(()=>[a(u)]),_:1}),d("span",re,K(e(v)),1)]),_:1}),a(A,{style:{margin:"16px 0 8px"}}),a(L,{style:{"margin-bottom":"8px"},class:"c-btn"},{left:l(()=>[e(p)?y("",!0):(m(),N(g,{key:0,type:"primary",onClick:n[0]||(n[0]=c=>e(x)(e(w)))},{default:l(()=>[a(f,null,{default:l(()=>[a(P)]),_:1}),ie]),_:1})),a(g,{onClick:n[1]||(n[1]=c=>e(D)(e(t).drawerDetailMode))},{default:l(()=>[a(f,null,{default:l(()=>[a(I)]),_:1}),de]),_:1})]),_:1}),d("div",pe,[a(O,{ref_key:"formPanel",ref:w,data:e(_),"is-create-mode":e(k),readonly:e(p)},null,8,["data","is-create-mode","readonly"])])])):y("",!0),e(t).drawerDetailMode&&e(i)?(m(),b("div",ue,[a(R,{modelValue:e(i),"onUpdate:modelValue":n[4]||(n[4]=c=>W(i)?i.value=c:null),title:e(v),size:"700","before-close":e(D)},{footer:l(()=>[a(M,null,{default:l(()=>[e(p)?y("",!0):(m(),N(g,{key:0,type:"primary",onClick:n[2]||(n[2]=c=>e(x)(e(S)))},{default:l(()=>[a(f,null,{default:l(()=>[a(P)]),_:1}),me]),_:1})),a(g,{onClick:n[3]||(n[3]=c=>e(D)(e(t).drawerDetailMode))},{default:l(()=>[Q("关 闭")]),_:1})]),_:1})]),default:l(()=>[d("div",ce,[a(O,{ref_key:"formDrower",ref:S,data:e(_),"is-create-mode":e(k),readonly:e(p)},null,8,["data","is-create-mode","readonly"])])]),_:1},8,["modelValue","title","before-close"])])):y("",!0)],64)}}},we=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"}));export{we as D,_e as _,ne as u};
