var Z=Object.defineProperty;var T=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var U=(i,s,o)=>s in i?Z(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o,D=(i,s)=>{for(var o in s||(s={}))ee.call(s,o)&&U(i,o,s[o]);if(T)for(var o of T(s))te.call(s,o)&&U(i,o,s[o]);return i};import{M as le,N as oe,r as u,ae,b as L,c as m,k as p,h as l,g as t,e as n,al as ne,j as se,w as re,l as y,d as N,F as A,m as ie,O as de,f as w,$ as E,V as h,E as ce,s as me,z as ue,A as pe,x as _e,T as fe,y as he,am as ge,_ as be,G as ye,H as we,I as ke,J as ve,P as xe,L as Se}from"./index-cda6fd2d.js";import{_ as Ee}from"./PageTableSetting-0a31d728.js";/* empty css                   *//* empty css                    *//* empty css               *//* empty css                   *//* empty css                     */import{T as Ce}from"./ToobarLeftRight-c77e0e73.js";/* empty css                *//* empty css               *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                        */import"./_plugin-vue_export-helper-c27b6911.js";const O="useRoleUserTableSettingStore",Ve=le({id:O,state:()=>({pageSize:20,pageSizes:[10,20,30,50],showSelection:!1,showIndex:!0,showOperation:!0,header:[{key:"roleName",title:"角色",width:150,align:"left",headerAlign:"center",sortable:!1},{key:"username",title:"账号",width:150,align:"left",headerAlign:"center",sortable:!1},{key:"realname",title:"姓名",width:"",align:"left",headerAlign:"center",sortable:!1}]}),getters:{},actions:{},persist:oe(O)}),Ie=w("span",null,"查 询",-1),Re=w("span",null,"重 置",-1),Te=w("span",{style:{"margin-left":"4px"}},"授权",-1),Ue=w("span",{style:{"margin-left":"4px"}},"取消授权",-1),qe={__name:"RoleAuthUserDrawer",setup(i,{expose:s}){const o=Ve(),d=u({}),C=u([]),V=ae(()=>"calc(100vh - 190px)"),k=u(!1),$=u(),g=u(!1),v=u(""),c=()=>{k.value=!0;const r=D({},d.value);E("/system/role/roleUserList",r).then(a=>{a.success?C.value=a.data:h.error(a.message)}).finally(()=>{k.value=!1})},z=r=>{E("/system/role/addRoleUser",{userId:r.userId,roleId:v.value}).then(a=>{if(!a.success)return h.error(a.message);h.info("操作成功！"),c()})},B=r=>{E("/system/role/delRoleUser",{id:r.id}).then(a=>{if(!a.success)return h.error(a.message);h.info("操作成功！"),c()})},F=()=>{d.value={roleOnly:!0,roleId:v.value,searchKeys:""},c()},K=(r,a,x)=>{for(const _ of o.header)if(_.key===x.property){_.width=r;break}};return s({show:r=>{g.value=!0,d.value={roleOnly:!0,roleId:r,searchKeys:""},v.value=r,c()}}),(r,a)=>{const x=ce,_=me,H=L("Search"),I=ue,f=pe,M=L("RefreshLeft"),W=_e,j=fe,R=he,G=ge,J=be,P=ye,b=we,q=ke,Q=ve,X=xe,Y=Se;return m(),p(X,{modelValue:n(g),"onUpdate:modelValue":a[2]||(a[2]=e=>de(g)?g.value=e:null),title:"角色用户",size:"700"},{default:l(()=>[t(j,{ref:"form",inline:!0,model:n(d),"label-width":"auto",onSubmit:ne(c,["prevent"])},{default:l(()=>[t(W,null,{default:l(()=>[t(_,{label:"查询条件"},{default:l(()=>[t(x,{modelValue:n(d).searchKeys,"onUpdate:modelValue":a[0]||(a[0]=e=>n(d).searchKeys=e)},null,8,["modelValue"])]),_:1}),t(_,null,{default:l(()=>[t(f,{type:"primary",class:"c-btn",onClick:c},{default:l(()=>[t(I,null,{default:l(()=>[t(H)]),_:1}),Ie]),_:1}),t(f,{class:"c-btn",onClick:F},{default:l(()=>[t(I,null,{default:l(()=>[t(M)]),_:1}),Re]),_:1})]),_:1})]),_:1})]),_:1},8,["model","onSubmit"]),t(R,{style:{margin:"0 0 8px"}}),t(Ce,{style:{"margin-bottom":"8px"},class:"c-btn"},{left:l(()=>[t(G,{modelValue:n(d).roleOnly,"onUpdate:modelValue":a[1]||(a[1]=e=>n(d).roleOnly=e),onChange:c},{default:l(()=>[se("仅显示角色已授权用户")]),_:1},8,["modelValue"])]),right:l(()=>[t(P,{content:"刷新数据",placement:"top"},{default:l(()=>[t(f,{circle:"",onClick:c},{default:l(()=>[t(J,{name:"refresh-right"})]),_:1})]),_:1}),t(Ee,{"setting-store":n(o),"select-visible":!1,"mode-visible":!1},null,8,["setting-store"])]),_:1}),re((m(),p(Q,{ref_key:"table",ref:$,data:n(C),"max-height":n(V),height:n(V),border:"",stripe:"",size:"small",onHeaderDragend:K},{empty:l(()=>[t(q,{description:"暂无数据"})]),default:l(()=>[n(o).showSelection?(m(),p(b,{key:0,fixed:"",type:"selection","header-align":"center",align:"center",width:"36"})):y("",!0),n(o).showIndex?(m(),p(b,{key:1,fixed:"",type:"index",label:"#",index:e=>e+1,"header-align":"center",align:"center",resizable:!1},null,8,["index"])):y("",!0),(m(!0),N(A,null,ie(n(o).header,(e,S)=>(m(),N(A,{key:S},[e.hidden?y("",!0):(m(),p(b,{key:0,prop:e.key,label:e.title,width:e.width>=1?e.width:"",fixed:e.fixed,align:e.align,"header-align":e.headerAlign,"show-overflow-tooltip":"",sortable:e.sortable},null,8,["prop","label","width","fixed","align","header-align","sortable"]))],64))),128)),n(o).showOperation?(m(),p(b,{key:2,fixed:"right",label:"操作",width:"150","header-align":"center",align:"center"},{default:l(e=>[t(f,{type:"primary",disabled:!!e.row.roleName,link:"",onClick:S=>z(e.row)},{default:l(()=>[Te]),_:2},1032,["disabled","onClick"]),t(R,{direction:"vertical"}),t(f,{type:"primary",disabled:!e.row.roleName,link:"",onClick:S=>B(e.row)},{default:l(()=>[Ue]),_:2},1032,["disabled","onClick"])]),_:1})):y("",!0)]),_:1},8,["data","max-height","height"])),[[Y,n(k)]])]),_:1},8,["modelValue"])}}};export{qe as default};
